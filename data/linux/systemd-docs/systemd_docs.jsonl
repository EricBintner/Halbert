{"text": "System and Service Manager\nSystem and Service Manager\nsystemd is a suite of basic building blocks for a Linux system. It provides a system and service manager that runs as PID 1 and starts the rest of the system.\nsystemd provides aggressive parallelization capabilities, uses socket and D-Bus activation for starting services, offers on-demand starting of daemons, keeps track of processes using Linux control groups, maintains mount and automount points, and implements an elaborate transactional dependency-based service control logic. systemd supports SysV and LSB init scripts and works as a replacement for sysvinit.\nOther parts include a logging daemon, utilities to control basic system configuration like the hostname, date, locale, maintain a list of logged-in users and running containers and virtual machines, system accounts, runtime directories and settings, and daemons to manage simple network configuration, network time synchronization, log forwarding, and name resolution.\nBooting\nAutomatic Boot Assessment\nBoot Components & Root File System Discovery\nBoot Loader Interface\nFactory Reset\nMount Requirements\nTPM2 PCR Measurements Made by systemd\nConcepts\nCredentials\nDesktop Environment Integration\nPortable Services Introduction\nPorting systemd To New Distributions\nRandom Seeds\nSafely Building Images\nsystemd Coredump Handling\nContributing\nCode Quality Tools\nCoding Style\nContributing\nHacking on systemd\nNotes for Translators\nPorting to New Architectures\nReporting of Security Vulnerabilities\nSteps to a Successful Release\nTesting systemd Using Sanitizers\nsystemd Community Conduct Guidelines\nsystemd Repository Architecture\nDocumentation for Developers\nBackports\nInhibitor Locks\nJournal Message Catalogs\nMinimal Builds\nNew Control Group Interfaces\nPresets\nThe Case for the /usr Merge\nWriting Desktop Environments\nWriting Display Managers\nWriting Network Configuration Managers\nWriting Resolver Clients\nWriting VM and Container Managers\nWriting syslog Daemons Which Cooperate Nicely With systemd\nsystemd File Hierarchy Requirements\nsystemd Optimizations\nsystemd-boot UEFI Boot Manager\nDocumentation for Developers - external links\nIntroduction to systemd in French\nThe 30 Biggest Myths about systemd\nExec directories\nProject IDs for Disk Quotas on Exec Directories\nInterfaces\nAppstream Bundle\nContainer Interface\nControl Group APIs and Delegation\nDlopen Metadata for ELF Files\nFile Descriptor Store\nInitrd Interface\nInterface Portability and Stability\nJournal Export Formats\nJournal File Format\nKnown Environment Variables\nLocking Block Device Access\nMemory Pressure Handling\nNative Journal Protocol\nPackage Metadata for Executable Files\nPassword Agents\nStorage Daemons for the Root File System\nUsing /tmp/ and /var/tmp/ Safely\nVM Interface\nWhat Settings Are Currently Available For Transient Units?\nManual Pages\nDirectives\nIndex\nManuals and Documentation for Users and Administrators\nAPI File Systems\nBooting Without /usr is Broken\nCompatibility with SysV\nDiagnosing Boot Problems\nFrequently Asked Questions\nMy Service Can’t Get Realtime!\nSocket Activation with Popular Daemons\nTips And Tricks\nNetworking\nPredictable Network Interface Names\nRunning Services After the Network Is Up\nsystemd-resolved and VPNs\nProject\nBrand\nGitHub Project Page\nIssues\nMailing List\nMastodon\nPull Requests\nReleases\nmkosi Project - Build Bespoke OS Images\nPublications\nArticle in The H\nArticle in The H, Part 2\nBê-á-bá do systemd #1 (Brazilian Portuguese)\nBê-á-bá do systemd #2 (Brazilian Portuguese)\nBê-á-bá do systemd #3 (Brazilian Portuguese)\nBê-á-bá do systemd #4 (Brazilian Portuguese)\nBê-á-bá do systemd #5 (Brazilian Portuguese)\nBê-á-bá do systemd #6 (Brazilian Portuguese)\nRHEL9 docs - Configuring basic system settings - Managing systemd\nRHEL9 docs - Using systemd unit files to customize and optimize your system\nSUSE White Paper on systemd\nÉvolutions techniques de systemd (French)\nRelated Packages\nC++ bindings for sd-bus\nErlang bindings for the Journal APIs\nErlang journald backend for Lager\nExperimental Qt bindings\nGLib bindings\nGo Bindings for the Journal API, socket activation and DBUS\nHaskell Journal API\nHaskell socket activation\nLua Bindinds for systemd APIs\nNode.JS bindings for the Journal APIs\nNode.JS support for systemd Socket Activation\nNode.JS wrapper for sd_notify\nNode.JS wrapper for sd_notify (repo)\nPHP Bindings for the Journal APIs\nPerl bindings for the Journal APIs\nRuby bindings for the Journal APIs\nRuby bindings for the systemd D-Bus APIs\npystemd\npython-systemd\nThe systemd for Administrators Blog Series\n#01: Verifying Bootup\n#02: Which Service Owns Which Processes?\n#03: How Do I Convert A SysV Init Script Into A systemd Service File?\n#04: Killing Services\n#05: The Three Levels of “Off”\n#06: Changing Roots\n#07: The Blame Game\n#08: The New Configuration Files\n#09: On /etc/sysconfig and /etc/default\n#10: Instantiated Services\n#11: Converting inetd Services\n#12: Securing Your Services\n#13: Log and Service Status\n#14: The Self-Explanatory Boot\n#15: Watchdogs\n#16: Gettys on Serial Consoles (and Elsewhere)\n#17: Using the Journal\n#18: Managing Resources\n#19: Detecting Virtualization\n#20: Socket Activated Internet Services and OS Containers\n#21: Container Integration\nA Russian translation\nA Vietnamese translation\nA more complete Russian translation (PDF)\nThe systemd for Developers Series\n#1: Socket Activation\n#2: Socket Activation (Part 2)\n#3: Logging to the Journal\nThe various distributions\nArch Linux bugtracker\nArch Linux packages\nArch Linux wiki\nDebian bugtracker\nDebian packages\nDebian wiki\nFedora bugtracker\nFedora packages\nFedora sources\nGentoo bugtracker\nGentoo packages\nGentoo wiki\nMageia bugtracker\nMageia packages\nUbuntu packages\nUbuntu wiki\nopenSUSE bugtracker\nopenSUSE instructions\nopenSUSE packages\nUsers, Groups and Home Directories\nConverting Existing Users to systemd-homed\nHome Directories\nJSON Group Records\nJSON User Records\nPax Controla Groupiana\nUser Record Blob Directories\nUser/Group Name Syntax\nUser/Group Record Lookup API via Varlink\nUsers, Groups, UIDs and GIDs on systemd Systems\nsystemd-homed and JSON User/Group Record Support in Desktop Environments\nVideos for Users and Administrators\nInterview about systemd at golem.de (German)\nPresentation about kdbus at linux.conf.au 2014\nPresentation about recent developments at Devconf 2013\nPresentation about systemd at FOSDEM 2011\nPresentation about systemd at FOSDEM 2013\nPresentation about systemd at FOSDEM 2013 (Slides)\nPresentation about systemd at FOSS.in 2012\nPresentation about systemd at OSEC Barcamp 2012\nPresentation about systemd at OSworld 2014 (systemd cheat-sheet) (Polish)\nPresentation about systemd at linux.conf.au 2011\nPresentation about systemd at linux.conf.au 2011 (Slides)\nPresentation about systemd at the Red Hat Summit 2013\nPresentation about the journal at Devconf 2013\nSee also\nIntroductory blog story\nThree\nstatus\nupdates\nThe\nWikipedia article\nWelcome to\nFedora 20 (Heisenbug)\n!\n[\nOK\n] Reached target Remote File Systems.\n[\nOK\n] Listening on Delayed Shutdown Socket.\n[\nOK\n] Listening on /dev/initctl Compatibility Named Pipe.\n[\nOK\n] Reached target Paths.\n[\nOK\n] Reached target Encrypted Volumes.\n[\nOK\n] Listening on Journal Socket.\nMounting Huge Pages File System...\nMounting POSIX Message Queue File System...\nMounting Debug File System...\nStarting Journal Service...\n[\nOK\n] Started Journal Service.\nMounting Configuration File System...\nMounting FUSE Control File System...\n[\nOK\n] Created slice Root Slice.\n[\nOK\n] Created slice User and Session Slice.\n[\nOK\n] Created slice System Slice.\n[\nOK\n] Reached target Slices.\n[\nOK\n] Reached target Swap.\nMounting Temporary Directory...\n[\nOK\n] Reached target Local File Systems (Pre).\nStarting Load Random Seed...\nStarting Load/Save Random Seed...\n[\nOK\n] Mounted Huge Pages File System.\n[\nOK\n] Mounted POSIX Message Queue File System.\n[\nOK\n] Mounted Debug File System.\n[\nOK\n] Mounted Configuration File System.\n[\nOK\n] Mounted FUSE Control File System.\n[\nOK\n] Mounted Temporary Directory.\n[\nOK\n] Started Load Random Seed.\n[\nOK\n] Started Load/Save Random Seed.\n[\nOK\n] Reached target Local File Systems.\nStarting Recreate Volatile Files and Directories...\nStarting Trigger Flushing of Journal to Persistent Storage...\n[\nOK\n] Started Recreate Volatile Files and Directories.\nStarting Record System Reboot/Shutdown in UTMP...\n[\nOK\n] Started Trigger Flushing of Journal to Persistent Storage.\n[\nOK\n] Started Record System Reboot/Shutdown in UTMP.\n[\nOK\n] Reached target System Initialization.\n[\nOK\n] Reached target Timers.\n[\nOK\n] Listening on D-Bus System Message Bus Socket.\n[\nOK\n] Reached target Sockets.\n[\nOK\n] Reached target Basic System.\nStarting Permit User Sessions...\nStarting D-Bus System Message Bus...\n[\nOK\n] Started D-Bus System Message Bus.\nStarting Login Service...\nStarting Cleanup of Temporary Directories...\n[\nOK\n] Started Permit User Sessions.\n[\nOK\n] Started Cleanup of Temporary Directories.\nStarting Console Getty...\n[\nOK\n] Started Console Getty.\n[\nOK\n] Reached target Login Prompts.\n[\nOK\n] Started Login Service.\n[\nOK\n] Reached target Multi-User System.\nFedora release 20 (Heisenbug)\nKernel 3.9.2-200.fc18.x86_64 on an x86_64 (console)\nfedora login:", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://systemd.io/"}}
{"text": "systemd\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nsystemd, init â systemd system and service manager\nSynopsis\n/usr/lib/systemd/systemd\n[OPTIONS...]\ninit\n[OPTIONS...]\nDescription\nÂ¶\nsystemd is a system and service manager for Linux operating systems. When run as first process on\nboot (as PID 1), it acts as init system that brings up and maintains userspace services. Separate\ninstances are started for logged-in users to start their services.\nsystemd\nis usually not invoked directly by the user, but is installed as the\n/sbin/init\nsymlink and started during early boot. The user manager instances are\nstarted automatically through the\nuser@.service\n(5)\nservice.\nWhen run as a system instance, systemd interprets the\nconfiguration file\nsystem.conf\nand the files\nin\nsystem.conf.d\ndirectories; when run as a\nuser instance, systemd interprets the configuration file\nuser.conf\nand the files in\nuser.conf.d\ndirectories. See\nsystemd-system.conf\n(5)\nfor more information.\nsystemd\ncontains native implementations of various tasks that need to be\nexecuted as part of the boot process. For example, it sets the hostname or configures the loopback\nnetwork device. It also sets up and mounts various API file systems, such as\n/sys/\n,\n/proc/\n, and\n/dev/\n.\nsystemd\nwill also reset the system clock during early boot if it appears to be\nset incorrectly. See \"System clock epoch\" section below.\nNote that some but not all interfaces provided by systemd are covered by the\nInterface Portability and Stability Promise\n.\nThe D-Bus API of\nsystemd\nis described in\norg.freedesktop.systemd1\n(5)\nand\norg.freedesktop.LogControl1\n(5)\n.\nSystems which invoke systemd in a container or initrd environment should implement the\nContainer Interface\nor\ninitrd Interface\nspecifications, respectively.\nUnits\nÂ¶\nsystemd provides a dependency system between various entities called \"units\" of 11 different\ntypes. Units encapsulate various objects that are relevant for system boot-up and maintenance. The\nmajority of units are configured in unit configuration files, whose syntax and basic set of options is\ndescribed in\nsystemd.unit\n(5)\n,\nhowever some are created automatically from other configuration files, dynamically from system state or\nprogrammatically at runtime. Units may be in a number of states, described in the following table. Note\nthat the various unit types may have a number of additional substates, which are mapped to the\ngeneralized unit states described here.\nTableÂ 1.Â Unit ACTIVE states\nState\nDescription\nactive\nStarted, bound, plugged in, â¦, depending on the unit type.\ninactive\nStopped, unbound, unplugged, â¦, depending on the unit type.\nfailed\nSimilar to\ninactive\n, but the unit failed in some way (process returned error code on exit, crashed, an operation timed out, or after too many restarts).\nactivating\nChanging from\ninactive\nto\nactive\n.\ndeactivating\nChanging from\nactive\nto\ninactive\n.\nmaintenance\nUnit is\ninactive\nand a maintenance operation is in progress.\nreloading\nUnit is\nactive\nand it is reloading its configuration.\nrefreshing\nUnit is\nactive\nand a new mount is being activated in its namespace.\nThe following unit types are available:\nService units, which start and control daemons\nand the processes they consist of. For details, see\nsystemd.service\n(5)\n.\nSocket units, which encapsulate local IPC or\nnetwork sockets in the system, useful for socket-based\nactivation. For details about socket units, see\nsystemd.socket\n(5)\n,\nfor details on socket-based activation and other forms of\nactivation, see\ndaemon\n(7)\n.\nTarget units are useful to group units, or\nprovide well-known synchronization points during boot-up, see\nsystemd.target\n(5)\n.\nDevice units expose kernel devices in systemd\nand may be used to implement device-based activation. For\ndetails, see\nsystemd.device\n(5)\n.\nMount units control mount points in the file\nsystem, for details see\nsystemd.mount\n(5)\n.\nAutomount units provide automount capabilities,\nfor on-demand mounting of file systems as well as parallelized\nboot-up. See\nsystemd.automount\n(5)\n.\nTimer units are useful for triggering activation\nof other units based on timers. You may find details in\nsystemd.timer\n(5)\n.\nSwap units are very similar to mount units and\nencapsulate memory swap partitions or files of the operating\nsystem. They are described in\nsystemd.swap\n(5)\n.\nPath units may be used to activate other\nservices when file system objects change or are modified. See\nsystemd.path\n(5)\n.\nSlice units may be used to group units which\nmanage system processes (such as service and scope units) in a\nhierarchical tree for resource management purposes. See\nsystemd.slice\n(5)\n.\nScope units are similar to service units, but\nmanage foreign processes instead of starting them as well. See\nsystemd.scope\n(5)\n.\nUnits are named as their configuration files. Some units\nhave special semantics. A detailed list is available in\nsystemd.special\n(7)\n.\nsystemd knows various kinds of dependencies, including\npositive and negative requirement dependencies (i.e.\nRequires=\nand\nConflicts=\n) as\nwell as ordering dependencies (\nAfter=\nand\nBefore=\n). NB: ordering and requirement\ndependencies are orthogonal. If only a requirement dependency\nexists between two units (e.g.\nfoo.service\nrequires\nbar.service\n), but no ordering\ndependency (e.g.\nfoo.service\nafter\nbar.service\n) and both are requested to start,\nthey will be started in parallel. It is a common pattern that both\nrequirement and ordering dependencies are placed between two\nunits. Also note that the majority of dependencies are implicitly\ncreated and maintained by systemd. In most cases, it should be\nunnecessary to declare additional dependencies manually, however\nit is possible to do this.\nApplication programs and units (via dependencies) may\nrequest state changes of units. In systemd, these requests are\nencapsulated as 'jobs' and maintained in a job queue. Jobs may\nsucceed or can fail, their execution is ordered based on the\nordering dependencies of the units they have been scheduled\nfor.\nOn boot systemd activates the target unit\ndefault.target\nwhose job is to activate\non-boot services and other on-boot units by pulling them in via\ndependencies. Usually, the unit name is just an alias (symlink) for\neither\ngraphical.target\n(for fully-featured\nboots into the UI) or\nmulti-user.target\n(for\nlimited console-only boots for use in embedded or server\nenvironments, or similar; a subset of graphical.target). However,\nit is at the discretion of the administrator to configure it as an\nalias to any other target unit. See\nsystemd.special\n(7)\nfor details about these target units.\nOn first boot,\nsystemd\nwill enable or disable units according to preset policy.\nSee\nsystemd.preset\n(5)\nand \"First Boot Semantics\" in\nmachine-id\n(5)\n.\nsystemd only keeps a minimal set of units loaded into memory. Specifically, the only units that are\nkept loaded into memory are those for which at least one of the following conditions is true:\nIt is in an active, activating, deactivating or failed state (i.e. in any unit state except for \"\ninactive\n\")\nIt has a job queued for it\nIt is a dependency of at least one other unit that is loaded into memory\nIt has some form of resource still allocated (e.g. a service unit that is inactive but for which\na process is still lingering that ignored the request to be terminated)\nIt has been pinned into memory programmatically by a D-Bus call\nsystemd will automatically and implicitly load units from disk â if they are not loaded yet â as soon as\noperations are requested for them. Thus, in many respects, the fact whether a unit is loaded or not is invisible to\nclients. Use\nsystemctl list-units --all\nto comprehensively list all units currently loaded. Any\nunit for which none of the conditions above applies is promptly unloaded. Note that when a unit is unloaded from\nmemory its accounting data is flushed out too. However, this data is generally not lost, as a journal log record\nis generated declaring the consumed resources whenever a unit shuts down.\nProcesses systemd spawns are placed in individual Linux control groups named after the unit which\nthey belong to in the private systemd hierarchy. (see\nControl Groups v2\nfor more information\nabout control groups, or short \"cgroups\").  systemd uses this to effectively keep track of\nprocesses. Control group information is maintained in the kernel, and is accessible via the file system\nhierarchy (beneath\n/sys/fs/cgroup/\n), or in tools such as\nsystemd-cgls\n(1)\nor\nps\n(1)\n(\nps\nxawf -eo pid,user,cgroup,args\nis particularly useful to list all processes and the systemd\nunits they belong to.).\nsystemd is compatible with various established Unix functionality such as\n/etc/fstab\nor the\nutmp\ndatabase.\nsystemd has a minimal transaction system: if a unit is\nrequested to start up or shut down it will add it and all its\ndependencies to a temporary transaction. Then, it will verify if\nthe transaction is consistent (i.e. whether the ordering of all\nunits is cycle-free). If it is not, systemd will try to fix it up,\nand removes non-essential jobs from the transaction that might\nremove the loop. Also, systemd tries to suppress non-essential\njobs in the transaction that would stop a running service. Finally\nit is checked whether the jobs of the transaction contradict jobs\nthat have already been queued, and optionally the transaction is\naborted then. If all worked out and the transaction is consistent\nand minimized in its impact it is merged with all already\noutstanding jobs and added to the run queue. Effectively this\nmeans that before executing a requested operation, systemd will\nverify that it makes sense, fixing it if possible, and only\nfailing if it really cannot work.\nNote that transactions are generated independently of a unit's\nstate at runtime, hence, for example, if a start job is requested on an\nalready started unit, it will still generate a transaction and wake up any\ninactive dependencies (and cause propagation of other jobs as per the\ndefined relationships). This is because the enqueued job is at the time of\nexecution compared to the target unit's state and is marked successful and\ncomplete when both satisfy. However, this job also pulls in other\ndependencies due to the defined relationships and thus leads to, in our\nexample, start jobs for any of those inactive units getting queued as\nwell.\nUnits may be generated dynamically at boot and system\nmanager reload time, for example based on other configuration\nfiles or parameters passed on the kernel command line. For details, see\nsystemd.generator\n(7)\n.\nDirectories\nÂ¶\nSystem unit directories\nÂ¶\nThe systemd system manager reads unit\nconfiguration from various directories. Packages that want to\ninstall unit files shall place them in the directory returned\nby\npkg-config systemd\n--variable=systemdsystemunitdir\n. Other directories\nchecked are\n/usr/local/lib/systemd/system\nand\n/usr/lib/systemd/system\n. User\nconfiguration always takes precedence.\npkg-config\nsystemd --variable=systemdsystemconfdir\nreturns the\npath of the system configuration directory. Packages should\nalter the content of these directories only with the\nenable\nand\ndisable\ncommands of the\nsystemctl\n(1)\ntool. Full list of directories is provided in\nsystemd.unit\n(5)\n.\nUser unit directories\nÂ¶\nSimilar rules apply for the user unit\ndirectories. However, here the\nXDG\nBase Directory specification\nis followed to find\nunits. Applications should place their unit files in the\ndirectory returned by\npkg-config systemd\n--variable=systemduserunitdir\n. Global configuration\nis done in the directory reported by\npkg-config\nsystemd --variable=systemduserconfdir\n. The\nenable\nand\ndisable\ncommands of the\nsystemctl\n(1)\ntool can handle both global (i.e. for all users) and private\n(for one user) enabling/disabling of units. Full list of\ndirectories is provided in\nsystemd.unit\n(5)\n.\nSignals\nÂ¶\nThe service listens to various UNIX process signals that can be used to request various actions\nasynchronously. The signal handling is enabled very early during boot, before any further processes are\ninvoked. However, a supervising container manager or similar that intends to request these operations via\nthis mechanism must take into consideration that this functionality is not available during the earliest\ninitialization phase. An\nsd_notify()\nnotification message carrying the\nX_SYSTEMD_SIGNALS_LEVEL=2\nfield is emitted once the signal handlers are enabled, see\nbelow. This may be used to schedule submission of these signals correctly.\nSIGTERM\nÂ¶\nUpon receiving this signal the systemd system\nmanager serializes its state, reexecutes itself and\ndeserializes the saved state again. This is mostly equivalent\nto\nsystemctl daemon-reexec\n.\nsystemd user managers will start the\nexit.target\nunit when this signal is\nreceived. This is mostly equivalent to\nsystemctl\n--user start exit.target\n--job-mode=replace-irreversibly\n.\nSIGINT\nÂ¶\nUpon receiving this signal the systemd system manager will start the\nctrl-alt-del.target\nunit. This is mostly equivalent to\nsystemctl start ctrl-alt-del.target --job-mode=replace-irreversibly\n. If\nthis signal is received more than 7 times per 2s, an immediate reboot is triggered. Note\nthat pressing\nCtrl\n+\nAlt\n+\nDel\non the\nconsole will trigger this signal. Hence, if a reboot is hanging, pressing\nCtrl\n+\nAlt\n+\nDel\nmore than\n7 times in 2 seconds is a relatively safe way to trigger an immediate reboot.\nsystemd user managers treat this signal the same way as\nSIGTERM\n.\nSIGWINCH\nÂ¶\nWhen this signal is received the systemd\nsystem manager will start the\nkbrequest.target\nunit. This is mostly\nequivalent to\nsystemctl start\nkbrequest.target\n.\nThis signal is ignored by systemd user\nmanagers.\nSIGPWR\nÂ¶\nWhen this signal is received the systemd\nmanager will start the\nsigpwr.target\nunit. This is mostly equivalent to\nsystemctl start\nsigpwr.target\n.\nSIGUSR1\nÂ¶\nWhen this signal is received the systemd\nmanager will try to reconnect to the D-Bus\nbus.\nSIGUSR2\nÂ¶\nWhen this signal is received the systemd\nmanager will log its complete state in human-readable form.\nThe data logged is the same as printed by\nsystemd-analyze dump\n.\nSIGHUP\nÂ¶\nReloads the complete daemon configuration.\nThis is mostly equivalent to\nsystemctl\ndaemon-reload\n.\nSIGRTMIN+0\nÂ¶\nEnters default mode, starts the\ndefault.target\nunit. This is mostly\nequivalent to\nsystemctl isolate\ndefault.target\n.\nSIGRTMIN+1\nÂ¶\nEnters rescue mode, starts the\nrescue.target\nunit. This is mostly\nequivalent to\nsystemctl isolate\nrescue.target\n.\nSIGRTMIN+2\nÂ¶\nEnters emergency mode, starts the\nemergency.service\nunit. This is mostly\nequivalent to\nsystemctl isolate\nemergency.service\n.\nSIGRTMIN+3\nÂ¶\nHalts the machine, starts the\nhalt.target\nunit. This is mostly\nequivalent to\nsystemctl start halt.target\n--job-mode=replace-irreversibly\n.\nSIGRTMIN+4\nÂ¶\nPowers off the machine, starts the\npoweroff.target\nunit. This is mostly\nequivalent to\nsystemctl start poweroff.target\n--job-mode=replace-irreversibly\n.\nSIGRTMIN+5\nÂ¶\nReboots the machine, starts the\nreboot.target\nunit. This is mostly\nequivalent to\nsystemctl start reboot.target\n--job-mode=replace-irreversibly\n.\nSIGRTMIN+6\nÂ¶\nReboots the machine via kexec, starts the\nkexec.target\nunit. This is mostly\nequivalent to\nsystemctl start kexec.target\n--job-mode=replace-irreversibly\n.\nSIGRTMIN+7\nÂ¶\nReboots userspace, starts the\nsoft-reboot.target\nunit. This is\nmostly equivalent to\nsystemctl start soft-reboot.target\n--job-mode=replace-irreversibly\n.\nAdded in version 254.\nSIGRTMIN+13\nÂ¶\nImmediately halts the machine.\nSIGRTMIN+14\nÂ¶\nImmediately powers off the machine.\nSIGRTMIN+15\nÂ¶\nImmediately reboots the machine.\nSIGRTMIN+16\nÂ¶\nImmediately reboots the machine with kexec.\nSIGRTMIN+17\nÂ¶\nImmediately reboots the userspace.\nAdded in version 254.\nSIGRTMIN+20\nÂ¶\nEnables display of status messages on the\nconsole, as controlled via\nsystemd.show_status=1\non the kernel command\nline.\nYou may want to use\nSetShowStatus()\ninstead of\nSIGRTMIN+20\nin order to prevent race conditions. See\norg.freedesktop.systemd1\n(5)\n.\nSIGRTMIN+21\nÂ¶\nDisables display of\nstatus messages on the console, as\ncontrolled via\nsystemd.show_status=0\non the kernel command\nline.\nYou may want to use\nSetShowStatus()\ninstead of\nSIGRTMIN+21\nin order to prevent race conditions. See\norg.freedesktop.systemd1\n(5)\n.\nSIGRTMIN+22\nÂ¶\nSets the service manager's log level to \"\ndebug\n\", in a fashion equivalent to\nsystemd.log_level=debug\non the kernel command line.\nSIGRTMIN+23\nÂ¶\nRestores the log level to its configured value. The configured value is derived from â in order\nof priority â the value specified with\nsystemd.log-level=\non the kernel command line, or the\nvalue specified with\nLogLevel=\nin the configuration file, or the built-in default of\n\"\ninfo\n\".\nAdded in version 239.\nSIGRTMIN+24\nÂ¶\nImmediately exits the manager (only available\nfor --user instances).\nAdded in version 195.\nSIGRTMIN+25\nÂ¶\nUpon receiving this signal the systemd manager will reexecute itself. This\nis mostly equivalent to\nsystemctl daemon-reexec\nexcept that it will be\ndone asynchronously.\nThe systemd system manager treats this signal the same way as\nSIGTERM\n.\nAdded in version 250.\nSIGRTMIN+26\nÂ¶\nRestores the log target to its configured value. The configured value is derived from â in\norder of priority â the value specified with\nsystemd.log-target=\non the kernel command line,\nor the value specified with\nLogTarget=\nin the configuration file, or the built-in\ndefault.\nAdded in version 239.\nSIGRTMIN+27\n,\nSIGRTMIN+28\nÂ¶\nSets the log target to \"\nconsole\n\" on\nSIGRTMIN+27\n(or\n\"\nkmsg\n\" on\nSIGRTMIN+28\n), in a fashion equivalent to\nsystemd.log_target=console\n(or\nsystemd.log_target=kmsg\non\nSIGRTMIN+28\n) on the kernel command line.\nAdded in version 239.\nEnvironment\nÂ¶\nThe environment block for the system manager is initially set by the kernel. (In particular,\n\"\nkey=value\n\" assignments on the kernel command line are turned into environment\nvariables for PID 1). For the user manager, the system manager sets the environment as described in the\n\"Environment Variables in Spawned Processes\" section of\nsystemd.exec\n(5)\n. The\nDefaultEnvironment=\nsetting in the system manager applies to all services including\nuser@.service\n. Additional entries may be configured (as for any other service)\nthrough the\nEnvironment=\nand\nEnvironmentFile=\nsettings for\nuser@.service\n(see\nsystemd.exec\n(5)\n). Also,\nadditional environment variables may be set through the\nManagerEnvironment=\nsetting in\nsystemd-system.conf\n(5)\nand\nsystemd-user.conf\n(5)\n.\nSome of the variables understood by\nsystemd\n:\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\nThis can be overridden with\n--log-level=\n.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis can be overridden with\n--log-color=\n.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis can be overridden with\n--log-time=\n.\nAdded in version 246.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nThis can be overridden with\n--log-location=\n.\n$SYSTEMD_LOG_TID\nÂ¶\nA boolean. If true, messages will be prefixed with the current\nnumerical thread ID (TID).\nAdded in version 247.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\nThis can be overridden with\n--log-target=\n.\n$SYSTEMD_LOG_RATELIMIT_KMSG\nÂ¶\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"\ntrue\n\". If disabled, systemd will not ratelimit messages written to kmsg.\nAdded in version 254.\n$XDG_CONFIG_HOME\n,\n$XDG_CONFIG_DIRS\n,\n$XDG_DATA_HOME\n,\n$XDG_DATA_DIRS\nÂ¶\nThe systemd user manager uses these variables\nin accordance to the\nXDG\nBase Directory specification\nto find its\nconfiguration.\n$SYSTEMD_UNIT_PATH\n,\n$SYSTEMD_GENERATOR_PATH\n,\n$SYSTEMD_ENVIRONMENT_GENERATOR_PATH\nÂ¶\nControls where systemd looks for unit files and\ngenerators.\nThese variables may contain a list of paths, separated by colons\n(\"\n:\n\"). When set, if the list ends with an empty\ncomponent (\"\n...:\n\"), this list is prepended to the\nusual set of paths. Otherwise, the specified list replaces the usual\nset of paths.\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\n$LISTEN_PID\n,\n$LISTEN_FDS\n,\n$LISTEN_FDNAMES\nÂ¶\nSet by systemd for supervised processes during\nsocket-based activation. See\nsd_listen_fds\n(3)\nfor more information.\n$NOTIFY_SOCKET\nÂ¶\nSet by service manager for its services for status and readiness notifications. Also\nconsumed by service manager for notifying supervising container managers or service managers up the\nstack about its own progress. See\nsd_notify\n(3)\nand the\nrelevant section below for more information.\nFor further environment variables understood by systemd and its various components, see\nKnown Environment Variables\n.\nKernel Command Line\nÂ¶\nWhen run as the system instance, systemd parses a number of options listed below. They can be\nspecified as kernel command line arguments which are parsed from a number of sources depending on the\nenvironment in which systemd is executed. If run inside a Linux container, these options are parsed from\nthe command line arguments passed to systemd itself, next to any of the command line options listed in\nthe Options section above. If run outside of Linux containers, these arguments are parsed from\n/proc/cmdline\ninstead.\nThe following variables are understood:\nsystemd.unit=\n,\nrd.systemd.unit=\nÂ¶\nOverrides the unit to activate on boot.  Defaults to\ndefault.target\n. This may be used to temporarily boot into a different boot unit,\nfor example\nrescue.target\nor\nemergency.service\n. See\nsystemd.special\n(7)\nfor details about these units. The option prefixed with \"\nrd.\n\" is honored only in the\ninitrd, while the one that is not prefixed only in the main system.\nsystemd.dump_core\nÂ¶\nTakes a boolean argument or enables the option if specified\nwithout an argument. If enabled, the systemd manager (PID 1) dumps core when\nit crashes. Otherwise, no core dump is created. Defaults to enabled.\nAdded in version 233.\nsystemd.crash_chvt\nÂ¶\nTakes a positive integer, or a boolean argument. Can be also specified without an\nargument, with the same effect as a positive boolean. If a positive integer (in the range 1â63) is\nspecified, the system manager (PID 1) will activate the specified virtual terminal when it crashes.\nDefaults to disabled, meaning that no such switch is attempted. If set to enabled, the virtual\nterminal the kernel messages are written to is used instead.\nAdded in version 233.\nsystemd.crash_shell\nÂ¶\nTakes a boolean argument or enables the option if specified\nwithout an argument. If enabled, the system manager (PID 1) spawns a shell\nwhen it crashes. Otherwise, no shell is spawned. Defaults to disabled, for\nsecurity reasons, as the shell is not protected by password authentication.\nAdded in version 233.\nsystemd.crash_action=\nÂ¶\nTakes one of \"\nfreeze\n\", \"\nreboot\n\" or\n\"\npoweroff\n\". Defaults to \"\nfreeze\n\". If set to\n\"\nfreeze\n\", the system will hang indefinitely when the system manager (PID 1) crashes.\nIf set to \"\nreboot\n\", the system manager (PID 1) will reboot the machine automatically\nwhen it crashes, after a 10s delay. If set to \"\npoweroff\n\", the system manager (PID 1)\nwill power off the machine immediately when it crashes. If combined with\nsystemd.crash_shell\n, the configured crash action is executed after the shell\nexits.\nAdded in version 256.\nsystemd.confirm_spawn\nÂ¶\nTakes a boolean argument or a path to the virtual console\nwhere the confirmation messages should be emitted. Can be also specified\nwithout an argument, with the same effect as a positive boolean. If enabled,\nthe system manager (PID 1) asks for confirmation when spawning processes\nusing\n/dev/console\n. If a path or a console name (such as\n\"\nttyS0\n\") is provided, the virtual console pointed to by this\npath or described by the give name will be used instead. Defaults to disabled.\nAdded in version 233.\nsystemd.service_watchdogs=\nÂ¶\nTakes a boolean argument. If disabled, all service runtime\nwatchdogs (\nWatchdogSec=\n) and emergency actions (e.g.\nOnFailure=\nor\nStartLimitAction=\n) are\nignored by the system manager (PID 1); see\nsystemd.service\n(5)\n.\nDefaults to enabled, i.e. watchdogs and failure actions are processed\nnormally. The hardware watchdog is not affected by this\noption.\nAdded in version 237.\nsystemd.show_status\nÂ¶\nTakes a boolean argument or the constants\nerror\nand\nauto\n. Can be also specified without an argument, with the same effect as a\npositive boolean. If enabled, the systemd manager (PID 1) shows terse service status updates on the\nconsole during bootup. With\nerror\n, only messages about failures are shown, but\nboot is otherwise quiet.\nauto\nbehaves like\nfalse\nuntil there is\na significant delay in boot. Defaults to enabled, unless\nquiet\nis passed as kernel\ncommand line option, in which case it defaults to\nerror\n. If specified overrides\nthe system manager configuration file option\nShowStatus=\n, see\nsystemd-system.conf\n(5)\n.\nAdded in version 233.\nsystemd.status_unit_format=\nÂ¶\nTakes\nname\n,\ndescription\nor\ncombined\nas the value. If\nname\n, the system manager will use unit\nnames in status messages. If\ncombined\n, the system manager will use unit names and\ndescription in status messages. When specified, overrides the system manager configuration file\noption\nStatusUnitFormat=\n, see\nsystemd-system.conf\n(5)\n.\nAdded in version 243.\nsystemd.log_color\n,\nsystemd.log_level=\n,\nsystemd.log_location\n,\nsystemd.log_target=\n,\nsystemd.log_time\n,\nsystemd.log_tid\n,\nsystemd.log_ratelimit_kmsg\nÂ¶\nControls log output, with the same effect as the\n$SYSTEMD_LOG_COLOR\n,\n$SYSTEMD_LOG_LEVEL\n,\n$SYSTEMD_LOG_LOCATION\n,\n$SYSTEMD_LOG_TARGET\n,\n$SYSTEMD_LOG_TIME\n,\n$SYSTEMD_LOG_TID\nand\n$SYSTEMD_LOG_RATELIMIT_KMSG\nenvironment variables described above.\nsystemd.log_color\n,\nsystemd.log_location\n,\nsystemd.log_time\n,\nsystemd.log_tid\nand\nsystemd.log_ratelimit_kmsg\ncan be specified without\nan argument, with the same effect as a positive boolean.\nsystemd.default_standard_output=\n,\nsystemd.default_standard_error=\nÂ¶\nControls default standard output and error output for services and sockets. That is,\ncontrols the default for\nStandardOutput=\nand\nStandardError=\n(see\nsystemd.exec\n(5)\nfor\ndetails). Takes one of\ninherit\n,\nnull\n,\ntty\n,\njournal\n,\njournal+console\n,\nkmsg\n,\nkmsg+console\n. If the argument is omitted\nsystemd.default-standard-output=\ndefaults to\njournal\nand\nsystemd.default-standard-error=\nto\ninherit\n.\nsystemd.setenv=\nÂ¶\nTakes a string argument in the form\nVARIABLE=VALUE. May be used to set default environment\nvariables to add to forked child processes. May be used more\nthan once to set multiple variables.\nsystemd.machine_id=\nÂ¶\nTakes a 32 character hex value to be\nused for setting the machine-id. Intended mostly for\nnetwork booting where the same machine-id is desired\nfor every boot.\nAdded in version 229.\nsystemd.set_credential=\n,\nsystemd.set_credential_binary=\nÂ¶\nSets a system credential, which can then be propagated to system services using the\nImportCredential=\nor\nLoadCredential=\nsetting, see\nsystemd.exec\n(5)\nfor\ndetails. Takes a pair of credential name and value, separated by a colon. The\nsystemd.set_credential=\nparameter expects the credential value in literal text\nform, the\nsystemd.set_credential_binary=\nparameter takes binary data encoded in\nBase64. Note that the kernel command line is typically accessible by unprivileged programs in\n/proc/cmdline\n. Thus, this mechanism is not suitable for transferring sensitive\ndata. Use it only for data that is not sensitive (e.g. public keys/certificates, rather than private\nkeys), or in testing/debugging environments.\nFor further information see\nSystem and Service\nCredentials\ndocumentation.\nAdded in version 251.\nsystemd.import_credentials=\nÂ¶\nTakes a boolean argument. If false disables importing credentials from the kernel\ncommand line, the DMI/SMBIOS OEM string table, the qemu_fw_cfg subsystem or the EFI kernel\nstub.\nAdded in version 251.\nquiet\nÂ¶\nTurn off status output at boot, much like\nsystemd.show_status=no\nwould. Note that\nthis option is also read by the kernel itself and disables\nkernel log output. Passing this option hence turns off the\nusual output from both the system manager and the kernel.\nAdded in version 186.\ndebug\nÂ¶\nTurn on debugging output. This is equivalent\nto\nsystemd.log_level=debug\n. Note that this\noption is also read by the kernel itself and enables kernel\ndebug output. Passing this option hence turns on the debug\noutput from both the system manager and the\nkernel.\nAdded in version 205.\nemergency\n,\nrd.emergency\n,\n-b\nÂ¶\nBoot into emergency mode. This is equivalent\nto\nsystemd.unit=emergency.target\nor\nrd.systemd.unit=emergency.target\n, respectively, and\nprovided for compatibility reasons and to be easier to type.\nAdded in version 186.\nrescue\n,\nrd.rescue\n,\nsingle\n,\ns\n,\nS\n,\n1\nÂ¶\nBoot into rescue mode. This is equivalent to\nsystemd.unit=rescue.target\nor\nrd.systemd.unit=rescue.target\n, respectively, and\nprovided for compatibility reasons and to be easier to type.\nAdded in version 186.\n2\n,\n3\n,\n4\n,\n5\nÂ¶\nBoot into the specified legacy SysV runlevel.\n2\n,\n3\n, and\n4\nare equivalent to\nsystemd.unit=multi-user.target\n; and\n5\nis equivalent to\nsystemd.unit=graphical.target\n, and provided for compatibility reasons and to be\neasier to type.\nAdded in version 186.\nlocale.LANG=\n,\nlocale.LANGUAGE=\n,\nlocale.LC_CTYPE=\n,\nlocale.LC_NUMERIC=\n,\nlocale.LC_TIME=\n,\nlocale.LC_COLLATE=\n,\nlocale.LC_MONETARY=\n,\nlocale.LC_MESSAGES=\n,\nlocale.LC_PAPER=\n,\nlocale.LC_NAME=\n,\nlocale.LC_ADDRESS=\n,\nlocale.LC_TELEPHONE=\n,\nlocale.LC_MEASUREMENT=\n,\nlocale.LC_IDENTIFICATION=\nÂ¶\nSet the system locale to use. This overrides\nthe settings in\n/etc/locale.conf\n. For\nmore information, see\nlocale.conf\n(5)\nand\nlocale\n(7)\n.\nAdded in version 186.\nFor other kernel command line parameters understood by\ncomponents of the core OS, please refer to\nkernel-command-line\n(7)\n.\nSystem Credentials\nÂ¶\nDuring initialization the service manager will import credentials from various sources into the\nsystem's set of credentials, which can then be propagated into services and consumed by\ngenerators:\nWhen the service manager first initializes it will read system credentials from SMBIOS\nType 11 vendor strings\nio.systemd.credential:\nname\n=\nvalue\n,\nand\nio.systemd.credential.binary:\nname\n=\nvalue\n.\nAt the same time it will import credentials from QEMU \"\nfw_cfg\n\". (Note\nthat the SMBIOS mechanism is generally preferred, because it is faster and generic.)\nCredentials may be passed via the kernel command line, using the\nsystemd.set-credential=\nparameter, see above.\nCredentials may be passed from the UEFI environment via\nsystemd-stub\n(7)\n.\nWhen the service manager is invoked during the initrd â host transition it will import\nall files in\n/run/credentials/@initrd/\nas system credentials.\nInvoke\nsystemd-creds\n(1)\nas\nfollows to see the list of credentials passed into the system:\n# systemd-creds --system list\nFor further information see\nSystem and Service\nCredentials\ndocumentation.\nThe service manager when run as PID 1 consumes the following system credentials:\nvmm.notify_socket\nÂ¶\nContains a\nAF_VSOCK\nor\nAF_UNIX\naddress where to\nsend a\nREADY=1\nnotification message when the service manager has completed\nbooting. See\nsd_notify\n(3)\nand\nthe next section for more information. Note that in case the hypervisor does not support\nSOCK_DGRAM\nover\nAF_VSOCK\n,\nSOCK_SEQPACKET\nwill be tried instead. The credential payload for\nAF_VSOCK\nshould be a string in the form\n\"\nvsock:CID:PORT\n\". \"\nvsock-stream\n\", \"\nvsock-dgram\n\"\nand \"\nvsock-seqpacket\n\" can be used instead of \"\nvsock\n\" to force\nusage of the corresponding socket type.\nThis feature is useful for machine managers or other processes on the host to receive a\nnotification via VSOCK when a virtual machine has finished booting.\nAdded in version 254.\nsystem.machine_id\nÂ¶\nTakes a 128bit hexadecimal ID to initialize\n/etc/machine-id\nfrom, if the\nfile is not set up yet. See\nmachine-id\n(5)\nfor\ndetails.\nAdded in version 254.\nFor a list of system credentials various other components of systemd consume, see\nsystemd.system-credentials\n(7)\n.\nReadiness Protocol\nÂ¶\nThe service manager implements a readiness notification protocol both between the manager and its\nservices (i.e. down the stack), and between the manager and a potential supervisor further up the stack\n(the latter could be a machine or container manager, or in case of a per-user service manager the system\nservice manager instance). The basic protocol (and the suggested API for it) is described in\nsd_notify\n(3)\n.\nThe notification socket the service manager (including PID 1) uses for reporting readiness to its\nown supervisor is set via the usual\n$NOTIFY_SOCKET\nenvironment variable (see\nabove). Since this is directly settable only for container managers and for the per-user instance of the\nservice manager, an additional mechanism to configure this is available, in particular intended for use\nin VM environments: the\nvmm.notify_socket\nsystem credential (see above) may be set to\na suitable socket (typically an\nAF_VSOCK\none) via SMBIOS Type 11 vendor strings. For\ndetails see above.\nThe notification protocol from the service manager up the stack towards a supervisor supports a\nnumber of extension fields that allow a supervisor to learn about specific properties of the system and\ntrack its boot progress. Specifically the following fields are sent:\nAn\nX_SYSTEMD_HOSTNAME=â¦\nmessage will be sent out once the initial\nhostname for the system has been determined. Note that during later runtime the hostname might be\nchanged again programmatically, and (currently) no further notifications are sent out in that case.\nAdded in version 256.\nAn\nX_SYSTEMD_MACHINE_ID=â¦\nmessage will be sent out once the machine\nID of the system has been determined. See\nmachine-id\n(5)\nfor\ndetails.\nAdded in version 256.\nAn\nX_SYSTEMD_SIGNALS_LEVEL=â¦\nmessage will be sent out once the\nservice manager installed the various UNIX process signal handlers described above. The field's value\nis an unsigned integer formatted as decimal string, and indicates the supported UNIX process signal\nfeature level of the service manager. Currently, only a single feature level is defined:\nX_SYSTEMD_SIGNALS_LEVEL=2\ncovers the various UNIX process signals\ndocumented above â which are a superset of those supported by the historical SysV init\nsystem.\nSignals sent to PID 1 before this message is sent might not be handled correctly yet. A consumer\nof these messages should parse the value as an unsigned integer that indicates the level of support.\nFor now only the mentioned level 2 is defined, but later on additional levels might be defined with\nhigher integers, that will implement a superset of the currently defined behaviour.\nAdded in version 256.\nX_SYSTEMD_UNIT_ACTIVE=â¦\nand\nX_SYSTEMD_UNIT_INACTIVE=â¦\nmessages will be sent out for each target unit as it\nbecomes active or stops being active. This is useful to track boot progress and functionality. For\nexample, once the\nssh-access.target\nunit is reported started SSH access is\ntypically available, see\nsystemd.special\n(7)\nfor\ndetails.\nAdded in version 256.\nAn\nX_SYSTEMD_SHUTDOWN=â¦\nmessage will be sent out very shortly before\nthe system shuts down. The value is one of the strings \"\nreboot\n\",\n\"\nhalt\n\", \"\npoweroff\n\", \"\nkexec\n\" and indicates which kind\nof shutdown is being executed.\nAdded in version 256.\nAn\nX_SYSTEMD_REBOOT_PARAMETER=â¦\nmessage will also be sent out very\nshortly before the system shuts down. Its value is the reboot argument as configured with\nsystemctl --reboot-argument=â¦\n.\nAdded in version 256.\nNote that these extension fields are sent in addition to the regular \"\nREADY=1\n\" and\n\"\nRELOADING=1\n\" notifications.\nOptions\nÂ¶\nsystemd\nis only very rarely invoked directly, since it is started early and is\nalready running by the time users may interact with it. Normally, tools like\nsystemctl\n(1)\nare used to\ngive commands to the manager. Since\nsystemd\nis usually not invoked directly, the\noptions listed below are mostly useful for debugging and special purposes.\nIntrospection and debugging options\nÂ¶\nThose options are used for testing and introspection, and\nsystemd\nmay\nbe invoked with them at any time:\n--dump-configuration-items\nÂ¶\nDump understood unit configuration items. This outputs a terse but complete list of\nconfiguration items understood in unit definition files.\n--dump-bus-properties\nÂ¶\nDump exposed bus properties. This outputs a terse but complete list of properties\nexposed on D-Bus.\nAdded in version 239.\n--test\nÂ¶\nDetermine the initial start-up transaction (i.e. the list of jobs enqueued at\nstart-up), dump it and exit â without actually executing any of the determined jobs. This option is\nuseful for debugging only. Note that during regular service manager start-up additional units not\nshown by this operation may be started, because hardware, socket, bus or other kinds of activation\nmight add additional jobs as the transaction is executed. Use\n--system\nto request\nthe initial transaction of the system service manager (this is also the implied default), combine\nwith\n--user\nto request the initial transaction of the per-user service manager\ninstead.\n--system\n,\n--user\nÂ¶\nWhen used in conjunction with\n--test\n, selects whether to calculate\nthe initial transaction for the system instance or for a per-user instance. These options have no\neffect when invoked without\n--test\n, as during regular\n(i.e. non-\n--test\n) invocations the service manager will automatically detect\nwhether it shall operate in system or per-user mode, by checking whether the PID it is run as is 1\nor not. Note that it is not supported booting and maintaining a system with the service manager\nrunning in\n--system\nmode but with a PID other than 1.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\nOptions that duplicate kernel command line settings\nÂ¶\nThose options correspond directly to options listed above in \"Kernel Command Line\". Both forms\nmay be used equivalently for the system manager, but it is recommended to use the forms listed above in\nthis context, because they are properly namespaced. When an option is specified both on the kernel\ncommand line and as a normal command line argument, the latter has higher precedence.\nWhen\nsystemd\nis used as a user manager, the kernel command line is ignored and\nonly the options described below are understood. Nevertheless,\nsystemd\nis usually\nstarted in this mode through the\nuser@.service\n(5)\nservice, which is shared between all users. It may be more convenient to use configuration files to\nmodify settings (see\nsystemd-user.conf\n(5)\n),\nor environment variables. See the \"Environment\" section above for a discussion of how the environment\nblock is set.\n--unit=\nÂ¶\nSet default unit to activate on startup. If not specified, defaults to\ndefault.target\n. See\nsystemd.unit=\nabove.\n--dump-core\nÂ¶\nEnable core dumping on crash. This switch has no effect when running as user\ninstance. Same as\nsystemd.dump_core=\nabove.\n--crash-vt=\nVT\nÂ¶\nSwitch to a specific virtual console (VT) on crash. This switch has no effect when\nrunning as user instance. Same as\nsystemd.crash_chvt=\nabove (but not the\ndifferent spelling!).\nAdded in version 227.\n--crash-shell\nÂ¶\nRun a shell on crash. This switch has no effect when running as user instance. See\nsystemd.crash_shell=\nabove.\n--crash-action=\nÂ¶\nSpecify what to do when the system manager (PID 1) crashes. This switch has no\neffect when\nsystemd\nis running as user instance. See\nsystemd.crash_action=\nabove.\nAdded in version 256.\n--confirm-spawn\nÂ¶\nAsk for confirmation when spawning processes. This switch has no effect when run as\nuser instance. See\nsystemd.confirm_spawn\nabove.\n--show-status\nÂ¶\nShow terse unit status information on the console during boot-up and shutdown. See\nsystemd.show_status\nabove.\nAdded in version 244.\n--log-color\nÂ¶\nHighlight important log messages. See\nsystemd.log_color\nabove.\nAdded in version 244.\n--log-level=\nÂ¶\nSet log level. See\nsystemd.log_level\nabove.\n--log-location\nÂ¶\nInclude code location in log messages. See\nsystemd.log_location\nabove.\nAdded in version 244.\n--log-target=\nÂ¶\nSet log target. See\nsystemd.log_target\nabove.\n--log-time=\nÂ¶\nPrefix console messages with timestamp. See\nsystemd.log_time\nabove.\nAdded in version 246.\n--machine-id=\nÂ¶\nOverride the machine-id set on the hard drive. See\nsystemd.machine_id=\nabove.\nAdded in version 229.\n--service-watchdogs\nÂ¶\nGlobally enable/disable all service watchdog timeouts and emergency actions. See\nsystemd.service_watchdogs\nabove.\nAdded in version 237.\n--default-standard-output=\n,\n--default-standard-error=\nÂ¶\nSets the default output or error output for all services and sockets,\nrespectively. See\nsystemd.default_standard_output=\nand\nsystemd.default_standard_error=\nabove.\nSystem clock epoch\nÂ¶\nWhen\nsystemd\nis started or restarted, it may set the system clock to the\n\"epoch\". This mechanism is used to ensure that the system clock remains somewhat reasonably initialized\nand roughly monotonic across reboots, in case no battery-backed local RTC is available or it does not\nwork correctly.\nThe epoch is the lowest date above which the system clock time is assumed to be set correctly. When\ninitializing, the local clock is\nadvanced\nto the epoch if it was set to a lower\nvalue. As a special case, if the local clock is sufficiently far in the future (by default 15 years, but\nthis can be configured at build time), the hardware clock is assumed to be broken, and the system clock\nis\nrewound\nto the epoch.\nThe epoch is set to the highest of: the build time of\nsystemd\n, the\nmodification time (\"mtime\") of\n/usr/lib/clock-epoch\n, and the modification time of\n/var/lib/systemd/timesync/clock\n.\nFiles\nÂ¶\n/run/systemd/notify\nÂ¶\nDaemon status notification socket. This is an\nAF_UNIX\ndatagram socket and is used to\nimplement the daemon notification logic as implemented by\nsd_notify\n(3)\n.\n/run/systemd/private\nÂ¶\nUsed internally as communication channel\nbetween\nsystemctl\n(1)\nand the systemd process. This is an\nAF_UNIX\nstream socket. This interface is\nprivate to systemd and should not be used in external\nprojects.\n/usr/lib/clock-epoch\nÂ¶\nThe modification time (\"mtime\") of this file is used for the time epoch, see previous\nsection.\nAdded in version 247.\n/var/lib/systemd/timesync/clock\nÂ¶\nThe modification time (\"mtime\") of this file is updated by\nsystemd-timesyncd.service\n(8)\n.\nIf present, the modification time of file is used for the epoch, see previous section.\nAdded in version 257.\nHistory\nÂ¶\nsystemd 252\nÂ¶\nKernel command-line arguments\nsystemd.unified_cgroup_hierarchy\nand\nsystemd.legacy_systemd_cgroup_controller\nwere deprecated. Please switch to\nthe unified cgroup hierarchy.\nSee Also\nÂ¶\nThe\nsystemd Homepage\n,\nsystemd-system.conf\n(5)\n,\nlocale.conf\n(5)\n,\nsystemctl\n(1)\n,\njournalctl\n(1)\n,\nsystemd-notify\n(1)\n,\ndaemon\n(7)\n,\nsd-daemon\n(3)\n,\norg.freedesktop.systemd1\n(5)\n,\nsystemd.unit\n(5)\n,\nsystemd.special\n(7)\n,\npkg-config\n(1)\n,\nkernel-command-line\n(7)\n,\nbootup\n(7)\n,\nsystemd.directives\n(7)\n,\norg.freedesktop.systemd1\n(5)\nFor more information about the concepts and\nideas behind systemd, please refer to the\nOriginal Design Document\n.\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/systemd.html"}}
{"text": "systemctl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nsystemctl â Control the systemd system and service manager\nSynopsis\nsystemctl\n[OPTIONS...]  COMMAND  [UNIT...]\nDescription\nÂ¶\nsystemctl\nmay be used to introspect and\ncontrol the state of the \"\nsystemd\n\" system and\nservice manager. Please refer to\nsystemd\n(1)\nfor an introduction into the basic concepts and functionality this\ntool manages.\nCommands\nÂ¶\nThe following commands are understood:\nUnit Commands (Introspection and Modification)\nÂ¶\nlist-units\n[\nPATTERN\nâ¦\n]\nÂ¶\nList units that\nsystemd\ncurrently has in memory. This includes units that are\neither referenced directly or through a dependency, units that are pinned by applications programmatically,\nor units that were active in the past and have failed. By default, only units which are active, have pending\njobs, or have failed are shown; this can be changed with option\n--all\n. If one or more\nPATTERN\ns are specified, only units matching one of them are shown. The units\nthat are shown are additionally filtered by\n--type=\nand\n--state=\nif those\noptions are specified.\nNote that this command does not show unit templates, but only instances of unit\ntemplates. Units templates that are not instantiated are not runnable, and will thus never show up\nin the output of this command. Specifically this means that\nfoo@.service\nwill never be shown in this list â unless instantiated, e.g. as\nfoo@bar.service\n. Use\nlist-unit-files\n(see below) for\nlisting installed unit template files.\nProduces output similar to\nUNIT                         LOAD   ACTIVE SUB     DESCRIPTION\nsys-module-fuse.device       loaded active plugged /sys/module/fuse\n-.mount                      loaded active mounted Root Mount\nboot-efi.mount               loaded active mounted /boot/efi\nsystemd-journald.service     loaded active running Journal Service\nsystemd-logind.service       loaded active running Login Service\nâ user@1000.service            loaded failed failed  User Manager for UID 1000\nâ¦\nsystemd-tmpfiles-clean.timer loaded active waiting Daily Cleanup of Temporary Directories\nLOAD   = Reflects whether the unit definition was properly loaded.\nACTIVE = The high-level unit activation state, i.e. generalization of SUB.\nSUB    = The low-level unit activation state, values depend on unit type.\n123 loaded units listed. Pass --all to see loaded but inactive units, too.\nTo show all installed unit files use 'systemctl list-unit-files'.\nThe header and the last unit of a given type are underlined if the terminal supports\nthat. A colored dot is shown next to services which were masked, not found, or otherwise\nfailed.\nThe LOAD column shows the load state, one of\nloaded\n,\nnot-found\n,\nbad-setting\n,\nerror\n,\nmasked\n. The ACTIVE columns shows the general unit state, one of the\nfollowing:\nTableÂ 1.Â Unit ACTIVE states\nState\nDescription\nactive\nStarted, bound, plugged in, â¦, depending on the unit type.\ninactive\nStopped, unbound, unplugged, â¦, depending on the unit type.\nfailed\nSimilar to\ninactive\n, but the unit failed in some way (process returned error code on exit, crashed, an operation timed out, or after too many restarts).\nactivating\nChanging from\ninactive\nto\nactive\n.\ndeactivating\nChanging from\nactive\nto\ninactive\n.\nmaintenance\nUnit is\ninactive\nand a maintenance operation is in progress.\nreloading\nUnit is\nactive\nand it is reloading its configuration.\nrefreshing\nUnit is\nactive\nand a new mount is being activated in its namespace.\nThe SUB column shows the unit-type-specific detailed state of the unit, possible values\nvary by unit type. The list of possible LOAD, ACTIVE, and SUB states is not constant and new\nsystemd releases may both add and remove values.\nsystemctl --state=help\ncommand may be used to display the\ncurrent set of possible values.\nThis is the default command.\nlist-automounts\n[\nPATTERN\nâ¦\n]\nÂ¶\nList automount units currently in memory, ordered by mount path.  If one or more\nPATTERN\ns are specified, only automount units matching one of them are shown.\nProduces output similar to\nWHAT        WHERE                    MOUNTED IDLE TIMEOUT UNIT\n/dev/sdb1   /mnt/test                no      120s         mnt-test.automount\nbinfmt_misc /proc/sys/fs/binfmt_misc yes     0            proc-sys-fs-binfmt_misc.automount\n2 automounts listed.\nAlso see\n--show-types\n,\n--all\n, and\n--state=\n.\nAdded in version 252.\nlist-paths\n[\nPATTERN\nâ¦\n]\nÂ¶\nList path units currently in memory, ordered by path.  If one or more\nPATTERN\ns are specified, only path units matching one of them are shown.\nProduces output similar to\nPATH                           CONDITION         UNIT                               ACTIVATES\n/run/systemd/ask-password      DirectoryNotEmpty systemd-ask-password-plymouth.path systemd-ask-password-plymouth.service\n/run/systemd/ask-password      DirectoryNotEmpty systemd-ask-password-wall.path     systemd-ask-password-wall.service\n/var/cache/cups/org.cups.cupsd PathExists        cups.path                          cups.service\n3 paths listed.\nAlso see\n--show-types\n,\n--all\n, and\n--state=\n.\nAdded in version 254.\nlist-sockets\n[\nPATTERN\nâ¦\n]\nÂ¶\nList socket units currently in memory, ordered by listening address.  If one or more\nPATTERN\ns are specified, only socket units matching one of them are\nshown. Produces output similar to\nLISTEN           UNIT                        ACTIVATES\nkobject-uevent 1 systemd-udevd-kernel.socket systemd-udevd.service\n/dev/rfkill      systemd-rfkill.socket       systemd-rfkill.service\nâ¦\n5 sockets listed.\nNote: because the addresses might contains spaces, this output\nis not suitable for programmatic consumption.\nAlso see\n--show-types\n,\n--all\n, and\n--state=\n.\nAdded in version 202.\nlist-timers\n[\nPATTERN\nâ¦\n]\nÂ¶\nList timer units currently in memory, ordered by the time they elapse next. If one or more\nPATTERN\ns are specified, only units matching one of them are shown.\nProduces output similar to\nNEXT                         LEFT          LAST                         PASSED     UNIT                         ACTIVATES\n-                            -             Thu 2017-02-23 13:40:29 EST  3 days ago ureadahead-stop.timer        ureadahead-stop.service\nSun 2017-02-26 18:55:42 EST  1min 14s left Thu 2017-02-23 13:54:44 EST  3 days ago systemd-tmpfiles-clean.timer systemd-tmpfiles-clean.service\nSun 2017-02-26 20:37:16 EST  1h 42min left Sun 2017-02-26 11:56:36 EST  6h ago     apt-daily.timer              apt-daily.service\nSun 2017-02-26 20:57:49 EST  2h 3min left  Sun 2017-02-26 11:56:36 EST  6h ago     snapd.refresh.timer          snapd.refresh.service\nNEXT\nshows the next time the timer will run.\nLEFT\nshows how long till the next time the timer runs.\nLAST\nshows the last time the timer ran.\nPASSED\nshows how long has passed since the timer last ran.\nUNIT\nshows the name of the timer\nACTIVATES\nshows the name the service the timer activates when it runs.\nAlso see\n--all\nand\n--state=\n.\nAdded in version 209.\nis-active\nPATTERN\nâ¦\nÂ¶\nCheck whether any of the specified units are active\n(i.e. running). Returns an exit code\n0\nif at least one is active, or\nnon-zero otherwise. Unless\n--quiet\nis\nspecified, this will also print the current unit state to\nstandard output.\nis-failed [\nPATTERN\nâ¦\n]\nÂ¶\nCheck whether any of the specified units is in the \"failed\" state. If no unit is specified,\ncheck whether there are any failed units, which corresponds to the \"\ndegraded\n\" state\nreturned by\nis-system-running\n. Returns an exit code\n0\nif at least one has failed, non-zero otherwise. Unless\n--quiet\nis specified, this\nwill also print the current unit or system state to standard output.\nAdded in version 197.\nstatus\n[\nPATTERN\nâ¦|\nPID\nâ¦]\n]\nÂ¶\nShow runtime status information about the whole system or about one or more units followed\nby most recent log data from the journal. If no positional arguments are specified, and no unit\nfilter is given with\n--type=\n,\n--state=\n, or\n--failed\n, shows the status of the whole system. If combined with\n--all\n, follows that with the status of all units. If positional arguments are\nspecified, each positional argument is treated as either a unit name to show, or a glob pattern\nto show units whose names match that pattern, or a PID to show the unit containing that PID. When\n--type=\n,\n--state=\n, or\n--failed\nare used, units\nare additionally filtered by the TYPE and ACTIVE state.\nThis function is intended to generate human-readable output. If you are looking for\ncomputer-parsable output, use\nshow\ninstead. By default, this function only\nshows 10 lines of output and ellipsizes lines to fit in the terminal window. This can be changed\nwith\n--lines\nand\n--full\n, see above. In addition,\njournalctl --unit=\nNAME\nor\njournalctl\n--user-unit=\nNAME\nuse a similar filter for messages and might\nbe more convenient.\nNote that this operation only displays\nruntime\nstatus, i.e. information about\nthe current invocation of the unit (if it is running) or the most recent invocation (if it is not\nrunning anymore, and has not been released from memory). Information about earlier invocations,\ninvocations from previous system boots, or prior invocations that have already been released from\nmemory may be retrieved via\njournalctl --unit=\n.\nsystemd implicitly loads units as necessary, so just running the\nstatus\nwill attempt to load a file. The command is thus not useful for determining if something was\nalready loaded or not.  The units may possibly also be quickly unloaded after the operation is\ncompleted if there's no reason to keep it in memory thereafter.\nExampleÂ 1.Â Example output from systemctl status\n$ systemctl status bluetooth\nâ bluetooth.service - Bluetooth service\nLoaded: loaded (/usr/lib/systemd/system/bluetooth.service; enabled; preset: enabled)\nActive: active (running) since Wed 2017-01-04 13:54:04 EST; 1 weeks 0 days ago\nDocs: man:bluetoothd(8)\nMain PID: 930 (bluetoothd)\nStatus: \"Running\"\nTasks: 1\nMemory: 648.0K\nCPU: 435ms\nCGroup: /system.slice/bluetooth.service\nââ930 /usr/lib/bluetooth/bluetoothd\nJan 12 10:46:45 example.com bluetoothd[8900]: Not enough free handles to register service\nJan 12 10:46:45 example.com bluetoothd[8900]: Current Time Service could not be registered\nJan 12 10:46:45 example.com bluetoothd[8900]: gatt-time-server: Input/output error (5)\nThe dot (\"â\") uses color on supported terminals to summarize the unit state at a\nglance. Along with its color, its shape varies according to its state:\n\"\ninactive\n\" or \"\nmaintenance\n\" is a white circle (\"â\"),\n\"\nactive\n\" is a green dot (\"â\"), \"\ndeactivating\n\" is a white dot,\n\"\nfailed\n\" or \"\nerror\n\" is a red cross (\"Ã\"), and\n\"\nreloading\n\" or \"\nrefreshing\n\" is a green clockwise circle arrow\n(\"â»\").\nThe \"Loaded:\" line in the output will show \"\nloaded\n\" if the unit has been\nloaded into memory. Other possible values for \"Loaded:\" include: \"\nerror\n\" if\nthere was a problem loading it, \"\nnot-found\n\" if no unit file was found for this\nunit, \"\nbad-setting\n\" if an essential unit file setting could not be parsed and\n\"\nmasked\n\" if the unit file has been masked. Along with showing the path to the\nunit file, this line will also show the enablement state.  Enabled units are included in the\ndependency network between units, and thus are started at boot or via some other form of\nactivation.  See the full table of possible enablement states â including the definition of\n\"\nmasked\n\" â in the documentation for the\nis-enabled\ncommand.\nThe \"Active:\" line shows active state.  The value is usually \"\nactive\n\" or\n\"\ninactive\n\". Active could mean started, bound, plugged in, etc depending on the\nunit type.  The unit could also be in process of changing states, reporting a state of\n\"\nactivating\n\" or \"\ndeactivating\n\". A special\n\"\nfailed\n\" state is entered when the service failed in some way, such as a crash,\nexiting with an error code or timing out. If the failed state is entered the cause will be logged\nfor later reference.\nshow\n[\nPATTERN\nâ¦|\nJOB\nâ¦\n]\nÂ¶\nShow properties of one or more units, jobs, or the manager itself. If no argument is specified,\nproperties of the manager will be shown. If a unit name is specified, properties of the unit are shown, and\nif a job ID is specified, properties of the job are shown. By default, empty properties are suppressed. Use\n--all\nto show those too. To select specific properties to show, use\n--property=\n. This command is intended to be used whenever computer-parsable output is\nrequired. Use\nstatus\nif you are looking for formatted human-readable output.\nMany properties shown by\nsystemctl show\nmap directly to configuration settings of\nthe system and service manager and its unit files. Note that the properties shown by the command are\ngenerally more low-level, normalized versions of the original configuration settings and expose runtime\nstate in addition to configuration. For example, properties shown for service units include the service's\ncurrent main process identifier as \"\nMainPID\n\" (which is runtime state), and time settings\nare always exposed as properties ending in the \"\nâ¦USec\n\" suffix even if a matching\nconfiguration options end in \"\nâ¦Sec\n\", because microseconds is the normalized time unit used\ninternally by the system and service manager.\nFor details about many of these properties, see the documentation of the D-Bus interface\nbacking these properties, see\norg.freedesktop.systemd1\n(5)\n.\ncat\nPATTERN\nâ¦\nÂ¶\nShow backing files of one or more units. Prints the\n\"fragment\" and \"drop-ins\" (source files) of units. Each\nfile is preceded by a comment which includes the file\nname. Note that this shows the contents of the backing files\non disk, which might not match the system manager's\nunderstanding of these units if any unit files were\nupdated on disk and the\ndaemon-reload\ncommand was not issued since.\nAdded in version 209.\nhelp\nPATTERN\nâ¦|\nPID\nâ¦\nÂ¶\nShow manual pages for one or more units, if\navailable. If a PID is given, the manual pages for the unit\nthe process belongs to are shown.\nAdded in version 185.\nlist-dependencies\n[\nUNIT\n...\n]\nÂ¶\nShows units required and wanted by the specified\nunits. This recursively lists units following the\nRequires=\n,\nRequisite=\n,\nWants=\n,\nConsistsOf=\n,\nBindsTo=\n, and\nUpholds=\ndependencies. If no units are specified,\ndefault.target\nis implied.\nThe units that are shown are additionally filtered by\n--type=\nand\n--state=\nif those options are specified. Note that we will not be able to\nuse a tree structure in this case, so\n--plain\nis implied.\nBy default, only target units are recursively\nexpanded. When\n--all\nis passed, all other\nunits are recursively expanded as well.\nOptions\n--reverse\n,\n--after\n,\n--before\nmay be used to change what types of dependencies\nare shown.\nNote that this command only lists units currently loaded into memory by the service manager. In\nparticular, this command is not suitable to get a comprehensive list at all reverse dependencies on a\nspecific unit, as it will not list the dependencies declared by units currently not loaded.\nAdded in version 198.\nstart\nPATTERN\nâ¦\nÂ¶\nStart (activate) one or more units specified on the command line.\nNote that unit glob patterns expand to names of units currently in memory. Units which are\nnot active and are not in a failed state usually are not in memory, and will not be matched by\nany pattern. In addition, in case of instantiated units, systemd is often unaware of the instance\nname until the instance has been started. Therefore, using glob patterns with\nstart\nhas limited usefulness. Also, secondary alias names of units are not\nconsidered.\nOption\n--all\nmay be used to also operate on inactive units which are\nreferenced by other loaded units. Note that this is not the same as operating on \"all\" possible\nunits, because as the previous paragraph describes, such a list is ill-defined. Nevertheless,\nsystemctl start --all\nGLOB\nmay be useful if all the\nunits that should match the pattern are pulled in by some target which is known to be loaded.\nstop\nPATTERN\nâ¦\nÂ¶\nStop (deactivate) one or more units specified on the command line.\nThis command will fail if the unit does not exist or if stopping of the unit is prohibited (see\nRefuseManualStop=\nin\nsystemd.unit\n(5)\n).\nIt will\nnot\nfail if any of the commands configured to stop the unit\n(\nExecStop=\n, etc.) fail, because the manager will still forcibly terminate the\nunit.\nIf a unit that gets stopped can still be triggered by other units, a warning containing\nthe names of the triggering units is shown.\n--no-warn\ncan be used to suppress\nthe warning.\nreload\nPATTERN\nâ¦\nÂ¶\nAsks all units listed on the command line to reload\ntheir configuration. Note that this will reload the\nservice-specific configuration, not the unit configuration\nfile of systemd. If you want systemd to reload the\nconfiguration file of a unit, use the\ndaemon-reload\ncommand. In other words:\nfor the example case of Apache, this will reload Apache's\nhttpd.conf\nin the web server, not the\napache.service\nsystemd unit\nfile.\nThis command should not be confused with the\ndaemon-reload\ncommand.\nrestart\nPATTERN\nâ¦\nÂ¶\nStop and then start one or more units specified on the command line. If the units are not running\nyet, they will be started.\nNote that restarting a unit with this command does not necessarily flush out all of the unit's\nresources before it is started again. For example, the per-service file descriptor storage facility (see\nFileDescriptorStoreMax=\nin\nsystemd.service\n(5)\n) will\nremain intact as long as the unit has a job pending, and is only cleared when the unit is fully stopped and\nno jobs are pending anymore. If it is intended that the file descriptor store is flushed out, too, during a\nrestart operation an explicit\nsystemctl stop\ncommand followed by\nsystemctl\nstart\nshould be issued.\ntry-restart\nPATTERN\nâ¦\nÂ¶\nStop and then start one or more units specified on the\ncommand line if the units are running. This does nothing\nif units are not running.\nreload-or-restart\nPATTERN\nâ¦\nÂ¶\nReload one or more units if they support it. If not, stop and then start them instead. If the units\nare not running yet, they will be started.\nThis has a slightly differing functionality when used in combination with\n--marked\n,\nsee below.\ntry-reload-or-restart\nPATTERN\nâ¦\nÂ¶\nReload one or more units if they support it. If not, stop and then start them instead. This does\nnothing if the units are not running.\nAdded in version 229.\nisolate\nUNIT\nÂ¶\nStart the unit specified on the command line and its dependencies\nand stop all others, unless they have\nIgnoreOnIsolate=yes\n(see\nsystemd.unit\n(5)\n).\nIf a unit name with no extension is given, an extension of\n\"\n.target\n\" will be assumed.\nThis command is dangerous, since it will immediately stop processes that are not enabled in\nthe new target, possibly including the graphical environment or terminal you are currently using.\nNote that this operation is allowed only on units where\nAllowIsolate=\nis enabled. See\nsystemd.unit\n(5)\nfor details.\nkill\nPATTERN\nâ¦\nÂ¶\nSend a UNIX process signal to one or more processes of the unit. Use\n--kill-whom=\nto select which process to send the signal to. Use\n--signal=\nto select the signal to send. Combine with\n--kill-value=\nto enqueue a POSIX Realtime Signal with an associated\nvalue.\nclean\nPATTERN\nâ¦\nÂ¶\nRemove the configuration, state, cache, logs, runtime or file descriptor store data of the specified units. Use\n--what=\nto select which kind of resource to remove. For service units this may\nbe used to remove the directories configured with\nConfigurationDirectory=\n,\nStateDirectory=\n,\nCacheDirectory=\n,\nLogsDirectory=\nand\nRuntimeDirectory=\n, see\nsystemd.exec\n(5)\nfor details. It may also be used to clear the file descriptor store as enabled via\nFileDescriptorStoreMax=\n, see\nsystemd.service\n(5)\nfor details.  For timer units this may be used to clear out the persistent timestamp data if\nPersistent=\nis used and\n--what=state\nis selected, see\nsystemd.timer\n(5)\n. This\ncommand only applies to units that use either of these settings. If\n--what=\nis\nnot specified, the cache and runtime data as well as the file descriptor store are removed (as\nthese three types of resources are generally redundant and reproducible on the next invocation of\nthe unit). Multiple values can be separated by commas. Note that the specified units must be stopped\nto invoke this operation.\nTableÂ 2.Â\nPossible values for\n--what=\nValue\nUnit Setting\n\"\nruntime\n\"\nRuntimeDirectory=\n\"\nstate\n\"\nStateDirectory=\n\"\ncache\n\"\nCacheDirectory=\n\"\nlogs\n\"\nLogsDirectory=\n\"\nconfiguration\n\"\nConfigurationDirectory=\n\"\nfdstore\n\"\nFileDescriptorStorePreserve=\n\"\nall\n\"\nAll of the above\n\"\nhelp\n\"\nShow the supported values and exit\nAdded in version 243.\nfreeze\nPATTERN\nâ¦\nÂ¶\nFreeze one or more units specified on the\ncommand line using cgroup freezer\nFreezing the unit will cause all processes contained within the cgroup corresponding to the unit\nto be suspended. Being suspended means that unit's processes will not be scheduled to run on CPU until thawed.\nNote that this command is supported only on systems that use unified cgroup hierarchy. Unit is automatically\nthawed just before we execute a job against the unit, e.g. before the unit is stopped.\nAdded in version 246.\nthaw\nPATTERN\nâ¦\nÂ¶\nThaw (unfreeze) one or more units specified on the\ncommand line.\nThis is the inverse operation to the\nfreeze\ncommand and resumes the execution of\nprocesses in the unit's cgroup.\nAdded in version 246.\nset-property\nUNIT\nPROPERTY\n=\nVALUE\nâ¦\nÂ¶\nSet the specified unit properties at runtime where\nthis is supported. This allows changing configuration\nparameter properties such as resource control settings at\nruntime. Not all properties may be changed at runtime, but\nmany resource control settings (primarily those in\nsystemd.resource-control\n(5)\n)\nmay. The changes are applied immediately, and stored on disk\nfor future boots, unless\n--runtime\nis\npassed, in which case the settings only apply until the\nnext reboot. The syntax of the property assignment follows\nclosely the syntax of assignments in unit files.\nExample:\nsystemctl set-property foobar.service CPUWeight=200\nIf the specified unit appears to be inactive, the\nchanges will be only stored on disk as described\npreviously hence they will be effective when the unit will\nbe started.\nNote that this command allows changing multiple properties at the same time, which is\npreferable over setting them individually.\nExample:\nsystemctl set-property foobar.service CPUWeight=200 MemoryMax=2G IPAccounting=yes\nLike with unit file configuration settings, assigning an empty setting usually resets a\nproperty to its defaults.\nExample:\nsystemctl set-property avahi-daemon.service IPAddressDeny=\nAdded in version 206.\nbind\nUNIT\nPATH\n[\nPATH\n]\nÂ¶\nBind-mounts a file or directory from the host into the specified unit's mount\nnamespace. The first path argument is the source file or directory on the host, the second path\nargument is the destination file or directory in the unit's mount namespace. When the latter is\nomitted, the destination path in the unit's mount namespace is the same as the source path on the\nhost. When combined with the\n--read-only\nswitch, a read-only bind mount is\ncreated. When combined with the\n--mkdir\nswitch, the destination path is first\ncreated before the mount is applied.\nNote that this option is currently only supported for units that run within a mount namespace\n(e.g.: with\nRootImage=\n,\nPrivateMounts=\n, etc.). This command\nsupports bind-mounting directories, regular files, device nodes,\nAF_UNIX\nsocket nodes, as well as FIFOs.  The bind mount is ephemeral, and it is undone as soon as the\ncurrent unit process exists. Note that the namespace mentioned here, where the bind mount will be\nadded to, is the one where the main service process runs. Other processes (those exececuted by\nExecReload=\n,\nExecStartPre=\n, etc.) run in distinct namespaces.\nIf supported by the kernel, any prior mount on the selected target will be replaced by the\nnew mount. If not supported, any prior mount will be over-mounted, but remain pinned and\ninaccessible.\nAdded in version 248.\nmount-image\nUNIT\nIMAGE\n[\nPATH\n[\nPARTITION_NAME\n:\nMOUNT_OPTIONS\n]]\nÂ¶\nMounts an image from the host into the specified unit's mount namespace. The first\npath argument is the source image on the host, the second path argument is the destination\ndirectory in the unit's mount namespace (i.e. inside\nRootImage=\n/\nRootDirectory=\n). The following argument, if any, is\ninterpreted as a colon-separated tuple of partition name and comma-separated list of mount options\nfor that partition. The format is the same as the service\nMountImages=\nsetting. When combined with the\n--read-only\nswitch, a ready-only mount is\ncreated. When combined with the\n--mkdir\nswitch, the destination path is first\ncreated before the mount is applied.\nNote that this option is currently only supported for units that run within a mount namespace\n(i.e. with\nRootImage=\n,\nPrivateMounts=\n, etc.). Note that the\nnamespace mentioned here where the image mount will be added to, is the one where the main service\nprocess runs. Note that the namespace mentioned here, where the bind mount will be\nadded to, is the one where the main service process runs. Other processes (those exececuted by\nExecReload=\n,\nExecStartPre=\n, etc.) run in distinct namespaces.\nIf supported by the kernel, any prior mount on the selected target will be replaced by the\nnew mount. If not supported, any prior mount will be over-mounted, but remain pinned and\ninaccessible.\nExample:\nsystemctl mount-image foo.service /tmp/img.raw /var/lib/image root:ro,nosuid\nsystemctl mount-image --mkdir bar.service /tmp/img.raw /var/lib/baz/img\nAdded in version 248.\nservice-log-level\nSERVICE\n[\nLEVEL\n]\nÂ¶\nIf the\nLEVEL\nargument is not given, print the current\nlog level as reported by service\nSERVICE\n.\nIf the optional argument\nLEVEL\nis provided, then change the\ncurrent log level of the service to\nLEVEL\n. The log level should be a\ntypical syslog log level, i.e. a value in the range 0â¦7 or one of the strings\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n; see\nsyslog\n(3)\nfor details.\nThe service must have the appropriate\nBusName=\ndestination\nproperty and also implement the\ngeneric\norg.freedesktop.LogControl1\n(5)\ninterface. (\nsystemctl\nwill use the generic D-Bus protocol to access the\norg.freedesktop.LogControl1.LogLevel\ninterface for the D-Bus name\ndestination\n.)\nAdded in version 247.\nservice-log-target\nSERVICE\n[\nTARGET\n]\nÂ¶\nIf the\nTARGET\nargument is not given, print the current\nlog target as reported by service\nSERVICE\n.\nIf the optional argument\nTARGET\nis provided, then change the\ncurrent log target of the service to\nTARGET\n. The log target should be\none of the strings\nconsole\n(for log output to the service's standard error\nstream),\nkmsg\n(for log output to the kernel log buffer),\njournal\n(for log output to\nsystemd-journald.service\n(8)\nusing the native journal protocol),\nsyslog\n(for log output to the classic\nsyslog socket\n/dev/log\n),\nnull\n(for no log output\nwhatsoever) or\nauto\n(for an automatically determined choice, typically\nequivalent to\nconsole\nif the service is invoked interactively, and\njournal\nor\nsyslog\notherwise).\nFor most services, only a small subset of log targets make sense. In particular, most\n\"normal\" services should only implement\nconsole\n,\njournal\n,\nand\nnull\n. Anything else is only appropriate for low-level services that\nare active in very early boot before proper logging is established.\nThe service must have the appropriate\nBusName=\ndestination\nproperty and also implement the\ngeneric\norg.freedesktop.LogControl1\n(5)\ninterface. (\nsystemctl\nwill use the generic D-Bus protocol to access the\norg.freedesktop.LogControl1.LogLevel\ninterface for the D-Bus name\ndestination\n.)\nAdded in version 247.\nreset-failed [\nPATTERN\nâ¦]\nÂ¶\nReset the \"\nfailed\n\" state of the specified units, or if no unit name is passed, reset\nthe state of all units. When a unit fails in some way (i.e. process exiting with non-zero error code,\nterminating abnormally or timing out), it will automatically enter the \"\nfailed\n\" state and\nits exit code and status is recorded for introspection by the administrator until the service is\nstopped/re-started or reset with this command.\nIn addition to resetting the \"\nfailed\n\" state of a unit it also resets various other\nper-unit properties: the start rate limit counter of all unit types is reset to zero, as is the restart\ncounter of service units. Thus, if a unit's start limit (as configured with\nStartLimitIntervalSec=\n/\nStartLimitBurst=\n) is hit and the unit refuses\nto be started again, use this command to make it startable again.\nwhoami [\nPID\nâ¦]\nÂ¶\nReturns the units the processes referenced by the given PIDs belong to (one per\nline). If no PID is specified returns the unit the\nsystemctl\ncommand is invoked\nin.\nAdded in version 254.\nUnit File Commands\nÂ¶\nlist-unit-files\n[\nPATTERNâ¦\n]\nÂ¶\nList unit files installed on the system, in combination with their enablement state (as\nreported by\nis-enabled\n). If one or more\nPATTERN\ns\nare specified, only unit files whose name matches one of them are shown (patterns matching unit\nfile system paths are not supported).\nUnlike\nlist-units\nthis command will list template units in addition to\nexplicitly instantiated units.\nAdded in version 233.\nenable\nUNIT\nâ¦\n,\nenable\nPATH\nâ¦\nÂ¶\nEnable one or more units or unit instances. This will create a set of symlinks, as encoded in the\n[Install] sections of the indicated unit files. After the symlinks have been created,\nthe system manager configuration is reloaded (in a way equivalent to\ndaemon-reload\n), in\norder to ensure the changes are taken into account immediately. Note that this does\nnot\nhave the effect of also starting any of the units being enabled. If this is\ndesired, combine this command with the\n--now\nswitch, or invoke\nstart\nwith appropriate arguments later. Note that in case of unit instance enablement (i.e. enablement of units of\nthe form\nfoo@bar.service\n), symlinks named the same as instances are created in the\nunit configuration directory, however they point to the single template unit file they are instantiated\nfrom.\nThis command expects either valid unit names (in which case various unit file directories are\nautomatically searched for unit files with appropriate names), or absolute paths to unit files (in which\ncase these files are read directly). If a specified unit file is located outside of the usual unit file\ndirectories, an additional symlink is created, linking it into the unit configuration path, thus ensuring\nit is found when requested by commands such as\nstart\n. The file system where the linked\nunit files are located must be accessible when systemd is started (e.g. anything underneath\n/home/\nor\n/var/\nis not allowed, unless those directories are\nlocated on the root file system).\nThis command will print the file system operations executed. This output may be suppressed by passing\n--quiet\n.\nNote that this operation creates only the symlinks suggested in the [Install]\nsection of the unit files. While this command is the recommended way to manipulate the unit configuration\ndirectory, the administrator is free to make additional changes manually by placing or removing symlinks\nbelow this directory. This is particularly useful to create configurations that deviate from the suggested\ndefault installation. In this case, the administrator must make sure to invoke\ndaemon-reload\nmanually as necessary, in order to ensure the changes are taken into\naccount.\nWhen using this operation on units without install information, a warning about it is shown.\n--no-warn\ncan be used to suppress the warning.\nEnabling units should not be confused with starting (activating) units, as done by the\nstart\ncommand. Enabling and starting units is orthogonal: units may be enabled without\nbeing started and started without being enabled. Enabling simply hooks the unit into various suggested\nplaces (for example, so that the unit is automatically started on boot or when a particular kind of\nhardware is plugged in). Starting actually spawns the daemon process (in case of service units), or binds\nthe socket (in case of socket units), and so on.\nDepending on whether\n--system\n,\n--user\n,\n--runtime\n,\nor\n--global\nis specified, this enables the unit for the system, for the calling user only,\nfor only this boot of the system, or for all future logins of all users.  Note that in the last case, no\nsystemd daemon configuration is reloaded.\nUsing\nenable\non masked units is not supported and results in an error.\ndisable\nUNIT\nâ¦\nÂ¶\nDisables one or more units. This removes all symlinks to the unit files backing the specified units\nfrom the unit configuration directory, and hence undoes any changes made by\nenable\nor\nlink\n. Note that this removes\nall\nsymlinks to matching unit files,\nincluding manually created symlinks, and not just those actually created by\nenable\nor\nlink\n. Note that while\ndisable\nundoes the effect of\nenable\n, the two commands are otherwise not symmetric, as\ndisable\nmay\nremove more symlinks than a prior\nenable\ninvocation of the same unit created.\nThis command expects valid unit names only, it does not accept paths to unit files.\nIn addition to the units specified as arguments, all units are disabled that are listed in the\nAlso=\nsetting contained in the [Install] section of any of the unit\nfiles being operated on.\nThis command implicitly reloads the system manager configuration after completing the operation. Note\nthat this command does not implicitly stop the units that are being disabled. If this is desired, either\ncombine this command with the\n--now\nswitch, or invoke the\nstop\ncommand\nwith appropriate arguments later.\nThis command will print information about the file system operations (symlink removals)\nexecuted. This output may be suppressed by passing\n--quiet\n.\nIf a unit gets disabled but its triggering units are still active, a warning containing\nthe names of the triggering units is shown.\n--no-warn\ncan be used to suppress\nthe warning.\nWhen this command is used with\n--user\n, the units being operated on might\nstill be enabled in global scope, and thus get started automatically even after a successful\ndisablement in user scope. In this case, a warning about it is shown, which can be suppressed\nusing\n--no-warn\n.\nThis command honors\n--system\n,\n--user\n,\n--runtime\n,\n--global\nand\n--no-warn\nin a similar way as\nenable\n.\nAdded in version 238.\nreenable\nUNIT\nâ¦\nÂ¶\nReenable one or more units, as specified on the command line. This is a combination of\ndisable\nand\nenable\nand is useful to reset the symlinks a unit file is\nenabled with to the defaults configured in its [Install] section. This command expects\na unit name only, it does not accept paths to unit files.\nThis command implicitly reloads the system manager configuration after completing the operation.\nNote that this command does not implicitly restart the units that are being disabled. If this is\ndesired, either combine this command with the\n--now\nswitch, or invoke\nthe\ntry-restart\ncommand with appropriate arguments later.\nAdded in version 238.\npreset\nUNIT\nâ¦\nÂ¶\nReset the enable/disable status of one or more unit files, as specified on\nthe command line, to the defaults configured in the preset policy files. This\nhas the same effect as\ndisable\nor\nenable\n, depending how the unit is listed in the preset\nfiles.\nUse\n--preset-mode=\nto control whether units shall be\nenabled and disabled, or only enabled, or only disabled.\nIf the unit carries no install information, it will be silently ignored\nby this command.\nUNIT\nmust be the real unit name,\nany alias names are ignored silently.\nFor more information on the preset policy format, see\nsystemd.preset\n(5)\n.\nAdded in version 238.\npreset-all\nÂ¶\nResets all installed unit files to the defaults\nconfigured in the preset policy file (see above).\nUse\n--preset-mode=\nto control\nwhether units shall be enabled and disabled, or only\nenabled, or only disabled.\nAdded in version 215.\nis-enabled\nUNIT\nâ¦\nÂ¶\nChecks whether any of the specified unit files are\nenabled (as with\nenable\n). Returns an\nexit code of 0 if at least one is enabled, non-zero\notherwise. Prints the current enable status (see table).\nTo suppress this output, use\n--quiet\n.\nTo show installation targets, use\n--full\n.\nTableÂ 3.Â\nis-enabled\noutput\nName\nDescription\nExit Code\n\"\nenabled\n\"\nEnabled via\n.wants/\n,\n.requires/\nor\nAlias=\nsymlinks (permanently in\n/etc/systemd/system/\n, or transiently in\n/run/systemd/system/\n).\n0\n\"\nenabled-runtime\n\"\n\"\nlinked\n\"\nMade available through one or more symlinks to the unit file (permanently in\n/etc/systemd/system/\nor transiently in\n/run/systemd/system/\n), even though the unit file might reside outside of the unit file search path.\n> 0\n\"\nlinked-runtime\n\"\n\"\nalias\n\"\nThe name is an alias (symlink to another unit file).\n0\n\"\nmasked\n\"\nCompletely disabled, so that any start operation on it fails (permanently in\n/etc/systemd/system/\nor transiently in\n/run/systemd/systemd/\n).\n> 0\n\"\nmasked-runtime\n\"\n\"\nstatic\n\"\nThe unit file is not enabled, and has no provisions for enabling in the [Install] unit file section.\n0\n\"\nindirect\n\"\nThe unit file itself is not enabled, but it has a non-empty\nAlso=\nsetting in the [Install] unit file section, listing other unit files that might be enabled, or it has an alias under a different name through a symlink that is not specified in\nAlso=\n. For template unit files, an instance different than the one specified in\nDefaultInstance=\nis enabled.\n0\n\"\ndisabled\n\"\nThe unit file is not enabled, but contains an [Install] section with installation instructions.\n> 0\n\"\ngenerated\n\"\nThe unit file was generated dynamically via a generator tool. See\nsystemd.generator\n(7)\n. Generated unit files may not be enabled, they are enabled implicitly by their generator.\n0\n\"\ntransient\n\"\nThe unit file has been created dynamically with the runtime API. Transient units may not be enabled.\n0\n\"\nbad\n\"\nThe unit file is invalid or another error occurred. Note that\nis-enabled\nwill not actually return this state, but print an error message instead. However, the unit file listing printed by\nlist-unit-files\nmight show it.\n> 0\n\"\nnot-found\n\"\nThe unit file does not exist.\n4\nAdded in version 238.\nmask\nUNIT\nâ¦\nÂ¶\nMask one or more units, as specified on the command line. This will link these unit files\nto\n/dev/null\n, making it impossible to start them. This is a stronger version\nof\ndisable\n, since it prohibits all kinds of activation of the unit, including\nenablement and manual activation. Use this option with care. This honors the\n--runtime\noption to only mask temporarily until the next reboot of the\nsystem. The\n--now\noption may be used to ensure that the units are also\nstopped. This command expects valid unit names only, it does not accept unit file paths.\nNote that this will create a symlink under the unit's name in\n/etc/systemd/system/\n(in case\n--runtime\nis not specified)\nor\n/run/systemd/system/\n(in case\n--runtime\nis\nspecified). If a matching unit file already exists under these directories this operation will\nhence fail. This means that the operation is primarily useful to mask units shipped by the vendor\n(as those are shipped in\n/usr/lib/systemd/system/\nand not the aforementioned\ntwo directories), but typically does not work for units created locally (as those are typically\nplaced precisely in the two aforementioned directories). Similar restrictions apply for\n--user\nmode, in which case the directories are below the user's home directory\nhowever.\nIf a unit gets masked but its triggering units are still active, a warning containing\nthe names of the triggering units is shown.\n--no-warn\ncan be used to suppress\nthe warning.\nAdded in version 238.\nunmask\nUNIT\nâ¦\nÂ¶\nUnmask one or more unit files, as specified on the command line. This will undo the effect of\nmask\n. This command expects valid unit names only, it does not accept unit file\npaths.\nAdded in version 238.\nlink\nPATH\nâ¦\nÂ¶\nLink a unit file that is not in the unit file search path into the unit file search path. This\ncommand expects an absolute path to a unit file. The effect of this may be undone with\ndisable\n. The effect of this command is that a unit file is made available for commands\nsuch as\nstart\n, even though it is not installed directly in the unit search path. The\nfile system where the linked unit files are located must be accessible when systemd is started\n(e.g. anything underneath\n/home/\nor\n/var/\nis not allowed, unless\nthose directories are located on the root file system).\nAdded in version 233.\nrevert\nUNIT\nâ¦\nÂ¶\nRevert one or more unit files to their vendor versions. This command removes drop-in configuration\nfiles that modify the specified units, as well as any user-configured unit file that overrides a matching\nvendor supplied unit file. Specifically, for a unit \"\nfoo.service\n\" the matching directories\n\"\nfoo.service.d/\n\" with all their contained files are removed, both below the persistent and\nruntime configuration directories (i.e. below\n/etc/systemd/system\nand\n/run/systemd/system\n); if the unit file has a vendor-supplied version (i.e. a unit file\nlocated below\n/usr/\n) any matching persistent or runtime unit file that overrides it is\nremoved, too. Note that if a unit file has no vendor-supplied version (i.e. is only defined below\n/etc/systemd/system\nor\n/run/systemd/system\n, but not in a unit\nfile stored below\n/usr/\n), then it is not removed. Also, if a unit is masked, it is\nunmasked.\nEffectively, this command may be used to undo all changes made with\nsystemctl\nedit\n,\nsystemctl set-property\nand\nsystemctl mask\nand puts\nthe original unit file with its settings back in effect.\nAdded in version 230.\nadd-wants\nTARGET\nUNIT\nâ¦\n,\nadd-requires\nTARGET\nUNIT\nâ¦\nÂ¶\nAdds \"\nWants=\n\" or \"\nRequires=\n\"\ndependencies, respectively, to the specified\nTARGET\nfor one or more units.\nThis command honors\n--system\n,\n--user\n,\n--runtime\nand\n--global\nin a way similar to\nenable\n.\nAdded in version 217.\nedit\nUNIT\nâ¦\nÂ¶\nEdit or replace a drop-in snippet or the main unit file, to extend or override the\ndefinition of the specified unit.\nDepending on whether\n--system\n(the default),\n--user\n, or\n--global\nis specified, this command will operate on the system unit files, unit\nfiles for the calling user, or the unit files shared between all users.\nThe editor (see the \"Environment\" section below) is invoked on temporary files which will\nbe written to the real location if the editor exits successfully. After the editing is finished,\nconfiguration is reloaded, equivalent to\nsystemctl daemon-reload --system\nor\nsystemctl daemon-reload --user\n. For\nedit --global\n, the\nreload is not performed and the edits will take effect only for subsequent logins (or after a\nreload is requested in a different way).\nIf\n--full\nis specified, a replacement for the main unit file will be\ncreated or edited. Otherwise, a drop-in file will be created or edited.\nIf\n--drop-in=\nis specified, the given drop-in file name\nwill be used instead of the default\noverride.conf\n.\nThe unit must exist, i.e. its main unit file must be present. If\n--force\nis specified, this requirement is ignored and a new unit may be created (with\n--full\n), or a drop-in for a nonexistent unit may be created.\nIf\n--runtime\nis specified, the changes will\nbe made temporarily in\n/run/\nand they will be\nlost on the next reboot.\nIf\n--stdin\nis specified, the new contents will be read from standard\ninput. In this mode, the old contents of the file are discarded.\nIf the temporary file is empty upon exit, the modification of\nthe related unit is canceled.\nNote that this command cannot be used to remotely edit units\nand that you cannot temporarily edit units which are in\n/etc/\n, since they take precedence over\n/run/\n.\nAdded in version 218.\nget-default\nÂ¶\nReturn the default target to boot into. This returns\nthe target unit name\ndefault.target\nis aliased (symlinked) to.\nAdded in version 205.\nset-default\nTARGET\nÂ¶\nSet the default target to boot into. This sets\n(symlinks) the\ndefault.target\nalias\nto the given target unit.\nAdded in version 205.\nMachine Commands\nÂ¶\nlist-machines\n[\nPATTERN\nâ¦\n]\nÂ¶\nList the host and all running local containers with\ntheir state. If one or more\nPATTERN\ns are specified, only\ncontainers matching one of them are shown.\nAdded in version 212.\nJob Commands\nÂ¶\nlist-jobs [\nPATTERNâ¦\n]\nÂ¶\nList jobs that are in progress. If one or more\nPATTERN\ns are specified, only\njobs for units matching one of them are shown.\nWhen combined with\n--after\nor\n--before\nthe list is augmented with\ninformation on which other job each job is waiting for, and which other jobs are waiting for it, see\nabove.\nAdded in version 233.\ncancel [\nJOB\nâ¦\n]\nÂ¶\nCancel one or more jobs specified on the command line\nby their numeric job IDs. If no job ID is specified, cancel\nall pending jobs.\nAdded in version 233.\nEnvironment Commands\nÂ¶\nsystemd\nsupports an environment block that is passed to processes the manager\nspawns. The names of the variables can contain ASCII letters, digits, and the underscore\ncharacter. Variable names cannot be empty or start with a digit. In variable values, most characters\nare allowed, but the whole sequence must be valid UTF-8. (Note that control characters like newline\n(\nNL\n), tab (\nTAB\n), or the escape character\n(\nESC\n),\nare\nvalid ASCII and thus valid UTF-8). The total\nlength of the environment block is limited to\n_SC_ARG_MAX\nvalue defined by\nsysconf\n(3)\n.\nshow-environment\nÂ¶\nDump the systemd manager environment block. This is the environment block that is passed to\nall processes the manager spawns. The environment block will be dumped in straightforward form\nsuitable for sourcing into most shells. If no special characters or whitespace is present in the\nvariable values, no escaping is performed, and the assignments have the form\n\"\nVARIABLE=value\n\". If whitespace or characters which have special meaning to the\nshell are present, dollar-single-quote escaping is used, and assignments have the form\n\"\nVARIABLE=$'value'\n\".  This syntax is known to be supported by\nbash\n(1)\n,\nzsh\n(1)\n,\nksh\n(1)\n, and\nbusybox\n(1)\n's\nash\n(1)\n, but\nnot\ndash\n(1)\nor\nfish\n(1)\n.\nNote that this shows the\neffective\nblock, i.e. the combination of\nenvironment variables configured via configuration files, environment generators and via IPC\n(i.e. via the\nset-environment\ndescribed below). At the moment a unit process\nis forked off, this combined environment block will be further combined with per-unit environment\nvariables, which are not visible in this command.\nset-environment\nVARIABLE=VALUE\nâ¦\nÂ¶\nSet one or more service manager environment variables, as specified on the command\nline. This command will fail if variable names and values do not conform to the rules listed\nabove.\nNote that this operates on an environment block separate from the environment block\nconfigured from service manager configuration and environment generators. Whenever a process is\ninvoked the two blocks are combined (also incorporating any per-service environment variables),\nand passed to it. The\nshow-environment\nverb will show the combination of the\nblocks, see above.\nAdded in version 233.\nunset-environment\nVARIABLE\nâ¦\nÂ¶\nUnset one or more systemd manager environment variables. If only a variable name is\nspecified, it will be removed regardless of its value. If a variable and a value are specified,\nthe variable is only removed if it has the specified value.\nNote that this operates on an environment block separate from the environment block\nconfigured from service manager configuration and environment generators. Whenever a process is\ninvoked the two blocks are combined (also incorporating any per-service environment variables),\nand passed to it. The\nshow-environment\nverb will show the combination of the\nblocks, see above. Note that this means this command cannot be used to unset environment\nvariables defined in the service manager configuration files or via generators.\nAdded in version 233.\nimport-environment\nVARIABLEâ¦\nÂ¶\nImport all, one or more environment variables set on the client into the systemd manager\nenvironment block. If a list of environment variable names is passed, client-side values are then\nimported into the manager's environment block. If any names are not valid environment variable\nnames or have invalid values according to the rules described above, an error is raised. If no\narguments are passed, the entire environment block inherited by the\nsystemctl\nprocess is imported. In this mode, any inherited invalid environment variables are quietly\nignored.\nImporting of the full inherited environment block (calling this command without any\narguments) is deprecated. A shell will set dozens of variables which only make sense locally and\nare only meant for processes which are descendants of the shell. Such variables in the global\nenvironment block are confusing to other processes.\nAdded in version 209.\nManager State Commands\nÂ¶\ndaemon-reload\nÂ¶\nReload the systemd manager configuration. This will\nrerun all generators (see\nsystemd.generator\n(7)\n),\nreload all unit files, and recreate the entire dependency\ntree. While the daemon is being reloaded, all sockets\nsystemd listens on behalf of user configuration will stay\naccessible.\nThis command should not be confused with the\nreload\ncommand.\ndaemon-reexec\nÂ¶\nReexecute the systemd manager. This will serialize the\nmanager state, reexecute the process and deserialize the\nstate again. This command is of little use except for\ndebugging and package upgrades. Sometimes, it might be\nhelpful as a heavy-weight\ndaemon-reload\n.\nWhile the daemon is being reexecuted, all sockets systemd listening\non behalf of user configuration will stay accessible.\nlog-level\n[\nLEVEL\n]\nÂ¶\nIf no argument is given, print the current log level of the manager. If an\noptional argument\nLEVEL\nis provided, then the command changes the\ncurrent log level of the manager to\nLEVEL\n(accepts the same values as\n--log-level=\ndescribed in\nsystemd\n(1)\n).\nAdded in version 244.\nlog-target\n[\nTARGET\n]\nÂ¶\nIf no argument is given, print the current log target of the manager. If an\noptional argument\nTARGET\nis provided, then the command changes the\ncurrent log target of the manager to\nTARGET\n(accepts the same values as\n--log-target=\n, described in\nsystemd\n(1)\n).\nAdded in version 244.\nservice-watchdogs\n[yes|no]\nÂ¶\nIf no argument is given, print the current state of service runtime watchdogs of\nthe manager. If an optional boolean argument is provided, then globally enables or disables the\nservice runtime watchdogs (\nWatchdogSec=\n) and emergency actions (e.g.\nOnFailure=\nor\nStartLimitAction=\n); see\nsystemd.service\n(5)\n.\nThe hardware watchdog is not affected by this setting.\nAdded in version 244.\nSystem Commands\nÂ¶\nis-system-running\nÂ¶\nChecks whether the system is operational. This\nreturns success (exit code 0) when the system is fully up\nand running, specifically not in startup, shutdown or\nmaintenance mode, and with no failed services. Failure is\nreturned otherwise (exit code non-zero). In addition, the\ncurrent state is printed in a short string to standard\noutput, see the table below. Use\n--quiet\nto\nsuppress this output.\nUse\n--wait\nto wait until the boot\nprocess is completed before printing the current state and\nreturning the appropriate error status. If\n--wait\nis in use, states\ninitializing\nor\nstarting\nwill not be reported, instead\nthe command will block until a later state (such as\nrunning\nor\ndegraded\n)\nis reached.\nTableÂ 4.Â\nis-system-running\noutput\nName\nDescription\nExit Code\ninitializing\nEarly bootup, before\nbasic.target\nis reached\nor the\nmaintenance\nstate entered.\n> 0\nstarting\nLate bootup, before the job queue\nbecomes idle for the first time, or one of the\nrescue targets are reached.\n> 0\nrunning\nThe system is fully\noperational.\n0\ndegraded\nThe system is operational but one or more\nunits failed.\n> 0\nmaintenance\nThe rescue or emergency target is\nactive.\n> 0\nstopping\nThe manager is shutting\ndown.\n> 0\noffline\nThe manager is not\nrunning. Specifically, this is the operational\nstate if an incompatible program is running as\nsystem manager (PID 1).\n> 0\nunknown\nThe operational state could not be\ndetermined, due to lack of resources or another\nerror cause.\n> 0\nAdded in version 215.\ndefault\nÂ¶\nEnter default mode. This is equivalent to\nsystemctl isolate default.target\n. This\noperation is blocking by default, use\n--no-block\nto request asynchronous behavior.\nrescue\nÂ¶\nEnter rescue mode. This is equivalent to\nsystemctl isolate rescue.target\n. This\noperation is blocking by default, use\n--no-block\nto request asynchronous behavior.\nemergency\nÂ¶\nEnter emergency mode. This is equivalent to\nsystemctl isolate\nemergency.target\n. This operation is blocking by default, use\n--no-block\nto\nrequest asynchronous behavior.\nhalt\nÂ¶\nShut down and halt the system. This is mostly equivalent to\nsystemctl start halt.target\n--job-mode=replace-irreversibly --no-block\n, but also prints a wall message to all users. This command is\nasynchronous; it will return after the halt operation is enqueued, without waiting for it to complete. Note\nthat this operation will simply halt the OS kernel after shutting down, leaving the hardware powered\non. Use\nsystemctl poweroff\nfor powering off the system (see below).\nIf combined with\n--force\n, shutdown of all running services is skipped, however all\nprocesses are killed and all file systems are unmounted or mounted read-only, immediately followed by the\nsystem halt.  If\n--force\nis specified twice, the operation is immediately executed without\nterminating any processes or unmounting any file systems. This may result in data loss. Note that when\n--force\nis specified twice the halt operation is executed by\nsystemctl\nitself, and the system manager is not contacted. This means the command should succeed even when the system\nmanager has crashed.\nIf combined with\n--when=\n, shutdown will be scheduled after the given timestamp.\nAnd\n--when=cancel\nwill cancel the shutdown.\npoweroff\nÂ¶\nShut down and power-off the system. This is mostly equivalent to\nsystemctl start\npoweroff.target --job-mode=replace-irreversibly --no-block\n, but also prints a wall message to all\nusers. This command is asynchronous; it will return after the power-off operation is enqueued, without\nwaiting for it to complete.\nThis command honors\n--force\nand\n--when=\nin a similar way\nas\nhalt\n.\nreboot\nÂ¶\nShut down and reboot the system.\nThis command mostly equivalent to\nsystemctl start reboot.target\n--job-mode=replace-irreversibly --no-block\n, but also prints a wall message to all\nusers. This command is asynchronous; it will return after the reboot operation is enqueued,\nwithout waiting for it to complete.\nIf the switch\n--reboot-argument=\nis given, it will be passed as the optional\nargument to the\nreboot\n(2)\nsystem call.\nOptions\n--boot-loader-entry=\n,\n--boot-loader-menu=\n, and\n--firmware-setup\ncan be used to select what to do\nafter\nthe\nreboot. See the descriptions of those options for details.\nThis command honors\n--force\nand\n--when=\nin a similar way\nas\nhalt\n.\nIf a new kernel has been loaded via\nkexec --load\n, a\nkexec\nwill be performed instead of a reboot, unless\n\"\nSYSTEMCTL_SKIP_AUTO_KEXEC=1\n\" has been set. If a new root file system has\nbeen set up on \"\n/run/nextroot/\n\", a\nsoft-reboot\nwill be\nperformed instead of a reboot, unless \"\nSYSTEMCTL_SKIP_AUTO_SOFT_REBOOT=1\n\" has\nbeen set.\nAdded in version 246.\nkexec\nÂ¶\nShut down and reboot the system via\nkexec\n. This command will load a\nkexec kernel if one was not loaded yet or fail. A kernel may be loaded earlier by a separate step,\nthis is particularly useful if a custom initrd or additional kernel command line options are\ndesired. The\n--force\ncan be used to continue without a kexec kernel, i.e. to\nperform a normal reboot. The final reboot step is equivalent to\nsystemctl start kexec.target --job-mode=replace-irreversibly --no-block\n.\nTo load a kernel, an enumeration is performed following the\nBoot Loader Specification\n,\nand the default boot entry is loaded. For this step to succeed, the system must be using UEFI\nand the boot loader entries must be configured appropriately.\nbootctl list\nmay be used to list boot entries, see\nbootctl\n(1)\n.\nThis command is asynchronous; it will return after the reboot operation is enqueued,\nwithout waiting for it to complete.\nThis command honors\n--force\nand\n--when=\nsimilarly\nto\nhalt\n.\nIf a new kernel has been loaded via\nkexec --load\n, a\nkexec\nwill be performed when\nreboot\nis invoked, unless\n\"\nSYSTEMCTL_SKIP_AUTO_KEXEC=1\n\" has been set.\nsoft-reboot\nÂ¶\nShut down and reboot userspace. This is equivalent to\nsystemctl start\nsoft-reboot.target --job-mode=replace-irreversibly --no-block\n. This command is\nasynchronous; it will return after the reboot operation is enqueued, without waiting for it to\ncomplete.\nThis command honors\n--force\nand\n--when=\nin a similar way\nas\nhalt\n.\nThis operation only reboots userspace, leaving the kernel running. See\nsystemd-soft-reboot.service\n(8)\nfor details.\nIf a new root file system has been set up on \"\n/run/nextroot/\n\", a\nsoft-reboot\nwill be performed when\nreboot\nis invoked,\nunless \"\nSYSTEMCTL_SKIP_AUTO_SOFT_REBOOT=1\n\" has been set.\nAdded in version 254.\nexit\n[\nEXIT_CODE\n]\nÂ¶\nAsk the service manager to quit. This is only supported for user service managers (i.e. in\nconjunction with the\n--user\noption) or in containers and is equivalent to\npoweroff\notherwise. This command is asynchronous; it will return after the exit\noperation is enqueued, without waiting for it to complete.\nThe service manager will exit with the specified exit code, if\nEXIT_CODE\nis passed.\nAdded in version 227.\nswitch-root\n[\nROOT\n[\nINIT\n]\n]\nÂ¶\nSwitches to a different root directory and executes a new system manager process below it.\nThis is intended for use in the initrd, and will transition from the initrd's system manager\nprocess (a.k.a. \"init\" process, PID 1) to the main system manager process which is loaded from\nthe actual host root files system. This call takes two arguments: the directory that is to become\nthe new root directory, and the path to the new system manager binary below it to execute as PID\n1.  If both are omitted or the former is an empty string it defaults to\n/sysroot/\n. If the latter is omitted or is an empty string, a systemd binary\nwill automatically be searched for and used as service manager. If the system manager path is\nomitted, equal to the empty string or identical to the path to the systemd binary, the state of\nthe initrd's system manager process is passed to the main system manager, which allows later\nintrospection of the state of the services involved in the initrd boot phase.\nAdded in version 209.\nsleep\nÂ¶\nPut the system to sleep, through\nsuspend\n,\nhibernate\n,\nhybrid-sleep\n, or\nsuspend-then-hibernate\n. The sleep operation\nto use is automatically selected by\nsystemd-logind.service\n(8)\n.\nBy default,\nsuspend-then-hibernate\nis used, and falls back to\nsuspend\nand then\nhibernate\nif not supported. Refer to\nSleepOperation=\nsetting in\nlogind.conf\n(5)\nfor more details. This command is asynchronous, and will return after the sleep operation is\nsuccessfully enqueued. It will not wait for the sleep/resume cycle to complete.\nAdded in version 256.\nsuspend\nÂ¶\nSuspend the system. This will trigger activation of the special target unit\nsuspend.target\n. This command is asynchronous, and will return after the suspend\noperation is successfully enqueued. It will not wait for the suspend/resume cycle to complete.\nIf\n--force\nis specified, and\nsystemd-logind\nreturned\nerror for the operation, the error will be ignored and the operation will be tried again directly\nthrough starting the target unit.\nhibernate\nÂ¶\nHibernate the system. This will trigger activation of the special target unit\nhibernate.target\n. This command is asynchronous, and will return after the hibernation\noperation is successfully enqueued. It will not wait for the hibernate/thaw cycle to complete.\nThis command honors\n--force\nin the same way as\nsuspend\n.\nhybrid-sleep\nÂ¶\nHibernate and suspend the system. This will trigger activation of the special target unit\nhybrid-sleep.target\n. This command is asynchronous, and will return after the hybrid\nsleep operation is successfully enqueued. It will not wait for the sleep/wake-up cycle to complete.\nThis command honors\n--force\nin the same way as\nsuspend\n.\nAdded in version 196.\nsuspend-then-hibernate\nÂ¶\nSuspend the system and hibernate it when the battery is low, or when the delay specified\nin\nsystemd-sleep.conf\nelapsed. This will trigger activation of the special\ntarget unit\nsuspend-then-hibernate.target\n. This command is asynchronous,\nand will return after the hybrid sleep operation is successfully enqueued.\nIt will not wait for the sleep/wake-up or hibernate/thaw cycle to complete.\nThis command honors\n--force\nin the same way as\nsuspend\n.\nAdded in version 240.\nParameter Syntax\nÂ¶\nUnit commands listed above take either a single unit name (designated as\nUNIT\n),\nor multiple unit specifications (designated as\nPATTERN\nâ¦). In the first case, the\nunit name with or without a suffix must be given. If the suffix is not specified (unit name is \"abbreviated\"),\nsystemctl will append a suitable suffix, \"\n.service\n\" by default, and a type-specific suffix in\ncase of commands which operate only on specific unit types. For example,\n# systemctl start sshd\nand\n# systemctl start sshd.service\nare equivalent, as are\n# systemctl isolate default\nand\n# systemctl isolate default.target\nNote that (absolute) paths to device nodes are automatically converted to device unit names, and other (absolute)\npaths to mount unit names.\n# systemctl status /dev/sda\n# systemctl status /home\nare equivalent to:\n# systemctl status dev-sda.device\n# systemctl status home.mount\nIn the second case, shell-style globs will be matched against the primary names of all units currently in memory;\nliteral unit names, with or without a suffix, will be treated as in the first case. This means that literal unit\nnames always refer to exactly one unit, but globs may match zero units and this is not considered an\nerror.\nGlob patterns use\nfnmatch\n(3)\n,\nso normal shell-style globbing rules are used, and\n\"\n*\n\", \"\n?\n\",\n\"\n[]\n\" may be used. See\nglob\n(7)\nfor more details. The patterns are matched against the primary names of\nunits currently in memory, and patterns which do not match anything\nare silently skipped. For example:\n# systemctl stop \"sshd@*.service\"\nwill stop all\nsshd@.service\ninstances. Note that alias names of units, and units that are not\nin memory are not considered for glob expansion.\nFor unit file commands, the specified\nUNIT\nshould be the name of the unit file\n(possibly abbreviated, see above), or the absolute path to the unit file:\n# systemctl enable foo.service\nor\n# systemctl link /path/to/foo.service\nOptions\nÂ¶\nThe following options are understood:\n-t\n,\n--type=\nÂ¶\nThe argument is a comma-separated list of unit types such as\nservice\nand\nsocket\n. When units are listed with\nlist-units\n,\nlist-dependencies\n,\nshow\n, or\nstatus\n,\nonly units of the specified types will be shown. By default, units of all types are shown.\nAs a special case, if one of the arguments is\nhelp\n, a list of allowed values\nwill be printed and the program will exit.\n--state=\nÂ¶\nThe argument is a comma-separated list of unit LOAD, SUB, or ACTIVE states. When listing\nunits with\nlist-units\n,\nlist-dependencies\n,\nshow\nor\nstatus\n, show only those in the specified states. Use\n--state=failed\nor\n--failed\nto show only failed units.\nAs a special case, if one of the arguments is\nhelp\n, a list of allowed values\nwill be printed and the program will exit.\nAdded in version 206.\n-p\n,\n--property=\nÂ¶\nWhen showing unit/job/manager properties with the\nshow\ncommand, limit display to properties\nspecified in the argument. The argument should be a\ncomma-separated list of property names, such as\n\"\nMainPID\n\". Unless specified, all known\nproperties are shown. If specified more than once, all\nproperties with the specified names are shown. Shell\ncompletion is implemented for property names.\nFor the manager itself,\nsystemctlÂ show\nwill show all available properties, most of which are derived or closely match the options described in\nsystemd-system.conf\n(5)\n.\nProperties for units vary by unit type, so showing any\nunit (even a non-existent one) is a way to list properties\npertaining to this type. Similarly, showing any job will list\nproperties pertaining to all jobs. Properties for units are\ndocumented in\nsystemd.unit\n(5)\n,\nand the pages for individual unit types\nsystemd.service\n(5)\n,\nsystemd.socket\n(5)\n,\netc.\n-P\nÂ¶\nEquivalent to\n--value\n--property=\n, i.e. shows the value of the\nproperty without the property name or \"\n=\n\". Note that using\n-P\nonce\nwill also affect all properties listed with\n-p\n/\n--property=\n.\nAdded in version 246.\n-a\n,\n--all\nÂ¶\nWhen listing units with\nlist-units\n, also show inactive units and\nunits which are following other units. When showing unit/job/manager properties, show all\nproperties regardless whether they are set or not.\nTo list all units installed in the file system, use the\nlist-unit-files\ncommand instead.\nWhen listing units with\nlist-dependencies\n, recursively show\ndependencies of all dependent units (by default only dependencies of target units are\nshown).\nWhen used with\nstatus\n, show journal messages in full, even if they include\nunprintable characters or are very long. By default, fields with unprintable characters are\nabbreviated as \"blob data\". (Note that the pager may escape unprintable characters again.)\n-r\n,\n--recursive\nÂ¶\nWhen listing units, also show units of local\ncontainers. Units of local containers will be prefixed with\nthe container name, separated by a single colon character\n(\"\n:\n\").\nAdded in version 212.\n--reverse\nÂ¶\nShow reverse dependencies between units with\nlist-dependencies\n, i.e. follow\ndependencies of type\nWantedBy=\n,\nRequiredBy=\n,\nUpheldBy=\n,\nPartOf=\n,\nBoundBy=\n,\ninstead of\nWants=\nand similar.\nAdded in version 203.\n--after\nÂ¶\nWith\nlist-dependencies\n, show the\nunits that are ordered before the specified unit. In other\nwords, recursively list units following the\nAfter=\ndependency.\nNote that any\nAfter=\ndependency is\nautomatically mirrored to create a\nBefore=\ndependency. Temporal dependencies\nmay be specified explicitly, but are also created implicitly\nfor units which are\nWantedBy=\ntargets\n(see\nsystemd.target\n(5)\n),\nand as a result of other directives (for example\nRequiresMountsFor=\n). Both explicitly\nand implicitly introduced dependencies are shown with\nlist-dependencies\n.\nWhen passed to the\nlist-jobs\ncommand, for each printed job show which other jobs are\nwaiting for it. May be combined with\n--before\nto show both the jobs waiting for each job as\nwell as all jobs each job is waiting for.\nAdded in version 203.\n--before\nÂ¶\nWith\nlist-dependencies\n, show the\nunits that are ordered after the specified unit. In other\nwords, recursively list units following the\nBefore=\ndependency.\nWhen passed to the\nlist-jobs\ncommand, for each printed job show which other jobs it\nis waiting for. May be combined with\n--after\nto show both the jobs waiting for each job as\nwell as all jobs each job is waiting for.\nAdded in version 212.\n--with-dependencies\nÂ¶\nWhen used with\nstatus\n,\ncat\n,\nlist-units\n, and\nlist-unit-files\n, those commands print all\nspecified units and the dependencies of those units.\nOptions\n--reverse\n,\n--after\n,\n--before\nmay be used to change what types of dependencies\nare shown.\nAdded in version 245.\n-l\n,\n--full\nÂ¶\nDo not ellipsize unit names, process tree entries,\njournal output, or truncate unit descriptions in the output\nof\nstatus\n,\nlist-units\n,\nlist-jobs\n, and\nlist-timers\n.\nAlso, show installation targets in the output of\nis-enabled\n.\n--value\nÂ¶\nWhen printing properties with\nshow\n, only print the value, and skip the\nproperty name and \"\n=\n\". Also see option\n-P\nabove.\nAdded in version 230.\n--show-types\nÂ¶\nWhen showing sockets, show the type of the socket.\nAdded in version 202.\n--job-mode=\nÂ¶\nWhen queuing a new job, this option controls how to deal with\nalready queued jobs. It takes one of \"\nfail\n\",\n\"\nlenient\n\",\n\"\nreplace\n\",\n\"\nreplace-irreversibly\n\",\n\"\nisolate\n\",\n\"\nignore-dependencies\n\",\n\"\nignore-requirements\n\",\n\"\nflush\n\",\n\"\ntriggering\n\", or\n\"\nrestart-dependencies\n\". Defaults to\n\"\nreplace\n\", except when the\nisolate\ncommand is used which implies the\n\"\nisolate\n\" job mode.\nIf \"\nfail\n\" is specified and a requested operation on weak dependencies\nconflicts with a pending job (more specifically: causes an already pending start job to be reversed\ninto a stop job or vice versa), cause the operation to fail.\nIf \"\nlenient\n\" is specified and a requested operation conflicts with any\nactive/activating unit, cause the operation to fail.\nIf \"\nreplace\n\" (the default) is\nspecified, any conflicting pending job will be replaced, as\nnecessary.\nIf \"\nreplace-irreversibly\n\" is specified,\noperate like \"\nreplace\n\", but also mark the new\njobs as irreversible. This prevents future conflicting\ntransactions from replacing these jobs (or even being enqueued\nwhile the irreversible jobs are still pending). Irreversible\njobs can still be cancelled using the\ncancel\ncommand. This job mode should be used on any transaction which\npulls in\nshutdown.target\n.\n\"\nisolate\n\" is only valid for start\noperations and causes all other units to be stopped when the\nspecified unit is started. This mode is always used when the\nisolate\ncommand is used.\n\"\nflush\n\" will cause all queued jobs to\nbe canceled when the new job is enqueued.\nIf \"\nignore-dependencies\n\" is specified,\nthen all unit dependencies are ignored for this new job and\nthe operation is executed immediately. If passed, no required\nunits of the unit passed will be pulled in, and no ordering\ndependencies will be honored. This is mostly a debugging and\nrescue tool for the administrator and should not be used by\napplications.\n\"\nignore-requirements\n\" is similar to\n\"\nignore-dependencies\n\", but only causes the\nrequirement dependencies to be ignored, the ordering\ndependencies will still be honored.\n\"\ntriggering\n\" may only be used with\nsystemctl stop\n. In this mode, the specified\nunit and any active units that trigger it are stopped. See the\ndiscussion of\nTriggers=\nin\nsystemd.unit\n(5)\nfor more information about triggering units.\n\"\nrestart-dependencies\n\" may only be used with\nsystemctl start\n. In this mode, dependencies of\nthe specified unit will receive restart propagation, as if a restart\njob had been enqueued for the unit.\nAdded in version 209.\n-T\n,\n--show-transaction\nÂ¶\nWhen enqueuing a unit job (for example as effect of a\nsystemctl start\ninvocation or similar), show brief information about all jobs enqueued, covering both the requested\njob and any added because of unit dependencies. Note that the output will only include jobs\nimmediately part of the transaction requested. It is possible that service start-up program code\nrun as effect of the enqueued jobs might request further jobs to be pulled in. This means that\ncompletion of the listed jobs might ultimately entail more jobs than the listed ones.\nAdded in version 242.\n--fail\nÂ¶\nShorthand for\n--job-mode=\nfail.\nWhen used with the\nkill\ncommand,\nif no units were killed, the operation results in an error.\nAdded in version 227.\n--check-inhibitors=\nÂ¶\nWhen system shutdown or sleep state is requested, this option controls checking of inhibitor\nlocks. It takes one of \"\nauto\n\", \"\nyes\n\", and \"\nno\n\".\nDefaults to \"\nauto\n\", which means logind will perform the check and respect active\ninhibitor locks, but\nsystemctl\nwill only do a client-side check for interactive\ninvocations (i.e. from a TTY), so that a more friendly and informative error can be returned to\nusers. \"\nno\n\" disables the checks both in\nsystemctl\nand\nsystemd-logind\n(8)\n.\nApplications can establish inhibitor locks to prevent certain important operations (such as\nCD burning) from being interrupted by system shutdown or sleep. Any user may take these locks and\nprivileged users may override these locks. If any locks are taken, shutdown and sleep state\nrequests will normally fail (unless explicitly overridden with \"\nno\n\").\nOption\n--force\nprovides another way to override inhibitors.\nAdded in version 248.\n-i\nÂ¶\nShortcut for\n--check-inhibitors=no\n.\nAdded in version 198.\n--dry-run\nÂ¶\nJust print what would be done. Currently supported by verbs\nhalt\n,\npoweroff\n,\nreboot\n,\nkexec\n,\nsuspend\n,\nhibernate\n,\nhybrid-sleep\n,\nsuspend-then-hibernate\n,\ndefault\n,\nrescue\n,\nemergency\n, and\nexit\n.\nAdded in version 236.\n-q\n,\n--quiet\nÂ¶\nSuppress printing of the results of various commands\nand also the hints about truncated log lines. This does not\nsuppress output of commands for which the printed output is\nthe only result (like\nshow\n). Errors are\nalways printed.\n-v\n,\n--verbose\nÂ¶\nDisplay unit log output while executing unit operations.\nAdded in version 258.\n--no-warn\nÂ¶\nDo not generate the warnings shown by default in the following cases:\nwhen\nsystemctl\nis invoked without procfs mounted on\n/proc/\n,\nwhen using\nenable\nor\ndisable\non units without\ninstall information (i.e. do not have or have an empty [Install] section),\nwhen using\ndisable\ncombined with\n--user\non units\nthat are enabled in global scope,\nwhen a\nstop\n-ped,\ndisable\n-d, or\nmask\n-ed\nunit still has active triggering units,\nwhen a unit file is changed and requires\ndaemon-reload\n.\nAdded in version 253.\n--no-block\nÂ¶\nDo not synchronously wait for the requested operation\nto finish. If this is not specified, the job will be\nverified, enqueued and\nsystemctl\nwill\nwait until the unit's start-up is completed. By passing this\nargument, it is only verified and enqueued. This option may not be\ncombined with\n--wait\n.\n--wait\nÂ¶\nWhen used with\nstart\nor\nrestart\n, synchronously wait for\nstarted units to terminate again. This option may not be combined with\n--no-block\n.\nNote that this will wait forever if any given unit never terminates (by itself or by getting\nstopped explicitly); particularly services which use \"\nRemainAfterExit=yes\n\".\nWhen used with\nis-system-running\n, wait until the boot process is completed\nbefore returning.\nWhen used with\nkill\n, wait until the signalled units terminate. Note that\nthis will wait forever if any given unit never terminates.\nAdded in version 232.\n--user\nÂ¶\nTalk to the service manager of the calling user,\nrather than the service manager of the system.\n--system\nÂ¶\nTalk to the service manager of the system. This is the\nimplied default.\n--failed\nÂ¶\nList units in failed state. This is equivalent to\n--state=failed\n.\nAdded in version 233.\n--no-wall\nÂ¶\nDo not send wall message before halt, power-off and reboot.\n--global\nÂ¶\nWhen used with\nenable\nand\ndisable\n, operate on the global user\nconfiguration directory, thus enabling or disabling a unit\nfile globally for all future logins of all users.\n--no-reload\nÂ¶\nWhen used with\nenable\n,\ndisable\n,\npreset\n,\nmask\n, or\nunmask\n, do not implicitly reload daemon configuration\nafter executing the changes.\n--kill-whom=\nÂ¶\nWhen used with\nkill\n, choose which processes to send a UNIX process signal\nto. Must be one of\nmain\n,\ncontrol\n,\ncgroup\nor\nall\nto select whether to kill only the main process, the control process, all\nprocesses in the unit's control group or all processes of the unit. The main process of the unit is\nthe one that defines the life-time of it. A control process of a unit is one that is invoked by the\nmanager to induce state changes of it. For example, all processes started due to the\nExecStartPre=\n,\nExecStop=\nor\nExecReload=\nsettings of service units are control processes. Note that there is only one control process per\nunit at a time, as only one state change is executed at a time. For services of type\nType=forking\n, the initial process started by the manager for\nExecStart=\nis a control process, while the process ultimately forked off by that\none is then considered the main process of the unit (if it can be determined). This is different\nfor service units of other types, where the process forked off by the manager for\nExecStart=\nis always the main process itself. A service unit consists of zero or\none main process, zero or one control process plus any number of additional processes part of the\nunit's control group. Not all unit types manage processes of these types however. For example, for\nmount units, control processes are defined (which are the invocations of\n/usr/bin/mount\nand\n/usr/bin/umount\n), but no main process is\ndefined. If omitted, defaults to\nall\n, except if\n--kill-subgroup=\nis used in which case defaults to\ncgroup\n.\nAdded in version 252.\n--kill-value=\nINT\nÂ¶\nIf used with the\nkill\ncommand, enqueues a signal along with the\nspecified integer value parameter to the specified process(es). This operation is only available for\nPOSIX Realtime Signals (i.e.\n--signal=SIGRTMIN+â¦\nor\n--signal=SIGRTMAX-â¦\n), and ensures the signals are generated via the\nsigqueue\n(3)\nsystem call, rather than\nkill\n(3)\n. The\nspecified value must be a 32-bit signed integer, and may be specified either in decimal, in\nhexadecimal (if prefixed with \"\n0x\n\"), octal (if prefixed with \"\n0o\n\")\nor binary (if prefixed with \"\n0b\n\")\nIf this option is used the signal will only be enqueued on the control or main process of the\nunit, never on other processes belonging to the unit, i.e.\n--kill-whom=all\nwill only\naffect main and control processes but no other processes.\nAdded in version 254.\n--kill-subgroup=\nPATH\nÂ¶\nTakes a control group sub-path to send signals to, for use with the\nkill\ncommand. By default the chosen signal is delivered to all processes of the\nunit's cgroups (as well as the main/control processes (if outside) â subject to\n--kill-whom=\n). But with this option a subgroup can be selelected instead. This\nfunctionality is only available if \"\ncgroup\n\" or \"\ncgroup-fail\n\" are\nused with\n--kill-whom=\n, and in fact the former is the default if\n--kill-subgroup=\nis used.\nThe specified path may, but doesn't have to be prefixed with a slash, and its absence or\npresence has no effect, the path is either way taken relative to the unit's main control group\npath.\nThis functionality is only available on units where control group delegation is enabled (see\nDelegate=\nin\nsystemd.resource-control\n(5)\n).\nAdded in version 258.\n-s\n,\n--signal=\nÂ¶\nWhen used with\nkill\n, choose which signal to send to selected processes. Must\nbe one of the well-known signal specifiers such as\nSIGTERM\n,\nSIGINT\nor\nSIGSTOP\n. If omitted, defaults to\nSIGTERM\n.\nThe special value \"\nhelp\n\" will list the known values and the program will exit\nimmediately, and the special value \"\nlist\n\" will list known values along with the\nnumerical signal numbers and the program will exit immediately.\n--what=\nÂ¶\nSelect what type of per-unit resources to remove when the\nclean\ncommand is\ninvoked, see above. Takes one of\nconfiguration\n,\nstate\n,\ncache\n,\nlogs\n,\nruntime\n,\nfdstore\nto select the type of resource. This option may be specified more than\nonce, in which case all specified resource types are removed. Also accepts the special value\nall\nas a shortcut for specifying all six resource types. If this option is not\nspecified defaults to the combination of\ncache\n,\nruntime\nand\nfdstore\n, i.e. the three kinds of resources that are generally considered\nto be redundant and can be reconstructed on next invocation. Note that the explicit removal of the\nfdstore\nresource type is only useful if the\nFileDescriptorStorePreserve=\noption is enabled, since the file descriptor store\nis otherwise cleaned automatically when the unit is stopped.\nAdded in version 243.\n-f\n,\n--force\nÂ¶\nWhen used with\nenable\n, overwrite any existing conflicting symlinks.\nWhen used with\nedit\n, create all of the specified units which do not already exist.\nWhen used with\nsuspend\n,\nhibernate\n,\nhybrid-sleep\n,\nor\nsuspend-then-hibernate\n, the error returned by\nsystemd-logind\nwill be ignored, and the operation will be performed directly through starting the corresponding units.\nWhen used with\nhalt\n,\npoweroff\n,\nreboot\n,\nor\nkexec\n, execute the selected operation without shutting down all units. However,\nall processes will be killed forcibly and all file systems are unmounted or remounted read-only.\nThis is hence a drastic but relatively safe option to request an immediate reboot. If\n--force\nis specified twice for these operations (with the exception of\nkexec\n), they will\nbe executed immediately, without terminating any processes or unmounting any file systems.\nWarning\nSpecifying\n--force\ntwice with any of these operations might result in data loss.\nNote that when\n--force\nis specified twice the selected operation is executed by\nsystemctl\nitself, and the system manager is not contacted. This means the command\nshould succeed even when the system manager has crashed.\n--message=\nÂ¶\nWhen used with\nhalt\n,\npoweroff\nor\nreboot\n, set a\nshort message explaining the reason for the operation. The message will be logged together with the default\nshutdown message.\nAdded in version 225.\n--now\nÂ¶\nWhen used with\nenable\n,\ndisable\n,\nmask\n,\nor\nreenable\n, also start/stop/try-restart the units after the specified\nunit file operations succeed.\nAdded in version 220.\n--root=\nÂ¶\nWhen used with\nenable\n/\ndisable\n/\nis-enabled\n(and related commands), use the specified root path when looking for unit\nfiles. If this option is present,\nsystemctl\nwill operate on\nthe file system directly, instead of communicating with the\nsystemd\ndaemon to carry out changes.\n--image=\nimage\nÂ¶\nTakes a path to a disk image file or block device node. If specified, all operations\nare applied to file system in the indicated disk image. This option is similar to\n--root=\n, but operates on file systems stored in disk images or block devices. The\ndisk image should either contain just a file system or a set of file systems within a GPT partition\ntable, following the\nDiscoverable Partitions\nSpecification\n. For further information on supported disk images, see\nsystemd-nspawn\n(1)\n's\nswitch of the same name.\nAdded in version 252.\n--image-policy=\npolicy\nÂ¶\nTakes an image policy string as argument, as per\nsystemd.image-policy\n(7)\n. The\npolicy is enforced when operating on the disk image specified via\n--image=\n, see\nabove. If not specified, defaults to the \"\n*\n\" policy, i.e. all recognized file systems\nin the image are used.\n--runtime\nÂ¶\nWhen used with\nenable\n,\ndisable\n,\nedit\n,\n(and related commands), make changes only temporarily, so\nthat they are lost on the next reboot. This will have the\neffect that changes are not made in subdirectories of\n/etc/\nbut in\n/run/\n,\nwith identical immediate effects, however, since the latter\nis lost on reboot, the changes are lost too.\nSimilarly, when used with\nset-property\n, make changes only\ntemporarily, so that they are lost on the next\nreboot.\n--preset-mode=\nÂ¶\nTakes one of \"\nfull\n\" (the default),\n\"\nenable-only\n\",\n\"\ndisable-only\n\". When used with the\npreset\nor\npreset-all\ncommands, controls whether units shall be disabled and\nenabled according to the preset rules, or only enabled, or\nonly disabled.\nAdded in version 215.\n-n\n,\n--lines=\nÂ¶\nWhen used with\nstatus\n, controls the number of journal lines to show,\ncounting from the most recent ones. Takes a positive integer argument, or 0 to disable journal\noutput. Defaults to 10.\n-o\n,\n--output=\nÂ¶\nWhen used with\nstatus\n, controls the\nformatting of the journal entries that are shown. For the\navailable choices, see\njournalctl\n(1)\n.\nDefaults to \"\nshort\n\".\n--firmware-setup\nÂ¶\nWhen used with the\nreboot\n,\npoweroff\n, or\nhalt\ncommand, indicate to the system's firmware to reboot into the firmware\nsetup interface for the next boot. Note that this functionality is not available on all systems.\nAdded in version 220.\n--boot-loader-menu=\ntimeout\nÂ¶\nWhen used with the\nreboot\n,\npoweroff\n, or\nhalt\ncommand, indicate to the system's boot loader to show the boot loader menu\non the following boot. Takes a time value as parameter â indicating the menu timeout. Pass zero\nin order to disable the menu timeout. Note that not all boot loaders support this functionality.\nAdded in version 242.\n--boot-loader-entry=\nID\nÂ¶\nWhen used with the\nreboot\n,\npoweroff\n, or\nhalt\ncommand, indicate to the system's boot loader to boot into a specific\nboot loader entry on the following boot. Takes a boot loader entry identifier as argument,\nor \"\nhelp\n\" in order to list available entries. Note that not all boot loaders\nsupport this functionality.\nAdded in version 242.\n--reboot-argument=\nÂ¶\nThis switch is used with\nreboot\n. The value is architecture and firmware\nspecific. As an example, \"\nrecovery\n\" might be used to trigger system recovery, and\n\"\nfota\n\" might be used to trigger a\nâ\nfirmware over the air\nâ\nupdate.\nAdded in version 246.\n--plain\nÂ¶\nWhen used with\nlist-dependencies\n,\nlist-units\nor\nlist-machines\n,\nthe output is printed as a list instead of a tree, and the bullet\ncircles are omitted.\nAdded in version 203.\n--timestamp=\nÂ¶\nChange the format of printed timestamps. The following values may be used:\npretty\n(this is the default)\nÂ¶\n\"\nDay YYYY-MM-DD HH:MM:SS TZ\n\"\nAdded in version 248.\nunix\nÂ¶\n\"\n@seconds-since-the-epoch\n\"\nAdded in version 251.\nus\n,\nÎ¼s\nÂ¶\n\"\nDay YYYY-MM-DD HH:MM:SS.UUUUUU TZ\n\"\nAdded in version 248.\nutc\nÂ¶\n\"\nDay YYYY-MM-DD HH:MM:SS UTC\n\"\nAdded in version 248.\nus+utc\n,\nÎ¼s+utc\nÂ¶\n\"\nDay YYYY-MM-DD HH:MM:SS.UUUUUU UTC\n\"\nAdded in version 248.\nAdded in version 247.\n--mkdir\nÂ¶\nWhen used with\nbind\n, creates the destination file or directory before\napplying the bind mount. Note that even though the name of this option suggests that it is suitable only for\ndirectories, this option also creates the destination file node to mount over if the object to mount is not\na directory, but a regular file, device node, socket or FIFO.\nAdded in version 248.\n--marked\nÂ¶\nOnly allowed with\nreload-or-restart\n. Enqueues restart jobs for all\nunits that have the \"\nneeds-restart\n\" mark, and reload jobs for units that have the\n\"\nneeds-reload\n\" mark. When a unit marked for reload does not support reload, restart\nwill be queued. Those properties can be set using\nset-property Markers=â¦\n.\nUnless\n--no-block\nis used,\nsystemctl\nwill wait for the\nqueued jobs to finish.\nAdded in version 248.\n--read-only\nÂ¶\nWhen used with\nbind\n, creates a read-only bind mount.\nAdded in version 248.\n--drop-in=\nNAME\nÂ¶\nWhen used with\nedit\n, use\nNAME\nas the\ndrop-in file name instead of\noverride.conf\n.\nAdded in version 253.\n--when=\nÂ¶\nWhen used with\nhalt\n,\npoweroff\n,\nreboot\nor\nkexec\n, schedule the action to be performed at the given timestamp,\nwhich should adhere to the syntax documented in\nsystemd.time\n(7)\nsection \"PARSING TIMESTAMPS\". Specially, if \"\nshow\n\" is given, the currently scheduled\naction will be shown, which can be canceled by passing an empty string or \"\ncancel\n\".\n\"\nauto\n\" will schedule the action according to maintenance window or one minute in\nthe future.\nAdded in version 254.\n--stdin\nÂ¶\nWhen used with\nedit\n, the contents of the file will be read from standard\ninput and the editor will not be launched. In this mode, the old contents of the file are\ncompletely replaced. This is useful to \"edit\" unit files from scripts:\n$ systemctl edit --drop-in=limits.conf --stdin some-service.service <<EOF\n[Unit]\nAllowedCPUs=7,11\nEOF\nMultiple drop-ins may be \"edited\" in this mode; the same contents will be written to all of\nthem.\nAdded in version 256.\n-H\n,\n--host=\nÂ¶\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"\n@\n\", to\nconnect to. The hostname may optionally be suffixed by a\nport ssh is listening on, separated by \"\n:\n\", and then a\ncontainer name, separated by \"\n/\n\", which\nconnects directly to a specific container on the specified\nhost. This will use SSH to talk to the remote machine manager\ninstance. Container names may be enumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in brackets.\n-M\n,\n--machine=\nÂ¶\nExecute operation on a local container. Specify a container name to connect to, optionally\nprefixed by a user name to connect as and a separating \"\n@\n\" character. If the special\nstring \"\n.host\n\" is used in place of the container name, a connection to the local\nsystem is made (which is useful to connect to a specific user's user bus: \"\n--user\n--machine=lennart@.host\n\"). If the \"\n@\n\" syntax is not used, the connection is\nmade as root user. If the \"\n@\n\" syntax is used either the left hand side or the right hand\nside may be omitted (but not both) in which case the local user name and \"\n.host\n\" are\nimplied.\n-C\n,\n--capsule=\nÂ¶\nExecute operation on a capsule. Specify a capsule name to connect to. See\ncapsule@.service\n(5)\nfor\ndetails about capsules.\nAdded in version 256.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\n--legend=\nBOOL\nÂ¶\nEnable or disable printing of the legend, i.e. column headers and the footer with hints. The\nlegend is printed by default, unless disabled with\n--quiet\nor similar.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\nExit status\nÂ¶\nOn success, 0 is returned, a non-zero failure code otherwise.\nsystemctl\nuses the return codes defined by LSB, as defined in\nLSB 3.0.0\n.\nTableÂ 5.Â LSB return codes\nValue\nDescription in LSB\nUse in systemd\n0\n\"program is running or service is OK\"\nunit is active\n1\n\"program is dead and\n/var/run\npid file exists\"\nunit\nnot\nfailed (used by\nis-failed\n)\n2\n\"program is dead and\n/var/lock\nlock file exists\"\nunused\n3\n\"program is not running\"\nunit is not active\n4\n\"program or service status is unknown\"\nno such unit\nThe mapping of LSB service states to systemd unit states is imperfect, so it is better to\nnot rely on those return values but to look for specific unit states and substates instead.\nEnvironment\nÂ¶\n$SYSTEMD_EDITOR\nÂ¶\nEditor to use when editing units; overrides\n$EDITOR\nand\n$VISUAL\n. If neither\n$SYSTEMD_EDITOR\nnor\n$EDITOR\nnor\n$VISUAL\nare present or if it is set to an empty\nstring or if their execution failed, systemctl will try to execute well\nknown editors in this order:\neditor\n(1)\n,\nnano\n(1)\n,\nvim\n(1)\n,\nvi\n(1)\n.\nAdded in version 218.\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis setting is only useful when messages are written directly to the terminal, because\njournalctl\n(1)\nand\nother tools that display logs will color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis setting is only useful when messages are written directly to the terminal or a file, because\njournalctl\n(1)\nand\nother tools that display logs will attach timestamps based on the entry metadata on their own.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nNote that the log location is often attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\nSee Also\nÂ¶\nsystemd\n(1)\n,\njournalctl\n(1)\n,\nloginctl\n(1)\n,\nmachinectl\n(1)\n,\nsystemd.unit\n(5)\n,\nsystemd.resource-control\n(5)\n,\nsystemd.special\n(7)\n,\nwall\n(1)\n,\nsystemd.preset\n(5)\n,\nsystemd.generator\n(7)\n,\nglob\n(7)\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/systemctl.html"}}
{"text": "journalctl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\njournalctl â Print log entries from the systemd journal\nSynopsis\njournalctl\n[OPTIONS...] [MATCHES...]\nDescription\nÂ¶\njournalctl\nis used to print the log entries stored in the journal by\nsystemd-journald.service\n(8)\nand\nsystemd-journal-remote.service\n(8)\n.\nIf called without parameters, it will show the contents of the journal accessible to the calling\nuser, starting with the oldest entry collected.\nIf one or more match arguments are passed, the output is filtered accordingly. A match is in the\nformat \"\nFIELD=VALUE\n\", e.g. \"\n_SYSTEMD_UNIT=httpd.service\n\", referring to\nthe components of a structured journal entry. See\nsystemd.journal-fields\n(7)\nfor a list of well-known fields. If multiple matches are specified matching different fields, the log\nentries are filtered by both, i.e. the resulting output will show only entries matching all the specified\nmatches of this kind. If two matches apply to the same field, then they are automatically matched as\nalternatives, i.e. the resulting output will show entries matching any of the specified matches for the\nsame field. Finally, the character \"\n+\n\" may appear as a separate word between other terms\non the command line. This causes all matches before and after to be combined in a disjunction\n(i.e. logical OR).\nIt is also possible to filter the entries by specifying an absolute file path as an argument. The\nfile path may be a file or a symbolic link and the file must exist at the time of the query. If a file\npath refers to an executable binary, an \"\n_EXE=\n\" match for the canonicalized binary path\nis added to the query. If a file path refers to an executable script, a \"\n_COMM=\n\" match\nfor the script name is added to the query. If a file path refers to a device node,\n\"\n_KERNEL_DEVICE=\n\" matches for the kernel name of the device and for each of its ancestor\ndevices is added to the query. Symbolic links are dereferenced, kernel names are synthesized, and parent\ndevices are identified from the environment at the time of the query. In general, a device node is the\nbest proxy for an actual device, as log entries do not usually contain fields that identify an actual\ndevice. For the resulting log entries to be correct for the actual device, the relevant parts of the\nenvironment at the time the entry was logged, in particular the actual device corresponding to the device\nnode, must have been the same as those at the time of the query. Because device nodes generally change\ntheir corresponding devices across reboots, specifying a device node path causes the resulting entries to\nbe restricted to those from the current boot.\nAdditional constraints may be added using options\n--boot\n,\n--unit=\n, etc., to further limit what entries will be shown (logical AND).\nOutput is interleaved from all accessible journal files, whether they are rotated or currently\nbeing written, and regardless of whether they belong to the system itself or are accessible user\njournals. The\n--header\noption can be used to identify which files\nare\nbeing shown.\nThe set of journal files which will be used can be modified using the\n--user\n,\n--system\n,\n--directory=\n, and\n--file=\noptions, see\nbelow.\nAll users are granted access to their private per-user journals. However, by default, only root and\nusers who are members of a few special groups are granted access to the system journal and the journals\nof other users. Members of the groups \"\nsystemd-journal\n\", \"\nadm\n\", and\n\"\nwheel\n\" can read all journal files. Note that the two latter groups traditionally have\nadditional privileges specified by the distribution. Members of the \"\nwheel\n\" group can\noften perform administrative tasks.\nThe output is paged through\nless\nby default, and long lines are \"truncated\" to\nscreen width. The hidden part can be viewed by using the left-arrow and right-arrow keys. Paging can be\ndisabled; see the\n--no-pager\noption and the \"Environment\" section below.\nWhen outputting to a tty, lines are colored according to priority: lines of level ERROR and higher\nare colored red; lines of level WARNING are colored yellow; lines of level NOTICE are highlighted;\nlines of level INFO are displayed normally; lines of level DEBUG are colored grey.\nTo write entries\nto\nthe journal, a few methods may be used. In general, output\nfrom systemd units is automatically connected to the journal, see\nsystemd-journald.service\n(8)\n.\nIn addition,\nsystemd-cat\n(1)\nmay be used to send messages to the journal directly.\nSource Options\nÂ¶\nThe following options control where to read journal records from:\n--system\n,\n--user\nÂ¶\nShow messages from system services and the kernel (with\n--system\n). Show messages from service of current user (with\n--user\n).  If neither is specified, show all messages that the user can see.\nThe\n--user\noption affects how\n--unit=\narguments are\ntreated. See\n--unit=\n.\nNote that\n--user\nonly works if persistent logging is enabled, via the\nStorage=\nsetting in\njournald.conf\n(5)\n.\nAdded in version 205.\n-M\n,\n--machine=\nÂ¶\nShow messages from a running, local container. Specify a container name to connect\nto.\nAdded in version 209.\n-m\n,\n--merge\nÂ¶\nShow entries interleaved from all available journals, including remote\nones.\nAdded in version 190.\n-D\nDIR\n,\n--directory=\nDIR\nÂ¶\nTakes a directory path as argument. If specified, journalctl will operate on the\nspecified journal directory\nDIR\ninstead of the default runtime and system\njournal paths.\nAdded in version 187.\n-i\nGLOB\n,\n--file=\nGLOB\nÂ¶\nTakes a file glob as an argument. If specified, journalctl will operate on the\nspecified journal files matching\nGLOB\ninstead of the default runtime and\nsystem journal paths. May be specified multiple times, in which case files will be suitably\ninterleaved.\nAdded in version 205.\n--root=\nROOT\nÂ¶\nTakes a directory path as an argument. If specified,\njournalctl\nwill operate on journal directories and catalog file hierarchy underneath the specified directory\ninstead of the root directory (e.g.\n--update-catalog\nwill create\nROOT\n/var/lib/systemd/catalog/database\n, and journal\nfiles under\nROOT\n/run/journal/\nor\nROOT\n/var/log/journal/\nwill be displayed).\nAdded in version 201.\n--image=\nIMAGE\nÂ¶\nTakes a path to a disk image file or block device node. If specified,\njournalctl\nwill operate on the file system in the indicated disk image. This\noption is similar to\n--root=\n, but operates on file systems stored in disk images or\nblock devices, thus providing an easy way to extract log data from disk images. The disk image should\neither contain just a file system or a set of file systems within a GPT partition table, following\nthe\nDiscoverable Partitions\nSpecification\n. For further information on supported disk images, see\nsystemd-nspawn\n(1)\n's\nswitch of the same name.\nAdded in version 247.\n--image-policy=\npolicy\nÂ¶\nTakes an image policy string as argument, as per\nsystemd.image-policy\n(7)\n. The\npolicy is enforced when operating on the disk image specified via\n--image=\n, see\nabove. If not specified, defaults to the \"\n*\n\" policy, i.e. all recognized file systems\nin the image are used.\n--namespace=\nNAMESPACE\nÂ¶\nTakes a journal namespace identifier string as argument. If not specified, the data\ncollected by the default namespace is shown. If specified, shows the log data of the specified\nnamespace instead. If the namespace is specified as \"\n*\n\" data from all namespaces is\nshown, interleaved. If the namespace identifier is prefixed with \"\n+\n\" data from the\nspecified namespace and the default namespace is shown, interleaved, but no other. For details about\njournal namespaces see\nsystemd-journald.service\n(8)\n.\nAdded in version 245.\nFiltering Options\nÂ¶\nThe following options control how to filter journal records:\n-S\n,\n--since=\n,\n-U\n,\n--until=\nÂ¶\nStart showing entries on or newer than the specified date, or on or older than the\nspecified date, respectively. Date specifications should be of the format \"\n2012-10-30\n18:17:16\n\".  If the time part is omitted, \"\n00:00:00\n\" is assumed.  If only\nthe seconds component is omitted, \"\n:00\n\" is assumed. If the date component is\nomitted, the current day is assumed. Alternatively the strings \"\nyesterday\n\",\n\"\ntoday\n\", \"\ntomorrow\n\" are understood, which refer to 00:00:00 of the\nday before the current day, the current day, or the day after the current day,\nrespectively. \"\nnow\n\" refers to the current time. Finally, relative times may be\nspecified, prefixed with \"\n-\n\" or \"\n+\n\", referring to times before or\nafter the current time, respectively. For complete time and date specification, see\nsystemd.time\n(7)\n. Note\nthat\n--output=short-full\nprints timestamps that follow precisely this format.\nAdded in version 195.\n-c\n,\n--cursor=\nÂ¶\nStart showing entries from the location in the journal specified by the passed\ncursor.\nAdded in version 193.\n--after-cursor=\nÂ¶\nStart showing entries from the location in the journal\nafter\nthe location specified by the passed cursor.  The cursor is shown when the\n--show-cursor\noption is used.\nAdded in version 206.\n--cursor-file=\nFILE\nÂ¶\nIf\nFILE\nexists and contains a cursor, start showing\nentries\nafter\nthis location. Otherwise, show entries according to the other\ngiven options. At the end, write the cursor of the last entry to\nFILE\n. Use this option to continually read the journal by sequentially\ncalling\njournalctl\n.\nAdded in version 242.\n-b [\n[\nID\n][\nÂ±offset\n]|\nall\n]\n,\n--boot[\n=[\nID\n][\nÂ±offset\n]|\nall\n]\nÂ¶\nShow messages from a specific boot. This will add a match for\n\"\n_BOOT_ID=\n\".\nThe argument may be empty, in which case logs for the current boot will be shown.\nIf the boot ID is omitted, a positive\noffset\nwill look up the boots\nstarting from the beginning of the journal, and an equal-or-less-than zero\noffset\nwill look up boots starting from the end of the journal. Thus,\n1\nmeans the first boot found in the journal in chronological order,\n2\nthe second and so on; while\n-0\nis the last boot,\n-1\nthe boot before last, and so on. An empty\noffset\nis equivalent to specifying\n-0\n, except when the current boot is not the last\nboot (e.g. because\n--directory=\nwas specified to look at logs from a different\nmachine).\nIf the 32-character\nID\nis specified, it may optionally be followed\nby\noffset\nwhich identifies the boot relative to the one given by boot\nID\n. Negative values mean earlier boots and positive values mean later\nboots. If\noffset\nis not specified, a value of zero is assumed, and the\nlogs for the boot given by\nID\nare shown.\nThe special argument\nall\ncan be used to negate the effect of an earlier\nuse of\n-b\n.\nAdded in version 186.\n-u\n,\n--unit=\nUNIT\n|\nPATTERN\nÂ¶\nShow messages for the specified systemd unit\nUNIT\n(such as\na service unit), or for any of the units matched by\nPATTERN\n.  If a pattern\nis specified, a list of unit names found in the journal is compared with the specified pattern and\nall that match are used. For each unit name, a match is added for messages from the unit\n(\"\n_SYSTEMD_UNIT=\nUNIT\n\"), along with additional matches for\nmessages from systemd and messages about coredumps for the specified unit. A match is also added for\n\"\n_SYSTEMD_SLICE=\nUNIT\n\", such that if the provided\nUNIT\nis a\nsystemd.slice\n(5)\nunit, all logs of children of the slice will be shown.\nWith\n--user\n, all\n--unit=\narguments will be converted to match\nuser messages as if specified with\n--user-unit=\n.\nThis parameter can be specified multiple times.\nAdded in version 195.\n--user-unit=\nÂ¶\nShow messages for the specified user session unit. This will add a match for messages\nfrom the unit (\"\n_SYSTEMD_USER_UNIT=\n\" and \"\n_UID=\n\") and additional\nmatches for messages from session systemd and messages about coredumps for the specified unit. A\nmatch is also added for \"\n_SYSTEMD_USER_SLICE=\nUNIT\n\", such\nthat if the provided\nUNIT\nis a\nsystemd.slice\n(5)\nunit, all logs of children of the unit will be shown.\nThis parameter can be specified multiple times.\nAdded in version 198.\n-I\n,\n--invocation=\nID\n[\nÂ±offset\n]|\noffset\nÂ¶\nShow messages from a specific invocation of unit. This will add a match for\n\"\n_SYSTEMD_INVOCATION_ID=\n\", \"\nOBJECT_SYSTEMD_INVOCATION_ID=\n\",\n\"\nINVOCATION_ID=\n\", \"\nUSER_INVOCATION_ID=\n\".\nA positive\noffset\nwill look up the invocations of a systemd unit\nfrom the beginning of the journal, and zero or a negative offset will look up invocations starting\nfrom the end of the journal. Thus,\n1\nmeans the first invocation found in the\njournal in chronological order,\n2\nthe second and so on; while\n0\nis the latest invocation,\n-1\nthe invocation before the\nlatest, and so on.\nIf the 32-character\nID\nis specified, it may optionally be followed\nby\nÂ±offset\nwhich identifies the invocation relative to the one given by\ninvocation\nID\n. Negative values mean earlier invocations and positive\nvalues mean later invocations. If\nÂ±offset\nis not specified, a value of\nzero is assumed, and the logs for the invocation given by\nID\nwill be\nshown.\n-I\nis equivalent to\n--invocation=0\n, and logs for the latest\ninvocation will be shown.\nWhen an offset is specified, a unit name must be specified with\n-u/--unit=\nor\n--user-unit=\noption.\nWhen specified with\n-b/--boot=\n, then invocations are searched within the\nspecified boot.\nAdded in version 257.\n-t\n,\n--identifier=\nSYSLOG_IDENTIFIER\nÂ¶\nShow messages for the specified syslog identifier\nSYSLOG_IDENTIFIER\n.\nThis parameter can be specified multiple times.\nAdded in version 217.\n-T\n,\n--exclude-identifier=\nSYSLOG_IDENTIFIER\nÂ¶\nExclude messages for the specified syslog identifier\nSYSLOG_IDENTIFIER\n.\nThis parameter can be specified multiple times.\nAdded in version 256.\n-p\n,\n--priority=\nÂ¶\nFilter output by message priorities or priority ranges. Takes either a single numeric\nor textual log level (i.e. between 0/\"\nemerg\n\" and 7/\"\ndebug\n\"), or a\nrange of numeric/text log levels in the form FROM..TO. The log levels are the usual syslog log levels\nas documented in\nsyslog\n(3)\n,\ni.e. \"\nemerg\n\"Â (0), \"\nalert\n\"Â (1), \"\ncrit\n\"Â (2),\n\"\nerr\n\"Â (3), \"\nwarning\n\"Â (4), \"\nnotice\n\"Â (5),\n\"\ninfo\n\"Â (6), \"\ndebug\n\"Â (7). If a single log level is specified, all\nmessages with this log level or a lower (hence more important) log level are shown. If a range is\nspecified, all messages within the range are shown, including both the start and the end value of the\nrange. This will add \"\nPRIORITY=\n\" matches for the specified\npriorities.\nAdded in version 188.\n--facility=\nÂ¶\nFilter output by syslog facility. Takes a comma-separated list of numbers or\nfacility names. The names are the usual syslog facilities as documented in\nsyslog\n(3)\n.\n--facility=help\nmay be used to display a list of known facility names and exit.\nAdded in version 245.\n-g\n,\n--grep=\nÂ¶\nFilter output to entries where the\nMESSAGE=\nfield matches the\nspecified regular expression. PERL-compatible regular expressions are used, see\npcre2pattern\n(3)\nfor a detailed description of the syntax.\nIf the pattern is all lowercase, matching is case insensitive.  Otherwise, matching is case\nsensitive. This can be overridden with the\n--case-sensitive\noption, see\nbelow.\nWhen used with\n--lines=\n(not prefixed with \"\n+\n\"),\n--reverse\nis implied.\nAdded in version 237.\n--case-sensitive[\n=BOOLEAN\n]\nÂ¶\nMake pattern matching case sensitive or case insensitive.\nAdded in version 237.\n-k\n,\n--dmesg\nÂ¶\nShow only kernel messages. This adds the match \"\n_TRANSPORT=kernel\n\".\nThis implies\n--boot=0\nunless explicitly specified otherwise.\nAdded in version 205.\nOutput Options\nÂ¶\nThe following options control how journal records are printed:\n-o\n,\n--output=\nÂ¶\nControls the formatting of the journal entries that are shown. Takes one of the\nfollowing options:\nshort\nÂ¶\nis the default and generates an output that is mostly identical to the\nformatting of classic syslog files, showing one line per journal entry.\nAdded in version 206.\nshort-full\nÂ¶\nis very similar, but shows timestamps in the format the\n--since=\nand\n--until=\noptions accept. Unlike the timestamp\ninformation shown in\nshort\noutput mode this mode includes weekday, year and\ntimezone information in the output, and is locale-independent.\nAdded in version 232.\nshort-iso\nÂ¶\nis very similar, but shows timestamps in the\nRFC 3339\nprofile of ISO 8601.\nAdded in version 206.\nshort-iso-precise\nÂ¶\nas for\nshort-iso\nbut includes full microsecond\nprecision.\nAdded in version 234.\nshort-precise\nÂ¶\nis very similar, but shows classic syslog timestamps with full microsecond\nprecision.\nAdded in version 207.\nshort-monotonic\nÂ¶\nis very similar, but shows monotonic timestamps instead of wallclock\ntimestamps.\nAdded in version 206.\nshort-delta\nÂ¶\nas for\nshort-monotonic\nbut includes the time difference\nto the previous entry.\nMaybe unreliable time differences are marked by a \"\n*\n\".\nAdded in version 252.\nshort-unix\nÂ¶\nis very similar, but shows seconds passed since January 1st 1970 UTC instead of\nwallclock timestamps (\"UNIX time\"). The time is shown with microsecond accuracy.\nAdded in version 230.\nverbose\nÂ¶\nshows the full-structured entry items with all fields.\nAdded in version 206.\nexport\nÂ¶\nserializes the journal into a binary (but mostly text-based) stream suitable\nfor backups and network transfer (see\nJournal Export\nFormat\nfor more information). To import the binary stream back into native journald\nformat use\nsystemd-journal-remote\n(8)\n.\nAdded in version 206.\njson\nÂ¶\nformats entries as JSON objects, separated by newline characters (see\nJournal JSON Format\nfor more information). Field values are generally encoded as JSON strings, with three exceptions:\nFields larger than 4096 bytes are encoded as\nnull\nvalues. (This may be turned off by passing\n--all\n, but be aware that this may\nallocate overly long JSON objects.)\nJournal entries permit non-unique fields within the same log entry. JSON does\nnot allow non-unique fields within objects. Due to this, if a non-unique field is encountered a\nJSON array is used as field value, listing all field values as elements.\nFields containing non-printable or non-UTF8 bytes are encoded as arrays\ncontaining the raw bytes individually formatted as unsigned numbers.\nNote that this encoding is reversible (with the exception of the size limit).\nAdded in version 206.\njson-pretty\nÂ¶\nformats entries as JSON data structures, but formats them in multiple lines in\norder to make them more readable by humans.\nAdded in version 206.\njson-sse\nÂ¶\nformats entries as JSON data structures, but wraps them in a format suitable for\nServer-Sent\nEvents\n.\nAdded in version 206.\njson-seq\nÂ¶\nformats entries as JSON data structures, but prefixes them with an ASCII Record\nSeparator character (0x1E) and suffixes them with an ASCII Line Feed character (0x0A), in\naccordance with\nJavaScript Object Notation\n(JSON) Text Sequences\n(\"\napplication/json-seq\n\").\nAdded in version 240.\ncat\nÂ¶\ngenerates a very terse output, only showing the actual message of each journal\nentry with no metadata, not even a timestamp. If combined with the\n--output-fields=\noption will output the listed fields for each log record,\ninstead of the message.\nAdded in version 206.\nwith-unit\nÂ¶\nsimilar to\nshort-full\n, but prefixes the unit and user unit names\ninstead of the traditional syslog identifier. Useful when using templated instances, as it will\ninclude the arguments in the unit names.\nAdded in version 239.\n--truncate-newline\nÂ¶\nTruncate each log message at the first newline character on output, so that only the\nfirst line of each message is displayed.\nAdded in version 254.\n--output-fields=\nÂ¶\nA comma separated list of the fields which should be included in the output. This\nhas an effect only for the output modes which would normally show all fields\n(\nverbose\n,\nexport\n,\njson\n,\njson-pretty\n,\njson-sse\nand\njson-seq\n), as well as\non\ncat\n. For the former, the \"\n__CURSOR\n\",\n\"\n__REALTIME_TIMESTAMP\n\", \"\n__MONOTONIC_TIMESTAMP\n\", and\n\"\n_BOOT_ID\n\" fields are always printed.\nAdded in version 236.\n-n\n,\n--lines=\nÂ¶\nShow the most recent journal events and limit the number of events shown. The argument\nis a positive integer or \"\nall\n\" to disable the limit. Additionally, if the number is\nprefixed with \"\n+\n\", the oldest journal events are used instead. The default value is\n10 if no argument is given.\nIf\n--follow\nis used, this option is implied. When not prefixed with \"\n+\n\"\nand used with\n--grep=\n,\n--reverse\nis implied.\n-r\n,\n--reverse\nÂ¶\nReverse output so that the newest entries are displayed first.\nAdded in version 198.\n--show-cursor\nÂ¶\nThe cursor is shown after the last entry after two dashes:\n-- cursor: s=0639â¦\nThe format of the cursor is private and subject to change.\nAdded in version 209.\n--utc\nÂ¶\nExpress time in Coordinated Universal Time (UTC).\nAdded in version 217.\n-x\n,\n--catalog\nÂ¶\nAugment log lines with explanation texts from the message catalog. This will add\nexplanatory help texts to log messages in the output where this is available. These short help texts\nwill explain the context of an error or log event, possible solutions, as well as pointers to support\nforums, developer documentation, and any other relevant manuals. Note that help texts are not\navailable for all messages, but only for selected ones. For more information on the message catalog,\nsee\nJournal Message Catalogs\n.\nNote: when attaching\njournalctl\noutput to bug reports, please do\nnot\nuse\n-x\n.\nAdded in version 196.\n--no-hostname\nÂ¶\nDo not show the hostname field of log messages originating from the local host. This\nswitch has an effect only on the\nshort\nfamily of output modes (see above).\nNote: this option does not remove occurrences of the hostname from log entries themselves, so\nit does not prevent the hostname from being visible in the logs.\nAdded in version 230.\n--no-full\n,\n--full\n,\n-l\nÂ¶\nEllipsize fields when they do not fit in available columns.  The default is to show\nfull fields, allowing them to wrap or be truncated by the pager, if one is used.\nThe old options\n-l\n/\n--full\nare not useful anymore, except to\nundo\n--no-full\n.\nAdded in version 196.\n-a\n,\n--all\nÂ¶\nShow all fields in full, even if they include unprintable characters or are very\nlong. By default, fields with unprintable characters are abbreviated as \"blob data\". (Note that the\npager may escape unprintable characters again.)\n-f\n,\n--follow\nÂ¶\nShow only the most recent journal entries, and continuously print new entries as they\nare appended to the journal, until Ctrl-C is hit (or the tool is otherwise terminated).\njournalctl\nwill send an\nsd_notify\n(3)\n\"\nREADY=1\n\" message once it initialized and successfully established its watch on the\njournal.\n--no-tail\nÂ¶\nShow all stored output lines, even in follow mode. Undoes the effect of\n--lines=\n.\n-q\n,\n--quiet\nÂ¶\nSuppresses all informational messages (i.e. \"-- Journal begins at â¦\", \"-- Reboot\n--\"), any warning messages regarding inaccessible system journals when run as a normal\nuser.\n--synchronize-on-exit=\nÂ¶\nTakes a boolean argument. If true and operating in\n--follow\nmode, a\njournal synchronization request (equivalent to\njournalctl --sync\n) is issued when\nSIGTERM\n/\nSIGINT\nis received, and log output continues until\nthis request completes. This is useful for synchronizing journal log output to the runtime of\nservices or external events, ensuring that any log data enqueued to the logging subsystem by\nthe time\nSIGTERM\n/\nSIGINT\nis issued is guaranteed to be\nprocessed and displayed by the time log output ends. Defaults to false.\nAdded in version 258.\nPager Control Options\nÂ¶\nThe following options control page support:\n--no-pager\nÂ¶\nDo not pipe output into a pager.\n-e\n,\n--pager-end\nÂ¶\nImmediately jump to the end of the journal inside the implied pager tool. This\nimplies\n--lines=1000\nand\n--boot=0\nunless explicitly specified\notherwise, to guarantee that the pager will not buffer logs of unbounded size. Note that this option\nis only supported for the\nless\n(1)\npager.\nAdded in version 198.\nForward Secure Sealing (FSS) Options\nÂ¶\nThe following options may be used together with the\n--setup-keys\ncommand described\nbelow:\n--interval=\nÂ¶\nSpecifies the change interval for the sealing key when generating an FSS key pair\nwith\n--setup-keys\n. Shorter intervals increase CPU consumption but shorten the time\nrange of undetectable journal alterations. Defaults to 15min.\nNote,\n--output=json-sse\nand\n--output=json-seq\nare silently\nmigrated to\n--output=json\n.\nAdded in version 189.\n--verify-key=\nÂ¶\nSpecifies the FSS verification key to use for the\n--verify\noperation.\nAdded in version 189.\n--force\nÂ¶\nWhen\n--setup-keys\nis passed and Forward Secure Sealing (FSS) has\nalready been configured, recreate FSS keys.\nAdded in version 206.\nCommands\nÂ¶\nThe following commands are understood. If none is specified the default is to display journal records:\n-N\n,\n--fields\nÂ¶\nPrint all field names currently used in all entries of the journal.\nAdded in version 229.\n-F\n,\n--field=\nÂ¶\nPrint all possible data values the specified field can take in all entries of the\njournal.\nAdded in version 195.\n--list-boots\nÂ¶\nShow a tabular list of boot numbers (relative to the current boot), their IDs, and the\ntimestamps of the first and last message pertaining to the boot. When specified with\n-n/--lines=[\n+\n]\nN\noption, only the\nfirst (when the number prefixed with \"\n+\n\") or the last (without prefix)\nN\nentries will be shown. When specified with\n-r/--reverse\n, the list will be shown in the reverse order.\nAdded in version 209.\n--list-invocations\nÂ¶\nList invocation IDs of a unit. Requires a unit name with\n-u/--unit=\nor\n--user-unit=\n. Show a tabular list of invocation numbers (relative to the current\nor latest invocation), their IDs, and the timestamps of the first and last message pertaining to\nthe invocation. When\n-b/-boot\nis specified, invocations in the boot will be shown.\nWhen specified with\n-n/--lines=[\n+\n]\nN\noption, only the first (when the number prefixed with \"\n+\n\") or the last (without\nprefix)\nN\nentries will be shown. When specified with\n-r/--reverse\n, the list will be shown in the reverse order.\nAdded in version 257.\n--disk-usage\nÂ¶\nShows the current disk usage of all journal files. This shows the sum of the disk\nusage of all archived and active journal files.\nAdded in version 190.\n--vacuum-size=\n,\n--vacuum-time=\n,\n--vacuum-files=\nÂ¶\n--vacuum-size=\nremoves the oldest archived journal files until the\ndisk space they use falls below the specified size. Accepts the usual \"\nK\n\",\n\"\nM\n\", \"\nG\n\" and \"\nT\n\" suffixes (to the base of\n1024).\n--vacuum-time=\nremoves archived journal files older than the specified\ntimespan. Accepts the usual \"\ns\n\" (default), \"\nm\n\",\n\"\nh\n\", \"\ndays\n\", \"\nweeks\n\", \"\nmonths\n\",\nand \"\nyears\n\" suffixes, see\nsystemd.time\n(7)\nfor\ndetails.\n--vacuum-files=\nleaves only the specified number of separate journal\nfiles.\nNote that running\n--vacuum-size=\nhas only an indirect effect on the output\nshown by\n--disk-usage\n, as the latter includes active journal files, while the\nvacuuming operation only operates on archived journal files. Similarly,\n--vacuum-files=\nmight not actually reduce the number of journal files to below the\nspecified number, as it will not remove active journal files.\n--vacuum-size=\n,\n--vacuum-time=\nand\n--vacuum-files=\nmay be combined in a single invocation to enforce any combination of\na size, a time and a number of files limit on the archived journal files. Specifying any of these\nthree parameters as zero is equivalent to not enforcing the specific limit, and is thus\nredundant.\nThese three switches may also be combined with\n--rotate\ninto one command. If\nso, all active files are rotated first, and the requested vacuuming operation is executed right\nafter. The rotation has the effect that all currently active files are archived (and potentially new,\nempty journal files opened as replacement), and hence the vacuuming operation has the greatest effect\nas it can take all log data written so far into account.\nAdded in version 218.\n--verify\nÂ¶\nCheck the journal file for internal consistency. If the file has been generated\nwith FSS enabled and the FSS verification key has been specified with\n--verify-key=\n, authenticity of the journal file is verified.\nAdded in version 189.\n--sync\nÂ¶\nAsks the journal daemon to write all yet unwritten journal data to the backing file\nsystem and synchronize all journals. This call does not return until the synchronization operation\nis complete. This command guarantees that any log messages written before its invocation are safely\nstored on disk at the time it returns.\nAdded in version 228.\n--relinquish-var\nÂ¶\nAsks the journal daemon for the reverse operation to\n--flush\n: if\nrequested the daemon will write further log data to\n/run/log/journal/\nand\nstops writing to\n/var/log/journal/\n. A subsequent call to\n--flush\ncauses the log output to switch back to\n/var/log/journal/\n, see above.\nAdded in version 243.\n--smart-relinquish-var\nÂ¶\nSimilar to\n--relinquish-var\n, but executes no operation if the root\nfile system and\n/var/log/journal/\nreside on the same mount point. This operation\nis used during system shutdown in order to make the journal daemon stop writing data to\n/var/log/journal/\nin case that directory is located on a mount point that needs\nto be unmounted.\nAdded in version 243.\n--flush\nÂ¶\nAsks the journal daemon to flush any log data stored in\n/run/log/journal/\ninto\n/var/log/journal/\n, if persistent\nstorage is enabled. This call does not return until the operation is complete. Note that this call is\nidempotent: the data is only flushed from\n/run/log/journal/\ninto\n/var/log/journal/\nonce during system runtime (but see\n--relinquish-var\nbelow), and this command exits cleanly without executing any\noperation if this has already happened. This command effectively guarantees that all data is flushed\nto\n/var/log/journal/\nat the time it returns.\nAdded in version 217.\n--rotate\nÂ¶\nAsks the journal daemon to rotate journal files. This call does not return until\nthe rotation operation is complete. Journal file rotation has the effect that all currently active\njournal files are marked as archived and renamed, so that they are never written to in future. New\n(empty) journal files are then created in their place. This operation may be combined with\n--vacuum-size=\n,\n--vacuum-time=\nand\n--vacuum-file=\ninto a single command, see above.\nAdded in version 227.\n--header\nÂ¶\nInstead of showing journal contents, show internal header information of the\njournal fields accessed.\nThis option is particularly useful when trying to identify out-of-order journal entries, as\nhappens for example when the machine is booted with the wrong system time.\nAdded in version 187.\n--list-catalog [\n128-bit-IDâ¦\n]\nÂ¶\nList the contents of the message catalog as a table of message IDs, plus their\nshort description strings.\nIf any\n128-bit-ID\ns are specified, only those entries are\nshown.\nAdded in version 196.\n--dump-catalog [\n128-bit-IDâ¦\n]\nÂ¶\nShow the contents of the message catalog, with entries separated by a line\nconsisting of two dashes and the ID (the format is the same as\n.catalog\nfiles).\nIf any\n128-bit-ID\ns are specified, only those entries are\nshown.\nAdded in version 199.\n--update-catalog\nÂ¶\nUpdate the message catalog index. This command needs to be executed each time new\ncatalog files are installed, removed, or updated to rebuild the binary catalog\nindex.\nAdded in version 196.\n--setup-keys\nÂ¶\nInstead of showing journal contents, generate a new key pair for Forward Secure\nSealing (FSS). This will generate a sealing key and a verification key. The sealing key is stored in\nthe journal data directory and shall remain on the host. The verification key should be stored\nexternally. Refer to the\nSeal=\noption in\njournald.conf\n(5)\nfor\ninformation on Forward Secure Sealing and for a link to a refereed scholarly paper detailing the\ncryptographic theory it is based on.\nAdded in version 189.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\nExit status\nÂ¶\nOn success, 0 is returned; otherwise, a non-zero failure code is returned.\nEnvironment\nÂ¶\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis setting is only useful when messages are written directly to the terminal, because\njournalctl\n(1)\nand\nother tools that display logs will color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis setting is only useful when messages are written directly to the terminal or a file, because\njournalctl\n(1)\nand\nother tools that display logs will attach timestamps based on the entry metadata on their own.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nNote that the log location is often attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TID\nÂ¶\nA boolean. If true, messages will be prefixed with the current\nnumerical thread ID (TID).\nNote that the this information is attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\n$SYSTEMD_LOG_RATELIMIT_KMSG\nÂ¶\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"\ntrue\n\". If disabled, systemd will not ratelimit messages written to kmsg.\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\nExamples\nÂ¶\nWithout arguments, all collected logs are shown unfiltered:\njournalctl\nWith one match specified, all entries with a field matching the expression are shown:\njournalctl _SYSTEMD_UNIT=avahi-daemon.service\njournalctl _SYSTEMD_CGROUP=/user.slice/user-42.slice/session-c1.scope\nIf two different fields are matched, only entries matching both expressions at the same time are\nshown:\njournalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097\nIf two matches refer to the same field, all entries matching either expression are shown:\njournalctl _SYSTEMD_UNIT=avahi-daemon.service _SYSTEMD_UNIT=dbus.service\nIf the separator \"\n+\n\" is used, two expressions may be combined in a logical OR. The\nfollowing will show all messages from the Avahi service process with the PID 28097 plus all messages from\nthe D-Bus service (from any of its processes):\njournalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097 + _SYSTEMD_UNIT=dbus.service\nTo show all fields emitted\nby\na unit and\nabout\nthe unit,\noption\n-u\n/\n--unit=\nshould be used.\njournalctl -u\nname\nexpands to a complex filter similar to\n_SYSTEMD_UNIT=\nname\n.service\n+ UNIT=\nname\n.service _PID=1\n+ OBJECT_SYSTEMD_UNIT=\nname\n.service _UID=0\n+ COREDUMP_UNIT=\nname\n.service _UID=0 MESSAGE_ID=fc2e22bc6ee647b6b90729ab34a250b1\n(see\nsystemd.journal-fields\n(7)\nfor an explanation of those patterns).\nShow all logs generated by the D-Bus executable:\njournalctl /usr/bin/dbus-daemon\nShow all kernel logs from previous boot:\njournalctl -k -b -1\nShow a live log display from a system service\napache.service\n:\njournalctl -f -u apache\nSee Also\nÂ¶\nsystemd\n(1)\n,\nsystemd-cat\n(1)\n,\nsystemd-journald.service\n(8)\n,\nsystemctl\n(1)\n,\ncoredumpctl\n(1)\n,\nsystemd.journal-fields\n(7)\n,\njournald.conf\n(5)\n,\nsystemd.time\n(7)\n,\nsystemd-journal-remote.service\n(8)\n,\nsystemd-journal-upload.service\n(8)\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/journalctl.html"}}
{"text": "systemd.unit\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nsystemd.unit â Unit configuration\nSynopsis\nservice\n.service\n,\nsocket\n.socket\n,\ndevice\n.device\n,\nmount\n.mount\n,\nautomount\n.automount\n,\nswap\n.swap\n,\ntarget\n.target\n,\npath\n.path\n,\ntimer\n.timer\n,\nslice\n.slice\n,\nscope\n.scope\nSystem Unit Search Path\nÂ¶\n/etc/systemd/system.control/*\n/run/systemd/system.control/*\n/run/systemd/transient/*\n/run/systemd/generator.early/*\n/etc/systemd/system/*\n/etc/systemd/system.attached/*\n/run/systemd/system/*\n/run/systemd/system.attached/*\n/run/systemd/generator/*\nâ¦\n/usr/local/lib/systemd/system/*\n/usr/lib/systemd/system/*\n/run/systemd/generator.late/*\nUser Unit Search Path\nÂ¶\n~/.config/systemd/user.control/*\n$XDG_RUNTIME_DIR/systemd/user.control/*\n$XDG_RUNTIME_DIR/systemd/transient/*\n$XDG_RUNTIME_DIR/systemd/generator.early/*\n~/.config/systemd/user/*\n$XDG_CONFIG_DIRS/systemd/user/*\n/etc/systemd/user/*\n$XDG_RUNTIME_DIR/systemd/user/*\n/run/systemd/user/*\n$XDG_RUNTIME_DIR/systemd/generator/*\n$XDG_DATA_HOME/systemd/user/*\n$XDG_DATA_DIRS/systemd/user/*\nâ¦\n/usr/local/lib/systemd/user/*\n/usr/lib/systemd/user/*\n$XDG_RUNTIME_DIR/systemd/generator.late/*\nDescription\nÂ¶\nA unit file is a plain text ini-style file that encodes information about a service, a\nsocket, a device, a mount point, an automount point, a swap file or partition, a start-up\ntarget, a watched file system path, a timer controlled and supervised by\nsystemd\n(1)\n, a\nresource management slice or a group of externally created processes. See\nsystemd.syntax\n(7)\nfor a general description of the syntax.\nThis man page lists the common configuration options of all\nthe unit types. These options need to be configured in the [Unit]\nor [Install] sections of the unit files.\nIn addition to the generic [Unit] and [Install] sections\ndescribed here, each unit may have a type-specific section, e.g.\n[Service] for a service unit. See the respective man pages for\nmore information:\nsystemd.service\n(5)\n,\nsystemd.socket\n(5)\n,\nsystemd.device\n(5)\n,\nsystemd.mount\n(5)\n,\nsystemd.automount\n(5)\n,\nsystemd.swap\n(5)\n,\nsystemd.target\n(5)\n,\nsystemd.path\n(5)\n,\nsystemd.timer\n(5)\n,\nsystemd.slice\n(5)\n,\nsystemd.scope\n(5)\n.\nUnit files are loaded from a set of paths determined during compilation, described in the next\nsection.\nValid unit names consist of a \"unit name prefix\", and a suffix specifying the unit type which\nbegins with a dot. The \"unit name prefix\" must consist of one or more valid characters (ASCII letters,\ndigits, \"\n:\n\", \"\n-\n\", \"\n_\n\", \"\n.\n\", and\n\"\n\\\n\"). The total length of the unit name including the suffix must not exceed 255\ncharacters. The unit type suffix must be one of \"\n.service\n\", \"\n.socket\n\",\n\"\n.device\n\", \"\n.mount\n\", \"\n.automount\n\",\n\"\n.swap\n\", \"\n.target\n\", \"\n.path\n\",\n\"\n.timer\n\", \"\n.slice\n\", or \"\n.scope\n\".\nUnit names can be parameterized by a single argument called the \"instance name\". The unit is then\nconstructed based on a \"template file\" which serves as the definition of multiple services or other\nunits. A template unit must have a single \"\n@\n\" at the end of the unit name prefix (right\nbefore the type suffix). The name of the full unit is formed by inserting the instance name between\n\"\n@\n\" and the unit type suffix. In the unit file itself, the instance parameter may be\nreferred to using \"\n%i\n\" and other specifiers, see below.\nUnit files may contain additional options on top of those listed here. If systemd encounters an\nunknown option, it will write a warning log message but continue loading the unit. If an option or\nsection name is prefixed with\nX-\n, it is ignored completely by systemd. Options within an\nignored section do not need the prefix. Applications may use this to include additional information in\nthe unit files. To access those options, applications need to parse the unit files on their own.\nUnits can be aliased (have an alternative name), by creating a symlink from the new name to the\nexisting name in one of the unit search paths. For example,\nsystemd-networkd.service\nhas the alias\ndbus-org.freedesktop.network1.service\n, created during installation as\na symlink, so when\nsystemd\nis asked through D-Bus to load\ndbus-org.freedesktop.network1.service\n, it'll load\nsystemd-networkd.service\n. As another example,\ndefault.target\nâ\nthe default system target started at boot â is commonly aliased to either\nmulti-user.target\nor\ngraphical.target\nto select what is started\nby default. Alias names may be used in commands like\ndisable\n,\nstart\n,\nstop\n,\nstatus\n, and similar, and in all\nunit dependency directives, including\nWants=\n,\nRequires=\n,\nBefore=\n,\nAfter=\n. Aliases cannot be used with the\npreset\ncommand.\nAliases obey the following restrictions: a unit of a certain type (\"\n.service\n\",\n\"\n.socket\n\", â¦) can only be aliased by a name with the same type suffix. A plain unit (not\na template or an instance), may only be aliased by a plain name. A template instance may only be aliased\nby another template instance, and the instance part must be identical. A template may be aliased by\nanother template (in which case the alias applies to all instances of the template). As a special case, a\ntemplate instance (e.g. \"\nalias@inst.service\n\") may be a symlink to different template\n(e.g. \"\ntemplate@inst.service\n\"). In that case, just this specific instance is aliased,\nwhile other instances of the template (e.g. \"\nalias@foo.service\n\",\n\"\nalias@bar.service\n\") are not aliased. Those rules preserve the requirement that the\ninstance (if any) is always uniquely defined for a given unit and all its aliases. The target of alias\nsymlink must point to a valid unit file location, i.e. the symlink target name must match the symlink\nsource name as described, and the destination path must be in one of the unit search paths, see UNIT FILE\nLOAD PATH section below for more details. Note that the target file might not exist, i.e. the symlink may\nbe dangling.\nUnit files may specify aliases through the\nAlias=\ndirective in the [Install]\nsection. When the unit is enabled, symlinks will be created for those names, and removed when the unit is\ndisabled. For example,\nreboot.target\nspecifies\nAlias=ctrl-alt-del.target\n, so when enabled, the symlink\n/etc/systemd/system/ctrl-alt-del.target\npointing to the\nreboot.target\nfile will be created, and when\nCtrl\n+\nAlt\n+\nDel\nis invoked,\nsystemd\nwill look for\nctrl-alt-del.target\n, follow the symlink to\nreboot.target\n, and execute\nreboot.service\nas part of that target.\nsystemd\ndoes not look at the [Install] section at all during normal operation, so any\ndirectives in that section only have an effect through the symlinks created during enablement.\nAlong with a unit file\nfoo.service\n, the directory\nfoo.service.wants/\nmay exist. All unit files symlinked from such a directory are\nimplicitly added as dependencies of type\nWants=\nto the unit. Similar functionality\nexists for\nRequires=\ntype dependencies as well, the directory suffix is\n.requires/\nin this case. This functionality is useful to hook units into the\nstart-up of other units, without having to modify their unit files. For details about the semantics of\nWants=\nand\nRequires=\n, see below. The preferred way to create\nsymlinks in the\n.wants/\nor\n.requires/\ndirectories is by\nspecifying the dependency in [Install] section of the target unit, and creating the symlink in the file\nsystem with the\nenable\nor\npreset\ncommands of\nsystemctl\n(1)\n.  The\ntarget can be a normal unit (either plain or a specific instance of a template unit). In case when the\nsource unit is a template, the target can also be a template, in which case the instance will be\n\"propagated\" to the target unit to form a valid unit instance. The target of symlinks in\n.wants/\nor\n.requires/\nmust thus point to a valid unit file\nlocation, i.e. the symlink target name must satisfy the described requirements, and the destination path\nmust be in one of the unit search paths, see UNIT FILE LOAD PATH section below for more details. Note\nthat the target file might not exist, i.e. the symlink may be dangling.\nAlong with a unit file\nfoo.service\n, a \"drop-in\" directory\nfoo.service.d/\nmay exist. All files with the suffix\n\"\n.conf\n\" from this directory will be merged in the alphanumeric order and parsed\nafter the main unit file itself has been parsed. This is useful to alter or add configuration\nsettings for a unit, without having to modify unit files. Each drop-in file must contain appropriate\nsection headers. For instantiated units, this logic will first look for the instance\n\"\n.d/\n\" subdirectory (e.g. \"\nfoo@bar.service.d/\n\") and read its\n\"\n.conf\n\" files, followed by the template \"\n.d/\n\" subdirectory (e.g.\n\"\nfoo@.service.d/\n\") and the \"\n.conf\n\" files there. Moreover, for unit\nnames containing dashes (\"\n-\n\"), the set of directories generated by repeatedly\ntruncating the unit name after all dashes is searched too. Specifically, for a unit name\nfoo-bar-baz.service\nnot only the regular drop-in directory\nfoo-bar-baz.service.d/\nis searched but also both\nfoo-bar-.service.d/\nand\nfoo-.service.d/\n. This is useful for defining common drop-ins for a set of related units, whose\nnames begin with a common prefix. This scheme is particularly useful for mount, automount and slice units, whose\nsystematic naming structure is built around dashes as component separators. Note that equally named drop-in files\nfurther down the prefix hierarchy override those further up,\ni.e.\nfoo-bar-.service.d/10-override.conf\noverrides\nfoo-.service.d/10-override.conf\n.\nIn cases of unit aliases (described above), dropins for the aliased name and all aliases are\nloaded. In the example of\ndefault.target\naliasing\ngraphical.target\n,\ndefault.target.d/\n,\ndefault.target.wants/\n,\ndefault.target.requires/\n,\ngraphical.target.d/\n,\ngraphical.target.wants/\n,\ngraphical.target.requires/\nwould all be read. For templates, dropins for the\ntemplate, any template aliases, the template instance, and all alias instances are read. When just a\nspecific template instance is aliased, then the dropins for the target template, the target template\ninstance, and the alias template instance are read.\nIn addition to\n/etc/systemd/system\n, the drop-in \"\n.d/\n\"\ndirectories for system services can be placed in\n/usr/lib/systemd/system\nor\n/run/systemd/system\ndirectories. Drop-in files in\n/etc/\ntake precedence over those in\n/run/\nwhich in turn take precedence over those\nin\n/usr/lib/\n. Drop-in files under any of these directories take precedence\nover unit files wherever located. Multiple drop-in files with different names are applied in\nlexicographic order, regardless of which of the directories they reside in.\nUnits also support a top-level drop-in with\ntype\n.d/\n,\nwhere\ntype\nmay be e.g. \"\nservice\n\" or \"\nsocket\n\",\nthat allows altering or adding to the settings of all corresponding unit files on the system.\nThe formatting and precedence of applying drop-in configurations follow what is defined above.\nFiles in\ntype\n.d/\nhave lower precedence compared\nto files in name-specific override directories. The usual rules apply: multiple drop-in files\nwith different names are applied in lexicographic order, regardless of which of the directories\nthey reside in, so a file in\ntype\n.d/\napplies\nto a unit only if there are no drop-ins or masks with that name in directories with higher\nprecedence. See Examples.\nNote that while systemd offers a flexible dependency system\nbetween units it is recommended to use this functionality only\nsparingly and instead rely on techniques such as bus-based or\nsocket-based activation which make dependencies implicit,\nresulting in a both simpler and more flexible system.\nAs mentioned above, a unit may be instantiated from a template file. This allows creation\nof multiple units from a single configuration file. If systemd looks for a unit configuration\nfile, it will first search for the literal unit name in the file system. If that yields no\nsuccess and the unit name contains an \"\n@\n\" character, systemd will look for a\nunit template that shares the same name but with the instance string (i.e. the part between the\n\"\n@\n\" character and the suffix) removed. Example: if a service\ngetty@tty3.service\nis requested and no file by that name is found, systemd\nwill look for\ngetty@.service\nand instantiate a service from that\nconfiguration file if it is found.\nTo refer to the instance string from within the\nconfiguration file you may use the special \"\n%i\n\"\nspecifier in many of the configuration options. See below for\ndetails.\nIf a unit file is empty (i.e. has the file size 0) or is\nsymlinked to\n/dev/null\n, its configuration\nwill not be loaded and it appears with a load state of\n\"\nmasked\n\", and cannot be activated. Use this as an\neffective way to fully disable a unit, making it impossible to\nstart it even manually.\nThe unit file format is covered by the\nInterface\nPortability and Stability Promise\n.\nString Escaping for Inclusion in Unit Names\nÂ¶\nSometimes it is useful to convert arbitrary strings into unit names. To facilitate this, a method of string\nescaping is used, in order to map strings containing arbitrary byte values (except\nNUL\n) into\nvalid unit names and their restricted character set. A common special case are unit names that reflect paths to\nobjects in the file system hierarchy. Example: a device unit\ndev-sda.device\nrefers to a device\nwith the device node\n/dev/sda\nin the file system.\nThe escaping algorithm operates as follows: given a string, any \"\n/\n\" character is\nreplaced by \"\n-\n\", and all other characters which are not ASCII alphanumerics,\n\"\n:\n\", \"\n_\n\" or \"\n.\n\" are replaced by C-style\n\"\n\\x2d\n\" escapes. In addition, \"\n.\n\" is replaced with such a C-style escape\nwhen it would appear as the first character in the escaped string.\nWhen the input qualifies as absolute file system path, this algorithm is extended slightly: the path to the\nroot directory \"\n/\n\" is encoded as single dash \"\n-\n\". In addition, any leading,\ntrailing or duplicate \"\n/\n\" characters are removed from the string before transformation. Example:\n/foo//bar/baz/\nbecomes \"\nfoo-bar-baz\n\".\nThis escaping is fully reversible, as long as it is known whether the escaped string was a path (the\nunescaping results are different for paths and non-path strings). The\nsystemd-escape\n(1)\ncommand may be\nused to apply and reverse escaping on arbitrary strings. Use\nsystemd-escape --path\nto escape\npath strings, and\nsystemd-escape\nwithout\n--path\notherwise.\nAutomatic dependencies\nÂ¶\nImplicit Dependencies\nÂ¶\nA number of unit dependencies are implicitly established, depending on unit type and\nunit configuration. These implicit dependencies can make unit configuration file cleaner. For\nthe implicit dependencies in each unit type, please refer to section \"Implicit Dependencies\"\nin respective man pages.\nFor example, service units with\nType=dbus\nautomatically acquire\ndependencies of type\nRequires=\nand\nAfter=\non\ndbus.socket\n. See\nsystemd.service\n(5)\nfor details.\nDefault Dependencies\nÂ¶\nDefault dependencies are similar to implicit dependencies, but can be turned on and off\nby setting\nDefaultDependencies=\nto\nyes\n(the default) and\nno\n, while implicit dependencies are always in effect. See section \"Default\nDependencies\" in respective man pages for the effect of enabling\nDefaultDependencies=\nin each unit types.\nFor example, target units will complement all configured dependencies of type\nWants=\nor\nRequires=\nwith dependencies of type\nAfter=\n. See\nsystemd.target\n(5)\nfor details. Note that this behavior can be opted out by setting\nDefaultDependencies=no\nin the specified units, or it can be selectively\noverridden via an explicit\nBefore=\ndependency.\nUnit File Load Path\nÂ¶\nUnit files are loaded from a set of paths determined during\ncompilation, described in the two tables below. Unit files found\nin directories listed earlier override files with the same name in\ndirectories lower in the list\n[1]\n.\nWhen the variable\n$SYSTEMD_UNIT_PATH\nis set,\nthe contents of this variable overrides the unit load path. If\n$SYSTEMD_UNIT_PATH\nends with an empty component\n(\"\n:\n\"), the usual unit load path will be appended\nto the contents of the variable.\nTableÂ 1.Â\nLoad path when running in system mode (\n--system\n).\nPath\nDescription\n/etc/systemd/system.control\nPersistent and transient configuration created using the dbus API\n/run/systemd/system.control\n/run/systemd/transient\nDynamic configuration for transient units\n/run/systemd/generator.early\nGenerated units with high priority (see\nearly-dir\nin\nsystemd.generator\n(7)\n)\n/etc/systemd/system\nSystem units created by the administrator\n/run/systemd/system\nRuntime units\n/run/systemd/generator\nGenerated units with medium priority (see\nnormal-dir\nin\nsystemd.generator\n(7)\n)\n/usr/local/lib/systemd/system\nSystem units installed by the administrator\n/usr/lib/systemd/system\nSystem units installed by the distribution package manager\n/run/systemd/generator.late\nGenerated units with low priority (see\nlate-dir\nin\nsystemd.generator\n(7)\n)\nTableÂ 2.Â\nLoad path when running in user mode (\n--user\n).\nPath\nDescription\n$XDG_CONFIG_HOME/systemd/user.control\nor\n~/.config/systemd/user.control\nPersistent and transient configuration created using the dbus API (\n$XDG_CONFIG_HOME\nis used if set,\n~/.config\notherwise)\n$XDG_RUNTIME_DIR/systemd/user.control\n$XDG_RUNTIME_DIR/systemd/transient\nDynamic configuration for transient units\n$XDG_RUNTIME_DIR/systemd/generator.early\nGenerated units with high priority (see\nearly-dir\nin\nsystemd.generator\n(7)\n)\n$XDG_CONFIG_HOME/systemd/user\nor\n$HOME/.config/systemd/user\nUser configuration (\n$XDG_CONFIG_HOME\nis used if set,\n~/.config\notherwise)\n$XDG_CONFIG_DIRS/systemd/user\nor\n/etc/xdg/systemd/user\nAdditional configuration directories as specified by the XDG base directory specification (\n$XDG_CONFIG_DIRS\nis used if set,\n/etc/xdg\notherwise)\n/etc/systemd/user\nUser units created by the administrator\n$XDG_RUNTIME_DIR/systemd/user\nRuntime units (only used when $XDG_RUNTIME_DIR is set)\n/run/systemd/user\nRuntime units\n$XDG_RUNTIME_DIR/systemd/generator\nGenerated units with medium priority (see\nnormal-dir\nin\nsystemd.generator\n(7)\n)\n$XDG_DATA_HOME/systemd/user\nor\n$HOME/.local/share/systemd/user\nUnits of packages that have been installed in the home directory (\n$XDG_DATA_HOME\nis used if set,\n~/.local/share\notherwise)\n$XDG_DATA_DIRS/systemd/user\nor\n/usr/local/share/systemd/user\nand\n/usr/share/systemd/user\nAdditional data directories as specified by the XDG base directory specification (\n$XDG_DATA_DIRS\nis used if set,\n/usr/local/share\nand\n/usr/share\notherwise)\n$dir/systemd/user\nfor each\n$dir\nin\n$XDG_DATA_DIRS\nAdditional locations for installed user units, one for each entry in\n$XDG_DATA_DIRS\n/usr/local/lib/systemd/user\nUser units installed by the administrator\n/usr/lib/systemd/user\nUser units installed by the distribution package manager\n$XDG_RUNTIME_DIR/systemd/generator.late\nGenerated units with low priority (see\nlate-dir\nin\nsystemd.generator\n(7)\n)\nThe set of load paths for the user manager instance may be augmented or\nchanged using various environment variables. And environment variables may in\nturn be set using environment generators, see\nsystemd.environment-generator\n(7)\n.\nIn particular,\n$XDG_DATA_HOME\nand\n$XDG_DATA_DIRS\nmay be easily set using\nsystemd-environment-d-generator\n(8)\n.\nThus, directories listed here are just the defaults. To see the actual list that\nwould be used based on compilation options and current environment use\nsystemd-analyze --user unit-paths\nMoreover, additional units might be loaded into systemd from directories not on the unit load path\nby creating a symlink pointing to a unit file in the directories. You can use\nsystemctl\nlink\nfor this; see\nsystemctl\n(1)\n. The file\nsystem where the linked unit files are located must be accessible when systemd is started (e.g. anything\nunderneath\n/home/\nor\n/var/\nis not allowed, unless those\ndirectories are located on the root file system).\nIt is important to distinguish \"linked unit files\" from \"unit file aliases\": any symlink where the\nsymlink\ntarget\nis within the unit load path becomes an alias: the source name and\nthe target file name must satisfy specific constraints listed above in the discussion of aliases, but the\nsymlink target does not have to exist, and in fact the symlink target path is not used, except to check\nwhether the target is within the unit load path. In contrast, a symlink which goes outside of the unit\nload path signifies a linked unit file. The symlink is followed when loading the file, but the\ndestination name is otherwise unused (and may even not be a valid unit file name). For example, symlinks\n/etc/systemd/system/alias1.service\nâ\nservice1.service\n,\n/etc/systemd/system/alias2.service\nâ\n/usr/lib/systemd/service1.service\n,\n/etc/systemd/system/alias3.service\nâ\n/etc/systemd/system/service1.service\nare all valid aliases and\nservice1.service\nwill have\nfour names, even if the unit file is located at\n/run/systemd/system/service1.service\n. In contrast,\na symlink\n/etc/systemd/system/link1.service\nâ\n../link1_service_file\nmeans that\nlink1.service\nis a \"linked unit\" and the contents of\n/etc/systemd/link1_service_file\nprovide its configuration.\nUnit Garbage Collection\nÂ¶\nThe system and service manager loads a unit's configuration automatically when a unit is referenced for the\nfirst time. It will automatically unload the unit configuration and state again when the unit is not needed anymore\n(\"garbage collection\"). A unit may be referenced through a number of different mechanisms:\nAnother loaded unit references it with a dependency such as\nAfter=\n,\nWants=\n, â¦\nThe unit is currently starting, running, reloading or stopping.\nThe unit is currently in the\nfailed\nstate. (But see below.)\nA job for the unit is pending.\nThe unit is pinned by an active IPC client program.\nThe unit is a special \"perpetual\" unit that is always active and loaded. Examples for perpetual\nunits are the root mount unit\n-.mount\nor the scope unit\ninit.scope\nthat\nthe service manager itself lives in.\nThe unit has running processes associated with it.\nThe garbage collection logic may be altered with the\nCollectMode=\noption, which allows\nconfiguration whether automatic unloading of units that are in\nfailed\nstate is permissible,\nsee below.\nNote that when a unit's configuration and state is unloaded, all execution results, such as exit codes, exit\nsignals, resource consumption and other statistics are lost, except for what is stored in the log subsystem.\nUse\nsystemctl daemon-reload\nor an equivalent command to reload unit configuration while\nthe unit is already loaded. In this case, all configuration settings are flushed out and replaced with the new\nconfiguration (which however might not be in effect immediately), however all runtime state is\nsaved/restored.\n[Unit] Section Options\nÂ¶\nThe unit file may include a [Unit] section, which carries\ngeneric information about the unit that is not dependent on the\ntype of unit:\nDescription=\nÂ¶\nA brief, meaningful, human-readable text identifying the unit. This may be used by\nsystemd\n(and suitable UIs) as a user-visible label for the unit, so this string\nshould identify the unit rather than just describe it, despite the name. This string also should not\njust repeat the unit name. \"\nApache HTTP Server\n\" or \"\nPostfix Mail\nServer\n\" are good examples. Bad examples are \"\nhigh-performance lightweight HTTP\nserver\n\" (too generic) or \"\nApache\n\" (meaningless for people who do not know\nthe Apache HTTP server project, duplicates the unit name).\nsystemd\nmay use this\nstring as a noun in status messages (\"\nStarting\nDescription\n...\n\", \"\nStarted\nDescription\n.\n\", \"\nReached target\nDescription\n.\n\", \"\nFailed to start\nDescription\n.\n\"), so it should be capitalized, and should not be a\nfull sentence, or a phrase with a verb conjugated in the present continuous, or end in a full\nstop. Bad examples include \"\nexiting the container\n\", \"\nupdating the database\nonce per day.\n\", or \"\nOpenSSH server second instance daemon\n\".\nAdded in version 201.\nDocumentation=\nÂ¶\nA space-separated list of URIs referencing\ndocumentation for this unit or its configuration. Accepted are\nonly URIs of the types \"\nhttp://\n\",\n\"\nhttps://\n\", \"\nfile:\n\",\n\"\ninfo:\n\", \"\nman:\n\". For more\ninformation about the syntax of these URIs, see\nuri\n(7)\n.\nThe URIs should be listed in order of relevance, starting with\nthe most relevant. It is a good idea to first reference\ndocumentation that explains what the unit's purpose is,\nfollowed by how it is configured, followed by any other\nrelated documentation. This option may be specified more than\nonce, in which case the specified list of URIs is merged. If\nthe empty string is assigned to this option, the list is reset\nand all prior assignments will have no\neffect.\nAdded in version 201.\nWants=\nÂ¶\nConfigures (weak) requirement dependencies on other units. This option may be\nspecified more than once or multiple space-separated units may be specified in one option in which\ncase dependencies for all listed names will be created. Dependencies of this type may also be\nconfigured outside of the unit configuration file by adding a symlink to a\n.wants/\ndirectory accompanying the unit file. For details, see above.\nUnits listed in this option will be started if the configuring unit is. However, if the listed\nunits fail to start or cannot be added to the transaction, this has no impact on the validity of the\ntransaction as a whole, and this unit will still be started. This is the recommended way to hook\nthe start-up of one unit to the start-up of another unit.\nNote that requirement dependencies do not influence the order in which services are started or\nstopped. This has to be configured independently with the\nAfter=\nor\nBefore=\noptions. If unit\nfoo.service\npulls in unit\nbar.service\nas configured with\nWants=\nand no ordering is\nconfigured with\nAfter=\nor\nBefore=\n, then both units will be\nstarted simultaneously and without any delay between them if\nfoo.service\nis\nactivated.\nAdded in version 201.\nRequires=\nÂ¶\nSimilar to\nWants=\n, but declares a stronger requirement\ndependency. Dependencies of this type may also be configured by adding a symlink to a\n.requires/\ndirectory accompanying the unit file.\nIf this unit gets activated, the units listed will be activated as well. If one of\nthe other units fails to activate, and an ordering dependency\nAfter=\non the\nfailing unit is set, this unit will not be started. Besides, with or without specifying\nAfter=\n, this unit will be stopped (or restarted) if one of the other units is\nexplicitly stopped (or restarted).\nOften, it is a better choice to use\nWants=\ninstead of\nRequires=\nin order to achieve a system that is more robust when dealing with\nfailing services.\nNote that this dependency type does not imply that the other unit always has to be in active state when\nthis unit is running. Specifically: failing condition checks (such as\nConditionPathExists=\n,\nConditionPathIsSymbolicLink=\n, â¦ â see below) do not cause the start job of a unit with a\nRequires=\ndependency on it to fail. Also, some unit types may deactivate on their own (for\nexample, a service process may decide to exit cleanly, or a device may be unplugged by the user), which is not\npropagated to units having a\nRequires=\ndependency. Use the\nBindsTo=\ndependency type together with\nAfter=\nto ensure that a unit may never be in active state\nwithout a specific other unit also in active state (see below).\nAdded in version 201.\nRequisite=\nÂ¶\nSimilar to\nRequires=\n. However, if the units listed here\nare not started already, they will not be started and the starting of this unit will fail\nimmediately.\nRequisite=\ndoes not imply an ordering dependency, even if\nboth units are started in the same transaction. Hence this setting should usually be\ncombined with\nAfter=\n, to ensure this unit is not started before the other\nunit.\nWhen\nRequisite=b.service\nis used on\na.service\n, this dependency will show as\nRequisiteOf=a.service\nin property listing of\nb.service\n.\nRequisiteOf=\ndependency cannot be specified directly.\nAdded in version 201.\nBindsTo=\nÂ¶\nConfigures requirement dependencies, very similar in style to\nRequires=\n. However, this dependency type is stronger: in addition to the effect of\nRequires=\nit declares that if the unit bound to is stopped, this unit will be stopped\ntoo. This means a unit bound to another unit that suddenly enters inactive state will be stopped too.\nUnits can suddenly, unexpectedly enter inactive state for different reasons: the main process of a service unit\nmight terminate on its own choice, the backing device of a device unit might be unplugged or the mount point of\na mount unit might be unmounted without involvement of the system and service manager.\nWhen used in conjunction with\nAfter=\non the same unit the behaviour of\nBindsTo=\nis even stronger. In this case, the unit bound to strictly has to be in active\nstate for this unit to also be in active state. This not only means a unit bound to another unit that suddenly\nenters inactive state, but also one that is bound to another unit that gets skipped due to an unmet condition\ncheck (such as\nConditionPathExists=\n,\nConditionPathIsSymbolicLink=\n, â¦ â\nsee below) will be stopped, should it be running. Hence, in many cases it is best to combine\nBindsTo=\nwith\nAfter=\n.\nWhen\nBindsTo=b.service\nis used on\na.service\n, this dependency will show as\nBoundBy=a.service\nin property listing of\nb.service\n.\nBoundBy=\ndependency cannot be specified directly.\nAdded in version 201.\nPartOf=\nÂ¶\nConfigures dependencies similar to\nRequires=\n, but limited to stopping and\nrestarting of units. When systemd stops or restarts the units\nlisted here, the action is propagated to this unit. Note that\nthis is a one-way dependencyÂ â changes to this unit do not\naffect the listed units.\nWhen\nPartOf=b.service\nis used on\na.service\n, this dependency will show as\nConsistsOf=a.service\nin property listing of\nb.service\n.\nConsistsOf=\ndependency cannot be specified directly.\nAdded in version 201.\nUpholds=\nÂ¶\nConfigures dependencies similar to\nWants=\n, but as long as this unit\nis up, all units listed in\nUpholds=\nare started whenever found to be inactive or\nfailed, and no job is queued for them. While a\nWants=\ndependency on another unit\nhas a one-time effect when this units started, a\nUpholds=\ndependency on it has a\ncontinuous effect, constantly restarting the unit if necessary. This is an alternative to the\nRestart=\nsetting of service units, to ensure they are kept running whatever\nhappens. The restart happens without delay, and usual per-unit rate-limit applies.\nWhen\nUpholds=b.service\nis used on\na.service\n, this\ndependency will show as\nUpheldBy=a.service\nin the property listing of\nb.service\n.\nAdded in version 249.\nConflicts=\nÂ¶\nA space-separated list of unit names. Configures negative requirement\ndependencies. If a unit has a\nConflicts=\nrequirement on a set of other units,\nthen starting it will stop all of them and starting any of them will stop it.\nNote that this setting does not imply an ordering dependency, similarly to the\nWants=\nand\nRequires=\ndependencies described above. This means\nthat to ensure that the conflicting unit is stopped before the other unit is started, an\nAfter=\nor\nBefore=\ndependency must be declared. It does not\nmatter which of the two ordering dependencies is used, because stop jobs are always ordered before\nstart jobs, see the discussion in\nBefore=\n/\nAfter=\nbelow.\nIf unit A that conflicts with unit B is scheduled to\nbe started at the same time as B, the transaction will either\nfail (in case both are required parts of the transaction) or be\nmodified to be fixed (in case one or both jobs are not a\nrequired part of the transaction). In the latter case, the job\nthat is not required will be removed, or in case both are\nnot required, the unit that conflicts will be started and the\nunit that is conflicted is stopped.\nAdded in version 201.\nBefore=\n,\nAfter=\nÂ¶\nThese two settings expect a space-separated list of unit names. They may be specified\nmore than once, in which case dependencies for all listed names are created.\nThose two settings configure ordering dependencies between units. If unit\nfoo.service\ncontains the setting\nBefore=bar.service\nand both\nunits are being started,\nbar.service\n's start-up is delayed until\nfoo.service\nhas finished starting up.\nAfter=\nis the inverse\nof\nBefore=\n, i.e. while\nBefore=\nensures that the configured unit\nis started before the listed unit begins starting up,\nAfter=\nensures the opposite,\nthat the listed unit is fully started up before the configured unit is started.\nWhen two units with an ordering dependency between them are shut down, the inverse of the\nstart-up order is applied. I.e. if a unit is configured with\nAfter=\non another\nunit, the former is stopped before the latter if both are shut down. Given two units with any\nordering dependency between them, if one unit is shut down and the other is started up, the shutdown\nis ordered before the start-up. It does not matter if the ordering dependency is\nAfter=\nor\nBefore=\n, in this case. It also does not matter which\nof the two is shut down, as long as one is shut down and the other is started up; the shutdown is\nordered before the start-up in all cases. If two units have no ordering dependencies between them,\nthey are shut down or started up simultaneously, and no ordering takes place. It depends on the unit\ntype when precisely a unit has finished starting up. Most importantly, for service units start-up is\nconsidered completed for the purpose of\nBefore=\n/\nAfter=\nwhen all\nits configured start-up commands have been invoked and they either failed or reported start-up\nsuccess. Note that this includes\nExecStartPost=\n(or\nExecStopPost=\nfor the shutdown case).\nNote that those settings are independent of and orthogonal to the requirement dependencies as\nconfigured by\nRequires=\n,\nWants=\n,\nRequisite=\n,\nor\nBindsTo=\n. It is a common pattern to include a unit name in both the\nAfter=\nand\nWants=\noptions, in which case the unit listed will\nbe started before the unit that is configured with these options.\nNote that\nBefore=\ndependencies on device units have no effect and are not\nsupported.  Devices generally become available as a result of an external hotplug event, and systemd\ncreates the corresponding device unit without delay.\nAdded in version 201.\nOnFailure=\nÂ¶\nA space-separated list of one or more units that are activated when this unit enters\nthe \"\nfailed\n\" state.\nAdded in version 201.\nOnSuccess=\nÂ¶\nA space-separated list of one or more units that are activated when this unit enters\nthe \"\ninactive\n\" state.\nAdded in version 249.\nPropagatesReloadTo=\n,\nReloadPropagatedFrom=\nÂ¶\nA space-separated list of one or more units to which reload requests from this unit\nshall be propagated to, or units from which reload requests shall be propagated to this unit,\nrespectively. Issuing a reload request on a unit will automatically also enqueue reload requests on\nall units that are linked to it using these two settings.\nAdded in version 201.\nPropagatesStopTo=\n,\nStopPropagatedFrom=\nÂ¶\nA space-separated list of one or more units to which stop requests from this unit\nshall be propagated to, or units from which stop requests shall be propagated to this unit,\nrespectively. Issuing a stop request on a unit will automatically also enqueue stop requests on all\nunits that are linked to it using these two settings.\nAdded in version 249.\nJoinsNamespaceOf=\nÂ¶\nFor units that start processes (such as service units), lists one or more other units\nwhose network and/or temporary file namespace to join. If this is specified on a unit (say,\na.service\nhas\nJoinsNamespaceOf=b.service\n), then the inverse\ndependency (\nJoinsNamespaceOf=a.service\nfor b.service) is implied. This only\napplies to unit types which support the\nPrivateNetwork=\n,\nNetworkNamespacePath=\n,\nPrivateIPC=\n,\nIPCNamespacePath=\n, and\nPrivateTmp=\ndirectives (see\nsystemd.exec\n(5)\nfor\ndetails). If a unit that has this setting set is started, its processes will see the same\n/tmp/\n,\n/var/tmp/\n, IPC namespace and network namespace as\none listed unit that is started. If multiple listed units are already started and these do not share\ntheir namespace, then it is not defined which namespace is joined. Note that this setting only has an\neffect if\nPrivateNetwork=\n/\nNetworkNamespacePath=\n,\nPrivateIPC=\n/\nIPCNamespacePath=\nand/or\nPrivateTmp=\nis enabled for both the unit that joins the namespace and the unit\nwhose namespace is joined.\nAdded in version 209.\nRequiresMountsFor=\nÂ¶\nTakes a space-separated list of absolute\npaths. Automatically adds dependencies of type\nRequires=\nand\nAfter=\nfor\nall mount units required to access the specified path.\nMount points marked with\nnoauto\nare not\nmounted automatically through\nlocal-fs.target\n,\nbut are still honored for the purposes of this option, i.e. they\nwill be pulled in by this unit.\nAdded in version 201.\nWantsMountsFor=\nÂ¶\nSame as\nRequiresMountsFor=\n,\nbut adds dependencies of type\nWants=\ninstead\nof\nRequires=\n.\nAdded in version 256.\nOnSuccessJobMode=\n,\nOnFailureJobMode=\nÂ¶\nTakes a value of\n\"\nfail\n\",\n\"\nreplace\n\",\n\"\nreplace-irreversibly\n\",\n\"\nisolate\n\",\n\"\nflush\n\",\n\"\nignore-dependencies\n\" or\n\"\nignore-requirements\n\". Defaults to\n\"\nreplace\n\". Specifies how the units listed in\nOnSuccess=\n/\nOnFailure=\nwill be enqueued. See\nsystemctl\n(1)\n's\n--job-mode=\noption for details on the\npossible values. If this is set to \"\nisolate\n\",\nonly a single unit may be listed in\nOnSuccess=\n/\nOnFailure=\n.\nAdded in version 209.\nIgnoreOnIsolate=\nÂ¶\nTakes a boolean argument. If\ntrue\n, this unit will not be stopped\nwhen isolating another unit. Defaults to\nfalse\nfor service, target, socket, timer,\nand path units, and\ntrue\nfor slice, scope, device, swap, mount, and automount\nunits.\nAdded in version 201.\nStopWhenUnneeded=\nÂ¶\nTakes a boolean argument. If\ntrue\n, this unit will be stopped when it is no\nlonger used. Note that, in order to minimize the work to be\nexecuted, systemd will not stop units by default unless they\nare conflicting with other units, or the user explicitly\nrequested their shut down. If this option is set, a unit will\nbe automatically cleaned up if no other active unit requires\nit. Defaults to\nfalse\n.\nAdded in version 201.\nRefuseManualStart=\n,\nRefuseManualStop=\nÂ¶\nTakes a boolean argument. If\ntrue\n, this unit can only be activated or\ndeactivated indirectly. In this case, explicit start-up or\ntermination requested by the user is denied, however if it is\nstarted or stopped as a dependency of another unit, start-up\nor termination will succeed. This is mostly a safety feature\nto ensure that the user does not accidentally activate units\nthat are not intended to be activated explicitly, and not\naccidentally deactivate units that are not intended to be\ndeactivated. These options default to\nfalse\n.\nAdded in version 201.\nAllowIsolate=\nÂ¶\nTakes a boolean argument. If\ntrue\n, this unit may be used with the\nsystemctl isolate\ncommand. Otherwise, this\nwill be refused. It probably is a good idea to leave this\ndisabled except for target units that shall be used similar to\nrunlevels in SysV init systems, just as a precaution to avoid\nunusable system states. This option defaults to\nfalse\n.\nAdded in version 201.\nDefaultDependencies=\nÂ¶\nTakes a boolean argument. If\nyes\n, (the default), a few default\ndependencies will implicitly be created for the unit. The\nactual dependencies created depend on the unit type. For\nexample, for service units, these dependencies ensure that the\nservice is started only after basic system initialization is\ncompleted and is properly terminated on system shutdown. See\nthe respective man pages for details. Generally, only services\ninvolved with early boot or late shutdown should set this\noption to\nno\n. It is highly recommended to\nleave this option enabled for the majority of common units. If\nset to\nno\n, this option does not disable\nall implicit dependencies, just non-essential\nones.\nAdded in version 201.\nSurviveFinalKillSignal=\nÂ¶\nTakes a boolean argument. Defaults to\nno\n. If\nyes\n,\nprocesses belonging to this unit will not be sent the final \"\nSIGTERM\n\" and\n\"\nSIGKILL\n\" signals during the final phase of the system shutdown process.\nThis functionality replaces the older mechanism that allowed a program to set\n\"\nargv[0][0] = '@'\n\" as described at\nsystemd and Storage Daemons for the Root File\nSystem\n, which however continues to be supported.\nAdded in version 255.\nCollectMode=\nÂ¶\nTweaks the \"garbage collection\" algorithm for this unit. Takes one of\ninactive\nor\ninactive-or-failed\n. If set to\ninactive\nthe unit will be unloaded if it is\nin the\ninactive\nstate and is not referenced by clients, jobs or other units â however it\nis not unloaded if it is in the\nfailed\nstate. In\nfailed\nmode, failed\nunits are not unloaded until the user invoked\nsystemctl reset-failed\non them to reset the\nfailed\nstate, or an equivalent command. This behaviour is altered if this option is set to\ninactive-or-failed\n: in this case, the unit is unloaded even if the unit is in a\nfailed\nstate, and thus an explicitly resetting of the\nfailed\nstate is\nnot necessary. Note that if this mode is used unit results (such as exit codes, exit signals, consumed\nresources, â¦) are flushed out immediately after the unit completed, except for what is stored in the logging\nsubsystem. Defaults to\ninactive\n.\nAdded in version 236.\nFailureAction=\n,\nSuccessAction=\nÂ¶\nConfigure the action to take when the unit stops and enters a failed state or\ninactive state.  Takes one of\nnone\n,\nreboot\n,\nreboot-force\n,\nreboot-immediate\n,\npoweroff\n,\npoweroff-force\n,\npoweroff-immediate\n,\nexit\n,\nexit-force\n,\nsoft-reboot\n,\nsoft-reboot-force\n,\nkexec\n,\nkexec-force\n,\nhalt\n,\nhalt-force\nand\nhalt-immediate\n. In system mode, all options are\nallowed. In user mode, only\nnone\n,\nexit\n, and\nexit-force\nare allowed. Both options default to\nnone\n.\nIf\nnone\nis set, no action will be triggered.\nreboot\ncauses a\nreboot following the normal shutdown procedure (i.e. equivalent to\nsystemctl\nreboot\n).\nreboot-force\ncauses a forced reboot which will terminate all\nprocesses forcibly but should cause no dirty file systems on reboot (i.e. equivalent to\nsystemctl reboot -f\n) and\nreboot-immediate\ncauses immediate\nexecution of the\nreboot\n(2)\nsystem\ncall, which might result in data loss (i.e. equivalent to\nsystemctl reboot -ff\n).\nSimilarly,\npoweroff\n,\npoweroff-force\n,\npoweroff-immediate\n,\nkexec\n,\nkexec-force\n,\nhalt\n,\nhalt-force\nand\nhalt-immediate\nhave the\neffect of powering down the system, executing kexec, and halting the system respectively with similar\nsemantics.\nexit\ncauses the manager to exit following the normal shutdown procedure,\nand\nexit-force\ncauses it terminate without shutting down services. When\nexit\nor\nexit-force\nis used by default the exit status of the main\nprocess of the unit (if this applies) is returned from the service manager. However, this may be\noverridden with\nFailureActionExitStatus=\n/\nSuccessActionExitStatus=\n, see below.\nsoft-reboot\nwill trigger a userspace reboot operation.\nsoft-reboot-force\ndoes that too, but does not go through the shutdown transaction\nbeforehand.\nAdded in version 236.\nFailureActionExitStatus=\n,\nSuccessActionExitStatus=\nÂ¶\nControls the exit status to propagate back to an invoking container manager (in case of a\nsystem service) or service manager (in case of a user manager) when the\nFailureAction=\n/\nSuccessAction=\nare set to\nexit\nor\nexit-force\nand the action is triggered. By default, the exit status of the main process of the\ntriggering unit (if this applies) is propagated. Takes a value in the range 0â¦255 or the empty string to\nrequest default behaviour.\nAdded in version 240.\nJobTimeoutSec=\n,\nJobRunningTimeoutSec=\nÂ¶\nJobTimeoutSec=\nspecifies a timeout for the whole job that starts\nrunning when the job is queued.\nJobRunningTimeoutSec=\nspecifies a timeout that\nstarts running when the queued job is actually started. If either limit is reached, the job will be\ncancelled, the unit however will not change state or even enter the \"\nfailed\n\" mode.\nBoth settings take a time span with the default unit of seconds, but other units may be\nspecified, see\nsystemd.time\n(7)\n.\nThe default is \"\ninfinity\n\" (job timeouts disabled), except for device units where\nJobRunningTimeoutSec=\ndefaults to\nDefaultDeviceTimeoutSec=\n.\nNote: these timeouts are independent from any unit-specific timeouts (for example, the timeout\nset with\nTimeoutStartSec=\nin service units). The job timeout has no effect on the\nunit itself. Or in other words: unit-specific timeouts are useful to abort unit state changes, and\nrevert them. The job timeout set with this option however is useful to abort only the job waiting for\nthe unit state to change.\nAdded in version 201.\nJobTimeoutAction=\n,\nJobTimeoutRebootArgument=\nÂ¶\nJobTimeoutAction=\noptionally configures an additional action to\ntake when the timeout is hit, see description of\nJobTimeoutSec=\nand\nJobRunningTimeoutSec=\nabove. It takes the same values as\nFailureAction=\n/\nSuccessAction=\n. Defaults to\nnone\n.\nJobTimeoutRebootArgument=\nconfigures an optional reboot string to pass to\nthe\nreboot\n(2)\nsystem\ncall.\nAdded in version 240.\nStartLimitIntervalSec=\ninterval\n,\nStartLimitBurst=\nburst\nÂ¶\nConfigure unit start rate limiting. Units which are started more than\nburst\ntimes within an\ninterval\ntime span are\nnot permitted to start any more. Use\nStartLimitIntervalSec=\nto configure the\nchecking interval and\nStartLimitBurst=\nto configure how many starts per interval\nare allowed.\ninterval\nis a time span with the default unit of seconds, but other\nunits may be specified, see\nsystemd.time\n(7)\n.\nThe special value \"\ninfinity\n\" can be used to limit the total number of start\nattempts, even if they happen at large time intervals.\nDefaults to\nDefaultStartLimitIntervalSec=\nin manager configuration file, and may\nbe set to 0 to disable any kind of rate limiting.\nburst\nis a number and\ndefaults to\nDefaultStartLimitBurst=\nin manager configuration file.\nThese configuration options are particularly useful in conjunction with the service setting\nRestart=\n(see\nsystemd.service\n(5)\n);\nhowever, they apply to all kinds of starts (including manual), not just those triggered by the\nRestart=\nlogic.\nNote that units which are configured for\nRestart=\n, and which reach the start\nlimit are not attempted to be restarted anymore; however, they may still be restarted manually or\nfrom a timer or socket at a later point, after the\ninterval\nhas passed.\nFrom that point on, the restart logic is activated again.\nsystemctl reset-failed\nwill cause the restart rate counter for a service to be flushed, which is useful if the administrator\nwants to manually start a unit and the start limit interferes with that. Rate-limiting is enforced\nafter any unit condition checks are executed, and hence unit activations with failing conditions do\nnot count towards the rate limit.\nWhen a unit is unloaded due to the garbage collection logic (see above) its rate limit counters\nare flushed out too. This means that configuring start rate limiting for a unit that is not\nreferenced continuously has no effect.\nThis setting does not apply to slice, target, device, and scope units, since they are unit\ntypes whose activation may either never fail, or may succeed only a single time.\nAdded in version 229.\nStartLimitAction=\nÂ¶\nConfigure an additional action to take if the rate limit configured with\nStartLimitIntervalSec=\nand\nStartLimitBurst=\nis hit. Takes the same\nvalues as the\nFailureAction=\n/\nSuccessAction=\nsettings. If\nnone\nis set, hitting the rate limit will trigger no action except that\nthe start will not be permitted. Defaults to\nnone\n.\nAdded in version 229.\nRebootArgument=\nÂ¶\nConfigure the optional argument for the\nreboot\n(2)\nsystem call if\nStartLimitAction=\nor\nFailureAction=\nis a reboot action. This\nworks just like the optional argument to\nsystemctl reboot\ncommand.\nAdded in version 229.\nSourcePath=\nÂ¶\nA path to a configuration file this unit has\nbeen generated from. This is primarily useful for\nimplementation of generator tools that convert configuration\nfrom an external configuration file format into native unit\nfiles. This functionality should not be used in normal\nunits.\nAdded in version 201.\nConditions and Asserts\nÂ¶\nUnit files may also include a number of\nConditionâ¦=\nand\nAssertâ¦=\nsettings. Before the unit is started, systemd will verify that the\nspecified conditions and asserts are true. If not, the starting of the unit will be (mostly silently)\nskipped (in case of conditions), or aborted with an error message (in case of asserts). Failing\nconditions or asserts will not result in the unit being moved into the \"\nfailed\n\"\nstate. The conditions and asserts are checked at the time the queued start job is to be executed. The\nordering dependencies are still respected, so other units are still pulled in and ordered as if this\nunit was successfully activated, and the conditions and asserts are executed the precise moment the\nunit would normally start and thus can validate system state after the units ordered before completed\ninitialization. Use condition expressions for skipping units that do not apply to the local system, for\nexample because the kernel or runtime environment does not require their functionality.\nIf multiple conditions are specified, the unit will be executed if all of them apply (i.e. a\nlogical AND is applied). Condition checks can use a pipe symbol (\"\n|\n\") after the equals\nsign (\"\nConditionâ¦=|â¦\n\"), which causes the condition to become a\ntriggering\ncondition. If at least one triggering condition is defined for a unit,\nthen the unit will be started if at least one of the triggering conditions of the unit applies and all\nof the regular (i.e. non-triggering) conditions apply. If you prefix an argument with the pipe symbol\nand an exclamation mark, the pipe symbol must be passed first, the exclamation second. If any of these\noptions is assigned the empty string, the list of conditions is reset completely, all previous\ncondition settings (of any kind) will have no effect.\nThe\nAssertArchitecture=\n,\nAssertVirtualization=\n, â¦ options\nare similar to conditions but cause the start job to fail (instead of being skipped). The failed check\nis logged. Units with unmet conditions are considered to be in a clean state and will be garbage\ncollected if they are not referenced. This means that when queried, the condition failure may or may\nnot show up in the state of the unit.\nNote that neither assertion nor condition expressions result in unit state changes. Also note\nthat both are checked at the time the job is to be executed, i.e. long after depending jobs and it\nitself were queued. Thus, neither condition nor assertion expressions are suitable for conditionalizing\nunit dependencies.\nThe\ncondition\nverb of\nsystemd-analyze\n(1)\ncan\nbe used to test condition and assert expressions.\nExcept for\nConditionPathIsSymbolicLink=\n, all path checks follow symlinks.\nConditionArchitecture=\nÂ¶\nCheck whether the system is running on a specific architecture. Takes one of\n\"\nx86\n\",\n\"\nx86-64\n\",\n\"\nppc\n\",\n\"\nppc-le\n\",\n\"\nppc64\n\",\n\"\nppc64-le\n\",\n\"\nia64\n\",\n\"\nparisc\n\",\n\"\nparisc64\n\",\n\"\ns390\n\",\n\"\ns390x\n\",\n\"\nsparc\n\",\n\"\nsparc64\n\",\n\"\nmips\n\",\n\"\nmips-le\n\",\n\"\nmips64\n\",\n\"\nmips64-le\n\",\n\"\nalpha\n\",\n\"\narm\n\",\n\"\narm-be\n\",\n\"\narm64\n\",\n\"\narm64-be\n\",\n\"\nsh\n\",\n\"\nsh64\n\",\n\"\nm68k\n\",\n\"\ntilegx\n\",\n\"\ncris\n\",\n\"\narc\n\",\n\"\narc-be\n\", or\n\"\nnative\n\".\nUse\nsystemd-analyze\n(1)\nfor the complete list of known architectures.\nThe architecture is determined from the information returned by\nuname\n(2)\nand is thus subject to\npersonality\n(2)\n.\nNote that a\nPersonality=\nsetting in the same unit file has no effect on this\ncondition. A special architecture name \"\nnative\n\" is mapped to the architecture the\nsystem manager itself is compiled for. The test may be negated by prepending an exclamation\nmark.\nAdded in version 201.\nConditionFirmware=\nÂ¶\nCheck whether the system's firmware is of a certain type. The following values are\npossible:\n\"\nuefi\n\" matches systems with EFI.\n\"\ndevice-tree\n\" matches systems with a device tree.\n\"\ndevice-tree-compatible(\nvalue\n)\n\"\nmatches systems with a device tree that are compatible with \"\nvalue\n\".\n\"\nsmbios-field(\nfield\noperator\nvalue\n)\n\" matches systems\nwith a SMBIOS field containing a certain value.\nfield\nis the name of\nthe SMBIOS field exposed as \"\nsysfs\n\" attribute file below\n/sys/class/dmi/id/\n.\noperator\nis one of\n\"\n<\n\", \"\n<=\n\", \"\n>=\n\",\n\"\n>\n\", \"\n==\n\", \"\n<>\n\" for version\ncomparisons, \"\n=\n\" and \"\n!=\n\" for literal string comparisons, or\n\"\n$=\n\", \"\n!$=\n\" for shell-style glob comparisons.\nvalue\nis the expected value of the SMBIOS field value (possibly\ncontaining shell style globs in case \"\n$=\n\"/\"\n!$=\n\" is used).\nAdded in version 249.\nConditionVirtualization=\nÂ¶\nCheck whether the system is executed in a virtualized environment and optionally\ntest whether it is a specific implementation. Takes either boolean value to check if being executed\nin any virtualized environment, or one of\n\"\nvm\n\" and\n\"\ncontainer\n\" to test against a generic type of virtualization solution, or one of\n\"\nqemu\n\",\n\"\nkvm\n\",\n\"\namazon\n\",\n\"\nzvm\n\",\n\"\nvmware\n\",\n\"\nmicrosoft\n\",\n\"\noracle\n\",\n\"\npowervm\n\",\n\"\nxen\n\",\n\"\nbochs\n\",\n\"\numl\n\",\n\"\nbhyve\n\",\n\"\nqnx\n\",\n\"\napple\n\",\n\"\nsre\n\",\n\"\nopenvz\n\",\n\"\nlxc\n\",\n\"\nlxc-libvirt\n\",\n\"\nsystemd-nspawn\n\",\n\"\ndocker\n\",\n\"\npodman\n\",\n\"\nrkt\n\",\n\"\nwsl\n\",\n\"\nproot\n\",\n\"\npouch\n\",\n\"\nacrn\n\" to test\nagainst a specific implementation, or\n\"\nprivate-users\n\" to check whether we are running in a user namespace. See\nsystemd-detect-virt\n(1)\nfor a full list of known virtualization technologies and their identifiers. If multiple\nvirtualization technologies are nested, only the innermost is considered. The test may be negated\nby prepending an exclamation mark.\nAdded in version 244.\nConditionHost=\nÂ¶\nConditionHost=\nmay be used to match against the hostname,\nmachine ID, boot ID or product UUID of the host. This either takes a hostname string (optionally\nwith shell style globs) which is tested against the locally set hostname as returned by\ngethostname\n(2)\n, or\na 128bit ID or UUID, formatted as string. The latter is compared against machine ID, boot ID and the\nfirmware product UUID if there is any. See\nmachine-id\n(5)\nfor\ndetails about the machine ID. The test may be negated by prepending an exclamation mark.\nAdded in version 244.\nConditionKernelCommandLine=\nÂ¶\nConditionKernelCommandLine=\nmay be used to check whether a\nspecific kernel command line option is set (or if prefixed with the exclamation mark â unset). The\nargument must either be a single word, or an assignment (i.e. two words, separated by\n\"\n=\n\"). In the former case the kernel command line is searched for the word\nappearing as is, or as left hand side of an assignment. In the latter case, the exact assignment is\nlooked for with right and left hand side matching. This operates on the kernel command line\ncommunicated to userspace via\n/proc/cmdline\n, except when the service manager\nis invoked as payload of a container manager, in which case the command line of\nPID\n1\nis used instead (i.e.\n/proc/1/cmdline\n).\nAdded in version 244.\nConditionKernelVersion=\nÂ¶\nConditionKernelVersion=\nmay be used to check whether the kernel\nversion (as reported by\nuname -r\n) matches a certain expression, or if prefixed\nwith the exclamation mark, does not match. The argument must be a list of (potentially quoted)\nexpressions. Each expression starts with one of \"\n=\n\" or \"\n!=\n\" for\nstring comparisons, \"\n<\n\", \"\n<=\n\", \"\n==\n\",\n\"\n<>\n\", \"\n>=\n\", \"\n>\n\" for version\ncomparisons, or \"\n$=\n\", \"\n!$=\n\" for a shell-style glob match. If no\noperator is specified, \"\n$=\n\" is implied.\nNote that using the kernel version string is an unreliable way to determine which features\nare supported by a kernel, because of the widespread practice of backporting drivers, features, and\nfixes from newer upstream kernels into older versions provided by distributions. Hence, this check\nis inherently unportable and should not be used for units which may be used on different\ndistributions.\nAdded in version 244.\nConditionVersion=\nÂ¶\nConditionVersion=\nmay be used to check whether a software\nversion matches a certain expression, or if prefixed with the exclamation mark, does not match.\nThe first argument is the software whose version has to be checked. Currently\n\"\nkernel\n\", \"\nsystemd\n\" and \"\nglibc\n\" are supported.\nIf this argument is omitted, \"\nkernel\n\" is implied. The second argument must be a\nlist of (potentially quoted) expressions. Each expression starts with one of \"\n=\n\"\nor \"\n!=\n\" for string comparisons, \"\n<\n\", \"\n<=\n\",\n\"\n==\n\", \"\n<>\n\", \"\n>=\n\",\n\"\n>\n\" for version comparisons, or \"\n$=\n\", \"\n!$=\n\"\nfor a shell-style glob match. If no operator is specified, \"\n$=\n\" is implied.\nAdded in version 258.\nConditionCredential=\nÂ¶\nConditionCredential=\nmay be used to check whether a credential\nby the specified name was passed into the service manager. See\nSystem and Service Credentials\nfor details about\ncredentials. If used in services for the system service manager this may be used to conditionalize\nservices based on system credentials passed in. If used in services for the per-user service\nmanager this may be used to conditionalize services based on credentials passed into the\nunit@.service\nservice instance belonging to the user. The argument must be a\nvalid credential name.\nAdded in version 252.\nConditionEnvironment=\nÂ¶\nConditionEnvironment=\nmay be used to check whether a specific\nenvironment variable is set (or if prefixed with the exclamation mark â unset) in the service\nmanager's environment block.\nThe argument may be a single word, to check if the variable with this name is defined in the\nenvironment block, or an assignment\n(\"\nname\n=\nvalue\n\"), to check if\nthe variable with this exact value is defined. Note that the environment block of the service\nmanager itself is checked, i.e. not any variables defined with\nEnvironment=\nor\nEnvironmentFile=\n, as described above. This is particularly useful when the\nservice manager runs inside a containerized environment or as per-user service manager, in order to\ncheck for variables passed in by the enclosing container manager or PAM.\nAdded in version 246.\nConditionSecurity=\nÂ¶\nConditionSecurity=\nmay be used to check whether the given\nsecurity technology is enabled on the system. Currently, the following values are recognized:\nTableÂ 3.Â Recognized security technologies\nValue\nDescription\nselinux\nSELinux MAC\napparmor\nAppArmor MAC\ntomoyo\nTomoyo MAC\nsmack\nSMACK MAC\nima\nIntegrity Measurement Architecture (IMA)\naudit\nLinux Audit Framework\nuefi-secureboot\nUEFI SecureBoot\ntpm2\nTrusted Platform Module 2.0 (TPM2)\ncvm\nConfidential virtual machine (SEV/TDX)\nmeasured-uki\nUnified Kernel Image with PCR 11 Measurements, as per\nsystemd-stub\n(7)\n.\nAdded in version 255.\nThe test may be negated by prepending an exclamation mark.\nAdded in version 244.\nConditionCapability=\nÂ¶\nCheck whether the given capability exists in the capability bounding set of the\nservice manager (i.e. this does not check whether capability is actually available in the permitted\nor effective sets, see\ncapabilities\n(7)\nfor details). Pass a capability name such as \"\nCAP_MKNOD\n\", possibly prefixed with\nan exclamation mark to negate the check.\nAdded in version 244.\nConditionACPower=\nÂ¶\nCheck whether the system has AC power, or is exclusively battery powered at the\ntime of activation of the unit. This takes a boolean argument. If set to \"\ntrue\n\",\nthe condition will hold only if at least one AC connector of the system is connected to a power\nsource, or if no AC connectors are known. Conversely, if set to \"\nfalse\n\", the\ncondition will hold only if there is at least one AC connector known and all AC connectors are\ndisconnected from a power source.\nAdded in version 244.\nConditionNeedsUpdate=\nÂ¶\nTakes one of\n/var/\nor\n/etc/\nas argument,\npossibly prefixed with a \"\n!\n\" (to invert the condition). This condition may be\nused to conditionalize units on whether the specified directory requires an update because\n/usr/\n's modification time is newer than the stamp file\n.updated\nin the specified directory. This is useful to implement offline\nupdates of the vendor operating system resources in\n/usr/\nthat require updating\nof\n/etc/\nor\n/var/\non the next following boot. Units making\nuse of this condition should order themselves before\nsystemd-update-done.service\n(8)\n,\nto make sure they run before the stamp file's modification time gets reset indicating a completed\nupdate.\nIf the\nsystemd.condition_needs_update=\noption is specified on the kernel\ncommand line (taking a boolean), it will override the result of this condition check, taking\nprecedence over any file modification time checks. If the kernel command line option is used,\nsystemd-update-done.service\nwill not have immediate effect on any following\nConditionNeedsUpdate=\nchecks, until the system is rebooted where the kernel\ncommand line option is not specified anymore.\nNote that to make this scheme effective, the timestamp of\n/usr/\nshould\nbe explicitly updated after its contents are modified. The kernel will automatically update\nmodification timestamp on a directory only when immediate children of a directory are modified; an\nmodification of nested files will not automatically result in mtime of\n/usr/\nbeing updated.\nAlso note that if the update method includes a call to execute appropriate post-update steps\nitself, it should not touch the timestamp of\n/usr/\n. In a typical distribution\npackaging scheme, packages will do any required update steps as part of the installation or\nupgrade, to make package contents immediately usable.\nConditionNeedsUpdate=\nshould be used with other update mechanisms where such an immediate update does not\nhappen.\nAdded in version 244.\nConditionFirstBoot=\nÂ¶\nTakes a boolean argument. This condition may be used to conditionalize units on\nwhether the system is booting up for the first time. This roughly means that\n/etc/\nwas unpopulated when the system started booting (for details, see \"First Boot Semantics\" in\nmachine-id\n(5)\n).\nFirst Boot is considered finished (this condition will evaluate as false) after the manager\nhas finished the startup phase.\nThis condition may be used to populate\n/etc/\non the first boot after\nfactory reset, or when a new system instance boots up for the first time.\nNote that the service manager itself will perform setup steps during First Boot: it will\ninitialize\nmachine-id\n(5)\nand\npreset all units, enabling or disabling them according to the\nsystemd.preset\n(5)\nsettings. Additional setup may be performed via units with\nConditionFirstBoot=yes\n.\nFor robustness, units with\nConditionFirstBoot=yes\nshould order themselves\nbefore\nfirst-boot-complete.target\nand pull in this passive target with\nWants=\n. This ensures that in a case of an aborted first boot, these units will\nbe re-run during the next system startup.\nIf the\nsystemd.condition_first_boot=\noption is specified on the kernel\ncommand line (taking a boolean), it will override the result of this condition check, taking\nprecedence over\n/etc/machine-id\nexistence checks.\nAdded in version 244.\nConditionPathExists=\nÂ¶\nCheck for the existence of a file. If the specified absolute path name does not exist,\nthe condition will fail. If the absolute path name passed to\nConditionPathExists=\nis prefixed with an exclamation mark\n(\"\n!\n\"), the test is negated, and the unit is only started if the path does not\nexist.\nAdded in version 244.\nConditionPathExistsGlob=\nÂ¶\nConditionPathExistsGlob=\nis similar to\nConditionPathExists=\n, but checks for the existence of at least one file or\ndirectory matching the specified globbing pattern.\nAdded in version 244.\nConditionPathIsDirectory=\nÂ¶\nConditionPathIsDirectory=\nis similar to\nConditionPathExists=\nbut verifies that a certain path exists and is a\ndirectory.\nAdded in version 244.\nConditionPathIsSymbolicLink=\nÂ¶\nConditionPathIsSymbolicLink=\nis similar to\nConditionPathExists=\nbut verifies that a certain path exists and is a symbolic\nlink.\nAdded in version 244.\nConditionPathIsMountPoint=\nÂ¶\nConditionPathIsMountPoint=\nis similar to\nConditionPathExists=\nbut verifies that a certain path exists and is a mount\npoint.\nAdded in version 244.\nConditionPathIsReadWrite=\nÂ¶\nConditionPathIsReadWrite=\nis similar to\nConditionPathExists=\nbut verifies that the underlying file system is readable\nand writable (i.e. not mounted read-only).\nAdded in version 244.\nConditionPathIsEncrypted=\nÂ¶\nConditionPathIsEncrypted=\nis similar to\nConditionPathExists=\nbut verifies that the underlying file system's backing\nblock device is encrypted using dm-crypt/LUKS. Note that this check does not cover ext4\nper-directory encryption, and only detects block level encryption. Moreover, if the specified path\nresides on a file system on top of a loopback block device, only encryption above the loopback device is\ndetected. It is not detected whether the file system backing the loopback block device is encrypted.\nAdded in version 246.\nConditionDirectoryNotEmpty=\nÂ¶\nConditionDirectoryNotEmpty=\nis similar to\nConditionPathExists=\nbut verifies that a certain path exists and is a non-empty\ndirectory.\nAdded in version 244.\nConditionFileNotEmpty=\nÂ¶\nConditionFileNotEmpty=\nis similar to\nConditionPathExists=\nbut verifies that a certain path exists and refers to a\nregular file with a non-zero size.\nAdded in version 244.\nConditionFileIsExecutable=\nÂ¶\nConditionFileIsExecutable=\nis similar to\nConditionPathExists=\nbut verifies that a certain path exists, is a regular file,\nand marked executable.\nAdded in version 244.\nConditionUser=\nÂ¶\nConditionUser=\ntakes a numeric \"\nUID\n\", a UNIX\nuser name, or the special value \"\n@system\n\". This condition may be used to check\nwhether the service manager is running as the given user. The special value\n\"\n@system\n\" can be used to check if the user id is within the system user\nrange. This option is not useful for system services, as the system manager exclusively runs as the\nroot user, and thus the test result is constant.\nAdded in version 244.\nConditionGroup=\nÂ¶\nConditionGroup=\nis similar to\nConditionUser=\nbut verifies that the service manager's real or effective group, or any of its auxiliary groups,\nmatch the specified group or GID. This setting does not support the special value\n\"\n@system\n\".\nAdded in version 244.\nConditionControlGroupController=\nÂ¶\nCheck whether given cgroup controllers (e.g. \"\ncpu\n\") are available\nfor use on the system or whether the legacy v1 cgroup or the modern v2 cgroup hierarchy is used.\nMultiple controllers may be passed with a space separating them; in this case, the condition\nwill only pass if all listed controllers are available for use. Controllers unknown to systemd are\nignored. Valid controllers are \"\ncpu\n\", \"\nio\n\",\n\"\nmemory\n\", and \"\npids\n\". Even if available in the kernel, a\nparticular controller may not be available if it was disabled on the kernel command line with\ncgroup_disable=controller\n.\nAlternatively, two special strings \"\nv1\n\" and \"\nv2\n\" may be\nspecified (without any controller names). \"\nv2\n\" will pass if the unified v2 cgroup\nhierarchy is used, and \"\nv1\n\" will pass if the legacy v1 hierarchy or the hybrid\nhierarchy are used. Note that legacy or hybrid hierarchies have been deprecated. See\nsystemd\n(1)\nfor\nmore information.\nAdded in version 244.\nConditionMemory=\nÂ¶\nVerify that the specified amount of system memory is available to the current\nsystem. Takes a memory size in bytes as argument, optionally prefixed with a comparison operator\n\"\n<\n\", \"\n<=\n\", \"\n=\n\" (or \"\n==\n\"),\n\"\n!=\n\" (or \"\n<>\n\"), \"\n>=\n\",\n\"\n>\n\". On bare-metal systems compares the amount of physical memory in the system\nwith the specified size, adhering to the specified comparison operator. In containers compares the\namount of memory assigned to the container instead.\nAdded in version 244.\nConditionCPUs=\nÂ¶\nVerify that the specified number of CPUs is available to the current system. Takes\na number of CPUs as argument, optionally prefixed with a comparison operator\n\"\n<\n\", \"\n<=\n\", \"\n=\n\" (or \"\n==\n\"),\n\"\n!=\n\" (or \"\n<>\n\"), \"\n>=\n\",\n\"\n>\n\". Compares the number of CPUs in the CPU affinity mask configured of the\nservice manager itself with the specified number, adhering to the specified comparison operator. On\nphysical systems the number of CPUs in the affinity mask of the service manager usually matches the\nnumber of physical CPUs, but in special and virtual environments might differ. In particular, in\ncontainers the affinity mask usually matches the number of CPUs assigned to the container and not\nthe physically available ones.\nAdded in version 244.\nConditionCPUFeature=\nÂ¶\nVerify that a given CPU feature is available via the \"\nCPUID\n\"\ninstruction. This condition only does something on i386 and x86-64 processors. On other\nprocessors it is assumed that the CPU does not support the given feature. It checks the leaves\n\"\n1\n\", \"\n7\n\", \"\n0x80000001\n\", and\n\"\n0x80000007\n\". Valid values are:\n\"\nfpu\n\",\n\"\nvme\n\",\n\"\nde\n\",\n\"\npse\n\",\n\"\ntsc\n\",\n\"\nmsr\n\",\n\"\npae\n\",\n\"\nmce\n\",\n\"\ncx8\n\",\n\"\napic\n\",\n\"\nsep\n\",\n\"\nmtrr\n\",\n\"\npge\n\",\n\"\nmca\n\",\n\"\ncmov\n\",\n\"\npat\n\",\n\"\npse36\n\",\n\"\nclflush\n\",\n\"\nmmx\n\",\n\"\nfxsr\n\",\n\"\nsse\n\",\n\"\nsse2\n\",\n\"\nht\n\",\n\"\npni\n\",\n\"\npclmul\n\",\n\"\nmonitor\n\",\n\"\nssse3\n\",\n\"\nfma3\n\",\n\"\ncx16\n\",\n\"\nsse4_1\n\",\n\"\nsse4_2\n\",\n\"\nmovbe\n\",\n\"\npopcnt\n\",\n\"\naes\n\",\n\"\nxsave\n\",\n\"\nosxsave\n\",\n\"\navx\n\",\n\"\nf16c\n\",\n\"\nrdrand\n\",\n\"\nbmi1\n\",\n\"\navx2\n\",\n\"\nbmi2\n\",\n\"\nrdseed\n\",\n\"\nadx\n\",\n\"\nsha_ni\n\",\n\"\nsyscall\n\",\n\"\nrdtscp\n\",\n\"\nlm\n\",\n\"\nlahf_lm\n\",\n\"\nabm\n\",\n\"\nconstant_tsc\n\".\nAdded in version 248.\nConditionOSRelease=\nÂ¶\nVerify that a specific \"\nkey=value\n\" pair is set in the host's\nos-release\n(5)\n.\nOther than exact string matching (with \"\n=\n\" and \"\n!=\n\"),\nrelative comparisons are supported for versioned parameters (e.g. \"\nVERSION_ID\n\";\nwith \"\n<\n\", \"\n<=\n\", \"\n==\n\",\n\"\n<>\n\", \"\n>=\n\", \"\n>\n\"), and shell-style\nwildcard comparisons (\"\n*\n\", \"\n?\n\", \"\n[]\n\") are\nsupported with the \"\n$=\n\" (match) and \"\n!$=\n\" (non-match).\nIf the given key is not found in the file, the match is done against an empty value.\nAdded in version 249.\nConditionMemoryPressure=\n,\nConditionCPUPressure=\n,\nConditionIOPressure=\nÂ¶\nVerify that the overall system (memory, CPU or IO) pressure is below or equal to a threshold.\nThis setting takes a threshold value as argument. It can be specified as a simple percentage value,\nsuffixed with \"\n%\n\", in which case the pressure will be measured as an average over the last\nfive minutes before the attempt to start the unit is performed.\nAlternatively, the average timespan can also be specified using \"\n/\n\" as a separator, for\nexample: \"\n10%/1min\n\". The supported timespans match what the kernel provides, and are\nlimited to \"\n10sec\n\", \"\n1min\n\" and \"\n5min\n\". The\n\"\nfull\n\" PSI will be checked first, and if not found \"\nsome\n\" will be\nchecked. For more details, see the documentation on\nPSI (Pressure Stall Information)\n.\nOptionally, the threshold value can be prefixed with the slice unit under which the pressure will be checked,\nfollowed by a \"\n:\n\". If the slice unit is not specified, the overall system pressure will be measured,\ninstead of a particular cgroup's.\nAdded in version 250.\nConditionKernelModuleLoaded=\nÂ¶\nTest whether the specified kernel module has been loaded and is already fully\ninitialized.\nAdded in version 258.\nAssertArchitecture=\n,\nAssertVirtualization=\n,\nAssertHost=\n,\nAssertKernelCommandLine=\n,\nAssertKernelVersion=\n,\nAssertVersion=\n,\nAssertCredential=\n,\nAssertEnvironment=\n,\nAssertSecurity=\n,\nAssertCapability=\n,\nAssertACPower=\n,\nAssertNeedsUpdate=\n,\nAssertFirstBoot=\n,\nAssertPathExists=\n,\nAssertPathExistsGlob=\n,\nAssertPathIsDirectory=\n,\nAssertPathIsSymbolicLink=\n,\nAssertPathIsMountPoint=\n,\nAssertPathIsReadWrite=\n,\nAssertPathIsEncrypted=\n,\nAssertDirectoryNotEmpty=\n,\nAssertFileNotEmpty=\n,\nAssertFileIsExecutable=\n,\nAssertUser=\n,\nAssertGroup=\n,\nAssertControlGroupController=\n,\nAssertMemory=\n,\nAssertCPUs=\n,\nAssertCPUFeature=\n,\nAssertOSRelease=\n,\nAssertMemoryPressure=\n,\nAssertCPUPressure=\n,\nAssertIOPressure=\n,\nAssertKernelModuleLoaded=\nÂ¶\nSimilar to the\nConditionArchitecture=\n,\nConditionVirtualization=\n, â¦, condition settings described above, these settings\nadd assertion checks to the start-up of the unit. However, unlike the conditions settings, any\nassertion setting that is not met results in failure of the start job (which means this is logged\nloudly). Note that hitting a configured assertion does not cause the unit to enter the\n\"\nfailed\n\" state (or in fact result in any state change of the unit), it affects\nonly the job queued for it. Use assertion expressions for units that cannot operate when specific\nrequirements are not met, and when this is something the administrator or user should look\ninto.\nAdded in version 218.\nMapping of unit properties to their inverses\nÂ¶\nUnit settings that create a relationship with a second unit usually show up\nin properties of both units, for example in\nsystemctl show\noutput. In some cases the name of the property is the same as the name of the\nconfiguration setting, but not always. This table lists the properties\nthat are shown on two units which are connected through some dependency, and shows\nwhich property on \"source\" unit corresponds to which property on the \"target\" unit.\nTableÂ 4.Â\n\"Forward\" and \"reverse\" unit properties\n\"Forward\" property\n\"Reverse\" property\nWhere used\nBefore=\nAfter=\n[Unit] section\nAfter=\nBefore=\nRequires=\nRequiredBy=\n[Unit] section\n[Install] section\nWants=\nWantedBy=\n[Unit] section\n[Install] section\nUpholds=\nUpheldBy=\n[Unit] section\n[Install] section\nPartOf=\nConsistsOf=\n[Unit] section\nan automatic property\nBindsTo=\nBoundBy=\n[Unit] section\nan automatic property\nRequisite=\nRequisiteOf=\n[Unit] section\nan automatic property\nConflicts=\nConflictedBy=\n[Unit] section\nan automatic property\nTriggers=\nTriggeredBy=\nAutomatic properties, see notes below\nPropagatesReloadTo=\nReloadPropagatedFrom=\n[Unit] section\nReloadPropagatedFrom=\nPropagatesReloadTo=\nPropagatesStopTo=\nStopPropagatedFrom=\n[Unit] section\nStopPropagatedFrom=\nPropagatesStopTo=\nFollowing=\nn/a\nAn automatic property\nÂ\nNote:\nWantedBy=\n,\nRequiredBy=\n, and\nUpheldBy=\nare used in the [Install] section to create symlinks in\n.wants/\n,\n.requires/\n, and\n.upholds/\ndirectories. They cannot be used\ndirectly as a unit configuration setting.\nNote:\nConsistsOf=\n,\nBoundBy=\n,\nRequisiteOf=\n,\nConflictedBy=\nare created\nimplicitly along with their reverses and cannot be specified directly.\nNote:\nTriggers=\nis created implicitly between a socket,\npath unit, or an automount unit, and the unit they activate. By default, a unit\nwith the same name is triggered, but this can be overridden using\nSockets=\n,\nService=\n, and\nUnit=\nsettings. See\nsystemd.service\n(5)\n,\nsystemd.socket\n(5)\n,\nsystemd.path\n(5)\n,\nand\nsystemd.automount\n(5)\nfor details.\nTriggeredBy=\nis created implicitly on the\ntriggered unit.\nNote:\nFollowing=\nis used to group device aliases and points to the\n\"primary\" device unit that systemd is using to track device state, usually corresponding to a\nsysfs path. It does not show up in the \"target\" unit.\n[Install] Section Options\nÂ¶\nUnit files may include an [Install] section, which carries installation information for\nthe unit. This section is not interpreted by\nsystemd\n(1)\nduring runtime; it is\nused by the\nenable\nand\ndisable\ncommands of the\nsystemctl\n(1)\ntool during\ninstallation of a unit.\nAlias=\nÂ¶\nA space-separated list of additional names this unit shall be installed under. The names listed\nhere must have the same suffix (i.e. type) as the unit filename. This option may be specified more than once,\nin which case all listed names are used. At installation time,\nsystemctl enable\nwill create\nsymlinks from these names to the unit filename. Note that not all unit types support such alias names, and this\nsetting is not supported for them. Specifically, mount, slice, swap, and automount units do not support\naliasing.\nAdded in version 201.\nWantedBy=\n,\nRequiredBy=\n,\nUpheldBy=\nÂ¶\nThis option may be used more than once, or a space-separated list of unit names may\nbe given. A symbolic link is created in the\n.wants/\n,\n.requires/\n,\nor\n.upholds/\ndirectory of each of the listed units when this unit is installed\nby\nsystemctl enable\n. This has the effect of a dependency of type\nWants=\n,\nRequires=\n, or\nUpholds=\nbeing added\nfrom the listed unit to the current unit. See the description of the mentioned dependency types\nin the [Unit] section for details.\nIn case of template units listing non template units, the listing unit must have\nDefaultInstance=\nset, or\nsystemctl enable\nmust be called with\nan instance name. The instance (default or specified) will be added to the\n.wants/\n,\n.requires/\n, or\n.upholds/\nlist of the listed unit. For example,\nWantedBy=getty.target\nin a service\ngetty@.service\nwill result in\nsystemctl enable getty@tty2.service\ncreating a\ngetty.target.wants/getty@tty2.service\nlink to\ngetty@.service\n. This also applies to listing specific instances of templated\nunits: this specific instance will gain the dependency. A template unit may also list a template\nunit, in which case a generic dependency will be added where each instance of the listing unit will\nhave a dependency on an instance of the listed template with the same instance value. For example,\nWantedBy=container@.target\nin a service\nmonitor@.service\nwill\nresult in\nsystemctl enable monitor@.service\ncreating a\ncontainer@.target.wants/monitor@.service\nlink to\nmonitor@.service\n, which applies to all instances of\ncontainer@.target\n.\nAdded in version 201.\nAlso=\nÂ¶\nAdditional units to install/deinstall when\nthis unit is installed/deinstalled. If the user requests\ninstallation/deinstallation of a unit with this option\nconfigured,\nsystemctl enable\nand\nsystemctl disable\nwill automatically\ninstall/uninstall units listed in this option as well.\nThis option may be used more than once, or a\nspace-separated list of unit names may be\ngiven.\nAdded in version 201.\nDefaultInstance=\nÂ¶\nIn template unit files, this specifies for\nwhich instance the unit shall be enabled if the template is\nenabled without any explicitly set instance. This option has\nno effect in non-template unit files. The specified string\nmust be usable as instance identifier.\nAdded in version 215.\nThe following specifiers are interpreted in the Install section:\n%a, %b, %B, %g, %G, %H, %i, %j, %l, %m, %n, %N, %o, %p, %u, %U, %v, %w, %W, %%.\nFor their meaning see the next section.\nSpecifiers\nÂ¶\nMany settings resolve specifiers which may be used to write\ngeneric unit files referring to runtime or unit parameters that\nare replaced when the unit files are loaded. Specifiers must be known\nand resolvable for the setting to be valid. The following\nspecifiers are understood:\nTableÂ 5.Â Specifiers available in unit files\nSpecifier\nMeaning\nDetails\n\"\n%a\n\"\nArchitecture\nA short string identifying the architecture of the local system. A string such as\nx86\n,\nx86-64\nor\narm64\n. See the architectures defined for\nConditionArchitecture=\nabove for a full list.\n\"\n%A\n\"\nOperating system image version\nThe operating system image version identifier of the running system, as read from the\nIMAGE_VERSION=\nfield of\n/etc/os-release\n. If not set, resolves to an empty string. See\nos-release\n(5)\nfor more information.\n\"\n%b\n\"\nBoot ID\nThe boot ID of the running system, formatted as string. See\nrandom\n(4)\nfor more information.\n\"\n%B\n\"\nOperating system build ID\nThe operating system build identifier of the running system, as read from the\nBUILD_ID=\nfield of\n/etc/os-release\n. If not set, resolves to an empty string. See\nos-release\n(5)\nfor more information.\n\"\n%C\n\"\nCache directory root\nThis is either\n/var/cache\n(for the system manager) or the path \"\n$XDG_CACHE_HOME\n\" resolves to (for user managers).\n\"\n%d\n\"\nCredentials directory\nThis is the value of the \"\n$CREDENTIALS_DIRECTORY\n\" environment variable if available. See section \"Credentials\" in\nsystemd.exec\n(5)\nfor more information.\n\"\n%D\n\"\nShared data directory\nThis is either\n/usr/share/\n(for the system manager) or the path \"\n$XDG_DATA_HOME\n\" resolves to (for user managers).\n\"\n%E\n\"\nConfiguration directory root\nThis is either\n/etc/\n(for the system manager) or the path \"\n$XDG_CONFIG_HOME\n\" resolves to (for user managers).\n\"\n%f\n\"\nUnescaped filename\nThis is either the unescaped instance name (if applicable) with\n/\nprepended (if applicable), or the unescaped prefix name prepended with\n/\n. This implements unescaping according to the rules for escaping absolute file system paths discussed above.\n\"\n%g\n\"\nUser group\nThis is the name of the group running the service manager instance. In case of the system manager this resolves to \"\nroot\n\".\n\"\n%G\n\"\nUser GID\nThis is the numeric GID of the user running the service manager instance. In case of the system manager this resolves to \"\n0\n\".\n\"\n%h\n\"\nUser home directory\nThis is the home directory of the\nuser running the service manager instance\n. In case of the system manager this resolves to \"\n/root\n\".\nNote that this setting is\nnot\ninfluenced by the\nUser=\nsetting configurable in the [Service] section of the service unit.\n\"\n%H\n\"\nHost name\nThe hostname of the running system at the point in time the unit configuration is loaded.\n\"\n%i\n\"\nInstance name\nFor instantiated units this is the string between the first \"\n@\n\" character and the type suffix. Empty for non-instantiated units.\n\"\n%I\n\"\nUnescaped instance name\nSame as \"\n%i\n\", but with escaping undone.\n\"\n%j\n\"\nFinal component of the prefix\nThis is the string between the last \"\n-\n\" and the end of the prefix name. If there is no \"\n-\n\", this is the same as \"\n%p\n\".\n\"\n%J\n\"\nUnescaped final component of the prefix\nSame as \"\n%j\n\", but with escaping undone.\n\"\n%l\n\"\nShort host name\nThe hostname of the running system at the point in time the unit configuration is loaded, truncated at the first dot to remove any domain component.\n\"\n%L\n\"\nLog directory root\nThis is either\n/var/log\n(for the system manager) or the path\n$XDG_STATE_HOME\nresolves to with\n/log\nappended (for user managers).\n\"\n%m\n\"\nMachine ID\nThe machine ID of the running system, formatted as string. See\nmachine-id\n(5)\nfor more information.\n\"\n%M\n\"\nOperating system image identifier\nThe operating system image identifier of the running system, as read from the\nIMAGE_ID=\nfield of\n/etc/os-release\n. If not set, resolves to an empty string. See\nos-release\n(5)\nfor more information.\n\"\n%n\n\"\nFull unit name\nÂ\n\"\n%N\n\"\nFull unit name\nSame as \"\n%n\n\", but with the type suffix removed.\n\"\n%o\n\"\nOperating system ID\nThe operating system identifier of the running system, as read from the\nID=\nfield of\n/etc/os-release\n. See\nos-release\n(5)\nfor more information.\n\"\n%p\n\"\nPrefix name\nFor instantiated units, this refers to the string before the first \"\n@\n\" character of the unit name. For non-instantiated units, same as \"\n%N\n\".\n\"\n%P\n\"\nUnescaped prefix name\nSame as \"\n%p\n\", but with escaping undone.\n\"\n%q\n\"\nPretty host name\nThe pretty hostname of the running system at the point in time the unit configuration is loaded, as read from the\nPRETTY_HOSTNAME=\nfield of\n/etc/machine-info\n. If not set, resolves to the short hostname. See\nmachine-info\n(5)\nfor more information.\n\"\n%s\n\"\nUser shell\nThis is the shell of the user running the service manager instance.\n\"\n%S\n\"\nState directory root\nThis is either\n/var/lib\n(for the system manager) or the path\n$XDG_STATE_HOME\nresolves to (for user managers).\n\"\n%t\n\"\nRuntime directory root\nThis is either\n/run/\n(for the system manager) or the path \"\n$XDG_RUNTIME_DIR\n\" resolves to (for user managers).\n\"\n%T\n\"\nDirectory for temporary files\nThis is either\n/tmp\nor the path \"\n$TMPDIR\n\", \"\n$TEMP\n\" or \"\n$TMP\n\" are set to. (Note that the directory may be specified without a trailing slash.)\n\"\n%u\n\"\nUser name\nThis is the name of the\nuser running the service manager instance\n. In case of the system manager this resolves to \"\nroot\n\".\nNote that this setting is\nnot\ninfluenced by the\nUser=\nsetting configurable in the [Service] section of the service unit.\n\"\n%U\n\"\nUser UID\nThis is the numeric UID of the\nuser running the service manager instance\n. In case of the system manager this resolves to \"\n0\n\".\nNote that this setting is\nnot\ninfluenced by the\nUser=\nsetting configurable in the [Service] section of the service unit.\n\"\n%v\n\"\nKernel release\nIdentical to\nuname -r\noutput.\n\"\n%V\n\"\nDirectory for larger and persistent temporary files\nThis is either\n/var/tmp\nor the path \"\n$TMPDIR\n\", \"\n$TEMP\n\" or \"\n$TMP\n\" are set to. (Note that the directory may be specified without a trailing slash.)\n\"\n%w\n\"\nOperating system version ID\nThe operating system version identifier of the running system, as read from the\nVERSION_ID=\nfield of\n/etc/os-release\n. If not set, resolves to an empty string. See\nos-release\n(5)\nfor more information.\n\"\n%W\n\"\nOperating system variant ID\nThe operating system variant identifier of the running system, as read from the\nVARIANT_ID=\nfield of\n/etc/os-release\n. If not set, resolves to an empty string. See\nos-release\n(5)\nfor more information.\n\"\n%y\n\"\nThe path to the fragment\nThis is the path where the main part of the unit file is located. For linked unit files, the real path outside of the unit search directories is used. For units that do not have a fragment file, this specifier will raise an error.\n\"\n%Y\n\"\nThe directory of the fragment\nThis is the directory part of \"\n%y\n\".\n\"\n%%\n\"\nSingle percent sign\nUse \"\n%%\n\" in place of \"\n%\n\" to specify a single percent sign.\nExamples\nÂ¶\nExampleÂ 1.Â Allowing units to be enabled\nThe following snippet (highlighted) allows a unit (e.g.\nfoo.service\n) to be enabled via\nsystemctl enable\n:\n[Unit]\nDescription=Foo\n[Service]\nExecStart=/usr/sbin/foo-daemon\n[Install]\nWantedBy=multi-user.target\nAfter running\nsystemctl enable\n, a\nsymlink\n/etc/systemd/system/multi-user.target.wants/foo.service\nlinking to the actual unit will be created. It tells systemd to\npull in the unit when starting\nmulti-user.target\n. The inverse\nsystemctl disable\nwill remove that symlink\nagain.\nExampleÂ 2.Â Overriding vendor settings\nThere are two methods of overriding vendor settings in\nunit files: copying the unit file from\n/usr/lib/systemd/system\nto\n/etc/systemd/system\nand modifying the\nchosen settings. Alternatively, one can create a directory named\nunit\n.d/\nwithin\n/etc/systemd/system\nand place a drop-in\nfile\nname\n.conf\nthere that only changes the specific settings one is interested\nin. Note that multiple such drop-in files are read if\npresent, processed in lexicographic order of their filename.\nThe advantage of the first method is that one easily\noverrides the complete unit, the vendor unit is not parsed at\nall anymore. It has the disadvantage that improvements to the\nunit file by the vendor are not automatically incorporated on\nupdates.\nThe advantage of the second method is that one only\noverrides the settings one specifically wants, where updates to\nthe unit by the vendor automatically apply. This has the\ndisadvantage that some future updates by the vendor might be\nincompatible with the local changes.\nThis also applies for user instances of systemd, but with\ndifferent locations for the unit files. See the section on unit\nload paths for further details.\nSuppose there is a vendor-supplied unit\n/usr/lib/systemd/system/httpd.service\nwith\nthe following contents:\n[Unit]\nDescription=Some HTTP Server\nAfter=remote-fs.target sqldb.service\nRequires=sqldb.service\nAssertPathExists=/srv/webserver\n[Service]\nType=notify\nExecStart=/usr/sbin/some-fancy-httpd-server\nNice=5\n[Install]\nWantedBy=multi-user.target\nNow one wants to change some settings as an administrator:\nfirstly, in the local setup,\n/srv/webserver\nmight not exist, because the HTTP server is configured to use\n/srv/www\ninstead. Secondly, the local\nconfiguration makes the HTTP server also depend on a memory\ncache service,\nmemcached.service\n, that\nshould be pulled in (\nRequires=\n) and also be\nordered appropriately (\nAfter=\n). Thirdly, in\norder to harden the service a bit more, the administrator would\nlike to set the\nPrivateTmp=\nsetting (see\nsystemd.exec\n(5)\nfor details). And lastly, the administrator would like to reset\nthe niceness of the service to its default value of 0.\nThe first possibility is to copy the unit file to\n/etc/systemd/system/httpd.service\nand\nchange the chosen settings:\n[Unit]\nDescription=Some HTTP Server\nAfter=remote-fs.target sqldb.service\nmemcached.service\nRequires=sqldb.service\nmemcached.service\nAssertPathExists=\n/srv/www\n[Service]\nType=notify\nExecStart=/usr/sbin/some-fancy-httpd-server\nNice=0\nPrivateTmp=yes\n[Install]\nWantedBy=multi-user.target\nAlternatively, the administrator could create a drop-in\nfile\n/etc/systemd/system/httpd.service.d/local.conf\nwith the following contents:\n[Unit]\nAfter=memcached.service\nRequires=memcached.service\n# Reset all assertions and then re-add the condition we want\nAssertPathExists=\nAssertPathExists=/srv/www\n[Service]\nNice=0\nPrivateTmp=yes\nNote that for drop-in files, if one wants to remove\nentries from a setting that is parsed as a list (and is not a\ndependency), such as\nAssertPathExists=\n(or\ne.g.\nExecStart=\nin service units), one needs\nto first clear the list before re-adding all entries except the\none that is to be removed. Dependencies (\nAfter=\n, etc.)\ncannot be reset to an empty list, so dependencies can only be\nadded in drop-ins. If you want to remove dependencies, you have\nto override the entire unit.\nExampleÂ 3.Â Top level drop-ins with template units\nTop level per-type drop-ins can be used to change some aspect of\nall units of a particular type. For example, by creating the\n/etc/systemd/system/service.d/\ndirectory with a drop-in file, the contents of the drop-in file can be\napplied to all service units. We can take this further by having the\ntop-level drop-in instantiate a secondary helper unit. Consider for\nexample the following set of units and drop-in files where we install\nan\nOnFailure=\ndependency for all service units.\n/etc/systemd/system/failure-handler@.service\n:\n[Unit]\nDescription=My Failure Handler For %i\n[Service]\nType=oneshot\n# Perform some special action for when %i exits unexpectedly.\nExecStart=/usr/sbin/myfailurehandler %i\nWe can then add an instance of\nfailure-handler@.service\nas an\nOnFailure=\ndependency for all service units.\n/etc/systemd/system/service.d/10-all.conf\n:\n[Unit]\nOnFailure=failure-handler@%N.service\nNow, after running\nsystemctl daemon-reload\nall\nservices will have acquired an\nOnFailure=\ndependency on\nfailure-handler@%N.service\n. The\ntemplate instance units will also have gained the dependency which results\nin the creation of a recursive dependency chain. systemd will try to detect\nthese recursive dependency chains where a template unit directly and\nrecursively depends on itself and will remove such dependencies\nautomatically if it finds them. If systemd does not detect the recursive\ndependency chain, we can break the chain ourselves by disabling the drop-in\nfor the template instance units via a symlink to\n/dev/null\n:\nmkdir /etc/systemd/system/failure-handler@.service.d/\nln -s /dev/null /etc/systemd/system/failure-handler@.service.d/10-all.conf\nsystemctl daemon-reload\nThis ensures that if a\nfailure-handler@.service\ninstance fails it will not trigger an instance named\nfailure-handler@failure-handler.service\n.\nSee Also\nÂ¶\nsystemd\n(1)\n,\nsystemctl\n(1)\n,\nsystemd-system.conf\n(5)\n,\nsystemd.special\n(7)\n,\nsystemd.service\n(5)\n,\nsystemd.socket\n(5)\n,\nsystemd.device\n(5)\n,\nsystemd.mount\n(5)\n,\nsystemd.automount\n(5)\n,\nsystemd.swap\n(5)\n,\nsystemd.target\n(5)\n,\nsystemd.path\n(5)\n,\nsystemd.timer\n(5)\n,\nsystemd.scope\n(5)\n,\nsystemd.slice\n(5)\n,\nsystemd.time\n(7)\n,\nsystemd-analyze\n(1)\n,\ncapabilities\n(7)\n,\nsystemd.directives\n(7)\n,\nuname\n(1)\n[1]\nð£ð¥ð§¨ð¥ð¥ð£ Please note that those configuration files must be available at all times. If\n/usr/local/\nis a separate partition, it may not be available during early boot,\nand must not be used for configuration.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/systemd.unit.html"}}
{"text": "systemd.service\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nsystemd.service â Service unit configuration\nSynopsis\nservice\n.service\nDescription\nÂ¶\nA unit configuration file whose name ends in\n\"\n.service\n\" encodes information about a process\ncontrolled and supervised by systemd.\nThis man page lists the configuration options specific to\nthis unit type. See\nsystemd.unit\n(5)\nfor the common options of all unit configuration files. The common\nconfiguration items are configured in the generic\n[Unit] and [Install]\nsections. The service specific configuration options are\nconfigured in the [Service] section.\nAdditional options are listed in\nsystemd.exec\n(5)\n,\nwhich define the execution environment the commands are executed\nin, and in\nsystemd.kill\n(5)\n,\nwhich define the way the processes of the service are terminated,\nand in\nsystemd.resource-control\n(5)\n,\nwhich configure resource control settings for the processes of the\nservice.\nIf SysV init compat is enabled, systemd automatically creates service units that wrap SysV init\nscripts (the service name is the same as the name of the script, with a \"\n.service\n\"\nsuffix added); see\nsystemd-sysv-generator\n(8)\n.\nThe\nsystemd-run\n(1)\ncommand allows creating\n.service\nand\n.scope\nunits dynamically\nand transiently from the command line.\nService Templates\nÂ¶\nIt is possible for\nsystemd\nservices to take a single argument via the\n\"\nservice\n@\nargument\n.service\n\"\nsyntax. Such services are called \"instantiated\" services, while the unit definition without the\nargument\nparameter is called a \"template\". An example could be a\ndhcpcd@.service\nservice template which takes a network interface as a\nparameter to form an instantiated service. Within the service file, this parameter or \"instance\nname\" can be accessed with %-specifiers. See\nsystemd.unit\n(5)\nfor details.\nAutomatic Dependencies\nÂ¶\nImplicit Dependencies\nÂ¶\nThe following dependencies are implicitly added:\nServices with\nType=dbus\nset automatically\nacquire dependencies of type\nRequires=\nand\nAfter=\non\ndbus.socket\n.\nSocket activated services are automatically ordered after\ntheir activating\n.socket\nunits via an\nautomatic\nAfter=\ndependency.\nServices also pull in all\n.socket\nunits\nlisted in\nSockets=\nvia automatic\nWants=\nand\nAfter=\ndependencies.\nAdditional implicit dependencies may be added as result of\nexecution and resource control parameters as documented in\nsystemd.exec\n(5)\nand\nsystemd.resource-control\n(5)\n.\nDefault Dependencies\nÂ¶\nThe following dependencies are added unless\nDefaultDependencies=no\nis set:\nService units will have dependencies of type\nRequires=\nand\nAfter=\non\nsysinit.target\n, a dependency of type\nAfter=\non\nbasic.target\nas well as dependencies of type\nConflicts=\nand\nBefore=\non\nshutdown.target\n. These ensure that normal service units pull in\nbasic system initialization, and are terminated cleanly prior to system shutdown. Only services involved with early\nboot or late system shutdown should disable this option.\nInstanced service units (i.e. service units with an \"\n@\n\" in their name) are assigned by\ndefault a per-template slice unit (see\nsystemd.slice\n(5)\n), named after the\ntemplate unit, containing all instances of the specific template. This slice is normally stopped at shutdown,\ntogether with all template instances. If that is not desired, set\nDefaultDependencies=no\nin the\ntemplate unit, and either define your own per-template slice unit file that also sets\nDefaultDependencies=no\n, or set\nSlice=system.slice\n(or another suitable slice)\nin the template unit. Also see\nsystemd.resource-control\n(5)\n.\nOptions\nÂ¶\nService unit files may include [Unit] and [Install] sections, which are described in\nsystemd.unit\n(5)\n.\nService unit files must include a [Service]\nsection, which carries information about the service and the\nprocess it supervises. A number of options that may be used in\nthis section are shared with other unit types. These options are\ndocumented in\nsystemd.exec\n(5)\n,\nsystemd.kill\n(5)\nand\nsystemd.resource-control\n(5)\n.\nThe options specific to the [Service] section\nof service units are the following:\nType=\nÂ¶\nConfigures the mechanism via which the service notifies the manager that the service start-up\nhas finished. One of\nsimple\n,\nexec\n,\nforking\n,\noneshot\n,\ndbus\n,\nnotify\n,\nnotify-reload\n, or\nidle\n:\nIf set to\nsimple\n(the default if\nExecStart=\nis specified but neither\nType=\nnor\nBusName=\nare, and\ncredentials are not used), the service manager will consider the unit started immediately after\nthe main service process has been forked off (i.e. immediately after\nfork()\n,\nand before various process attributes have been configured and in particular before the new process\nhas called\nexecve()\nto invoke the actual service binary). Typically,\nType=\nexec\nis the better choice, see below.\nIt is expected that the process configured with\nExecStart=\nis the main\nprocess of the service. In this mode, if the process offers functionality to other processes on\nthe system, its communication channels should be installed before the service is started up\n(e.g. sockets set up by systemd, via socket activation), as the service manager will immediately\nproceed starting follow-up units, right after creating the main service process, and before\nexecuting the service's binary. Note that this means\nsystemctl start\ncommand\nlines for\nsimple\nservices will report success even if the service's binary\ncannot be invoked successfully (for example because the selected\nUser=\ndoes not\nexist, or the service binary is missing).\nThe\nexec\ntype is similar to\nsimple\n, but the\nservice manager will consider the unit started immediately after the main service binary has been\nexecuted. The service manager will delay starting of follow-up units until that point. (Or in\nother words:\nsimple\nproceeds with further jobs right after\nfork()\nreturns, while\nexec\nwill not proceed before both\nfork()\nand\nexecve()\nin the service process succeeded.)\nNote that this means\nsystemctl start\ncommand lines for\nexec\nservices will report failure when the service's binary cannot be invoked successfully (for\nexample because the selected\nUser=\ndoes not exist, or the service binary is\nmissing). This type is implied if credentials are used (refer to\nLoadCredential=\nin\nsystemd.exec\n(5)\nfor details).\nIf set to\nforking\n, the manager will consider the unit started\nimmediately after the binary that forked off by the manager exits.\nThe use of this type\nis discouraged, use\nnotify\n,\nnotify-reload\n, or\ndbus\ninstead.\nIt is expected that the process configured with\nExecStart=\nwill call\nfork()\nas part of its start-up. The parent process is expected to exit when\nstart-up is complete and all communication channels are set up. The child continues to run as the\nmain service process, and the service manager will consider the unit started when the parent\nprocess exits. This is the behavior of traditional UNIX services. If this setting is used, it is\nrecommended to also use the\nPIDFile=\noption, so that systemd can reliably\nidentify the main process of the service. The manager will proceed with starting follow-up units\nafter the parent process exits.\nBehavior of\noneshot\nis similar to\nsimple\n;\nhowever, the service manager will consider the unit up after the main process exits. It will then\nstart follow-up units.\nRemainAfterExit=\nis particularly useful for this type\nof service.\nType=\noneshot\nis the implied default if neither\nType=\nnor\nExecStart=\nare specified. Note that if this\noption is used without\nRemainAfterExit=\nthe service will never enter\n\"\nactive\n\" unit state, but will directly transition from\n\"\nactivating\n\" to \"\ndeactivating\n\" or \"\ndead\n\",\nsince no process is configured that shall run continuously. In particular this means that after a\nservice of this type ran (and which has\nRemainAfterExit=\nnot set) it will not\nshow up as started afterwards, but as dead.\nBehavior of\ndbus\nis similar to\nsimple\n; however,\nunits of this type must have the\nBusName=\nspecified and the service manager\nwill consider the unit up when the specified bus name has been acquired. This type is the default\nif\nBusName=\nis specified.\nService units with this option configured implicitly gain dependencies on the\ndbus.socket\nunit. A service unit of this type is considered to be in the\nactivating state until the specified bus name is acquired. It is considered activated while the\nbus name is taken. Once the bus name is released the service is considered being no longer\nfunctional which has the effect that the service manager attempts to terminate any remaining\nprocesses belonging to the service. Services that drop their bus name as part of their shutdown\nlogic thus should be prepared to receive a\nSIGTERM\n(or whichever signal is\nconfigured in\nKillSignal=\n) as result.\nBehavior of\nnotify\nis similar to\nexec\n; however,\nit is expected that the service sends a \"\nREADY=1\n\" notification message via\nsd_notify\n(3)\nor\nan equivalent call when it has finished starting up. systemd will proceed with starting follow-up\nunits after this notification message has been sent. If this option is used,\nNotifyAccess=\n(see below) should be set to open access to the notification\nsocket provided by systemd. If\nNotifyAccess=\nis missing or set to\nnone\n, it will be forcibly set to\nmain\n.\nIf the service supports reloading, and uses a signal to start the reload, using\nnotify-reload\ninstead is recommended.\nBehavior of\nnotify-reload\nis similar to\nnotify\n,\nwith one difference: the\nSIGHUP\nUNIX process signal is sent to the service's\nmain process when the service is asked to reload and the manager will wait for a notification\nabout the reload being finished.\nWhen initiating the reload process the service is expected to reply with a notification\nmessage via\nsd_notify\n(3)\nthat contains the \"\nRELOADING=1\n\" field in combination with\n\"\nMONOTONIC_USEC=\n\" set to the current monotonic time\n(i.e.\nCLOCK_MONOTONIC\nin\nclock_gettime\n(2)\n)\nin Î¼s, formatted as decimal string. Once reloading is complete another notification message must\nbe sent, containing \"\nREADY=1\n\". Using this service type and implementing this\nreload protocol is an efficient alternative to providing an\nExecReload=\ncommand for reloading of the service's configuration.\nThe signal to send can be tweaked via\nReloadSignal=\n, see below.\nBehavior of\nidle\nis very similar to\nsimple\n; however,\nactual execution of the service program is delayed until all active jobs are dispatched. This may be used\nto avoid interleaving of output of shell services with the status output on the console. Note that this\ntype is useful only to improve console output, it is not useful as a general unit ordering tool, and the\neffect of this service type is subject to a 5s timeout, after which the service program is invoked\nanyway.\nIt is recommended to use\nType=\nexec\nfor long-running\nservices, as it ensures that process setup errors (e.g. errors such as a missing service\nexecutable, or missing user) are properly tracked. However, as this service type will not propagate\nthe failures in the service's own startup code (as opposed to failures in the preparatory steps the\nservice manager executes before\nexecve()\n) and does not allow ordering of other\nunits against completion of initialization of the service code itself (which for example is useful\nif clients need to connect to the service through some form of IPC, and the IPC channel is only\nestablished by the service itself â in contrast to doing this ahead of time through socket or bus\nactivation or similar), it might not be sufficient for many cases. If so,\nnotify\n,\nnotify-reload\n, or\ndbus\n(the latter only in case the service\nprovides a D-Bus interface) are the preferred options as they allow service program code to\nprecisely schedule when to consider the service started up successfully and when to proceed with\nfollow-up units. The\nnotify\n/\nnotify-reload\nservice types require\nexplicit support in the service codebase (as\nsd_notify()\nor an equivalent API\nneeds to be invoked by the service at the appropriate time) â if it is not supported, then\nforking\nis an alternative: it supports the traditional heavy-weight UNIX service\nstart-up protocol. Note that using any type other than\nsimple\npossibly delays the\nboot process, as the service manager needs to wait for at least some service initialization to\ncomplete. (Also note it is generally not recommended to use\nidle\nor\noneshot\nfor long-running services.)\nNote that various service settings (e.g.\nUser=\n,\nGroup=\nthrough libc NSS) might result in \"hidden\" blocking IPC calls to other services when\nused. Sometimes it might be advisable to use the\nsimple\nservice type to ensure\nthat the service manager's transaction logic is not affected by such potentially slow operations\nand hidden dependencies, as this is the only service type where the service manager will not wait\nfor such service execution setup operations to complete before proceeding.\nExitType=\nÂ¶\nSpecifies when the manager should consider the service to be finished. One of\nmain\nor\ncgroup\n:\nIf set to\nmain\n(the default), the service manager\nwill consider the unit stopped when the main process, which is determined according to the\nType=\n, exits. Consequently, it cannot be used with\nType=\noneshot\n.\nIf set to\ncgroup\n, the service will be considered running as long as at\nleast one process in the cgroup has not exited.\nIt is generally recommended to use\nExitType=\nmain\nwhen a service has\na known forking model and a main process can reliably be determined.\nExitType=\ncgroup\nis meant for applications whose forking model is not known ahead of time and which\nmight not have a specific main process. It is well suited for transient or automatically generated services,\nsuch as graphical applications inside of a desktop environment.\nAdded in version 250.\nRemainAfterExit=\nÂ¶\nTakes a boolean value that specifies whether\nthe service shall be considered active even when all its\nprocesses exited. Defaults to\nno\n.\nGuessMainPID=\nÂ¶\nTakes a boolean value that specifies whether\nsystemd should try to guess the main PID of a service if it\ncannot be determined reliably. This option is ignored unless\nType=forking\nis set and\nPIDFile=\nis unset because for the other types\nor with an explicitly configured PID file, the main PID is\nalways known. The guessing algorithm might come to incorrect\nconclusions if a daemon consists of more than one process. If\nthe main PID cannot be determined, failure detection and\nautomatic restarting of a service will not work reliably.\nDefaults to\nyes\n.\nPIDFile=\nÂ¶\nTakes a path referring to the PID file of the service. Usage of this option is\nrecommended for services where\nType=\nis set to\nforking\n. The path\nspecified typically points to a file below\n/run/\n. If a relative path is\nspecified for system service, then it is hence prefixed with\n/run/\n, and prefixed\nwith\n$XDG_RUNTIME_DIR\nif specified in a user service. The service manager will\nread the PID of the main process of the service from this file after start-up of the service. The\nservice manager will not write to the file configured here, although it will remove the file after\nthe service has shut down if it still exists. The PID file does not need to be owned by a privileged\nuser, but if it is owned by an unprivileged user additional safety restrictions are enforced: the\nfile may not be a symlink to a file owned by a different user (neither directly nor indirectly), and\nthe PID file must refer to a process already belonging to the service.\nNote that PID files should be avoided in modern projects. Use\nType=notify\n,\nType=notify-reload\nor\nType=simple\nwhere possible, which does not\nrequire use of PID files to determine the main process of a service and avoids needless\nforking.\nBusName=\nÂ¶\nTakes a D-Bus destination name that this service shall use. This option is mandatory\nfor services where\nType=\nis set to\ndbus\n. It is recommended to\nalways set this property if known to make it easy to map the service name to the D-Bus destination.\nIn particular,\nsystemctl service-log-level/service-log-target\nverbs make use of\nthis.\nExecStart=\nÂ¶\nCommands that are executed when this service is started.\nUnless\nType=\nis\noneshot\n, exactly one command must be\ngiven. When\nType=oneshot\nis used, this setting may be used multiple times to\ndefine multiple commands to execute. If the empty string is assigned to this option, the list of\ncommands to start is reset, prior assignments of this option will have no effect. If no\nExecStart=\nis specified, then the service must have\nRemainAfterExit=yes\nand at least one\nExecStop=\nline\nset. (Services lacking both\nExecStart=\nand\nExecStop=\nare not\nvalid.)\nIf more than one command is configured, the commands are invoked sequentially in the order they\nappear in the unit file. If one of the commands fails (and is not prefixed with\n\"\n-\n\"), other lines are not executed, and the unit is considered failed.\nUnless\nType=forking\nis set, the process started via this command line will\nbe considered the main process of the daemon.\nExecStartPre=\n,\nExecStartPost=\nÂ¶\nAdditional commands that are executed before or after the command in\nExecStart=\n, respectively. Syntax is the same as for\nExecStart=\n.\nMultiple command lines are allowed, regardless of the service type (i.e.\nType=\n),\nand the commands are executed one after the other, serially.\nIf any of those commands (not prefixed with\n\"\n-\n\") fail, the rest are not executed and the\nunit is considered failed.\nExecStart=\ncommands are only run after\nall\nExecStartPre=\ncommands that were not prefixed\nwith a \"\n-\n\" exit successfully.\nExecStartPost=\ncommands are only run after the commands specified in\nExecStart=\nhave been invoked successfully, as determined by\nType=\n(i.e. the process has been started for\nType=simple\nor\nType=idle\n, the last\nExecStart=\nprocess exited successfully for\nType=oneshot\n, the initial process exited successfully for\nType=forking\n, \"\nREADY=1\n\" is sent for\nType=notify\n/\nType=notify-reload\n, or the\nBusName=\nhas been taken for\nType=dbus\n).\nNote that\nExecStartPre=\nmay not be\nused to start long-running processes. All processes forked\noff by processes invoked via\nExecStartPre=\nwill\nbe killed before the next service process is run.\nNote that if any of the commands specified in\nExecStartPre=\n,\nExecStart=\n, or\nExecStartPost=\nfail (and are not prefixed with\n\"\n-\n\", see above) or time out before the service is fully up, execution continues with commands\nspecified in\nExecStopPost=\n, the commands in\nExecStop=\nare skipped.\nNote that the execution of\nExecStartPost=\nis taken into account for the purpose of\nBefore=\n/\nAfter=\nordering constraints.\nExecCondition=\nÂ¶\nOptional commands that are executed before the commands in\nExecStartPre=\n. Syntax is the same as for\nExecStart=\n. Multiple\ncommand lines are allowed, regardless of the service type (i.e.\nType=\n), and the\ncommands are executed one after the other, serially.\nThe behavior is like an\nExecStartPre=\nand condition check hybrid: when an\nExecCondition=\ncommand exits with exit code 1 through 254 (inclusive), the remaining\ncommands are skipped and the unit is\nnot\nmarked as failed. However, if an\nExecCondition=\ncommand exits with 255 or abnormally (e.g. timeout, killed by a\nsignal, etc.), the unit will be considered failed (and remaining commands will be skipped). Exit code of 0 or\nthose matching\nSuccessExitStatus=\nwill continue execution to the next commands.\nThe same recommendations about not running long-running processes in\nExecStartPre=\nalso applies to\nExecCondition=\n.\nExecCondition=\nwill also run the commands\nin\nExecStopPost=\n, as part of stopping the service, in the case of any non-zero or abnormal\nexits, like the ones described above.\nAdded in version 243.\nExecReload=\nÂ¶\nCommands to execute to trigger a configuration reload in the service. This argument\ntakes multiple command lines, following the same scheme as described for\nExecStart=\nabove. Use of this setting is optional. Specifier and environment\nvariable substitution is supported here following the same scheme as for\nExecStart=\n.\nOne additional, special environment variable is set: if known,\n$MAINPID\nis\nset to the main process of the daemon, and may be used for command lines like the following:\nExecReload=kill -HUP $MAINPID\nNote however that reloading a daemon by enqueuing a signal (as with the example line above) is\nusually not a good choice, because this is an asynchronous operation and hence not suitable when\nordering reloads of multiple services against each other. It is thus strongly recommended to either\nuse\nType=\nnotify-reload\nin place of\nExecReload=\n, or to set\nExecReload=\nto a command that not only\ntriggers a configuration reload of the daemon, but also synchronously waits for it to complete. For\nexample,\ndbus-broker\n(1)\nuses the following:\nExecReload=busctl call org.freedesktop.DBus \\\n/org/freedesktop/DBus org.freedesktop.DBus \\\nReloadConfig\nExecStop=\nÂ¶\nCommands to execute to stop the service started via\nExecStart=\n. This argument takes multiple command lines, following the same scheme\nas described for\nExecStart=\nabove. Use of this setting is optional. After the\ncommands configured in this option are run, it is implied that the service is stopped, and any\nprocesses remaining for it are terminated according to the\nKillMode=\nsetting (see\nsystemd.kill\n(5)\n).\nIf this option is not specified, the process is terminated by sending the signal specified in\nKillSignal=\nor\nRestartKillSignal=\nwhen service stop is\nrequested. Specifier and environment variable substitution is supported (including\n$MAINPID\n, see above).\nNote that it is usually not sufficient to specify a command for this setting that only asks the\nservice to terminate (for example, by sending some form of termination signal to it), but does not\nwait for it to do so. Since the remaining processes of the services are killed according to\nKillMode=\nand\nKillSignal=\nor\nRestartKillSignal=\nas described above immediately after the command exited, this\nmay not result in a clean stop. The specified command should hence be a synchronous operation, not an\nasynchronous one.\nNote that the commands specified in\nExecStop=\nare only executed when the service\nstarted successfully first. They are not invoked if the service was never started at all, or in case its\nstart-up failed, for example because any of the commands specified in\nExecStart=\n,\nExecStartPre=\nor\nExecStartPost=\nfailed (and were not prefixed with\n\"\n-\n\", see above) or timed out. Use\nExecStopPost=\nto invoke commands when a\nservice failed to start up correctly and is shut down again. Also note that the stop operation is always\nperformed if the service started successfully, even if the processes in the service terminated on their\nown or were killed. The stop commands must be prepared to deal with that case.\n$MAINPID\nwill be unset if systemd knows that the main process exited by the time the stop commands are called.\nService restart requests are implemented as stop operations followed by start operations. This\nmeans that\nExecStop=\nand\nExecStopPost=\nare executed during a\nservice restart operation.\nIt is recommended to use this setting for commands that communicate with the service requesting\nclean termination. For post-mortem clean-up steps use\nExecStopPost=\ninstead.\nExecStopPost=\nÂ¶\nAdditional commands that are executed after the service is stopped. This includes cases where\nthe commands configured in\nExecStop=\nwere used, where the service does not have any\nExecStop=\ndefined, or where the service exited unexpectedly. This argument takes multiple\ncommand lines, following the same scheme as described for\nExecStart=\n. Use of these settings\nis optional. Specifier and environment variable substitution is supported. Note that â unlike\nExecStop=\nâ commands specified with this setting are invoked when a service failed to start\nup correctly and is shut down again.\nIt is recommended to use this setting for clean-up operations that shall be executed even when\nthe service failed to start up correctly. Commands configured with this setting need to be able to\noperate even if the service failed starting up half-way and left incompletely initialized data\naround. As the service's processes have likely exited already when the commands specified with this\nsetting are executed they should not attempt to communicate with them.\nNote that all commands that are configured with this setting are invoked with the result code of the\nservice, as well as the main process' exit code and status, set in the\n$SERVICE_RESULT\n,\n$EXIT_CODE\nand\n$EXIT_STATUS\nenvironment variables, see\nsystemd.exec\n(5)\nfor\ndetails.\nNote that the execution of\nExecStopPost=\nis taken into account for the purpose of\nBefore=\n/\nAfter=\nordering constraints.\nRestartSec=\nÂ¶\nConfigures the time to sleep before restarting\na service (as configured with\nRestart=\n).\nTakes a unit-less value in seconds, or a time span value such\nas \"5min 20s\". Defaults to 100ms.\nRestartSteps=\nÂ¶\nConfigures the number of steps to take to increase the interval\nof auto-restarts from\nRestartSec=\nto\nRestartMaxDelaySec=\n.\nTakes a positive integer or 0 to disable it. Defaults to 0.\nThis setting is effective only if\nRestartMaxDelaySec=\nis also set.\nAdded in version 254.\nRestartMaxDelaySec=\nÂ¶\nConfigures the longest time to sleep before restarting a service\nas the interval goes up with\nRestartSteps=\n. Takes a value\nin the same format as\nRestartSec=\n, or \"\ninfinity\n\"\nto disable the setting. Defaults to \"\ninfinity\n\".\nThis setting is effective only if\nRestartSteps=\nis also set.\nAdded in version 254.\nTimeoutStartSec=\nÂ¶\nConfigures the time to wait for start-up. If a daemon service does not signal\nstart-up completion within the configured time, the service will be considered failed and will be\nshut down again. The precise action depends on the\nTimeoutStartFailureMode=\noption. Takes a unit-less value in seconds, or a time span value such as \"5min 20s\". Pass\n\"\ninfinity\n\" to disable the timeout logic. Defaults to\nDefaultTimeoutStartSec=\nset in the manager, except when\nType=oneshot\nis used, in which case the timeout is disabled by default (see\nsystemd-system.conf\n(5)\n).\nIf a service of\nType=notify\n/\nType=notify-reload\nsends\n\"\nEXTEND_TIMEOUT_USEC=â¦\n\", this may cause the start time to be extended beyond\nTimeoutStartSec=\n. The first receipt of this message must occur before\nTimeoutStartSec=\nis exceeded, and once the start time has extended beyond\nTimeoutStartSec=\n, the service manager will allow the service to continue to start,\nprovided the service repeats \"\nEXTEND_TIMEOUT_USEC=â¦\n\" within the interval specified\nuntil the service startup status is finished by \"\nREADY=1\n\". (see\nsd_notify\n(3)\n).\nNote that the start timeout is also applied to service reloads, regardless of whether implemented\nthrough\nExecReload=\nor via the reload logic enabled via\nType=notify-reload\n.\nIf the reload does not complete within the configured time, the reload will be considered failed and\nthe service will continue running with the old configuration. This will not affect the running service,\nbut will be logged and will cause e.g.\nsystemctl reload\nto fail.\nAdded in version 188.\nTimeoutStopSec=\nÂ¶\nThis option serves two purposes. First, it configures the time to wait for each\nExecStop=\ncommand. If any of them times out, subsequent\nExecStop=\ncommands\nare skipped and the service will be terminated by\nSIGTERM\n. If no\nExecStop=\ncommands are specified, the service gets the\nSIGTERM\nimmediately. This default behavior\ncan be changed by the\nTimeoutStopFailureMode=\noption. Second, it configures the time\nto wait for the service itself to stop. If it does not terminate in the specified time, it will be forcibly terminated\nby\nSIGKILL\n(see\nKillMode=\nin\nsystemd.kill\n(5)\n).\nTakes a unit-less value in seconds, or a time span value such\nas \"5min 20s\". Pass \"\ninfinity\n\" to disable the\ntimeout logic. Defaults to\nDefaultTimeoutStopSec=\nfrom the manager\nconfiguration file (see\nsystemd-system.conf\n(5)\n).\nIf a service of\nType=notify\n/\nType=notify-reload\nsends\n\"\nEXTEND_TIMEOUT_USEC=â¦\n\", this may cause the stop time to be extended beyond\nTimeoutStopSec=\n. The first receipt of this message must occur before\nTimeoutStopSec=\nis exceeded, and once the stop time has extended beyond\nTimeoutStopSec=\n, the service manager will allow the service to continue to stop,\nprovided the service repeats \"\nEXTEND_TIMEOUT_USEC=â¦\n\" within the interval specified,\nor terminates itself (see\nsd_notify\n(3)\n).\nAdded in version 188.\nTimeoutAbortSec=\nÂ¶\nThis option configures the time to wait for the service to terminate when it was aborted due to a\nwatchdog timeout (see\nWatchdogSec=\n). If the service has a short\nTimeoutStopSec=\nthis option can be used to give the system more time to write a core dump of the service. Upon expiration the service\nwill be forcibly terminated by\nSIGKILL\n(see\nKillMode=\nin\nsystemd.kill\n(5)\n). The core file will\nbe truncated in this case. Use\nTimeoutAbortSec=\nto set a sensible timeout for the core dumping per\nservice that is large enough to write all expected data while also being short enough to handle the service failure\nin due time.\nTakes a unit-less value in seconds, or a time span value such as \"5min 20s\". Pass an empty value to skip\nthe dedicated watchdog abort timeout handling and fall back\nTimeoutStopSec=\n. Pass\n\"\ninfinity\n\" to disable the timeout logic. Defaults to\nDefaultTimeoutAbortSec=\nfrom\nthe manager configuration file (see\nsystemd-system.conf\n(5)\n).\nIf a service of\nType=notify\n/\nType=notify-reload\nhandles\nSIGABRT\nitself (instead of relying on the kernel to write a core dump) it can\nsend \"\nEXTEND_TIMEOUT_USEC=â¦\n\" to extended the abort time beyond\nTimeoutAbortSec=\n. The first receipt of this message must occur before\nTimeoutAbortSec=\nis exceeded, and once the abort time has extended beyond\nTimeoutAbortSec=\n, the service manager will allow the service to continue to abort,\nprovided the service repeats \"\nEXTEND_TIMEOUT_USEC=â¦\n\" within the interval specified,\nor terminates itself (see\nsd_notify\n(3)\n).\nAdded in version 243.\nTimeoutSec=\nÂ¶\nA shorthand for configuring both\nTimeoutStartSec=\nand\nTimeoutStopSec=\nto the specified value.\nTimeoutStartFailureMode=\n,\nTimeoutStopFailureMode=\nÂ¶\nThese options configure the action that is taken in case a daemon service does not signal\nstart-up within its configured\nTimeoutStartSec=\n, respectively if it does not stop within\nTimeoutStopSec=\n. Takes one of\nterminate\n,\nabort\nand\nkill\n. Both options default to\nterminate\n.\nIf\nterminate\nis set the service will be gracefully terminated by sending the signal\nspecified in\nKillSignal=\n(defaults to\nSIGTERM\n, see\nsystemd.kill\n(5)\n). If the\nservice does not terminate the\nFinalKillSignal=\nis sent after\nTimeoutStopSec=\n. If\nabort\nis set,\nWatchdogSignal=\nis sent\ninstead and\nTimeoutAbortSec=\napplies before sending\nFinalKillSignal=\n.\nThis setting may be used to analyze services that fail to start-up or shut-down intermittently.\nBy using\nkill\nthe service is immediately terminated by sending\nFinalKillSignal=\nwithout any further timeout. This setting can be used to expedite the\nshutdown of failing services.\nAdded in version 246.\nRuntimeMaxSec=\nÂ¶\nConfigures a maximum time for the service to run. If this is used and the service has been\nactive for longer than the specified time it is terminated and put into a failure state. Note that this setting\ndoes not have any effect on\nType=oneshot\nservices, as they terminate immediately after\nactivation completed (use\nTimeoutStartSec=\nto limit their activation).\nPass \"\ninfinity\n\" (the default) to configure no runtime limit.\nIf a service of\nType=notify\n/\nType=notify-reload\nsends\n\"\nEXTEND_TIMEOUT_USEC=â¦\n\", this may cause the runtime to be extended beyond\nRuntimeMaxSec=\n. The first receipt of this message must occur before\nRuntimeMaxSec=\nis exceeded, and once the runtime has extended beyond\nRuntimeMaxSec=\n, the service manager will allow the service to continue to run,\nprovided the service repeats \"\nEXTEND_TIMEOUT_USEC=â¦\n\" within the interval specified\nuntil the service shutdown is achieved by \"\nSTOPPING=1\n\" (or termination). (see\nsd_notify\n(3)\n).\nAdded in version 229.\nRuntimeRandomizedExtraSec=\nÂ¶\nThis option modifies\nRuntimeMaxSec=\nby increasing the maximum runtime by an\nevenly distributed duration between 0 and the specified value (in seconds). If\nRuntimeMaxSec=\nis\nunspecified, then this feature will be disabled.\nAdded in version 250.\nWatchdogSec=\nÂ¶\nConfigures the watchdog timeout for a service.\nThe watchdog is activated when the start-up is completed. The\nservice must call\nsd_notify\n(3)\nregularly with \"\nWATCHDOG=1\n\" (i.e. the\n\"keep-alive ping\"). If the time between two such calls is\nlarger than the configured time, then the service is placed in\na failed state and it will be terminated with\nSIGABRT\n(or the signal specified by\nWatchdogSignal=\n). By setting\nRestart=\nto\non-failure\n,\non-watchdog\n,\non-abnormal\nor\nalways\n, the service will be automatically\nrestarted. The time configured here will be passed to the\nexecuted service process in the\nWATCHDOG_USEC=\nenvironment variable. This\nallows daemons to automatically enable the keep-alive pinging\nlogic if watchdog support is enabled for the service. If this\noption is used,\nNotifyAccess=\n(see below)\nshould be set to open access to the notification socket\nprovided by systemd. If\nNotifyAccess=\nis\nnot set, it will be implicitly set to\nmain\n.\nDefaults to 0, which disables this feature. The service can\ncheck whether the service manager expects watchdog keep-alive\nnotifications. See\nsd_watchdog_enabled\n(3)\nfor details.\nsd_event_set_watchdog\n(3)\nmay be used to enable automatic watchdog notification support.\nRestart=\nÂ¶\nConfigures whether the service shall be restarted when the service process exits,\nis killed, or a timeout is reached. The service process may be the main service process, but it may\nalso be one of the processes specified with\nExecStartPre=\n,\nExecStartPost=\n,\nExecStop=\n,\nExecStopPost=\n,\nor\nExecReload=\n. When the death of the process is a result of systemd operation\n(e.g. service stop or restart), the service will not be restarted. Timeouts include missing the watchdog\n\"keep-alive ping\" deadline and a service start, reload, and stop operation timeouts.\nTakes one of\nno\n,\non-success\n,\non-failure\n,\non-abnormal\n,\non-watchdog\n,\non-abort\n, or\nalways\n. If set to\nno\n(the default), the service will not be restarted.\nIf set to\non-success\n, it will be restarted only when the service process exits cleanly.\nIn this context, a clean exit means any of the following:\nexit code of 0;\nfor types other than\nType=oneshot\n, one of the signals\nSIGHUP\n,\nSIGINT\n,\nSIGTERM\n, or\nSIGPIPE\n;\nexit statuses and signals specified in\nSuccessExitStatus=\n.\nIf set to\non-failure\n, the service will be restarted when the process exits with\na non-zero exit code, is terminated by a signal (including on core dump, but excluding the aforementioned\nfour signals), when an operation (such as service reload) times out, and when the configured watchdog\ntimeout is triggered. If set to\non-abnormal\n, the service will be restarted when\nthe process is terminated by a signal (including on core dump, excluding the aforementioned four signals),\nwhen an operation times out, or when the watchdog timeout is triggered. If set to\non-abort\n,\nthe service will be restarted only if the service process exits due to an uncaught signal not specified\nas a clean exit status. If set to\non-watchdog\n, the service will be restarted\nonly if the watchdog timeout for the service expires. If set to\nalways\n, the service\nwill be restarted regardless of whether it exited cleanly or not, got terminated abnormally by\na signal, or hit a timeout. Note that\nType=oneshot\nservices will never be restarted\non a clean exit status, i.e.\nalways\nand\non-success\nare rejected\nfor them.\nTableÂ 1.Â Exit causes and the effect of the\nRestart=\nsettings\nRestart settings/Exit causes\nno\nalways\non-success\non-failure\non-abnormal\non-abort\non-watchdog\nClean exit code or signal\nÂ\nX\nX\nÂ\nÂ\nÂ\nÂ\nUnclean exit code\nÂ\nX\nÂ\nX\nÂ\nÂ\nÂ\nUnclean signal\nÂ\nX\nÂ\nX\nX\nX\nÂ\nTimeout\nÂ\nX\nÂ\nX\nX\nÂ\nÂ\nWatchdog\nÂ\nX\nÂ\nX\nX\nÂ\nX\nTermination due to OOM\nÂ\nX\nÂ\nX\nX\nÂ\nÂ\nAs exceptions to the setting above, the service will not\nbe restarted if the exit code or signal is specified in\nRestartPreventExitStatus=\n(see below) or\nthe service is stopped with\nsystemctl stop\nor an equivalent operation. Also, the services will always be\nrestarted if the exit code or signal is specified in\nRestartForceExitStatus=\n(see below).\nNote that service restart is subject to unit start rate\nlimiting configured with\nStartLimitIntervalSec=\nand\nStartLimitBurst=\n, see\nsystemd.unit\n(5)\nfor details.\nSetting this to\non-failure\nis the\nrecommended choice for long-running services, in order to\nincrease reliability by attempting automatic recovery from\nerrors. For services that shall be able to terminate on their\nown choice (and avoid immediate restarting),\non-abnormal\nis an alternative choice.\nRestartMode=\nÂ¶\nTakes a string value that specifies how a service should restart:\nIf set to\nnormal\n(the default), the service restarts by going through\na failed/inactive state.\nAdded in version 254.\nIf set to\ndirect\n, the service transitions to the activating\nstate directly during auto-restart, skipping failed/inactive state.\nExecStopPost=\nis still invoked.\nOnSuccess=\nand\nOnFailure=\nare skipped.\nThis option is useful in cases where a dependency can fail temporarily but we do not\nwant these temporary failures to make the dependent units fail. Dependent units are not\nnotified of these temporary failures.\nAdded in version 254.\nIf set to\ndebug\n, the service manager will log messages that are\nrelated to this unit at debug level while automated restarts are attempted, until either the\nservice hits the rate limit or it succeeds, and the\n$DEBUG_INVOCATION=1\nenvironment variable will be set for the unit. This is useful to be able to get additional\ninformation when a service fails to start, without needing to proactively or permanently\nenable debug level logging in systemd, which is very verbose. This is otherwise equivalent\nto\nnormal\nmode.\nAdded in version 257.\nAdded in version 254.\nSuccessExitStatus=\nÂ¶\nTakes a list of exit status definitions that, when returned by the main service\nprocess, will be considered successful termination, in addition to the normal successful exit status\n0 and, except for\nType=oneshot\n, the signals\nSIGHUP\n,\nSIGINT\n,\nSIGTERM\n, and\nSIGPIPE\n. Exit status definitions can be\nnumeric termination statuses, termination status names, or termination signal names, separated by\nspaces. See the Process Exit Codes section in\nsystemd.exec\n(5)\nfor\na list of termination status names (for this setting only the part without the\n\"\nEXIT_\n\" or \"\nEX_\n\" prefix should be used). See\nsignal\n(7)\nfor\na list of signal names.\nNote that this setting does not change the mapping between numeric exit statuses and their\nnames, i.e. regardless how this setting is used 0 will still be mapped to \"\nSUCCESS\n\"\n(and thus typically shown as \"\n0/SUCCESS\n\" in tool outputs) and 1 to\n\"\nFAILURE\n\" (and thus typically shown as \"\n1/FAILURE\n\"), and so on. It\nonly controls what happens as effect of these exit statuses, and how it propagates to the state of\nthe service as a whole.\nThis option may appear more than once, in which case the list of successful exit statuses is\nmerged. If the empty string is assigned to this option, the list is reset, all prior assignments of\nthis option will have no effect.\nExampleÂ 1.Â A service with the\nSuccessExitStatus=\nsetting\nSuccessExitStatus=TEMPFAIL 250 SIGKILL\nExit status 75 (\nTEMPFAIL\n), 250, and the termination signal\nSIGKILL\nare considered clean service terminations.\nNote:\nsystemd-analyze exit-status\nmay be used to list exit statuses and\ntranslate between numerical status values and names.\nAdded in version 189.\nRestartPreventExitStatus=\nÂ¶\nTakes a list of exit status definitions that, when returned by the main service\nprocess, will prevent automatic service restarts, regardless of the restart setting configured with\nRestart=\n. Exit status definitions can be numeric termination statuses, termination\nstatus names, or termination signal names, separated by spaces. Defaults to the empty list, so that,\nby default, no exit status is excluded from the configured restart logic.\nExampleÂ 2.Â A service with the\nRestartPreventExitStatus=\nsetting\nRestartPreventExitStatus=TEMPFAIL 250 SIGKILL\nExit status 75 (\nTEMPFAIL\n), 250, and the termination signal\nSIGKILL\nwill not result in automatic service restarting.\nThis option may appear more than once, in which case the list of restart-preventing statuses is merged.\nIf the empty string is assigned to this option, the list is reset and all prior assignments of this\noption will have no effect.\nNote that this setting has no effect on processes configured via\nExecStartPre=\n,\nExecStartPost=\n,\nExecStop=\n,\nExecStopPost=\nor\nExecReload=\n, but only on the main service\nprocess, i.e. either the one invoked by\nExecStart=\nor (depending on\nType=\n,\nPIDFile=\n, â¦) the otherwise configured main\nprocess.\nAdded in version 189.\nRestartForceExitStatus=\nÂ¶\nTakes a list of exit status definitions that, when returned by the main service\nprocess, will force automatic service restarts, regardless of the restart setting configured with\nRestart=\n. The argument format is similar to\nRestartPreventExitStatus=\n.\nNote that for\nType=oneshot\nservices, a success exit status will prevent\nthem from auto-restarting, no matter whether the corresponding exit statuses are listed in this\noption or not.\nAdded in version 215.\nRootDirectoryStartOnly=\nÂ¶\nTakes a boolean argument. If true, the root\ndirectory, as configured with the\nRootDirectory=\noption (see\nsystemd.exec\n(5)\nfor more information), is only applied to the process started\nwith\nExecStart=\n, and not to the various\nother\nExecStartPre=\n,\nExecStartPost=\n,\nExecReload=\n,\nExecStop=\n,\nand\nExecStopPost=\ncommands. If false, the\nsetting is applied to all configured commands the same way.\nDefaults to false.\nNonBlocking=\nÂ¶\nSet the\nO_NONBLOCK\nflag for all file descriptors passed via\nsocket-based activation. If true, all file descriptors >= 3 (i.e. all except stdin, stdout, stderr),\nexcluding those passed in via the file descriptor storage logic (see\nFileDescriptorStoreMax=\nfor details), will have the\nO_NONBLOCK\nflag set and hence are in non-blocking mode. This option is only\nuseful in conjunction with a socket unit, as described in\nsystemd.socket\n(5)\nand has no effect on file descriptors which were previously saved in the file-descriptor store for\nexample.  Defaults to false.\nNote that if the same socket unit is configured to be passed to multiple service units (via the\nSockets=\nsetting, see below), and these services have different\nNonBlocking=\nconfigurations, the precise state of\nO_NONBLOCK\ndepends on the order in which these services are invoked, and will possibly change after service code\nalready took possession of the socket file descriptor, simply because the\nO_NONBLOCK\nstate of a socket is shared by all file descriptors referencing\nit. Hence it is essential that all services sharing the same socket use the same\nNonBlocking=\nconfiguration, and do not change the flag in service code\neither.\nNotifyAccess=\nÂ¶\nControls access to the service status notification socket, as accessible via the\nsd_notify\n(3)\ncall. Takes one of\nnone\n(the default),\nmain\n,\nexec\nor\nall\n. If\nnone\n, no daemon status updates are accepted from the\nservice processes, all status update messages are ignored. If\nmain\n, only service\nupdates sent from the main process of the service are accepted. If\nexec\n, only\nservice updates sent from any of the main or control processes originating from one of the\nExec*=\ncommands are accepted. If\nall\n, all services updates from\nall members of the service's control group are accepted. This option should be set to open access to\nthe notification socket when using\nType=notify\n/\nType=notify-reload\nor\nWatchdogSec=\n(see above). If those options are used but\nNotifyAccess=\nis not configured, it will be implicitly set to\nmain\n.\nNote that\nsd_notify()\nnotifications may be attributed to units correctly only if\neither the sending process is still around at the time PID 1 processes the message, or if the sending process\nis explicitly runtime-tracked by the service manager. The latter is the case if the service manager originally\nforked off the process, i.e. on all processes that match\nmain\nor\nexec\n. Conversely, if an auxiliary process of the unit sends an\nsd_notify()\nmessage and immediately exits, the service manager might not be able to\nproperly attribute the message to the unit, and thus will ignore it, even if\nNotifyAccess=\nall\nis set for it.\nHence, to eliminate all race conditions involving lookup of the client's unit and attribution of notifications\nto units correctly,\nsd_notify_barrier()\nmay be used. This call acts as a synchronization point\nand ensures all notifications sent before this call have been picked up by the service manager when it returns\nsuccessfully. Use of\nsd_notify_barrier()\nis needed for clients which are not invoked by the\nservice manager, otherwise this synchronization mechanism is unnecessary for attribution of notifications to the\nunit.\nSockets=\nÂ¶\nSpecifies the name of the socket units this\nservice shall inherit socket file descriptors from when the\nservice is started. Normally, it should not be necessary to use\nthis setting, as all socket file descriptors whose unit shares\nthe same name as the service (subject to the different unit\nname suffix of course) are passed to the spawned\nprocess.\nNote that the same socket file descriptors may be passed\nto multiple processes simultaneously. Also note that a\ndifferent service may be activated on incoming socket traffic\nthan the one which is ultimately configured to inherit the\nsocket file descriptors. Or, in other words: the\nService=\nsetting of\n.socket\nunits does not have to match the\ninverse of the\nSockets=\nsetting of the\n.service\nit refers to.\nThis option may appear more than once, in which case the list of socket units is merged. Note\nthat once set, clearing the list of sockets again (for example, by assigning the empty string to this\noption) is not supported.\nFileDescriptorStoreMax=\nÂ¶\nConfigure how many file descriptors may be stored in the service manager for the\nservice using\nsd_pid_notify_with_fds\n(3)\n's\n\"\nFDSTORE=1\n\" messages. This is useful for implementing services that can restart\nafter an explicit request or a crash without losing state. Any open sockets and other file\ndescriptors which should not be closed during the restart may be stored this way. Application state\ncan either be serialized to a file in\nRuntimeDirectory=\n, or stored in a\nmemfd_create\n(2)\nmemory file descriptor. Defaults to 0, i.e. no file descriptors may be stored in the service\nmanager. All file descriptors passed to the service manager from a specific service are passed back\nto the service's main process on the next service restart (see\nsd_listen_fds\n(3)\nfor\ndetails about the precise protocol used and the order in which the file descriptors are passed). Any\nfile descriptors passed to the service manager are automatically closed when\nPOLLHUP\nor\nPOLLERR\nis seen on them, or when the service is\nfully stopped and no job is queued or being executed for it (the latter can be tweaked with\nFileDescriptorStorePreserve=\n, see below). If this option is used,\nNotifyAccess=\n(see above) should be set to open access to the notification socket\nprovided by systemd. If\nNotifyAccess=\nis not set, it will be implicitly set to\nmain\n.\nThe\nfdstore\ncommand of\nsystemd-analyze\n(1)\nmay be used to list the current contents of a service's file descriptor store.\nNote that the service manager will only pass file descriptors contained in the file descriptor\nstore to the service's own processes, never to other clients via IPC or similar. However, it does\nallow unprivileged clients to query the list of currently open file descriptors of a\nservice. Sensitive data may hence be safely placed inside the referenced files, but should not be\nattached to the metadata (e.g. included in filenames) of the stored file\ndescriptors.\nIf this option is set to a non-zero value the\n$FDSTORE\nenvironment variable\nwill be set for processes invoked for this service. See\nsystemd.exec\n(5)\nfor\ndetails.\nFor further information on the file descriptor store see the\nFile Descriptor Store\noverview.\nAdded in version 219.\nFileDescriptorStorePreserve=\nÂ¶\nTakes one of\nno\n,\nyes\n,\nrestart\nand controls when to release the service's file descriptor store\n(i.e. when to close the contained file descriptors, if any). If set to\nno\nthe\nfile descriptor store is automatically released when the service is stopped; if\nrestart\n(the default) it is kept around as long as the unit is neither inactive\nnor failed, or a job is queued for the service, or the service is expected to be restarted. If\nyes\nthe file descriptor store is kept around until the unit is removed from\nmemory (i.e. is not referenced anymore and inactive). The latter is useful to keep entries in the\nfile descriptor store pinned until the service manager exits.\nUse\nsystemctl clean --what=fdstore â¦\nto release the file descriptor store\nexplicitly.\nAdded in version 254.\nUSBFunctionDescriptors=\nÂ¶\nConfigure the location of a file containing\nUSB\nFunctionFS\ndescriptors, for implementation of USB\ngadget functions. This is used only in conjunction with a\nsocket unit with\nListenUSBFunction=\nconfigured. The contents of this file are written to the\nep0\nfile after it is\nopened.\nAdded in version 227.\nUSBFunctionStrings=\nÂ¶\nConfigure the location of a file containing\nUSB FunctionFS strings.  Behavior is similar to\nUSBFunctionDescriptors=\nabove.\nAdded in version 227.\nOOMPolicy=\nÂ¶\nConfigure the out-of-memory (OOM) killing policy for the kernel and the userspace OOM\nkiller\nsystemd-oomd.service\n(8)\n.\nOn Linux, when memory becomes scarce to the point that the kernel has trouble allocating memory for\nitself, it might decide to kill a running process in order to free up memory and reduce memory\npressure. Note that\nsystemd-oomd.service\nis a more flexible solution that aims\nto prevent out-of-memory situations for the userspace too, not just the kernel, by attempting to\nterminate services earlier, before the kernel would have to act.\nThis setting takes one of\ncontinue\n,\nstop\nor\nkill\n. If set to\ncontinue\nand a process in the unit is\nkilled by the OOM killer, this is logged but the unit continues running. If set to\nstop\nthe event is logged but the unit is terminated cleanly by the service\nmanager. If set to\nkill\nand one of the unit's processes is killed by the OOM\nkiller the kernel is instructed to kill all remaining processes of the unit too, by setting the\nmemory.oom.group\nattribute to\n1\n; also see kernel\npage\nControl Group v2\n.\nDefaults to the setting\nDefaultOOMPolicy=\nin\nsystemd-system.conf\n(5)\nis set to, except for units where\nDelegate=\nis turned on, where it defaults to\ncontinue\n.\nUse the\nOOMScoreAdjust=\nsetting to configure whether processes of the unit\nshall be considered preferred or less preferred candidates for process termination by the Linux OOM\nkiller logic. See\nsystemd.exec\n(5)\nfor\ndetails.\nThis setting also applies to\nsystemd-oomd.service\n(8)\n.\nSimilarly to the kernel OOM kills performed by the kernel, this setting determines the state of the\nunit after\nsystemd-oomd\nkills a cgroup associated with it.\nAdded in version 243.\nOpenFile=\nÂ¶\nTakes an argument of the form \"\npath[\n:fd-name:options\n]\n\",\nwhere:\n\"\npath\n\" is a path to a file or an\nAF_UNIX\nsocket in the file system;\n\"\nfd-name\n\" is a name that will be associated with the file descriptor;\nthe name may contain any ASCII character, but must exclude control characters and \":\", and must be at most 255 characters in length;\nit is optional and, if not provided, defaults to the file name;\n\"\noptions\n\" is a comma-separated list of access options;\npossible values are\n\"\nread-only\n\",\n\"\nappend\n\",\n\"\ntruncate\n\",\n\"\ngraceful\n\";\nif not specified, files will be opened in\nrw\nmode;\nif \"\ngraceful\n\" is specified, errors during file/socket opening are ignored.\nSpecifying the same option several times is treated as an error.\nThe file or socket is opened by the service manager and the file descriptor is passed to the service.\nIf the path is a socket, we call\nconnect()\non it.\nSee\nsd_listen_fds\n(3)\nfor more details on how to retrieve these file descriptors.\nThis setting is useful to allow services to access files/sockets that they cannot access themselves\n(due to running in a separate mount namespace, not having privileges, ...).\nThis setting can be specified multiple times, in which case all the specified paths are opened and the file descriptors passed to the service.\nIf the empty string is assigned, the entire list of open files defined prior to this is reset.\nAdded in version 253.\nReloadSignal=\nÂ¶\nConfigures the UNIX process signal to send to the service's main process when asked\nto reload the service's configuration. Defaults to\nSIGHUP\n. This option has no\neffect unless\nType=\nnotify-reload\nis used, see\nabove.\nAdded in version 253.\nCheck\nsystemd.unit\n(5)\n,\nsystemd.exec\n(5)\n, and\nsystemd.kill\n(5)\nfor more\nsettings.\nCommand lines\nÂ¶\nThis section describes command line parsing and\nvariable and specifier substitutions for\nExecStart=\n,\nExecStartPre=\n,\nExecStartPost=\n,\nExecReload=\n,\nExecStop=\n,\nExecStopPost=\n, and\nExecCondition=\noptions.\nMultiple command lines may be specified by using the relevant setting multiple times.\nEach command line is unquoted using the rules described in \"Quoting\" section in\nsystemd.syntax\n(7)\n. The\nfirst item becomes the command to execute, and the subsequent items the arguments.\nThis syntax is inspired by shell syntax, but only the meta-characters and expansions\ndescribed in the following paragraphs are understood, and the expansion of variables is\ndifferent. Specifically, redirection using\n\"\n<\n\",\n\"\n<<\n\",\n\"\n>\n\", and\n\"\n>>\n\", pipes using\n\"\n|\n\", running programs in the background using\n\"\n&\n\", and\nother elements of shell\nsyntax are not supported\n.\nThe command to execute may contain spaces, but control characters are not allowed.\nEach command may be prefixed with a number of special characters:\nTableÂ 2.Â Special executable prefixes\nPrefix\nEffect\n\"\n@\n\"\nIf the executable path is prefixed with \"\n@\n\", the second specified token will be passed as\nargv[0]\nto the executed process (instead of the actual filename), followed by the further arguments specified, unless \"\n|\n\" is also specified, in which case it enables login shell semantics for the shell spawned by prefixing \"\n-\n\" to\nargv[0]\n.\n\"\n-\n\"\nIf the executable path is prefixed with \"\n-\n\", an exit code of the command normally considered a failure (i.e. non-zero exit status or abnormal exit due to signal) is recorded, but has no further effect and is considered equivalent to success.\n\"\n:\n\"\nIf the executable path is prefixed with \"\n:\n\", environment variable substitution (as described below this table) is not applied.\n\"\n+\n\"\nIf the executable path is prefixed with \"\n+\n\" then the process is executed with full privileges. In this mode privilege restrictions configured with\nUser=\n,\nGroup=\n,\nCapabilityBoundingSet=\nor the various file system namespacing options (such as\nPrivateDevices=\n,\nPrivateTmp=\n) are not applied to the invoked command line (but still affect any other\nExecStart=\n,\nExecStop=\n, â¦ lines). However, note that this will not bypass options that apply to the whole control group, such as\nDevicePolicy=\n, see\nsystemd.resource-control\n(5)\nfor the full list.\n\"\n!\n\"\nSimilar to the \"\n+\n\" character discussed above this permits invoking command lines with elevated privileges. However, unlike \"\n+\n\" the \"\n!\n\" character exclusively alters the effect of\nUser=\n,\nGroup=\nand\nSupplementaryGroups=\n, i.e. only the stanzas that affect user and group credentials. Note that this setting may be combined with\nDynamicUser=\n, in which case a dynamic user/group pair is allocated before the command is invoked, but credential changing is left to the executed process itself.\n\"\n|\n\"\nIf \"\n|\n\" is specified standalone as executable path, invoke the default shell of\nUser=\n. If specified as a prefix, use the shell (\"\n-c\n\") to spawn the executable. When \"\n@\n\" is used in conjunction,\nargv[0]\nof shell will be prefixed with \"\n-\n\" to enable login shell semantics.\n\"\n@\n\", \"\n|\n\", \"\n-\n\", \"\n:\n\", and one of\n\"\n+\n\"/\"\n!\n\" may be used together and they can appear in any order.\nHowever, \"\n+\n\" and \"\n!\n\" may not be specified at the same time.\nFor each command, the first argument must be either an absolute path to an executable or a simple\nfile name without any slashes. If the command is not a full (absolute) path, it will be resolved to a\nfull path using a fixed search path determined at compilation time. Searched directories include\n/usr/local/bin/\n,\n/usr/bin/\n, and their\nsbin/\ncounterparts (only on systems using split\nbin/\nand\nsbin/\n). It is thus safe to use just the executable name in case of executables\nlocated in any of the \"standard\" directories, and an absolute path must be used in other cases.  Hint:\nthis search path may be queried using\nsystemd-path search-binaries-default\n.\nThe command line accepts \"\n%\n\" specifiers as described in\nsystemd.unit\n(5)\n.\nAn argument solely consisting of \"\n;\n\" must be escaped, i.e. specified as \"\n\\;\n\".\nBasic environment variable substitution is supported. Use\n\"\n${FOO}\n\" as part of a word, or as a word of its\nown, on the command line, in which case it will be erased and replaced\nby the exact value of the environment variable (if any) including all\nwhitespace it contains, always resulting in exactly a single argument.\nUse \"\n$FOO\n\" as a separate word on the command line, in\nwhich case it will be replaced by the value of the environment\nvariable split at whitespace, resulting in zero or more arguments.\nFor this type of expansion, quotes are respected when splitting\ninto words, and afterwards removed.\nExample:\nEnvironment=\"ONE=one\" 'TWO=two two'\nExecStart=echo $ONE $TWO ${TWO}\nThis will execute\n/bin/echo\nwith four\narguments: \"\none\n\", \"\ntwo\n\",\n\"\ntwo\n\", and \"\ntwo two\n\".\nExample:\nEnvironment=ONE='one' \"TWO='twoÂ two'Â too\" THREE=\nExecStart=/bin/echo ${ONE} ${TWO} ${THREE}\nExecStart=/bin/echo $ONE $TWO $THREE\nThis results in\n/bin/echo\nbeing\ncalled twice, the first time with arguments\n\"\n'one'\n\",\n\"\n'twoÂ two'Â too\n\", \"\n\",\nand the second time with arguments\n\"\none\n\", \"\ntwoÂ two\n\",\n\"\ntoo\n\".\nTo pass a literal dollar sign, use \"\n$$\n\".\nVariables whose value is not known at expansion time are treated\nas empty strings. Note that the first argument (i.e. the program\nto execute) may not be a variable.\nVariables to be used in this fashion may be defined through\nEnvironment=\nand\nEnvironmentFile=\n. In addition, variables listed\nin the section \"Environment variables in spawned processes\" in\nsystemd.exec\n(5)\n,\nwhich are considered \"static configuration\", may be used (this\nincludes e.g.\n$USER\n, but not\n$TERM\n).\nNote that shell command lines are not directly supported, and \"\n|\n\" invokes the user's\ndefault shell which isn't deterministic. It's recommended to specify a shell implementation explicitly\nif portability is desired. Example:\nExecStart=sh -c 'dmesg | tac'\nExample:\nExecStart=echo one\nExecStart=echo \"two two\"\nThis will execute\necho\ntwo times,\neach time with one argument: \"\none\n\" and\n\"\ntwo two\n\", respectively. Because two commands are\nspecified,\nType=oneshot\nmust be used.\nExample:\nType=oneshot\nExecStart=:echo $USER\nExecStart=-false\nExecStart=+:@true $TEST\nThis will execute\n/usr/bin/echo\nwith the literal argument\n\"\n$USER\n\" (\"\n:\n\" suppresses variable expansion), and then\n/usr/bin/false\n(the return value will be ignored because \"\n-\n\"\nsuppresses checking of the return value), and\n/usr/bin/true\n(with elevated privileges,\nwith \"\n$TEST\n\" as\nargv[0]\n).\nExample:\nExecStart=echo / >/dev/null & \\; \\\nls\nThis will execute\necho\nwith five arguments: \"\n/\n\",\n\"\n>/dev/null\n\",\n\"\n&\n\", \"\n;\n\", and\n\"\nls\n\".\nExamples\nÂ¶\nExampleÂ 3.Â Simple service\nThe following unit file creates a service that will\nexecute\n/usr/sbin/foo-daemon\n. Since no\nType=\nis specified, the default\nType=\nsimple\nwill be assumed.\nsystemd will assume the unit to be started immediately after the\nprogram has begun executing.\n[Unit]\nDescription=Foo\n[Service]\nExecStart=/usr/sbin/foo-daemon\n[Install]\nWantedBy=multi-user.target\nNote that systemd assumes here that the process started by\nsystemd will continue running until the service terminates. If\nthe program daemonizes itself (i.e. forks), please use\nType=\nforking\ninstead.\nSince no\nExecStop=\nwas specified,\nsystemd will send SIGTERM to all processes started from this\nservice, and after a timeout also SIGKILL. This behavior can be\nmodified, see\nsystemd.kill\n(5)\nfor details.\nNote that this unit type does not include any type of notification when a service has completed\ninitialization. For this, you should use other unit types, such as\nType=\nnotify\n/\nType=\nnotify-reload\nif the service understands systemd's notification protocol,\nType=\nforking\nif the service can background itself or\nType=\ndbus\nif the unit acquires a DBus name once initialization is\ncomplete. See below.\nExampleÂ 4.Â Oneshot service\nSometimes, units should just execute an action without\nkeeping active processes, such as a filesystem check or a\ncleanup action on boot. For this,\nType=\noneshot\nexists. Units\nof this type will wait until the process specified terminates\nand then fall back to being inactive. The following unit will\nperform a cleanup action:\n[Unit]\nDescription=Cleanup old Foo data\n[Service]\nType=oneshot\nExecStart=/usr/sbin/foo-cleanup\n[Install]\nWantedBy=multi-user.target\nNote that systemd will consider the unit to be in the\nstate \"starting\" until the program has terminated, so ordered\ndependencies will wait for the program to finish before starting\nthemselves. The unit will revert to the \"inactive\" state after\nthe execution is done, never reaching the \"active\" state. That\nmeans another request to start the unit will perform the action\nagain.\nType=\noneshot\nare the\nonly service units that may have more than one\nExecStart=\nspecified. For units with multiple\ncommands (\nType=oneshot\n), all commands will be run again.\nFor\nType=oneshot\n,\nRestart=\nalways\nand\nRestart=\non-success\nare\nnot\nallowed.\nExampleÂ 5.Â Stoppable oneshot service\nSimilarly to the oneshot services, there are sometimes\nunits that need to execute a program to set up something and\nthen execute another to shut it down, but no process remains\nactive while they are considered \"started\". Network\nconfiguration can sometimes fall into this category. Another use\ncase is if a oneshot service shall not be executed each time\nwhen they are pulled in as a dependency, but only the first\ntime.\nFor this, systemd knows the setting\nRemainAfterExit=\nyes\n, which\ncauses systemd to consider the unit to be active if the start\naction exited successfully. This directive can be used with all\ntypes, but is most useful with\nType=\noneshot\nand\nType=\nsimple\n. With\nType=\noneshot\n, systemd waits\nuntil the start action has completed before it considers the\nunit to be active, so dependencies start only after the start\naction has succeeded. With\nType=\nsimple\n, dependencies\nwill start immediately after the start action has been\ndispatched. The following unit provides an example for a simple\nstatic firewall.\n[Unit]\nDescription=Simple firewall\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/local/sbin/simple-firewall-start\nExecStop=/usr/local/sbin/simple-firewall-stop\n[Install]\nWantedBy=multi-user.target\nSince the unit is considered to be running after the start\naction has exited, invoking\nsystemctl start\non that unit again will cause no action to be taken.\nExampleÂ 6.Â Traditional forking services\nMany traditional daemons/services background (i.e. fork,\ndaemonize) themselves when starting. Set\nType=\nforking\nin the\nservice's unit file to support this mode of operation. systemd\nwill consider the service to be in the process of initialization\nwhile the original program is still running. Once it exits\nsuccessfully and at least a process remains (and\nRemainAfterExit=\nno\n), the\nservice is considered started.\nOften, a traditional daemon only consists of one process.\nTherefore, if only one process is left after the original\nprocess terminates, systemd will consider that process the main\nprocess of the service. In that case, the\n$MAINPID\nvariable will be available in\nExecReload=\n,\nExecStop=\n,\netc.\nIn case more than one process remains, systemd will be\nunable to determine the main process, so it will not assume\nthere is one. In that case,\n$MAINPID\nwill not\nexpand to anything. However, if the process decides to write a\ntraditional PID file, systemd will be able to read the main PID\nfrom there. Please set\nPIDFile=\naccordingly.\nNote that the daemon should write that file before finishing\nwith its initialization. Otherwise, systemd might try to read the\nfile before it exists.\nThe following example shows a simple daemon that forks and\njust starts one process in the background:\n[Unit]\nDescription=My Simple Daemon\n[Service]\nType=forking\nExecStart=/usr/sbin/my-simple-daemon -d\n[Install]\nWantedBy=multi-user.target\nPlease see\nsystemd.kill\n(5)\nfor details on how you can influence the way systemd terminates\nthe service.\nExampleÂ 7.Â DBus services\nFor services that acquire a name on the DBus system bus,\nuse\nType=\ndbus\nand set\nBusName=\naccordingly. The service should not\nfork (daemonize). systemd will consider the service to be\ninitialized once the name has been acquired on the system bus.\nThe following example shows a typical DBus service:\n[Unit]\nDescription=Simple DBus Service\n[Service]\nType=dbus\nBusName=org.example.simple-dbus-service\nExecStart=/usr/sbin/simple-dbus-service\n[Install]\nWantedBy=multi-user.target\nFor\nbus-activatable\nservices, do not\ninclude a [Install] section in the systemd\nservice file, but use the\nSystemdService=\noption in the corresponding DBus service file, for example\n(\n/usr/share/dbus-1/system-services/org.example.simple-dbus-service.service\n):\n[D-BUS Service]\nName=org.example.simple-dbus-service\nExec=/usr/sbin/simple-dbus-service\nUser=root\nSystemdService=simple-dbus-service.service\nPlease see\nsystemd.kill\n(5)\nfor details on how you can influence the way systemd terminates\nthe service.\nExampleÂ 8.Â Services that notify systemd about their initialization\nType=\nsimple\nservices are really easy to write, but have the\nmajor disadvantage of systemd not being able to tell when initialization of the given service is\ncomplete. For this reason, systemd supports a simple notification protocol that allows daemons to make\nsystemd aware that they are done initializing. Use\nType=\nnotify\nor\nType=\nnotify-reload\nfor this. A typical service file for such a\ndaemon would look like this:\n[Unit]\nDescription=Simple Notifying Service\n[Service]\nType=notify-reload\nExecStart=/usr/sbin/simple-notifying-service\n[Install]\nWantedBy=multi-user.target\nNote that the daemon has to support systemd's notification\nprotocol, else systemd will think the service has not started yet\nand kill it after a timeout. For an example of how to update\ndaemons to support this protocol transparently, take a look at\nsd_notify\n(3)\n.\nsystemd will consider the unit to be in the 'starting' state\nuntil a readiness notification has arrived.\nPlease see\nsystemd.kill\n(5)\nfor details on how you can influence the way systemd terminates\nthe service.\nTo avoid code duplication, it is preferable to use\nsd_notify\n(3)\nwhen possible, especially when other APIs provided by\nlibsystemd\n(3)\nare\nalso used, but note that the notification protocol is very simple and guaranteed to be stable as per\nthe\nInterface Portability and Stability\nPromise\n, so it can be reimplemented by services with no external dependencies. For a\nself-contained example, see\nsd_notify\n(3)\n.\nSee Also\nÂ¶\nsystemd\n(1)\n,\nsystemctl\n(1)\n,\nsystemd-system.conf\n(5)\n,\nsystemd.unit\n(5)\n,\nsystemd.exec\n(5)\n,\nsystemd.resource-control\n(5)\n,\nsystemd.kill\n(5)\n,\nsystemd.directives\n(7)\n,\nsystemd-run\n(1)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/systemd.service.html"}}
{"text": "systemd.timer\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nsystemd.timer â Timer unit configuration\nSynopsis\ntimer\n.timer\nDescription\nÂ¶\nA unit configuration file whose name ends in\n\"\n.timer\n\" encodes information about a timer\ncontrolled and supervised by systemd, for timer-based\nactivation.\nThis man page lists the configuration options specific to\nthis unit type. See\nsystemd.unit\n(5)\nfor the common options of all unit configuration files. The common\nconfiguration items are configured in the generic [Unit] and\n[Install] sections. The timer specific configuration options are\nconfigured in the [Timer] section.\nFor each timer file, a matching unit file must exist,\ndescribing the unit to activate when the timer elapses. By\ndefault, a service by the same name as the timer (except for the\nsuffix) is activated. Example: a timer file\nfoo.timer\nactivates a matching service\nfoo.service\n. The unit to activate may be\ncontrolled by\nUnit=\n(see below).\nNote that in case the unit to activate is already active at the time the timer elapses it is not restarted,\nbut simply left running. There is no concept of spawning new service instances in this case. Due to this, services\nwith\nRemainAfterExit=yes\nset (which stay around continuously even after the service's main\nprocess exited) are usually not suitable for activation via repetitive timers, as they will only be activated\nonce, and then stay around forever. Target units, which by default do not deactivate on their own, can be\nactivated repeatedly by timers by setting\nStopWhenUnneeded=yes\non them. This will cause a\ntarget unit to be stopped immediately after its activation, if it is not a dependency of another running unit.\nAutomatic Dependencies\nÂ¶\nImplicit Dependencies\nÂ¶\nThe following dependencies are implicitly added:\nTimer units automatically gain a\nBefore=\ndependency on the service they are supposed to activate.\nDefault Dependencies\nÂ¶\nThe following dependencies are added unless\nDefaultDependencies=no\nis set:\nTimer units will automatically have dependencies of type\nRequires=\nand\nAfter=\non\nsysinit.target\n, a dependency of type\nBefore=\non\ntimers.target\n, as well as\nConflicts=\nand\nBefore=\non\nshutdown.target\nto ensure that they are stopped cleanly prior to system shutdown. Only timer\nunits involved with early boot or late system shutdown should disable the\nDefaultDependencies=\noption.\nTimer units with at least one\nOnCalendar=\ndirective acquire a pair\nof additional\nAfter=\ndependencies on\ntime-set.target\nand\ntime-sync.target\n, in order to avoid being started before the system clock has\nbeen correctly set. See\nsystemd.special\n(7)\nfor details on these two targets.\nOptions\nÂ¶\nTimer unit files may include [Unit] and [Install] sections, which are described in\nsystemd.unit\n(5)\n.\nTimer unit files must include a [Timer] section, which carries\ninformation about the timer it defines. The options specific to\nthe [Timer] section of timer units are the following:\nOnActiveSec=\n,\nOnBootSec=\n,\nOnStartupSec=\n,\nOnUnitActiveSec=\n,\nOnUnitInactiveSec=\nÂ¶\nDefines monotonic timers relative to different\nstarting points:\nTableÂ 1.Â Settings and their starting points\nSetting\nMeaning\nOnActiveSec=\nDefines a timer relative to the moment the timer unit itself is activated.\nOnBootSec=\nDefines a timer relative to when the machine was booted up. In containers, for the system manager instance, this is mapped to\nOnStartupSec=\n, making both equivalent.\nOnStartupSec=\nDefines a timer relative to when the service manager was first started. For system timer units this is very similar to\nOnBootSec=\nas the system service manager is generally started very early at boot. It's primarily useful when configured in units running in the per-user service manager, as the user service manager is generally started on first login only, not already during boot.\nOnUnitActiveSec=\nDefines a timer relative to when the unit the timer unit is activating was last activated.\nOnUnitInactiveSec=\nDefines a timer relative to when the unit the timer unit is activating was last deactivated.\nMultiple directives may be combined of the same and of different types, in which case the timer\nunit will trigger whenever any of the specified timer expressions elapse. For example, by combining\nOnBootSec=\nand\nOnUnitActiveSec=\n, it is possible to define a\ntimer that elapses in regular intervals and activates a specific service each time. Moreover, both\nmonotonic time expressions and\nOnCalendar=\ncalendar expressions may be combined in\nthe same timer unit.\nThe arguments to the directives are time spans\nconfigured in seconds. Example: \"OnBootSec=50\" means 50s after\nboot-up. The argument may also include time units. Example:\n\"OnBootSec=5h 30min\" means 5 hours and 30 minutes after\nboot-up. For details about the syntax of time spans, see\nsystemd.time\n(7)\n.\nIf a timer configured with\nOnBootSec=\nor\nOnStartupSec=\nis already in the past\nwhen the timer unit is activated, it will immediately elapse\nand the configured unit is started. This is not the case for\ntimers defined in the other directives.\nThese are monotonic timers, independent of wall-clock time and timezones. If the computer is\ntemporarily suspended, the monotonic clock generally pauses, too. Note that if\nWakeSystem=\nis used, a different monotonic clock is selected that continues to\nadvance while the system is suspended and thus can be used as the trigger to resume the\nsystem.\nIf the empty string is assigned to any of these options, the list of timers is reset (both\nmonotonic timers and\nOnCalendar=\ntimers, see below), and all prior assignments\nwill have no effect.\nNote that timers do not necessarily expire at the\nprecise time configured with these settings, as they are\nsubject to the\nAccuracySec=\nsetting\nbelow.\nOnCalendar=\nÂ¶\nDefines realtime (i.e. wallclock) timers with calendar event expressions. See\nsystemd.time\n(7)\nfor\nmore information on the syntax of calendar event expressions. Otherwise, the semantics are similar to\nOnActiveSec=\nand related settings.\nNote that timers do not necessarily expire at the precise time configured with this setting, as\nit is subject to the\nAccuracySec=\nsetting below.\nMay be specified more than once, in which case the timer unit will trigger whenever any of the\nspecified expressions elapse. Moreover, calendar timers and monotonic timers (see above) may be\ncombined within the same timer unit.\nIf the empty string is assigned to any of these options, the list of timers is reset (both\nOnCalendar=\ntimers and monotonic timers, see above), and all prior assignments\nwill have no effect.\nNote that calendar timers might be triggered at unexpected times if the system's realtime clock\nis not set correctly. Specifically, on systems that lack a battery-buffered Realtime Clock (RTC) it\nmight be wise to enable\nsystemd-time-wait-sync.service\nto ensure the clock is\nadjusted to a network time source\nbefore\nthe timer event is set up. Timer units\nwith at least one\nOnCalendar=\nexpression are automatically ordered after\ntime-sync.target\n, which\nsystemd-time-wait-sync.service\nis\nordered before.\nWhen a system is temporarily put to sleep (i.e. system suspend or hibernation) the realtime\nclock does not pause. When a calendar timer elapses while the system is sleeping it will not be acted\non immediately, but once the system is later resumed it will catch up and process all timers that\ntriggered while the system was sleeping. Note that if a calendar timer elapsed more than once while\nthe system was continuously sleeping the timer will only result in a single service activation. If\nWakeSystem=\n(see below) is enabled a calendar time event elapsing while the system\nis suspended will cause the system to wake up (under the condition the system's hardware supports\ntime-triggered wake-up functionality).\nAdded in version 197.\nAccuracySec=\nÂ¶\nSpecify the accuracy the timer shall elapse\nwith. Defaults to 1min. The timer is scheduled to elapse\nwithin a time window starting with the time specified in\nOnCalendar=\n,\nOnActiveSec=\n,\nOnBootSec=\n,\nOnStartupSec=\n,\nOnUnitActiveSec=\nor\nOnUnitInactiveSec=\nand ending the time\nconfigured with\nAccuracySec=\nlater. Within\nthis time window, the expiry time will be placed at a\nhost-specific, randomized, but stable position that is\nsynchronized between all local timer units. This is done in\norder to optimize power consumption to suppress unnecessary\nCPU wake-ups. To get best accuracy, set this option to\n1us. Note that the timer is still subject to the timer slack\nconfigured via\nsystemd-system.conf\n(5)\n's\nTimerSlackNSec=\nsetting. See\nprctl\n(2)\nfor details. To optimize power consumption, make sure to set\nthis value as high as possible and as low as\nnecessary.\nNote that this setting is primarily a power saving option that allows coalescing CPU\nwake-ups. It should not be confused with\nRandomizedDelaySec=\n(see below) which\nadds a random value to the time the timer shall elapse next and whose purpose is the opposite: to\nstretch elapsing of timer events over a longer period to reduce workload spikes. For further details\nand explanations and how both settings play together, see below.\nAdded in version 209.\nRandomizedDelaySec=\nÂ¶\nDelay the timer by a randomly selected, evenly distributed amount of time between 0\nand the specified time value. Defaults to 0, indicating that no randomized delay shall be applied.\nEach timer unit will determine this delay randomly before each iteration, unless modified with\nFixedRandomDelay=\n, see below. The delay is added on top of the next determined\nelapsing time or the service manager's startup time, whichever is later.\nThis setting is useful to stretch dispatching of similarly configured timer events over a\ncertain time interval, to prevent them from firing all at the same time, possibly resulting in\nresource congestion on the local system.\nNote the relation to\nAccuracySec=\nabove: the latter allows the service\nmanager to coalesce timer events within a specified time range in order to minimize wakeups, while\nthis setting does the opposite: it stretches timer events over an interval, to make it unlikely that\nthey fire simultaneously. If\nRandomizedDelaySec=\nand\nAccuracySec=\nare used in conjunction, first the randomized delay is added, and\nthen the result is possibly further shifted to coalesce it with other timer events happening on the\nsystem. As mentioned above\nAccuracySec=\ndefaults to 1 minute and\nRandomizedDelaySec=\nto 0, thus encouraging coalescing of timer events. In order to\noptimally stretch timer events over a certain range of time, set\nAccuracySec=1us\nand\nRandomizedDelaySec=\nto some higher value.\nAdded in version 229.\nFixedRandomDelay=\nÂ¶\nTakes a boolean argument. When enabled, the randomized delay specified by\nRandomizedDelaySec=\nis chosen deterministically, and remains stable between all\nfirings of the same timer, even if the manager is restarted. The delay is derived from the machine\nID, the manager's user identifier, and the timer unit's name. This effectively creates a unique fixed\noffset for each timer, reducing the jitter in firings of an individual timer while still avoiding\nfiring at the same time as other similarly configured timers.\nThis setting has an effect only if\nRandomizedDelaySec=\nis not 0. Defaults to\nfalse\n.\nAdded in version 247.\nRandomizedOffsetSec=\nÂ¶\nOffsets the timer by a stable, randomly-selected, and evenly distributed amount of\ntime between 0 and the specified time value. Defaults to 0, indicating that no such offset shall be\napplied. The offset is chosen deterministically, and is derived the same way as\nFixedRandomDelay=\n, see above. The offset is added on top of the next determined\nelapsing time. This setting only has an effect on timers configured with\nOnCalendar=\n,\nand it can be combined with\nRandomizedDelaySec=\n.\nMuch like\nRandomizedDelaySec=\n, this setting is for distributing timer events\nto prevent them from firing all at once. However, this setting is most useful to prevent resource\ncongestion on a remote service, from a fleet of similarly-configured clients. Unlike\nRandomizedDelaySec=\n, this setting applies its offset with no regard to manager\nstartup time. This maintains the periodicity of configured\nOnCalendar=\nevents\nacross manager restarts.\nFor example, let's say you're running a backup service and have a fleet of laptops that wish\nto make backups weekly. To distribute load on the backup service, each laptop should randomly pick\na weekday to upload its backups. This could be achieved by setting\nOnCalendar=\nto\n\"\nweekly\n\", and then configuring a\nRandomizedDelaySec=\nof\n\"\n5 days\n\" with\nFixedRandomDelay=\nenabled. Let's say that some\nlaptop randomly chooses a delay of 4 days. If this laptop is restarted more often than that, then the\ntimer will never fire: on each fresh boot, the 4 day delay is restarted and will not be finished by\nthe time of the next shutdown. Instead, you should use\nRandomizedOffsetSec=\n, which\nwill maintain the configured weekly cadence of timer events, even across reboots.\nAdded in version 258.\nDeferReactivation=\nÂ¶\nTakes a boolean argument. When enabled, the timer schedules the next elapse based on\nthe trigger unit entering inactivity, instead of the last trigger time.\nThis is most apparent in the case where the service unit takes longer to run than the timer interval.\nWith this setting enabled, the timer will schedule the next elapse based on when the service finishes\nrunning, and so it will have to wait until the next realtime elapse time to trigger.\nOtherwise, the default behavior is for the timer unit to immediately trigger again once the service\nfinishes running. This happens because the timer schedules the next elapse based on the previous trigger\ntime, and since the interval is shorter than the service runtime, that elapse will be in the past,\ncausing it to immediately trigger once done.\nThis setting has an effect only if a realtime timer has been specified with\nOnCalendar=\n. Defaults to\nfalse\n.\nAdded in version 257.\nOnClockChange=\n,\nOnTimezoneChange=\nÂ¶\nThese options take boolean arguments. When true, the service unit will be triggered\nwhen the system clock (\nCLOCK_REALTIME\n) jumps relative to the monotonic clock\n(\nCLOCK_MONOTONIC\n), or when the local system timezone is modified. These options\ncan be used alone or in combination with other timer expressions (see above) within the same timer\nunit. These options default to\nfalse\n.\nAdded in version 242.\nUnit=\nÂ¶\nThe unit to activate when this timer elapses.\nThe argument is a unit name, whose suffix is not\n\"\n.timer\n\". If not specified, this value\ndefaults to a service that has the same name as the timer\nunit, except for the suffix. (See above.) It is recommended\nthat the unit name that is activated and the unit name of the\ntimer unit are named identically, except for the\nsuffix.\nPersistent=\nÂ¶\nTakes a boolean argument. If true, the time when the service unit was last triggered\nis stored on disk.  When the timer is activated, the service unit is triggered immediately if it\nwould have been triggered at least once during the time when the timer was inactive. Such triggering\nis nonetheless subject to the delay imposed by\nRandomizedDelaySec=\n.\nThis is useful to catch up on missed runs of the service when the system was powered down. Note that\nthis setting only has an effect on timers configured with\nOnCalendar=\n. Defaults to\nfalse\n.\nUse\nsystemctl clean --what=state â¦\non the timer unit to remove the timestamp\nfile maintained by this option from disk. In particular, use this command before uninstalling a timer\nunit. See\nsystemctl\n(1)\nfor\ndetails.\nAdded in version 212.\nWakeSystem=\nÂ¶\nTakes a boolean argument. If true, an elapsing timer will cause the system to resume\nfrom suspend, should it be suspended and if the system supports this. Note that this option will only\nmake sure the system resumes on the appropriate times, it will not take care of suspending it again\nafter any work that is to be done is finished. Defaults to\nfalse\n.\nNote that this functionality requires privileges and is thus generally only available in the\nsystem service manager.\nNote that behaviour of monotonic clock timers (as configured with\nOnActiveSec=\n,\nOnBootSec=\n,\nOnStartupSec=\n,\nOnUnitActiveSec=\n,\nOnUnitInactiveSec=\n, see above) is altered\ndepending on this option. If false, a monotonic clock is used that is paused during system suspend\n(\nCLOCK_MONOTONIC\n), if true a different monotonic clock is used that continues\nadvancing during system suspend (\nCLOCK_BOOTTIME\n), see\nclock_getres\n(2)\nfor\ndetails.\nAdded in version 212.\nRemainAfterElapse=\nÂ¶\nTakes a boolean argument. If true, a timer will stay loaded, and its state remains\nqueryable even after it elapsed and the associated unit (as configured with\nUnit=\n,\nsee above) deactivated again. If false, an elapsed timer unit that cannot elapse anymore is unloaded\nonce its associated unit deactivated again. Turning this off is particularly useful for transient\ntimer units. Note that this setting has an effect when repeatedly starting a timer unit: if\nRemainAfterElapse=\nis on, starting the timer a second time has no effect. However,\nif\nRemainAfterElapse=\nis off and the timer unit was already unloaded, it can be\nstarted again, and thus the service can be triggered multiple times. Defaults to\ntrue\n.\nAdded in version 229.\nCheck\nsystemd.unit\n(5)\n,\nsystemd.exec\n(5)\n, and\nsystemd.kill\n(5)\nfor more\nsettings.\nSee Also\nÂ¶\nEnvironment variables with details on the trigger will be set for triggered units. See the\n\"\nEnvironment Variables Set or Propagated by the Service Manager\n\" section in\nsystemd.exec\n(5)\nfor more details.\nsystemd\n(1)\n,\nsystemctl\n(1)\n,\nsystemd.unit\n(5)\n,\nsystemd.service\n(5)\n,\nsystemd.time\n(7)\n,\nsystemd.directives\n(7)\n,\nsystemd-system.conf\n(5)\n,\nprctl\n(2)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/systemd.timer.html"}}
{"text": "systemd-analyze\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nsystemd-analyze â Analyze and debug system manager\nSynopsis\nsystemd-analyze\n[OPTIONS...] [time]\nsystemd-analyze\n[OPTIONS...]  blame\nsystemd-analyze\n[OPTIONS...]  critical-chain  [\nUNIT\n...]\nsystemd-analyze\n[OPTIONS...]  dump  [\nPATTERN\n...]\nsystemd-analyze\n[OPTIONS...]  plot  [>file.svg]\nsystemd-analyze\n[OPTIONS...]  dot  [\nPATTERN\n...] [>file.dot]\nsystemd-analyze\n[OPTIONS...]  unit-files\nsystemd-analyze\n[OPTIONS...]  unit-gdb\nSERVICE\nsystemd-analyze\n[OPTIONS...]  unit-paths\nsystemd-analyze\n[OPTIONS...]  unit-shell\nSERVICE\n[\nCommand\n...]\nsystemd-analyze\n[OPTIONS...]  exit-status  [\nSTATUS\n...]\nsystemd-analyze\n[OPTIONS...]  capability  [\nCAPABILITY\n...  |\n{ -m  |   --mask }\nMASK\n]\nsystemd-analyze\n[OPTIONS...]  condition\nCONDITION\nâ¦\nsystemd-analyze\n[OPTIONS...]  syscall-filter  [\nSET\nâ¦]\nsystemd-analyze\n[OPTIONS...]  filesystems  [\nSET\nâ¦]\nsystemd-analyze\n[OPTIONS...]  calendar\nSPEC\n...\nsystemd-analyze\n[OPTIONS...]  timestamp\nTIMESTAMP\n...\nsystemd-analyze\n[OPTIONS...]  timespan\nSPAN\n...\nsystemd-analyze\n[OPTIONS...]  cat-config\nNAME\n|\nPATH\n...\nsystemd-analyze\n[OPTIONS...]  compare-versions\nVERSION1\n[\nOP\n]\nVERSION2\nsystemd-analyze\n[OPTIONS...]  verify\nFILE\n...\nsystemd-analyze\n[OPTIONS...]  security  [\nUNIT\n...]\nsystemd-analyze\n[OPTIONS...]  inspect-elf\nFILE\n...\nsystemd-analyze\n[OPTIONS...]  malloc  [\nD-BUS SERVICE\n...]\nsystemd-analyze\n[OPTIONS...]  fdstore\nUNIT\n...\nsystemd-analyze\n[OPTIONS...]  image-policy\nPOLICY\n...\nsystemd-analyze\n[OPTIONS...]  has-tpm2\nsystemd-analyze\n[OPTIONS...]  pcrs  [\nPCR\n...]\nsystemd-analyze\n[OPTIONS...]  srk  [\n>FILE\n]\nsystemd-analyze\n[OPTIONS...]  architectures  [\nNAME\n...]\nsystemd-analyze\n[OPTIONS...]  smbios11\nsystemd-analyze\n[OPTIONS...]  chid\nsystemd-analyze\n[OPTIONS...]  transient-settings\nTYPE\n...\nDescription\nÂ¶\nsystemd-analyze\nmay be used to determine\nsystem boot-up performance statistics and retrieve other state and\ntracing information from the system and service manager, and to\nverify the correctness of unit files. It is also used to access\nspecial functions useful for advanced system manager debugging.\nIf no command is passed,\nsystemd-analyze\ntime\nis implied.\nsystemd-analyze time\nÂ¶\nThis command prints the time spent in the kernel before userspace has been reached, the time\nspent in the initrd before normal system userspace has been reached, and the time normal system\nuserspace took to initialize. Note that these measurements simply measure the time passed up to the\npoint where all system services have been spawned, but not necessarily until they fully finished\ninitialization or the disk is idle.\nExampleÂ 1.Â\nShow how long the boot took\n# in a container\n$ systemd-analyze time\nStartup finished in 296ms (userspace)\nmulti-user.target reached after 275ms in userspace\n# on a real machine\n$ systemd-analyze time\nStartup finished in 2.584s (kernel) + 19.176s (initrd) + 47.847s (userspace) = 1min 9.608s\nmulti-user.target reached after 47.820s in userspace\nsystemd-analyze blame\nÂ¶\nThis command prints a list of all running units, ordered by the time they took to initialize.\nThis information may be used to optimize boot-up times. Note that the output might be misleading as the\ninitialization of one service might be slow simply because it waits for the initialization of another\nservice to complete.  Also note:\nsystemd-analyze blame\ndoes not display results for\nservices with\nType=simple\n, because systemd considers such services to be started\nimmediately, hence no measurement of the initialization delays can be done. Also note that this command\nonly shows the time units took for starting up, it does not show how long unit jobs spent in the\nexecution queue. In particular it shows the time units spent in \"\nactivating\n\" state,\nwhich is not defined for units such as device units that transition directly from\n\"\ninactive\n\" to \"\nactive\n\". This command hence gives an impression of the\nperformance of program code, but cannot accurately reflect latency introduced by waiting for\nhardware and similar events.\nExampleÂ 2.Â\nShow which units took the most time during boot\n$ systemd-analyze blame\n32.875s pmlogger.service\n20.905s systemd-networkd-wait-online.service\n13.299s dev-vda1.device\n...\n23ms sysroot.mount\n11ms initrd-udevadm-cleanup-db.service\n3ms sys-kernel-config.mount\nsystemd-analyze critical-chain [\nUNIT\n...\n]\nÂ¶\nThis command prints a tree of the time-critical chain of units (for each of the specified\nUNIT\ns or for the default target otherwise). The time after the unit is\nactive or started is printed after the \"@\" character. The time the unit takes to start is printed after\nthe \"+\" character. Note that the output might be misleading as the initialization of services might\ndepend on socket activation and because of the parallel execution of units. Also, similarly to the\nblame\ncommand, this only takes into account the time units spent in\n\"\nactivating\n\" state, and hence does not cover units that never went through an\n\"\nactivating\n\" state (such as device units that transition directly from\n\"\ninactive\n\" to \"\nactive\n\"). Moreover, it does not show information on\njobs (and in particular not jobs that timed out).\nExampleÂ 3.Â\nsystemd-analyze critical-chain\n$ systemd-analyze critical-chain\nmulti-user.target @47.820s\nââpmie.service @35.968s +548ms\nââpmcd.service @33.715s +2.247s\nâânetwork-online.target @33.712s\nââsystemd-networkd-wait-online.service @12.804s +20.905s\nââsystemd-networkd.service @11.109s +1.690s\nââsystemd-udevd.service @9.201s +1.904s\nââsystemd-tmpfiles-setup-dev.service @7.306s +1.776s\nââkmod-static-nodes.service @6.976s +177ms\nââsystemd-journald.socket\nââsystem.slice\nââ-.slice\nsystemd-analyze dump [\npattern\nâ¦]\nÂ¶\nWithout any parameter, this command outputs a (usually very long) human-readable serialization of\nthe complete service manager state. Optional glob pattern may be specified, causing the output to be\nlimited to units whose names match one of the patterns. The output format is subject to change without\nnotice and should not be parsed by applications. This command is rate limited for unprivileged users.\nExampleÂ 4.Â Show the internal state of user manager\n$ systemd-analyze --user dump\nTimestamp userspace: Thu 2019-03-14 23:28:07 CET\nTimestamp finish: Thu 2019-03-14 23:28:07 CET\nTimestamp generators-start: Thu 2019-03-14 23:28:07 CET\nTimestamp generators-finish: Thu 2019-03-14 23:28:07 CET\nTimestamp units-load-start: Thu 2019-03-14 23:28:07 CET\nTimestamp units-load-finish: Thu 2019-03-14 23:28:07 CET\n-> Unit proc-timer_list.mount:\nDescription: /proc/timer_list\n...\n-> Unit default.target:\nDescription: Main user target\n...\nsystemd-analyze malloc [\nD-Bus service\nâ¦]\nÂ¶\nThis command can be used to request the output of the internal memory state (as returned by\nmalloc_info\n(3)\n)\nof a D-Bus service. If no service is specified, the query will be sent to\norg.freedesktop.systemd1\n(the system or user service manager). The output format\nis not guaranteed to be stable and should not be parsed by applications.\nThe service must implement the\norg.freedesktop.MemoryAllocation1\ninterface.\nIn the systemd suite, it is currently only implemented by the manager.\nsystemd-analyze plot\nÂ¶\nThis command prints either an SVG graphic, detailing which system services have been started at what\ntime, highlighting the time they spent on initialization, or the raw time data in JSON or table format.\nExampleÂ 5.Â\nPlot a bootchart\n$ systemd-analyze plot >bootup.svg\n$ eog bootup.svg&\nNote that this plot is based on the most recent per-unit timing data of loaded units. This means\nthat if a unit gets started, then stopped and then started again the information shown will cover the\nmost recent start cycle, not the first one. Thus it is recommended to consult this information only\nshortly after boot, so that this distinction does not matter. Moreover, units that are not referenced by\nany other unit through a dependency might be unloaded by the service manager once they terminate (and\ndid not fail). Such units will not show up in the plot.\nsystemd-analyze dot [\npattern\n...]\nÂ¶\nThis command generates textual dependency graph description in dot format for further processing\nwith the GraphViz\ndot\n(1)\ntool. Use a command line like\nsystemd-analyze dot | dot -Tsvg >systemd.svg\nto\ngenerate a graphical dependency tree. Unless\n--order\nor\n--require\nis\npassed, the generated graph will show both ordering and requirement dependencies. Optional pattern\nglobbing style specifications (e.g.\n*.target\n) may be given at the end. A unit\ndependency is included in the graph if any of these patterns match either the origin or destination\nnode.\nExampleÂ 6.Â Plot all dependencies of any unit whose name starts with \"\navahi-daemon\n\"\n$ systemd-analyze dot 'avahi-daemon.*' | dot -Tsvg >avahi.svg\n$ eog avahi.svg\nExampleÂ 7.Â Plot the dependencies between all known target units\n$ systemd-analyze dot --to-pattern='*.target' --from-pattern='*.target' \\\n| dot -Tsvg >targets.svg\n$ eog targets.svg\nsystemd-analyze unit-paths\nÂ¶\nThis command outputs a list of all directories from which unit files,\n.d\noverrides, and\n.wants\n,\n.requires\nsymlinks may be\nloaded. Combine with\n--user\nto retrieve the list for the user manager instance, and\n--global\nfor the global configuration of user manager instances.\nExampleÂ 8.Â\nShow all paths for generated units\n$ systemd-analyze unit-paths | grep '^/run'\n/run/systemd/system.control\n/run/systemd/transient\n/run/systemd/generator.early\n/run/systemd/system\n/run/systemd/system.attached\n/run/systemd/generator\n/run/systemd/generator.late\nNote that this verb prints the list that is compiled into\nsystemd-analyze\nitself, and does not communicate with the running manager. Use\nsystemctl [--user] [--global] show -p UnitPath --value\nto retrieve the actual list that the manager uses, with any empty directories omitted.\nsystemd-analyze exit-status [\nSTATUS\n...\n]\nÂ¶\nThis command prints a list of exit statuses along with their \"class\", i.e. the source of the\ndefinition (one of \"\nglibc\n\", \"\nsystemd\n\", \"\nLSB\n\", or\n\"\nBSD\n\"), see the Process Exit Codes section in\nsystemd.exec\n(5)\n.\nIf no additional arguments are specified, all known statuses are shown. Otherwise, only the\ndefinitions for the specified codes are shown.\nExampleÂ 9.Â\nShow some example exit status names\n$ systemd-analyze exit-status 0 1 {63..65}\nNAME    STATUS CLASS\nSUCCESS 0      glibc\nFAILURE 1      glibc\n-       63     -\nUSAGE   64     BSD\nDATAERR 65     BSD\nsystemd-analyze capability\n[\nCAPABILITY\n...  |\n{ -m  |   --mask }\nMASK\n]\nÂ¶\nThis command prints a list of Linux capabilities along with their numeric IDs. See\ncapabilities\n(7)\nfor details. If no argument is specified the full list of capabilities known to the service manager and\nthe kernel is shown. Capabilities defined by the kernel but not known to the service manager are shown\nas \"\ncap_???\n\". Optionally, if arguments are specified they may refer to specific\ncabilities by name or numeric ID, in which case only the indicated capabilities are shown in the\ntable.\nAlternatively, if\n--mask\nis passed, a single numeric argument must be specified,\nwhich is interpreted as a hexadecimal capability mask. In this case, only the capabilities present in\nthe mask are shown in the table. This mode is intended to aid in decoding capability sets available\nvia various debugging interfaces (e.g. \"\n/proc/PID/status\n\").\nExampleÂ 10.Â\nShow some example capability names\n$ systemd-analyze capability 0 1 {30..32}\nNAME              NUMBER\ncap_chown              0\ncap_dac_override       1\ncap_audit_control     30\ncap_setfcap           31\ncap_mac_override      32\nExampleÂ 11.Â\nDecode a capability mask extracted from /proc\n$ systemd-analyze capability -m 0000000000003c00\nNAME                 NUMBER\ncap_net_bind_service     10\ncap_net_broadcast        11\ncap_net_admin            12\ncap_net_raw              13\nsystemd-analyze condition\nCONDITION\n...\nÂ¶\nThis command will evaluate\nCondition*=...\nand\nAssert*=...\nassignments, and print their values, and\nthe resulting value of the combined condition set. See\nsystemd.unit\n(5)\nfor a list of available conditions and asserts.\nExampleÂ 12.Â Evaluate conditions that check kernel versions\n$ systemd-analyze condition 'ConditionVersion = ! <4.0' \\\n'ConditionVersion = >=5.1' \\\n'ConditionACPower=|false' \\\n'ConditionArchitecture=|!arm' \\\n'AssertPathExists=/etc/os-release'\ntest.service: AssertPathExists=/etc/os-release succeeded.\nAsserts succeeded.\ntest.service: ConditionArchitecture=|!arm succeeded.\ntest.service: ConditionACPower=|false failed.\ntest.service: ConditionVersion=>=5.1 succeeded.\ntest.service: ConditionVersion=!<4.0 succeeded.\nConditions succeeded.\nsystemd-analyze syscall-filter [\nSET\n...\n]\nÂ¶\nThis command will list system calls contained in the specified system call set\nSET\n, or all known sets if no sets are specified. Argument\nSET\nmust include the \"\n@\n\" prefix.\nsystemd-analyze filesystems [\nSET\n...\n]\nÂ¶\nThis command will list filesystems in the specified filesystem set\nSET\n, or all known sets if no sets are specified. Argument\nSET\nmust include the \"\n@\n\" prefix.\nsystemd-analyze calendar\nEXPRESSION\n...\nÂ¶\nThis command will parse and normalize repetitive calendar time events, and will calculate when\nthey elapse next. This takes the same input as the\nOnCalendar=\nsetting in\nsystemd.timer\n(5)\n,\nfollowing the syntax described in\nsystemd.time\n(7)\n. By\ndefault, only the next time the calendar expression will elapse is shown; use\n--iterations=\nto show the specified number of next times the expression\nelapses. Each time the expression elapses forms a timestamp, see the\ntimestamp\nverb below.\nExampleÂ 13.Â Show leap days in the near future\n$ systemd-analyze calendar --iterations=5 '*-2-29 0:0:0'\nOriginal form: *-2-29 0:0:0\nNormalized form: *-02-29 00:00:00\nNext elapse: Sat 2020-02-29 00:00:00 UTC\nFrom now: 11 months 15 days left\nIter. #2: Thu 2024-02-29 00:00:00 UTC\nFrom now: 4 years 11 months left\nIter. #3: Tue 2028-02-29 00:00:00 UTC\nFrom now: 8 years 11 months left\nIter. #4: Sun 2032-02-29 00:00:00 UTC\nFrom now: 12 years 11 months left\nIter. #5: Fri 2036-02-29 00:00:00 UTC\nFrom now: 16 years 11 months left\nsystemd-analyze timestamp\nTIMESTAMP\n...\nÂ¶\nThis command parses a timestamp (i.e. a single point in time) and outputs the normalized form and\nthe difference between this timestamp and now. The timestamp should adhere to the syntax documented in\nsystemd.time\n(7)\n,\nsection \"PARSING TIMESTAMPS\".\nExampleÂ 14.Â Show parsing of timestamps\n$ systemd-analyze timestamp yesterday now tomorrow\nOriginal form: yesterday\nNormalized form: Mon 2019-05-20 00:00:00 CEST\n(in UTC): Sun 2019-05-19 22:00:00 UTC\nUNIX seconds: @15583032000\nFrom now: 1 day 9h ago\nOriginal form: now\nNormalized form: Tue 2019-05-21 09:48:39 CEST\n(in UTC): Tue 2019-05-21 07:48:39 UTC\nUNIX seconds: @1558424919.659757\nFrom now: 43us ago\nOriginal form: tomorrow\nNormalized form: Wed 2019-05-22 00:00:00 CEST\n(in UTC): Tue 2019-05-21 22:00:00 UTC\nUNIX seconds: @15584760000\nFrom now: 14h left\nsystemd-analyze timespan\nEXPRESSION\n...\nÂ¶\nThis command parses a time span (i.e. a difference between two timestamps) and outputs the\nnormalized form and the equivalent value in microseconds. The time span should adhere to the syntax\ndocumented in\nsystemd.time\n(7)\n,\nsection \"PARSING TIME SPANS\". Values without units are parsed as seconds.\nExampleÂ 15.Â Show parsing of timespans\n$ systemd-analyze timespan 1s 300s '1year 0.000001s'\nOriginal: 1s\nÎ¼s: 1000000\nHuman: 1s\nOriginal: 300s\nÎ¼s: 300000000\nHuman: 5min\nOriginal: 1year 0.000001s\nÎ¼s: 31557600000001\nHuman: 1y 1us\nsystemd-analyze cat-config\nNAME\n|\nPATH\n...\nÂ¶\nThis command is similar to\nsystemctl cat\n, but operates on config files. It\nwill copy the contents of a config file and any drop-ins to standard output, using the usual systemd\nset of directories and rules for precedence. Each argument must be either an absolute path including\nthe prefix (such as\n/etc/systemd/logind.conf\nor\n/usr/lib/systemd/logind.conf\n), or a name relative to the prefix (such as\nsystemd/logind.conf\n).\nExampleÂ 16.Â Showing logind configuration\n$ systemd-analyze cat-config systemd/logind.conf\n# /etc/systemd/logind.conf\n...\n[Login]\nNAutoVTs=8\n...\n# /usr/lib/systemd/logind.conf.d/20-test.conf\n... some override from another package\n# /etc/systemd/logind.conf.d/50-override.conf\n... some administrator override\nsystemd-analyze compare-versions\nVERSION1\n[\nOP\n]\nVERSION2\nÂ¶\nThis command has two distinct modes of operation, depending on whether the operator\nOP\nis specified.\nIn the first mode â when\nOP\nis not specified â, it will compare the two\nversion strings and print either \"\nVERSION1\n<\nVERSION2\n\", or \"\nVERSION1\n==\nVERSION2\n\", or \"\nVERSION1\n>\nVERSION2\n\" as appropriate.\nThe exit status is\n0\nif the versions are equal,\n11\nif\nthe version of the right is smaller, and\n12\nif the version of the left is\nsmaller. (This matches the convention used by\nrpmdev-vercmp\n.)\nIn the second mode â when\nOP\nis specified â it will compare the two\nversion strings using the operation\nOP\nand return\n0\n(success) if they condition is satisfied, and\n1\n(failure)\notherwise.\nOP\nmay be\nlt\n,\nle\n,\neq\n,\nne\n,\nge\n,\ngt\n. In this\nmode, no output is printed.\n(This matches the convention used by\ndpkg\n(1)\n--compare-versions\n.)\nExampleÂ 17.Â Compare versions of a package\n$ systemd-analyze compare-versions systemd-250~rc1.fc36.aarch64 systemd-251.fc36.aarch64\nsystemd-250~rc1.fc36.aarch64 < systemd-251.fc36.aarch64\n$ echo $?\n12\n$ systemd-analyze compare-versions 1 lt 2; echo $?\n0\n$ systemd-analyze compare-versions 1 ge 2; echo $?\n1\nsystemd-analyze verify\nFILE\n...\nÂ¶\nThis command will load unit files and print warnings if any errors are detected. Files specified\non the command line will be loaded, but also any other units referenced by them. A unit's name on disk\ncan be overridden by specifying an alias after a colon; see below for an example. The full unit search\npath is formed by combining the directories for all command line arguments, and the usual unit load\npaths. The variable\n$SYSTEMD_UNIT_PATH\nis supported, and may be used to replace or\naugment the compiled in set of unit load paths; see\nsystemd.unit\n(5)\n. All\nunits files present in the directories containing the command line arguments will be used in preference\nto the other paths. If a template unit without an instance name is specified (e.g.\nfoo@.service\n), \"\ntest_instance\n\" will be used as the instance\nname, which can be controlled by\n--instance=\noption.\nThe following errors are currently detected:\nunknown sections and directives,\nmissing dependencies which are required to start the given unit,\nman pages listed in\nDocumentation=\nwhich are not found in the\nsystem,\ncommands listed in\nExecStart=\nand similar which are not found in\nthe system or not executable.\nExampleÂ 18.Â Misspelt directives\n$ cat ./user.slice\n[Unit]\nWhatIsThis=11\nDocumentation=man:nosuchfile(1)\nRequires=different.service\n[Service]\nDescription=x\n$ systemd-analyze verify ./user.slice\n[./user.slice:9] Unknown lvalue 'WhatIsThis' in section 'Unit'\n[./user.slice:13] Unknown section 'Service'. Ignoring.\nError: org.freedesktop.systemd1.LoadFailed:\nUnit different.service failed to load:\nNo such file or directory.\nFailed to create user.slice/start: Invalid argument\nuser.slice: man nosuchfile(1) command failed with code 16\nExampleÂ 19.Â Missing service units\n$ tail ./a.socket ./b.socket\n==> ./a.socket <==\n[Socket]\nListenStream=100\n==> ./b.socket <==\n[Socket]\nListenStream=100\nAccept=yes\n$ systemd-analyze verify ./a.socket ./b.socket\nService a.service not loaded, a.socket cannot be started.\nService b@0.service not loaded, b.socket cannot be started.\nExampleÂ 20.Â Aliasing a unit\n$ cat /tmp/source\n[Unit]\nDescription=Hostname printer\n[Service]\nType=simple\nExecStart=/usr/bin/echo %H\nMysteryKey=true\n$ systemd-analyze verify /tmp/source\nFailed to prepare filename /tmp/source: Invalid argument\n$ systemd-analyze verify /tmp/source:alias.service\nalias.service:7: Unknown key name 'MysteryKey' in section 'Service', ignoring.\nsystemd-analyze security [\nUNIT\n...\n]\nÂ¶\nThis command analyzes the security and sandboxing settings of one or more specified service\nunits. If at least one unit name is specified the security settings of the specified service units are\ninspected and a detailed analysis is shown. If no unit name is specified, all currently loaded,\nlong-running service units are inspected and a terse table with results shown. The command checks for\nvarious security-related service settings, assigning each a numeric \"exposure level\" value, depending\non how important a setting is. It then calculates an overall exposure level for the whole unit, which\nis an estimation in the range 0.0â¦10.0 indicating how exposed a service is security-wise. High exposure\nlevels indicate very little applied sandboxing. Low exposure levels indicate tight sandboxing and\nstrongest security restrictions. Note that this only analyzes the per-service security features systemd\nitself implements. This means that any additional security mechanisms applied by the service code\nitself are not accounted for. The exposure level determined this way should not be misunderstood: a\nhigh exposure level neither means that there is no effective sandboxing applied by the service code\nitself, nor that the service is actually vulnerable to remote or local attacks. High exposure levels do\nindicate however that most likely the service might benefit from additional settings applied to\nthem.\nPlease note that many of the security and sandboxing settings individually can be circumvented â\nunless combined with others. For example, if a service retains the privilege to establish or undo mount\npoints many of the sandboxing options can be undone by the service code itself. Due to that is\nessential that each service uses the most comprehensive and strict sandboxing and security settings\npossible. The tool will take into account some of these combinations and relationships between the\nsettings, but not all. Also note that the security and sandboxing settings analyzed here only apply to\nthe operations executed by the service code itself. If a service has access to an IPC system (such as\nD-Bus) it might request operations from other services that are not subject to the same\nrestrictions. Any comprehensive security and sandboxing analysis is hence incomplete if the IPC access\npolicy is not validated too.\nExampleÂ 21.Â Analyze\nsystemd-logind.service\n$ systemd-analyze security --no-pager systemd-logind.service\nNAME                DESCRIPTION                              EXPOSURE\nâ PrivateNetwork=     Service has access to the host's network      0.5\nâ User=/DynamicUser=  Service runs as root user                     0.4\nâ DeviceAllow=        Service has no device ACL                     0.2\nâ IPAddressDeny=      Service blocks all IP address ranges\n...\nâ Overall exposure level for systemd-logind.service: 4.1 OK ð\nsystemd-analyze inspect-elf\nFILE\n...\nÂ¶\nThis command will load the specified files, and if they are ELF objects (executables,\nlibraries, core files, etc.) it will parse the embedded packaging metadata, if any, and print\nit in a table or json format. See the\nPackage Metadata for Executable Files\ndocument for more information.\nExampleÂ 22.Â Print information about a core file as JSON\n$ systemd-analyze inspect-elf --json=pretty \\\ncore.fsverity.1000.f77dac5dc161402aa44e15b7dd9dcf97.58561.1637106137000000\n{\n\"elfType\" : \"coredump\",\n\"elfArchitecture\" : \"AMD x86-64\",\n\"/home/bluca/git/fsverity-utils/fsverity\" : {\n\"type\" : \"deb\",\n\"name\" : \"fsverity-utils\",\n\"version\" : \"1.3-1\",\n\"buildId\" : \"7c895ecd2a271f93e96268f479fdc3c64a2ec4ee\"\n},\n\"/home/bluca/git/fsverity-utils/libfsverity.so.0\" : {\n\"type\" : \"deb\",\n\"name\" : \"fsverity-utils\",\n\"version\" : \"1.3-1\",\n\"buildId\" : \"b5e428254abf14237b0ae70ed85fffbb98a78f88\"\n}\n}\nsystemd-analyze fdstore\nUNIT\n...\nÂ¶\nLists the current contents of the specified service unit's file descriptor store. This shows\nnames, inode types, device numbers, inode numbers, paths and open modes of the open file\ndescriptors. The specified units must have\nFileDescriptorStoreMax=\nenabled, see\nsystemd.service\n(5)\nfor\ndetails.\nExampleÂ 23.Â Table output\n$ systemd-analyze fdstore systemd-journald.service\nFDNAME TYPE DEVNO   INODE RDEVNO PATH             FLAGS\nstored sock 0:8   4218620 -      socket:[4218620] ro\nstored sock 0:8   4213198 -      socket:[4213198] ro\nstored sock 0:8   4213190 -      socket:[4213190] ro\nâ¦\nNote: the \"DEVNO\" column refers to the major/minor numbers of the device node backing the file\nsystem the file descriptor's inode is on. The \"RDEVNO\" column refers to the major/minor numbers of the\ndevice node itself if the file descriptor refers to one. Compare with corresponding\n.st_dev\nand\n.st_rdev\nfields in\nstruct stat\n(see\nstat\n(2)\nfor\ndetails). The listed inode numbers in the \"INODE\" column are on the file system indicated by\n\"DEVNO\".\nsystemd-analyze image-policy\nPOLICY\nâ¦\nÂ¶\nThis command analyzes the specified image policy string, as per\nsystemd.image-policy\n(7)\n. The\npolicy is normalized and simplified. For each currently defined partition identifier (as per the\nDiscoverable\nPartitions Specification\n) the effect of the image policy string is shown in tabular form.\nExampleÂ 24.Â Example Output\n$ systemd-analyze image-policy swap=encrypted:usr=read-only-on+verity:root=encrypted\nAnalyzing policy: root=encrypted:usr=verity+read-only-on:swap=encrypted\nLong form: root=encrypted:usr=verity+read-only-on:swap=encrypted:=unused+absent\nPARTITION       MODE        READ-ONLY GROWFS\nroot            encrypted   -         -\nusr             verity      yes       -\nhome            ignore      -         -\nsrv             ignore      -         -\nesp             ignore      -         -\nxbootldr        ignore      -         -\nswap            encrypted   -         -\nroot-verity     ignore      -         -\nusr-verity      unprotected yes       -\nroot-verity-sig ignore      -         -\nusr-verity-sig  ignore      -         -\ntmp             ignore      -         -\nvar             ignore      -         -\ndefault         ignore      -         -\nsystemd-analyze has-tpm2\nÂ¶\nReports whether the system is equipped with a usable TPM2 device. If a TPM2 device has been\ndiscovered, is supported, and is being used by firmware, by the OS kernel drivers and by userspace\n(i.e. systemd) this prints \"\nyes\n\" and exits with exit status zero. If no such device is\ndiscovered/supported/used, prints \"\nno\n\". Otherwise, prints\n\"\npartial\n\". In either of these two cases exits with non-zero exit status. It also shows\nfive lines indicating separately whether firmware, drivers, the system, the kernel and libraries\ndiscovered/support/use TPM2. Currently, required libraries are\nlibtss2-esys.so.0\n,\nlibtss2-rc.so.0\n, and\nlibtss2-mu.so.0\n. The requirement may be\nchanged in the future release.\nNote, this checks for TPM 2.0 devices only, and does not consider TPM 1.2 at all.\nCombine with\n--quiet\nto suppress the output.\nExampleÂ 25.Â Example Output\nyes\n+firmware\n+driver\n+system\n+subsystem\n+libraries\n+libtss2-esys.so.0\n+libtss2-rc.so.0\n+libtss2-mu.so.0\nAdded in version 257.\nsystemd-analyze pcrs [\nPCR\nâ¦\n]\nÂ¶\nThis command shows the known TPM2 PCRs along with their identifying names and current values.\nExampleÂ 26.Â Example Output\n$ systemd-analyze pcrs\nNR NAME                SHA256\n0 platform-code       bcd2eb527108bbb1f5528409bcbe310aa9b74f687854cc5857605993f3d9eb11\n1 platform-config     b60622856eb7ce52637b80f30a520e6e87c347daa679f3335f4f1a600681bb01\n2 external-code       1471262403e9a62f9c392941300b4807fbdb6f0bfdd50abfab752732087017dd\n3 external-config     3d458cfe55cc03ea1f443f1562beec8df51c75e14a9fcf9a7234a13f198e7969\n4 boot-loader-code    939f7fa1458e1f7ce968874d908e524fc0debf890383d355e4ce347b7b78a95c\n5 boot-loader-config  864c61c5ea5ecbdb6951e6cb6d9c1f4b4eac79772f7fe13b8bece569d83d3768\n6 -                   3d458cfe55cc03ea1f443f1562beec8df51c75e14a9fcf9a7234a13f198e7969\n7 secure-boot-policy  9c905bd9b9891bfb889b90a54c4b537b889cfa817c4389cc25754823a9443255\n8 -                   0000000000000000000000000000000000000000000000000000000000000000\n9 kernel-initrd       9caa29b128113ef42aa53d421f03437be57211e5ebafc0fa8b5d4514ee37ff0c\n10 ima                 5ea9e3dab53eb6b483b6ec9e3b2c712bea66bca1b155637841216e0094387400\n11 kernel-boot         0000000000000000000000000000000000000000000000000000000000000000\n12 kernel-config       627ffa4b405e911902fe1f1a8b0164693b31acab04f805f15bccfe2209c7eace\n13 sysexts             0000000000000000000000000000000000000000000000000000000000000000\n14 shim-policy         0000000000000000000000000000000000000000000000000000000000000000\n15 system-identity     0000000000000000000000000000000000000000000000000000000000000000\n16 debug               0000000000000000000000000000000000000000000000000000000000000000\n17 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n18 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n19 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n20 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n21 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n22 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\n23 application-support 0000000000000000000000000000000000000000000000000000000000000000\nsystemd-analyze srk [\n>\nFILE\n]\nÂ¶\nThis command reads the Storage Root Key (SRK) from the TPM2 device, and writes it in marshalled\nTPM2B_PUBLIC format to stdout. The output is non-printable data, so it should be redirected to a file\nor into a pipe.\nExampleÂ 27.Â Save the Storage Root Key to\nsrk.tpm2b_public\nsystemd-analyze srk >srk.tpm2b_public\nsystemd-analyze architectures [\nNAME\n...\n]\nÂ¶\nLists all known CPU architectures, and which ones are native. The listed architecture names are\nthose\nConditionArchitecture=\nsupports, see\nsystemd.unit\n(5)\nfor\ndetails. If architecture names are specified only those specified are listed.\nExampleÂ 28.Â Table output\n$ systemd-analyze architectures\nNAME        SUPPORT\nalpha       foreign\narc         foreign\narc-be      foreign\narm         foreign\narm64       foreign\nâ¦\nsparc       foreign\nsparc64     foreign\ntilegx      foreign\nx86         secondary\nx86-64      native\nsystemd-analyze smbios11\nÂ¶\nShows a list of SMBIOS Type #11 strings passed to the system. Also see\nsmbios-type-11\n(7)\n.\nExampleÂ 29.Â Example output\n$ systemd-analyze smbios11\nio.systemd.stub.kernel-cmdline-extra=console=ttyS0\nio.systemd.credential.binary:ssh.ephemeral-authorized_keys-all=c3NoLWVkMjU1MTkgQUFBQUMzTnphQzFsWkRJMU5URTVBQUFBSURGd20xbFp4WlRGclJteG9ZQlozOTYzcE1uYlJCaDMwM1MxVXhLSUM2NmYgbGVubmFydEB6ZXRhCg==\nio.systemd.credential:vmm.notify_socket=vsock-stream:2:254570042\n3 SMBIOS Type #11 strings passed.\nAdded in version 257.\nsystemd-analyze chid\nÂ¶\nShows a list of Computer Hardware IDs (CHIDs) of the local system. These IDs identify the\nsystem's computer hardware, based on SMBIOS data. See\nUsing Computer\nHardware IDs (CHIDs)\nfor details about CHIDs.\nExampleÂ 30.Â Example output\n$ systemd-analyze chid\nTYPE INPUT  CHID\n3 MFPSmp 520537c0-3b59-504f-b062-9682ea236b21\n4 MFPS-- edf05dc8-a53d-5b2c-8023-630bca2a2463\n5 MFP--- ebc6a4d9-ec48-537a-916b-c69fa4fdd814\n6 M--Smp 5ebe4bba-f598-5e90-9ff2-9fd0d3211465\n7 M--S-- 1a3fb835-b42a-5f9c-a38c-eff5bfd5c41d\n8 M-P-mp 2a831dce-8163-5bad-8406-435b8c752dd8\n9 M-P--- 7c21c878-4a75-50f7-9816-21e811588da0\n10 MF--mp 9a003537-bcc5-500e-b10a-8d8892e4fc64\n11 MF---- bb9122bb-8a5c-50d2-a742-a85beb719909\n13 M---mp bfc36935-5032-5987-a0a3-6311f01de33a\nLEGEND: M â sys_vendor (LENOVO) â F â product_family (ThinkPad X1 Carbon Gen 9) â P â product_name (20XW0055GE)\nS â product_sku (LENOVO_MT_20XW_BU_Think_FM_ThinkPad X1 Carbon Gen 9) â m â board_vendor (LENOVO)\np â board_name (20XW0055GE)\nAdded in version 258.\nsystemd-analyze transient-settings\nTYPE\n...\nÂ¶\nLists properties that can be set for various unit types via command line interfaces, in\nparticular\nsystemctl\n(1)\nset-property\nand\n--property=\n/\n--automount-property=\noptions in\nsystemd-run\n(1)\n,\nsystemd-nspawn\n(1)\n, and\nsystemd-mount\n(1)\n.\nThose assignments are possible for a subset of the properties that can be set in config files, see\nsystemd.unit\n(5)\n,\nsystemd.exec\n(5)\n,\nsystemd.resource-control\n(5)\n,\nand the other unit-type-specific pages. The\nTYPE\nargument must be a unit\ntype (\"service\", \"socket\", â¦). The properties that apply to the specific types are listed.\nNote: D-Bus properties documented in\norg.freedesktop.systemd1\n(5)\nform a partially overlapping set with the lists generated by this command. Many D-Bus properties and\ntransient settings share the same names, but for example,\nLogRateLimitIntervalSec=\nis described in\nsystemd.exec\n(5)\nand\nwould be listed by this command, but the corresponding D-Bus property described in\nsystemd.exec\n(5)\nis\nLogRateLimitIntervalUSec\n.\nThis verb is intended primarily for programmatic generation of shell completions.\nAdded in version 258.\nsystemd-analyze unit-shell\nSERVICE\n[\ncommand\n...\n]\nÂ¶\nThe given command runs on the namespace of the specified running service. If no command is given,\nspawn and attach a shell with the namespace to the service.\nExampleÂ 31.Â Example output\n$ systemd-analyze unit-shell systemd-resolved.service ls\nbin   dev  etc\t   home  lib\tlib64\tlost+found  mnt  proc  run   srv  tmp  var\tvmlinuz.old\nboot  efi  exitrd  init  lib32\tlibx32\tmedia\t    opt  root  sbin  sys  usr  vmlinuz\twork\nAdded in version 258.\nsystemd-analyze unit-gdb\nSERVICE\nÂ¶\nSpawn and attach a debugger to the given service. By default,\ngdb\n(1)\nwill be used. This may be changed using the\n--debugger=\noption or the\n$SYSTEMD_DEBUGGER\nenvironment variable. Use the\n--debugger-arguments=\noption\nto pass extra command line arguments to the debugger and quote as appropriate\nwhen\nARGS\ncontain whitespace (See Example).\nExampleÂ 32.Â\n$ systemd-analyze --debugger-arguments=\"-batch -ex 'info all-registers'\" unit-gdb systemd-oomd.service\nAdded in version 258.\nOptions\nÂ¶\nThe following options are understood:\n--system\nÂ¶\nOperates on the system systemd instance. This\nis the implied default.\nAdded in version 209.\n--user\nÂ¶\nOperates on the user systemd\ninstance.\nAdded in version 186.\n--global\nÂ¶\nOperates on the system-wide configuration for\nuser systemd instance.\nAdded in version 238.\n--order\n,\n--require\nÂ¶\nWhen used in conjunction with the\ndot\ncommand (see above),\nselects which dependencies are shown in the dependency graph. If\n--order\nis passed,\nonly dependencies of type\nAfter=\nor\nBefore=\nare shown.\nIf\n--require\nis passed, only dependencies of type\nRequires=\n,\nRequisite=\n,\nBindsTo=\n,\nWants=\n, and\nConflicts=\nare shown. If neither is passed, this shows dependencies of\nall these types.\nAdded in version 198.\n--from-pattern=\n,\n--to-pattern=\nÂ¶\nWhen used in conjunction with the\ndot\ncommand (see above), this selects which\nrelationships are shown in the dependency graph. Both options\nrequire a\nglob\n(7)\npattern as an argument, which will be matched against the\nleft-hand and the right-hand, respectively, nodes of a\nrelationship.\nEach of these can be used more than once, in which case\nthe unit name must match one of the values. When tests for\nboth sides of the relation are present, a relation must pass\nboth tests to be shown. When patterns are also specified as\npositional arguments, they must match at least one side of the\nrelation. In other words, patterns specified with those two\noptions will trim the list of edges matched by the positional\narguments, if any are given, and fully determine the list of\nedges shown otherwise.\nAdded in version 201.\n--fuzz=\ntimespan\nÂ¶\nWhen used in conjunction with the\ncritical-chain\ncommand (see above), also\nshow units, which finished\ntimespan\nearlier, than the latest unit in the same level. The unit of\ntimespan\nis seconds unless\nspecified with a different unit, e.g.\n\"50ms\".\nAdded in version 203.\n--man=no\nÂ¶\nDo not invoke\nman\n(1)\nto verify the existence of man pages listed in\nDocumentation=\n.\nAdded in version 235.\n--generators\nÂ¶\nInvoke unit generators, see\nsystemd.generator\n(7)\n.\nSome generators require root privileges. Under a normal user, running with\ngenerators enabled will generally result in some warnings.\nAdded in version 235.\n--instance=NAME\nÂ¶\nSpecifies fallback instance name for template units. This will be used when one or more\ntemplate units without an instance name (e.g.\nfoo@.service\n) specified for\nsystemd-analyze condition\nwith\n--unit=\n,\nsystemd-analyze security\n, and\nsystemd-analyze verify\n.\nIf unspecified, \"\ntest_instance\n\" will be used.\nAdded in version 257.\n--recursive-errors=\nMODE\nÂ¶\nControl verification of units and their dependencies and whether\nsystemd-analyze verify\nexits with a non-zero process exit status or not. With\nyes\n, return a non-zero process exit status when warnings arise during verification\nof either the specified unit or any of its associated dependencies. With\nno\n,\nreturn a non-zero process exit status when warnings arise during verification of only the specified\nunit. With\none\n, return a non-zero process exit status when warnings arise during\nverification of either the specified unit or its immediate dependencies. If this option is not\nspecified, zero is returned as the exit status regardless whether warnings arise during verification\nor not.\nAdded in version 250.\n--root=\nPATH\nÂ¶\nWith\ncat-config\n,\nverify\n,\ncondition\n,\nunit-gdb\n, and\nsecurity\nwhen\nused with\n--offline=\n, operate on files underneath the specified root path\nPATH\n.\nAdded in version 239.\n--image=\nPATH\nÂ¶\nWith\ncat-config\n,\nverify\n,\ncondition\nand\nsecurity\nwhen used with\n--offline=\n, operate on files inside the specified image path\nPATH\n.\nAdded in version 250.\n--image-policy=\npolicy\nÂ¶\nTakes an image policy string as argument, as per\nsystemd.image-policy\n(7)\n. The\npolicy is enforced when operating on the disk image specified via\n--image=\n, see\nabove. If not specified, defaults to the \"\n*\n\" policy, i.e. all recognized file systems\nin the image are used.\n--offline=\nBOOL\nÂ¶\nWith\nsecurity\n, perform an offline security review\nof the specified unit files, i.e. does not have to rely on PID 1 to acquire security\ninformation for the files like the\nsecurity\nverb when used by itself does.\nThis means that\n--offline=\ncan be used with\n--root=\nand\n--image=\nas well. If a unit's overall exposure level is above that set by\n--threshold=\n(default value is 100),\n--offline=\nwill return\nan error.\nAdded in version 250.\n--profile=\nPATH\nÂ¶\nWith\nsecurity\n--offline=\n, takes into\nconsideration the specified portable profile when assessing unit settings.\nThe profile can be passed by name, in which case the well-known system locations will\nbe searched, or it can be the full path to a specific drop-in file.\nAdded in version 250.\n--threshold=\nNUMBER\nÂ¶\nWith\nsecurity\n, allow the user to set a custom value\nto compare the overall exposure level with, for the specified unit files. If a unit's\noverall exposure level, is greater than that set by the user,\nsecurity\nwill return an error.\n--threshold=\ncan be used with\n--offline=\nas well and its default value is 100.\nAdded in version 250.\n--security-policy=\nPATH\nÂ¶\nWith\nsecurity\n, allow the user to define a custom set of\nrequirements formatted as a JSON file against which to compare the specified unit file(s)\nand determine their overall exposure level to security threats.\nTableÂ 1.Â Accepted Assessment Test Identifiers\nAssessment Test Identifier\nUserOrDynamicUser\nSupplementaryGroups\nPrivateMounts\nPrivateDevices\nPrivateTmp\nPrivateNetwork\nPrivateUsers\nProtectControlGroups\nProtectKernelModules\nProtectKernelTunables\nProtectKernelLogs\nProtectClock\nProtectHome\nProtectHostname\nProtectSystem\nRootDirectoryOrRootImage\nLockPersonality\nMemoryDenyWriteExecute\nNoNewPrivileges\nCapabilityBoundingSet_CAP_SYS_ADMIN\nCapabilityBoundingSet_CAP_SET_UID_GID_PCAP\nCapabilityBoundingSet_CAP_SYS_PTRACE\nCapabilityBoundingSet_CAP_SYS_TIME\nCapabilityBoundingSet_CAP_NET_ADMIN\nCapabilityBoundingSet_CAP_SYS_RAWIO\nCapabilityBoundingSet_CAP_SYS_MODULE\nCapabilityBoundingSet_CAP_AUDIT\nCapabilityBoundingSet_CAP_SYSLOG\nCapabilityBoundingSet_CAP_SYS_NICE_RESOURCE\nCapabilityBoundingSet_CAP_MKNOD\nCapabilityBoundingSet_CAP_CHOWN_FSETID_SETFCAP\nCapabilityBoundingSet_CAP_DAC_FOWNER_IPC_OWNER\nCapabilityBoundingSet_CAP_KILL\nCapabilityBoundingSet_CAP_NET_BIND_SERVICE_BROADCAST_RAW\nCapabilityBoundingSet_CAP_SYS_BOOT\nCapabilityBoundingSet_CAP_MAC\nCapabilityBoundingSet_CAP_LINUX_IMMUTABLE\nCapabilityBoundingSet_CAP_IPC_LOCK\nCapabilityBoundingSet_CAP_SYS_CHROOT\nCapabilityBoundingSet_CAP_BLOCK_SUSPEND\nCapabilityBoundingSet_CAP_WAKE_ALARM\nCapabilityBoundingSet_CAP_LEASE\nCapabilityBoundingSet_CAP_SYS_TTY_CONFIG\nCapabilityBoundingSet_CAP_BPF\nUMask\nKeyringMode\nProtectProc\nProcSubset\nNotifyAccess\nRemoveIPC\nDelegate\nRestrictRealtime\nRestrictSUIDSGID\nRestrictNamespaces_user\nRestrictNamespaces_mnt\nRestrictNamespaces_ipc\nRestrictNamespaces_pid\nRestrictNamespaces_cgroup\nRestrictNamespaces_uts\nRestrictNamespaces_net\nRestrictAddressFamilies_AF_INET_INET6\nRestrictAddressFamilies_AF_UNIX\nRestrictAddressFamilies_AF_NETLINK\nRestrictAddressFamilies_AF_PACKET\nRestrictAddressFamilies_OTHER\nSystemCallArchitectures\nSystemCallFilter_swap\nSystemCallFilter_obsolete\nSystemCallFilter_clock\nSystemCallFilter_cpu_emulation\nSystemCallFilter_debug\nSystemCallFilter_mount\nSystemCallFilter_module\nSystemCallFilter_raw_io\nSystemCallFilter_reboot\nSystemCallFilter_privileged\nSystemCallFilter_resources\nIPAddressDeny\nDeviceAllow\nAmbientCapabilities\nSee example \"JSON Policy\" below.\nAdded in version 250.\n--json=\nMODE\nÂ¶\nWith the\nsecurity\ncommand, generate a JSON formatted\noutput of the security analysis table. The format is a JSON array with objects\ncontaining the following fields:\nset\nwhich indicates if the setting has\nbeen enabled or not,\nname\nwhich is what is used to refer to the setting,\njson_field\nwhich is the JSON compatible identifier of the setting,\ndescription\nwhich is an outline of the setting state, and\nexposure\nwhich is a number in the range 0.0â¦10.0, where a higher value\ncorresponds to a higher security threat. The JSON version of the table is printed to standard\noutput. The\nMODE\npassed to the option can be one of three:\noff\nwhich is the default,\npretty\nand\nshort\nwhich respectively output a prettified or shorted JSON version of the security table.\nWith the\nplot\ncommand, generate a JSON formatted output of the raw time data.\nThe format is a JSON array with objects containing the following fields:\nname\nwhich is the unit name,\nactivated\nwhich is the time after startup the\nservice was activated,\nactivating\nwhich is how long after startup the service\nwas initially started,\ntime\nwhich is how long the service took to activate\nfrom when it was initially started,\ndeactivated\nwhich is the time after startup\nthat the service was deactivated,\ndeactivating\nwhich is the time after startup\nthat the service was initially told to deactivate.\nAdded in version 250.\n--iterations=\nNUMBER\nÂ¶\nWhen used with the\ncalendar\ncommand, show the specified number of\niterations the specified calendar expression will elapse next. Defaults to 1.\nAdded in version 242.\n--base-time=\nTIMESTAMP\nÂ¶\nWhen used with the\ncalendar\ncommand, show next iterations relative\nto the specified point in time. If not specified, defaults to the current time.\nAdded in version 244.\n--unit=\nUNIT\nÂ¶\nWhen used with the\ncondition\ncommand, evaluate all the\nCondition*=...\nand\nAssert*=...\nassignments in the specified unit file. The full unit search path is formed by combining the\ndirectories for the specified unit with the usual unit load paths. The variable\n$SYSTEMD_UNIT_PATH\nis supported, and may be used to replace or augment the\ncompiled in set of unit load paths; see\nsystemd.unit\n(5)\n. All\nunits files present in the directory containing the specified unit will be used in preference to the\nother paths. If a template unit without an instance name is specified (e.g.\nfoo@.service\n), \"\ntest_instance\n\" will be used as the instance\nname, which can be controlled by\n--instance=\noption.\nAdded in version 250.\n--table\nÂ¶\nWhen used with the\nplot\ncommand, the raw time data is output in a table.\nAdded in version 253.\n--no-legend\nÂ¶\nWhen used with the\nplot\ncommand in combination with either\n--table\nor\n--json=\n, no legends or hints are included in the output.\nAdded in version 253.\n-H\n,\n--host=\nÂ¶\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"\n@\n\", to\nconnect to. The hostname may optionally be suffixed by a\nport ssh is listening on, separated by \"\n:\n\", and then a\ncontainer name, separated by \"\n/\n\", which\nconnects directly to a specific container on the specified\nhost. This will use SSH to talk to the remote machine manager\ninstance. Container names may be enumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in brackets.\n-M\n,\n--machine=\nÂ¶\nExecute operation on a local container. Specify a container name to connect to, optionally\nprefixed by a user name to connect as and a separating \"\n@\n\" character. If the special\nstring \"\n.host\n\" is used in place of the container name, a connection to the local\nsystem is made (which is useful to connect to a specific user's user bus: \"\n--user\n--machine=lennart@.host\n\"). If the \"\n@\n\" syntax is not used, the connection is\nmade as root user. If the \"\n@\n\" syntax is used either the left hand side or the right hand\nside may be omitted (but not both) in which case the local user name and \"\n.host\n\" are\nimplied.\n-q\n,\n--quiet\nÂ¶\nSuppress hints and other non-essential output.\nAdded in version 250.\n--tldr\nÂ¶\nWith\ncat-config\n, only print the \"interesting\" parts of the\nconfiguration files, skipping comments and empty lines and section headers followed only by\ncomments and empty lines.\nAdded in version 255.\n--scale-svg=\nFACTOR\nÂ¶\nWhen used with the\nplot\ncommand, the x-axis of the plot\ncan be stretched by FACTOR (default: 1.0).\nAdded in version 257.\n--detailed\nÂ¶\nWhen used with the\nplot\ncommand, activation timestamps\ndetails can be seen in SVG plot.\nAdded in version 257.\n--drm-device=\nPATH\nÂ¶\nWhen provided with the\nchid\ncommand, use this sysfs path to a DRM\ndevice to fetch EDID from. Example:\n/sys/class/drm/card1-HDMI-A-1/\nAdded in version 258.\n--debugger=\nDEBUGGER\nÂ¶\nUse the given debugger for the\nunit-gdb\ncommand. If not given and\n$SYSTEMD_DEBUGGER\nis unset, then\ngdb\n(1)\nwill be used.\nAdded in version 258.\n-A\nARGS\n,\n--debugger-arguments=\nARGS\nÂ¶\nPass the given\nARGS\nas extra command line arguments to the debugger.\nAdded in version 258.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\nExit status\nÂ¶\nFor most verbs,\n0\nis returned on success, and a non-zero failure code\notherwise.\nFor the verb\ncompare-versions\n, in the two-argument form,\n12\n,\n0\n, or\n11\nare returned if the second\nversion string is respectively larger than, equal to, or smaller than the first. In the three-argument\nform,\n0\nor\n1\nare returned when the condition is respectively\ntrue or false.\nFor the verb\nhas-tpm2\n,\n0\nis returned if a TPM2 device is\ndiscovered, supported, and used by firmware, driver, and userspace (i.e.\nsystemd\n).\nOtherwise, the OR combination of the value\n1\n(in case firmware support is missing),\n2\n(in case driver support is missing), and\n4\n(in case userspace\nsupport is missing). If no TPM2 support is available at all, value\n7\nis hence\nreturned.\nEnvironment\nÂ¶\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis setting is only useful when messages are written directly to the terminal, because\njournalctl\n(1)\nand\nother tools that display logs will color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis setting is only useful when messages are written directly to the terminal or a file, because\njournalctl\n(1)\nand\nother tools that display logs will attach timestamps based on the entry metadata on their own.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nNote that the log location is often attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TID\nÂ¶\nA boolean. If true, messages will be prefixed with the current\nnumerical thread ID (TID).\nNote that the this information is attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\n$SYSTEMD_LOG_RATELIMIT_KMSG\nÂ¶\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"\ntrue\n\". If disabled, systemd will not ratelimit messages written to kmsg.\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\nExamples\nÂ¶\nExampleÂ 33.Â JSON Policy\nThe JSON file passed as a path parameter to\n--security-policy=\nhas a top-level\nJSON object, with keys being the assessment test identifiers mentioned above. The values in the file\nshould be JSON objects with one or more of the following fields:\ndescription_na\n(string),\ndescription_good\n(string),\ndescription_bad\n(string),\nweight\n(unsigned integer), and\nrange\n(unsigned integer). If any of\nthese fields corresponding to a specific id of the unit file is missing from the JSON object, the\ndefault built-in field value corresponding to that same id is used for security analysis as default.\nThe weight and range fields are used in determining the overall exposure level of the unit files: the\nvalue of each setting is assigned a badness score, which is multiplied by the policy weight and divided\nby the policy range to determine the overall exposure that the setting implies. The computed badness is\nsummed across all settings in the unit file, normalized to the 1â¦100 range, and used to determine the\noverall exposure level of the unit.  By allowing users to manipulate these fields, the 'security' verb\ngives them the option to decide for themself which ids are more important and hence should have a\ngreater effect on the exposure level. A weight of \"\n0\n\" means the setting will not be\nchecked.\n{\n\"PrivateDevices\":\n{\n\"description_good\": \"Service has no access to hardware devices\",\n\"description_bad\": \"Service potentially has access to hardware devices\",\n\"weight\": 1000,\n\"range\": 1\n},\n\"PrivateMounts\":\n{\n\"description_good\": \"Service cannot install system mounts\",\n\"description_bad\": \"Service may install system mounts\",\n\"weight\": 1000,\n\"range\": 1\n},\n\"PrivateNetwork\":\n{\n\"description_good\": \"Service has no access to the host's network\",\n\"description_bad\": \"Service has access to the host's network\",\n\"weight\": 2500,\n\"range\": 1\n},\n\"PrivateTmp\":\n{\n\"description_good\": \"Service has no access to other software's temporary files\",\n\"description_bad\": \"Service has access to other software's temporary files\",\n\"weight\": 1000,\n\"range\": 1\n},\n\"PrivateUsers\":\n{\n\"description_good\": \"Service does not have access to other users\",\n\"description_bad\": \"Service has access to other users\",\n\"weight\": 1000,\n\"range\": 1\n}\n}\nSee Also\nÂ¶\nsystemd\n(1)\n,\nsystemctl\n(1)\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/systemd-analyze.html"}}
{"text": "loginctl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nloginctl â Control the systemd login manager\nSynopsis\nloginctl\n[OPTIONS...] {COMMAND} [NAME...]\nDescription\nÂ¶\nloginctl\nmay be used to introspect and\ncontrol the state of the\nsystemd\n(1)\nlogin manager\nsystemd-logind.service\n(8)\n.\nCommands\nÂ¶\nThe following commands are understood:\nSession Commands\nÂ¶\nlist-sessions\nÂ¶\nList current sessions. The JSON format output can be toggled using\n--json=\nor\n-j\noption.\nsession-status\n[\nID\nâ¦\n]\nÂ¶\nShow terse runtime status information about\none or more sessions, followed by the most recent log data\nfrom the journal. Takes one or more session identifiers as\nparameters. If no session identifiers are passed, the status of\nthe caller's session is shown. This function is intended to\ngenerate human-readable output. If you are looking for\ncomputer-parsable output, use\nshow-session\ninstead.\nAdded in version 233.\nshow-session\n[\nID\nâ¦\n]\nÂ¶\nShow properties of one or more sessions or the manager itself. If no argument is\nspecified, properties of the manager will be shown. If a session ID is specified, properties of\nthe session are shown. Specially, if the given ID is \"\nself\n\", the session to which\nthe\nloginctl\nprocess belongs is used. If \"\nauto\n\", the current\nsession is used as with \"\nself\n\" if exists, and falls back to the current user's\ngraphical session. By default, empty properties are suppressed. Use\n--all\nto show\nthose too. To select specific properties to show, use\n--property=\n. This command\nis intended to be used whenever computer-parsable output is required. Use\nsession-status\nif you are looking for formatted human-readable output.\nAdded in version 233.\nactivate\n[\nID\n]\nÂ¶\nActivate a session. This brings a session into\nthe foreground if another session is currently in the\nforeground on the respective seat. Takes a session identifier\nas argument. If no argument is specified, the session of the\ncaller is put into foreground.\nAdded in version 219.\nlock-session\n[\nID\nâ¦\n],\nunlock-session\n[\nID\nâ¦\n]\nÂ¶\nActivates/deactivates the screen lock on one\nor more sessions, if the session supports it. Takes one or\nmore session identifiers as arguments. If no argument is\nspecified, the session of the caller is locked/unlocked.\nAdded in version 233.\nlock-sessions\n,\nunlock-sessions\nÂ¶\nActivates/deactivates the screen lock on all\ncurrent sessions supporting it.\nAdded in version 188.\nterminate-session\nID\nâ¦\nÂ¶\nTerminates a session. This kills all processes of the session and deallocates all\nresources attached to the session. If the argument is specified as empty string the session invoking\nthe command is terminated.\nAdded in version 233.\nkill-session\nID\nâ¦\nÂ¶\nSend a signal to one or more processes of the session. Use\n--kill-whom=\nto select which process to kill. Use\n--signal=\nto\nselect the signal to send. If the argument is specified as empty string the signal is sent to the\nsession invoking the command.\nAdded in version 233.\nUser Commands\nÂ¶\nlist-users\nÂ¶\nList currently logged in users. The JSON format output can be toggled using\n--json=\nor\n-j\noption.\nuser-status\n[\nUSER\nâ¦\n]\nÂ¶\nShow terse runtime status information about\none or more logged in users, followed by the most recent log\ndata from the journal. Takes one or more user names or numeric\nuser IDs as parameters. If no parameters are passed, the status\nis shown for the user of the session of the caller. This\nfunction is intended to generate human-readable output. If you\nare looking for computer-parsable output, use\nshow-user\ninstead.\nAdded in version 233.\nshow-user\n[\nUSER\nâ¦\n]\nÂ¶\nShow properties of one or more users or the\nmanager itself. If no argument is specified, properties of the\nmanager will be shown. If a user is specified, properties of\nthe user are shown. By default, empty properties are\nsuppressed. Use\n--all\nto show those too. To\nselect specific properties to show, use\n--property=\n. This command is intended to be\nused whenever computer-parsable output is required. Use\nuser-status\nif you are looking for\nformatted human-readable output.\nAdded in version 233.\nenable-linger\n[\nUSER\nâ¦\n],\ndisable-linger\n[\nUSER\nâ¦\n]\nÂ¶\nEnable/disable user lingering for one or more\nusers. If enabled for a specific user, a user manager is\nspawned for the user at boot and kept around after logouts.\nThis allows users who are not logged in to run long-running\nservices. Takes one or more user names or numeric UIDs as\nargument. If no argument is specified, enables/disables\nlingering for the user of the session of the caller.\nSee also\nKillUserProcesses=\nsetting in\nlogind.conf\n(5)\n.\nAdded in version 233.\nterminate-user\nUSER\nâ¦\nÂ¶\nTerminates all sessions of a user. This kills all processes of all sessions of the\nuser and deallocates all runtime resources attached to the user. If the argument is specified as\nempty string the sessions of the user invoking the command are terminated.\nAdded in version 233.\nkill-user\nUSER\nâ¦\nÂ¶\nSend a signal to all processes of a user. Use\n--signal=\nto select\nthe signal to send. If the argument is specified as empty string the signal is sent to the sessions\nof the user invoking the command.\nAdded in version 233.\nSeat Commands\nÂ¶\nlist-seats\nÂ¶\nList currently available seats on the local system. The JSON format output can be\ntoggled using\n--json=\nor\n-j\noption.\nseat-status\n[\nNAME\nâ¦\n]\nÂ¶\nShow terse runtime status information about\none or more seats. Takes one or more seat names as parameters.\nIf no seat names are passed the status of the caller's\nsession's seat is shown. This function is intended to generate\nhuman-readable output. If you are looking for\ncomputer-parsable output, use\nshow-seat\ninstead.\nAdded in version 233.\nshow-seat\n[\nNAME\nâ¦\n]\nÂ¶\nShow properties of one or more seats or the\nmanager itself. If no argument is specified, properties of the\nmanager will be shown. If a seat is specified, properties of\nthe seat are shown. By default, empty properties are\nsuppressed. Use\n--all\nto show those too. To\nselect specific properties to show, use\n--property=\n. This command is intended to be\nused whenever computer-parsable output is required. Use\nseat-status\nif you are looking for\nformatted human-readable output.\nAdded in version 233.\nattach\nNAME\nDEVICE\nâ¦\nÂ¶\nPersistently attach one or more devices to a\nseat. The devices should be specified via device paths in the\n/sys/\nfile system. To create a new seat,\nattach at least one graphics card to a previously unused seat\nname. Seat names may consist only of aâz, AâZ, 0â9,\n\"\n-\n\" and \"\n_\n\" and must be\nprefixed with \"\nseat\n\". To drop assignment of a\ndevice to a specific seat, just reassign it to a different\nseat, or use\nflush-devices\n.\nAdded in version 233.\nflush-devices\nÂ¶\nRemoves all device assignments previously\ncreated with\nattach\n. After this call, only\nautomatically generated seats will remain, and all seat\nhardware is assigned to them.\nterminate-seat\nNAME\nâ¦\nÂ¶\nTerminates all sessions on a seat. This kills\nall processes of all sessions on the seat and deallocates all\nruntime resources attached to them.\nAdded in version 233.\nOptions\nÂ¶\nThe following options are understood:\n-p\n,\n--property=\nÂ¶\nWhen showing session/user/seat properties,\nlimit display to certain properties as specified as argument.\nIf not specified, all set properties are shown. The argument\nshould be a property name, such as\n\"\nSessions\n\". If specified more than once, all\nproperties with the specified names are\nshown.\n--value\nÂ¶\nWhen showing session/user/seat properties,\nonly print the value, and skip the property name and\n\"\n=\n\".\nAdded in version 230.\n-a\n,\n--all\nÂ¶\nWhen showing session/user/seat properties,\nshow all properties regardless of whether they are set or\nnot.\n-l\n,\n--full\nÂ¶\nDo not ellipsize process tree entries.\nAdded in version 198.\n--kill-whom=\nÂ¶\nWhen used with\nkill-session\n, choose which processes to kill.\nTakes one of \"\nleader\n\" or \"\nall\n\", to select whether to kill only\nthe leader process of the session or all processes of the session. If omitted, defaults to\nall\n.\nAdded in version 252.\n-s\n,\n--signal=\nÂ¶\nWhen used with\nkill-session\nor\nkill-user\n,\nchoose which signal to send to selected processes. Must be one of the well known signal specifiers,\nsuch as\nSIGTERM\n,\nSIGINT\nor\nSIGSTOP\n.\nIf omitted, defaults to\nSIGTERM\n.\nThe special value \"\nhelp\n\" will list the known values and the program will exit\nimmediately, and the special value \"\nlist\n\" will list known values along with the\nnumerical signal numbers and the program will exit immediately.\n-n\n,\n--lines=\nÂ¶\nWhen used with\nuser-status\nand\nsession-status\n, controls the number of\njournal lines to show, counting from the most recent ones.\nTakes a positive integer argument. Defaults to 10.\nAdded in version 219.\n-o\n,\n--output=\nÂ¶\nWhen used with\nuser-status\nand\nsession-status\n, controls the formatting\nof the journal entries that are shown. For the available\nchoices, see\njournalctl\n(1)\n.\nDefaults to \"\nshort\n\".\nAdded in version 219.\n-H\n,\n--host=\nÂ¶\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"\n@\n\", to\nconnect to. The hostname may optionally be suffixed by a\nport ssh is listening on, separated by \"\n:\n\", and then a\ncontainer name, separated by \"\n/\n\", which\nconnects directly to a specific container on the specified\nhost. This will use SSH to talk to the remote machine manager\ninstance. Container names may be enumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in brackets.\n-M\n,\n--machine=\nÂ¶\nExecute operation on a local container. Specify a container name to connect to, optionally\nprefixed by a user name to connect as and a separating \"\n@\n\" character. If the special\nstring \"\n.host\n\" is used in place of the container name, a connection to the local\nsystem is made (which is useful to connect to a specific user's user bus: \"\n--user\n--machine=lennart@.host\n\"). If the \"\n@\n\" syntax is not used, the connection is\nmade as root user. If the \"\n@\n\" syntax is used either the left hand side or the right hand\nside may be omitted (but not both) in which case the local user name and \"\n.host\n\" are\nimplied.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\n--no-legend\nÂ¶\nDo not print the legend, i.e. column headers and the\nfooter with hints.\n--json=\nMODE\nÂ¶\nShows output formatted as JSON. Expects one of \"\nshort\n\" (for the\nshortest possible output without any redundant whitespace or line breaks), \"\npretty\n\"\n(for a pretty version of the same, with indentation and line breaks) or \"\noff\n\" (to turn\noff JSON output, the default).\n-j\nÂ¶\nEquivalent to\n--json=pretty\nif running on a terminal, and\n--json=short\notherwise.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\nExit status\nÂ¶\nOn success, 0 is returned, a non-zero failure code\notherwise.\nExamples\nÂ¶\nExampleÂ 1.Â Querying user status\n$ loginctl user-status\nfatima (1005)\nSince: Sat 2016-04-09 14:23:31 EDT; 54min ago\nState: active\nSessions: 5 *3\nUnit: user-1005.slice\nââuser@1005.service\nâ¦\nââsession-3.scope\nâ¦\nââsession-5.scope\nââ3473 login -- fatima\nââ3515 -zsh\nApr 09 14:40:30 laptop login[2325]: pam_unix(login:session):\nsession opened for user fatima by LOGIN(uid=0)\nApr 09 14:40:30 laptop login[2325]: LOGIN ON tty3 BY fatima\nThere are two sessions, 3 and 5. Session 3 is a graphical session,\nmarked with a star. The tree of processing including the two corresponding\nscope units and the user manager unit are shown.\nEnvironment\nÂ¶\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis setting is only useful when messages are written directly to the terminal, because\njournalctl\n(1)\nand\nother tools that display logs will color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis setting is only useful when messages are written directly to the terminal or a file, because\njournalctl\n(1)\nand\nother tools that display logs will attach timestamps based on the entry metadata on their own.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nNote that the log location is often attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TID\nÂ¶\nA boolean. If true, messages will be prefixed with the current\nnumerical thread ID (TID).\nNote that the this information is attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\n$SYSTEMD_LOG_RATELIMIT_KMSG\nÂ¶\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"\ntrue\n\". If disabled, systemd will not ratelimit messages written to kmsg.\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\nSee Also\nÂ¶\nsystemd\n(1)\n,\nsystemctl\n(1)\n,\nsystemd-logind.service\n(8)\n,\nlogind.conf\n(5)\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/loginctl.html"}}
{"text": "timedatectl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\ntimedatectl â Control the system time and date\nSynopsis\ntimedatectl\n[OPTIONS...] {COMMAND}\nDescription\nÂ¶\ntimedatectl\nmay be used to query and change the system clock and its settings,\nand enable or disable time synchronization services.\nUse\nsystemd-firstboot\n(1)\nto initialize the system time zone for mounted (but not booted)\nsystem images.\ntimedatectl\nmay be used to show the current status of time synchronization\nservices, for example\nsystemd-timesyncd.service\n(8)\n.\nCommands\nÂ¶\nThe following commands are understood:\nstatus\nÂ¶\nShow current settings of the system clock and RTC, including whether network time\nsynchronization is active. If no command is specified, this is the implied default.\nAdded in version 195.\nshow\nÂ¶\nShow the same information as\nstatus\n, but in machine readable form.\nThis command is intended to be used whenever computer-parsable output is required.\nUse\nstatus\nif you are looking for formatted human-readable output.\nBy default, empty properties are suppressed. Use\n--all\nto show those too.\nTo select specific properties to show, use\n--property=\n.\nAdded in version 239.\nset-time [TIME]\nÂ¶\nSet the system clock to the specified timestamp. This will also update the RTC time\naccordingly. The timestamp may be specified in the format \"\n2012-10-30 18:17:16\n\". See\nsystemd.time\n(7)\nfor more details about acceptable timestamp format.\nAdded in version 195.\nset-timezone [TIMEZONE]\nÂ¶\nSet the system time zone to the specified\nvalue. Available timezones can be listed with\nlist-timezones\n. If the RTC is configured to\nbe in the local time, this will also update the RTC time. This\ncall will alter the\n/etc/localtime\nsymlink. See\nlocaltime\n(5)\nfor more information.\nAdded in version 195.\nlist-timezones\nÂ¶\nList available time zones, one per line.\nEntries from the list can be set as the system timezone with\nset-timezone\n.\nAdded in version 195.\nset-local-rtc [BOOL]\nÂ¶\nTakes a boolean argument. If\n\"\n0\n\", the system is configured to maintain the\nRTC in universal time. If \"\n1\n\", it will\nmaintain the RTC in local time instead. Note that maintaining\nthe RTC in the local timezone is not fully supported and will\ncreate various problems with time zone changes and daylight\nsaving adjustments. If at all possible, keep the RTC in UTC\nmode. Note that invoking this will also synchronize the RTC\nfrom the system clock, unless\n--adjust-system-clock\nis passed (see above).\nThis command will change the 3rd line of\n/etc/adjtime\n, as documented in\nhwclock\n(8)\n.\nAdded in version 195.\nset-ntp [BOOL]\nÂ¶\nTakes a boolean argument. Controls whether network time synchronization is active and\nenabled (if available). If the argument is true, this enables and starts the first existing network\nsynchronization service. If the argument is false, then this disables and stops the known network\nsynchronization services. The way that the list of services is built is described in\nsystemd-timedated.service\n(8)\n.\nAdded in version 195.\nsystemd-timesyncd Commands\nÂ¶\nThe following commands are specific to\nsystemd-timesyncd.service\n(8)\n.\ntimesync-status\nÂ¶\nShow current status of\nsystemd-timesyncd.service\n(8)\n.\nIf\n--monitor\nis specified, then this will monitor the status updates.\nAdded in version 239.\nshow-timesync\nÂ¶\nShow the same information as\ntimesync-status\n, but in machine readable form.\nThis command is intended to be used whenever computer-parsable output is required.\nUse\ntimesync-status\nif you are looking for formatted human-readable output.\nBy default, empty properties are suppressed. Use\n--all\nto show those too.\nTo select specific properties to show, use\n--property=\n.\nAdded in version 239.\nntp-servers\nINTERFACE\nSERVER\nâ¦\nÂ¶\nSet the interface specific NTP servers. This command can be used only when the\ninterface is managed by\nsystemd-networkd\n.\nAdded in version 243.\nrevert\nINTERFACE\nÂ¶\nRevert the interface specific NTP servers. This command can be used only when\nthe interface is managed by\nsystemd-networkd\n.\nAdded in version 243.\nOptions\nÂ¶\nThe following options are understood:\n--adjust-system-clock\nÂ¶\nIf\nset-local-rtc\nis invoked\nand this option is passed, the system clock is synchronized\nfrom the RTC again, taking the new setting into account.\nOtherwise, the RTC is synchronized from the system\nclock.\nAdded in version 195.\n--monitor\nÂ¶\nIf\ntimesync-status\nis invoked and this option is passed, then\ntimedatectl\nmonitors the status of\nsystemd-timesyncd.service\n(8)\nand updates the outputs. Use\nCtrl\n+\nC\nto terminate the\nmonitoring.\nAdded in version 239.\n-a\n,\n--all\nÂ¶\nWhen showing properties of\nsystemd-timesyncd.service\n(8)\n,\nshow all properties regardless of whether they are set or not.\nAdded in version 239.\n-p\n,\n--property=\nÂ¶\nWhen showing properties of\nsystemd-timesyncd.service\n(8)\n,\nlimit display to certain properties as specified as argument. If not specified, all set properties are shown.\nThe argument should be a property name, such as \"\nServerName\n\". If specified more than once,\nall properties with the specified names are shown.\nAdded in version 239.\n--value\nÂ¶\nWhen printing properties with\nshow-timesync\n, only print the value, and skip the\nproperty name and \"\n=\n\".\nAdded in version 239.\n-P\nÂ¶\nEquivalent to\n--value\n--property=\n, i.e. shows the value of the\nproperty without the property name or \"\n=\n\". Note that using\n-P\nonce\nwill also affect all properties listed with\n-p\n/\n--property=\n.\nAdded in version 256.\n-H\n,\n--host=\nÂ¶\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"\n@\n\", to\nconnect to. The hostname may optionally be suffixed by a\nport ssh is listening on, separated by \"\n:\n\", and then a\ncontainer name, separated by \"\n/\n\", which\nconnects directly to a specific container on the specified\nhost. This will use SSH to talk to the remote machine manager\ninstance. Container names may be enumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in brackets.\n-M\n,\n--machine=\nÂ¶\nExecute operation on a local container. Specify a container name to connect to, optionally\nprefixed by a user name to connect as and a separating \"\n@\n\" character. If the special\nstring \"\n.host\n\" is used in place of the container name, a connection to the local\nsystem is made (which is useful to connect to a specific user's user bus: \"\n--user\n--machine=lennart@.host\n\"). If the \"\n@\n\" syntax is not used, the connection is\nmade as root user. If the \"\n@\n\" syntax is used either the left hand side or the right hand\nside may be omitted (but not both) in which case the local user name and \"\n.host\n\" are\nimplied.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\nExit status\nÂ¶\nOn success, 0 is returned, a non-zero failure code otherwise.\nEnvironment\nÂ¶\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis setting is only useful when messages are written directly to the terminal, because\njournalctl\n(1)\nand\nother tools that display logs will color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis setting is only useful when messages are written directly to the terminal or a file, because\njournalctl\n(1)\nand\nother tools that display logs will attach timestamps based on the entry metadata on their own.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nNote that the log location is often attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TID\nÂ¶\nA boolean. If true, messages will be prefixed with the current\nnumerical thread ID (TID).\nNote that the this information is attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\n$SYSTEMD_LOG_RATELIMIT_KMSG\nÂ¶\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"\ntrue\n\". If disabled, systemd will not ratelimit messages written to kmsg.\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\nExamples\nÂ¶\nShow current settings:\n$ timedatectl\nLocal time: Thu 2017-09-21 16:08:56 CEST\nUniversal time: Thu 2017-09-21 14:08:56 UTC\nRTC time: Thu 2017-09-21 14:08:56\nTime zone: Europe/Warsaw (CEST, +0200)\nSystem clock synchronized: yes\nNTP service: active\nRTC in local TZ: no\nEnable network time synchronization:\n$ timedatectl set-ntp true\n==== AUTHENTICATING FOR org.freedesktop.timedate1.set-ntp ===\nAuthentication is required to control whether network time synchronization shall be enabled.\nAuthenticating as: user\nPassword: ********\n==== AUTHENTICATION COMPLETE ===\n$ systemctl status systemd-timesyncd.service\nâ systemd-timesyncd.service - Network Time Synchronization\nLoaded: loaded (/usr/lib/systemd/system/systemd-timesyncd.service; enabled)\nActive: active (running) since Mo 2015-03-30 14:20:38 CEST; 5s ago\nDocs: man:systemd-timesyncd.service(8)\nMain PID: 595 (systemd-timesyn)\nStatus: \"Using Time Server 216.239.38.15:123 (time4.google.com).\"\nCGroup: /system.slice/systemd-timesyncd.service\nââ595 /usr/lib/systemd/systemd-timesyncd\nâ¦\nShow current status of\nsystemd-timesyncd.service\n(8)\n:\n$ timedatectl timesync-status\nServer: 216.239.38.15 (time4.google.com)\nPoll interval: 1min 4s (min: 32s; max 34min 8s)\nLeap: normal\nVersion: 4\nStratum: 1\nReference: GPS\nPrecision: 1us (-20)\nRoot distance: 335us (max: 5s)\nOffset: +316us\nDelay: 349us\nJitter: 0\nPacket count: 1\nFrequency: -8.802ppm\nSee Also\nÂ¶\nsystemd\n(1)\n,\nhwclock\n(8)\n,\ndate\n(1)\n,\nlocaltime\n(5)\n,\nsystemctl\n(1)\n,\nsystemd-timedated.service\n(8)\n,\nsystemd-timesyncd.service\n(8)\n,\nsystemd-firstboot\n(1)\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/timedatectl.html"}}
{"text": "hostnamectl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nhostnamectl â Control the system hostname\nSynopsis\nhostnamectl\n[OPTIONS...] {COMMAND}\nDescription\nÂ¶\nhostnamectl\nmay be used to query and change the system hostname and related\nsettings.\nsystemd-hostnamed.service\n(8)\nand this tool distinguish three different hostnames: the high-level \"pretty\" hostname which might include\nall kinds of special characters (e.g. \"Lennart's Laptop\"), the \"static\" hostname which is the\nuser-configured hostname (e.g. \"lennarts-laptop\"), and the transient hostname which is a fallback value\nreceived from network configuration (e.g. \"node12345678\"). If a static hostname is set to a valid value,\nthen the transient hostname is not used.\nNote that the pretty hostname has little restrictions on the characters and length used, while the static and\ntransient hostnames are limited to the usually accepted characters of Internet domain names, and 64 characters at\nmaximum (the latter being a Linux limitation).\nUse\nsystemd-firstboot\n(1)\nto\ninitialize the system hostname for mounted (but not booted) system images.\nCommands\nÂ¶\nThe following commands are understood:\nstatus\nÂ¶\nShow system hostname and related information. If no command is specified,\nthis is the implied default.\nAdded in version 195.\nhostname\n[\nNAME\n]\nÂ¶\nIf no argument is given, print the system hostname. If an\noptional argument\nNAME\nis provided then the command changes the\nsystem hostname to\nNAME\n. By default, this will alter the\npretty, the static, and the transient hostname alike; however, if one or more of\n--static\n,\n--transient\n,\n--pretty\nare used, only the selected hostnames are changed. If\nthe pretty hostname is being set, and static or transient are being set as well, the specified hostname will be\nsimplified in regards to the character set used before the latter are updated. This is done by removing special\ncharacters and spaces. This ensures that the pretty and the static hostname are always closely related while\nstill following the validity rules of the specific name. This simplification of the hostname string is not done\nif only the transient and/or static hostnames are set, and the pretty hostname is left untouched.\nThe static and transient hostnames must each be either a single DNS label (a string composed of\n7-bit ASCII lower-case characters and no spaces or dots, limited to the format allowed for DNS domain\nname labels), or a sequence of such labels separated by single dots that forms a valid DNS FQDN. The\nhostname must be at most 64 characters, which is a Linux limitation (DNS allows longer names).\nIf the question mark character \"\n?\n\" appears in\nthe hostname, it is automatically substituted by a hexadecimal character derived from the\nmachine-id\n(5)\nwhen\napplied, securely and deterministically by cryptographic hashing. Example:\n\"\nfoobar-????-????\n\" will automatically expand to \"\nfoobar-92a9-061c\n\" or\nsimilar, depending on the local machine ID.\nAdded in version 249.\nicon-name\n[\nNAME\n]\nÂ¶\nIf no argument is given, print the icon name of the system. If an\noptional argument\nNAME\nis provided then the command changes the\nicon name to\nNAME\n. The icon name is used by some\ngraphical applications to visualize this host. The icon name\nshould follow the\nIcon\nNaming Specification\n.\nAdded in version 249.\nchassis\n[\nTYPE\n]\nÂ¶\nIf no argument is given, print the chassis type. If an\noptional argument\nTYPE\nis provided then the command changes the\nchassis type to\nTYPE\n. The chassis type is used by\nsome graphical applications to visualize the host or alter user interaction.\nCurrently, the following chassis types are defined:\n\"\ndesktop\n\",\n\"\nlaptop\n\",\n\"\nconvertible\n\",\n\"\nserver\n\",\n\"\ntablet\n\",\n\"\nhandset\n\",\n\"\nwatch\n\",\n\"\nembedded\n\",\nas well as the special chassis types\n\"\nvm\n\" and\n\"\ncontainer\n\" for virtualized systems that lack\nan immediate physical chassis.\nAdded in version 249.\ndeployment\n[\nENVIRONMENT\n]\nÂ¶\nIf no argument is given, print the deployment environment. If an\noptional argument\nENVIRONMENT\nis provided then the command changes the\ndeployment environment to\nENVIRONMENT\n.\nArgument\nENVIRONMENT\nmust be a single word without any control characters. One of the following is suggested:\n\"\ndevelopment\n\",\n\"\nintegration\n\",\n\"\nstaging\n\",\n\"\nproduction\n\".\nAdded in version 249.\nlocation\n[\nLOCATION\n]\nÂ¶\nIf no argument is given, print the location string for the system. If an\noptional argument\nLOCATION\nis provided then the command changes the\nlocation string for the system to\nLOCATION\n.\nArgument\nLOCATION\nshould be a\nhuman-friendly, free-form string describing the physical\nlocation of the system, if it is known and applicable. This\nmay be as generic as \"\nBerlin, Germany\n\" or as\nspecific as \"\nLeft Rack, 2nd Shelf\n\".\nAdded in version 249.\nOptions\nÂ¶\nThe following options are understood:\n--static\n,\n--transient\n,\n--pretty\nÂ¶\nIf\nstatus\nis invoked (or no explicit command is given) and one of these\nswitches is specified,\nhostnamectl\nwill print out just this selected hostname.\nIf used with\nhostname\n, only the selected hostnames will be updated. When more\nthan one of these switches are specified, all the specified hostnames will be updated.\nAdded in version 195.\n-H\n,\n--host=\nÂ¶\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"\n@\n\", to\nconnect to. The hostname may optionally be suffixed by a\nport ssh is listening on, separated by \"\n:\n\", and then a\ncontainer name, separated by \"\n/\n\", which\nconnects directly to a specific container on the specified\nhost. This will use SSH to talk to the remote machine manager\ninstance. Container names may be enumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in brackets.\n-M\n,\n--machine=\nÂ¶\nExecute operation on a local container. Specify a container name to connect to, optionally\nprefixed by a user name to connect as and a separating \"\n@\n\" character. If the special\nstring \"\n.host\n\" is used in place of the container name, a connection to the local\nsystem is made (which is useful to connect to a specific user's user bus: \"\n--user\n--machine=lennart@.host\n\"). If the \"\n@\n\" syntax is not used, the connection is\nmade as root user. If the \"\n@\n\" syntax is used either the left hand side or the right hand\nside may be omitted (but not both) in which case the local user name and \"\n.host\n\" are\nimplied.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\n--json=\nMODE\nÂ¶\nShows output formatted as JSON. Expects one of \"\nshort\n\" (for the\nshortest possible output without any redundant whitespace or line breaks), \"\npretty\n\"\n(for a pretty version of the same, with indentation and line breaks) or \"\noff\n\" (to turn\noff JSON output, the default).\n-j\nÂ¶\nEquivalent to\n--json=pretty\nif running on a terminal, and\n--json=short\notherwise.\nExit status\nÂ¶\nOn success, 0 is returned, a non-zero failure code\notherwise.\nSee Also\nÂ¶\nsystemd\n(1)\n,\nhostname\n(1)\n,\nhostname\n(5)\n,\nmachine-info\n(5)\n,\nsystemctl\n(1)\n,\nsystemd-hostnamed.service\n(8)\n,\nsystemd-firstboot\n(1)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/hostnamectl.html"}}
{"text": "localectl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nlocalectl â Control the system locale and keyboard layout settings\nSynopsis\nlocalectl\n[OPTIONS...] {COMMAND}\nDescription\nÂ¶\nlocalectl\nmay be used to query and change\nthe system locale and keyboard layout settings. It communicates with\nsystemd-localed\n(8)\nto modify files such as\n/etc/locale.conf\nand\n/etc/vconsole.conf\n.\nThe system locale controls the language settings of system\nservices and of the UI before the user logs in, such as the\ndisplay manager, as well as the default for users after\nlogin.\nThe keyboard settings control the keyboard layout used on\nthe text console and of the graphical UI before the user logs in,\nsuch as the display manager, as well as the default for users\nafter login.\nNote that the changes performed using this tool might require the initrd to be rebuilt to take\neffect during early system boot.  The initrd is not rebuilt automatically by\nlocalectl\n, this task has to be performed manually, usually by reinstalling the\ndistribution's kernel package.\nNote that\nsystemd-firstboot\n(1)\nmay be used to initialize the system locale for mounted (but not booted)\nsystem images.\nCommands\nÂ¶\nThe following commands are understood:\nstatus\nÂ¶\nShow current settings of the system locale and keyboard mapping.\nIf no command is specified, this is the implied default.\nAdded in version 195.\nset-locale LOCALE\n,\nset-locale VARIABLE=LOCALEâ¦\nÂ¶\nSet the system locale. This takes one locale such as \"\nen_US.UTF-8\n\", or takes one or more\nlocale assignments such as \"\nLANG=de_DE.utf8\n\", \"\nLC_MESSAGES=en_GB.utf8\n\", and so on. If\none locale without variable name is provided, then \"\nLANG=\n\" locale variable will be set. See\nlocale\n(7)\nfor details on the available settings and their meanings. Use\nlist-locales\nfor a list of available\nlocales (see below).\nAdded in version 195.\nlist-locales\nÂ¶\nList available locales useful for\nconfiguration with\nset-locale\n.\nAdded in version 195.\nset-keymap MAP [TOGGLEMAP]\nÂ¶\nSet the system keyboard mapping for the\nconsole and X11. This takes a mapping name (such as \"de\" or\n\"us\"), and possibly a second one to define a toggle keyboard\nmapping. Unless\n--no-convert\nis passed, the\nselected setting is also applied as the default system\nkeyboard mapping of X11, after converting it to the closest\nmatching X11 keyboard mapping. Use\nlist-keymaps\nfor a list of available\nkeyboard mappings (see below).\nAdded in version 195.\nlist-keymaps\nÂ¶\nList available keyboard mappings for the\nconsole, useful for configuration with\nset-keymap\n.\nAdded in version 195.\nset-x11-keymap LAYOUT [MODEL [VARIANT [OPTIONS]]]\nÂ¶\nSet the system default keyboard mapping for\nX11 and the virtual console. This takes a keyboard mapping\nname (such as \"\nde\n\" or \"\nus\n\"),\nand possibly a model, variant, and options, see\nkbd\n(4)\nfor details. Unless\n--no-convert\nis passed,\nthe selected setting is also applied as the system console\nkeyboard mapping, after converting it to the closest matching\nconsole keyboard mapping.\nAdded in version 195.\nlist-x11-keymap-models\n,\nlist-x11-keymap-layouts\n,\nlist-x11-keymap-variants [LAYOUT]\n,\nlist-x11-keymap-options\nÂ¶\nList available X11 keymap models, layouts,\nvariants and options, useful for configuration with\nset-keymap\n. The command\nlist-x11-keymap-variants\noptionally takes a\nlayout parameter to limit the output to the variants suitable\nfor the specific layout.\nAdded in version 201.\nOptions\nÂ¶\nThe following options are understood:\n-l\n,\n--full\nÂ¶\nDo not ellipsize the output.\nAdded in version 257.\n--no-convert\nÂ¶\nIf\nset-keymap\nor\nset-x11-keymap\nis invoked and this option\nis passed, then the keymap will not be converted from the\nconsole to X11, or X11 to console,\nrespectively.\nAdded in version 195.\n-H\n,\n--host=\nÂ¶\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"\n@\n\", to\nconnect to. The hostname may optionally be suffixed by a\nport ssh is listening on, separated by \"\n:\n\", and then a\ncontainer name, separated by \"\n/\n\", which\nconnects directly to a specific container on the specified\nhost. This will use SSH to talk to the remote machine manager\ninstance. Container names may be enumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in brackets.\n-M\n,\n--machine=\nÂ¶\nExecute operation on a local container. Specify a container name to connect to, optionally\nprefixed by a user name to connect as and a separating \"\n@\n\" character. If the special\nstring \"\n.host\n\" is used in place of the container name, a connection to the local\nsystem is made (which is useful to connect to a specific user's user bus: \"\n--user\n--machine=lennart@.host\n\"). If the \"\n@\n\" syntax is not used, the connection is\nmade as root user. If the \"\n@\n\" syntax is used either the left hand side or the right hand\nside may be omitted (but not both) in which case the local user name and \"\n.host\n\" are\nimplied.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\nExit status\nÂ¶\nOn success, 0 is returned, a non-zero failure code\notherwise.\nEnvironment\nÂ¶\n$SYSTEMD_LOG_LEVEL\nÂ¶\nThe maximum log level of emitted messages (messages with a higher\nlog level, i.e. less important ones, will be suppressed). Takes a comma-separated list of values. A\nvalue may be either one of (in order of decreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the range 0â¦7. See\nsyslog\n(3)\nfor more information. Each value may optionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a\ncolon to set the maximum log level for that specific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when\nlogging to the console which should be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nÂ¶\nA boolean. If true, messages written to the tty will be colored\naccording to priority.\nThis setting is only useful when messages are written directly to the terminal, because\njournalctl\n(1)\nand\nother tools that display logs will color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nÂ¶\nA boolean. If true, console log messages will be prefixed with a\ntimestamp.\nThis setting is only useful when messages are written directly to the terminal or a file, because\njournalctl\n(1)\nand\nother tools that display logs will attach timestamps based on the entry metadata on their own.\n$SYSTEMD_LOG_LOCATION\nÂ¶\nA boolean. If true, messages will be prefixed with a filename\nand line number in the source code where the message originates.\nNote that the log location is often attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TID\nÂ¶\nA boolean. If true, messages will be prefixed with the current\nnumerical thread ID (TID).\nNote that the this information is attached as metadata to journal entries anyway. Including it\ndirectly in the message text can nevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nÂ¶\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to\nthe attached tty but with prefixes encoding the log level and \"facility\", see\nsyslog\n(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to\nthe journal),\njournal-or-kmsg\n(log to the journal if available, and to kmsg\notherwise),\nauto\n(determine the appropriate log target automatically, the default),\nnull\n(disable log output).\n$SYSTEMD_LOG_RATELIMIT_KMSG\nÂ¶\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"\ntrue\n\". If disabled, systemd will not ratelimit messages written to kmsg.\n$SYSTEMD_PAGER\n,\n$PAGER\nÂ¶\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used.\nIf neither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless\n(1)\nand\nmore\n(1)\n,\nuntil one is found. If no pager implementation is discovered, no pager is invoked. Setting those\nenvironment variables to an empty string or the value \"\ncat\n\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the pager (with \"\ncat\n\" or\n\"\n\"), and are otherwise ignored.\n$SYSTEMD_LESS\nÂ¶\nOverride the options passed to\nless\n(by default\n\"\nFRSXMK\n\").\nUsers might want to change two options in particular:\nK\nÂ¶\nThis option instructs the pager to exit immediately when\nCtrl\n+\nC\nis pressed. To allow\nless\nto handle\nCtrl\n+\nC\nitself to switch back to the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include \"\nK\n\",\nand the pager that is invoked is\nless\n,\nCtrl\n+\nC\nwill be ignored by the\nexecutable, and needs to be handled by the pager.\nX\nÂ¶\nThis option instructs the pager to not send termcap initialization and deinitialization\nstrings to the terminal. It is set by default to allow command output to remain visible in the\nterminal even after the pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\nSee\nless\n(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nÂ¶\nOverride the charset passed to\nless\n(by default \"\nutf-8\n\", if\nthe invoking terminal is determined to be UTF-8 compatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment variable has no effect\nfor\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nÂ¶\nCommon pager commands like\nless\n(1)\n, in\naddition to \"paging\", i.e. scrolling through the output, support opening of or writing to other files\nand running arbitrary shell commands. When commands are invoked with elevated privileges, for example\nunder\nsudo\n(8)\nor\npkexec\n(1)\n, the\npager becomes a security boundary. Care must be taken that only programs with strictly limited\nfunctionality are used as pagers, and unintended interactive features like opening or creation of new\nfiles or starting of subprocesses are not allowed. \"Secure mode\" for the pager may be enabled as\ndescribed below,\nif the pager supports that\n(most pagers are not written in a way\nthat takes this into consideration). It is recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the \"secure mode\" of the pager is\nenabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which\ninstructs the pager to disable commands that open or create new files or start new subprocesses.\nCurrently only\nless\n(1)\nis known\nto understand this variable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited environment may allow\nthe user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt to automatically\nfigure out if \"secure mode\" should be enabled and whether the pager supports it. \"Secure mode\" is\nenabled if the effective UID is not the same as the owner of the login session, see\ngeteuid\n(2)\nand\nsd_pid_get_owner_uid\n(3)\n,\nor when running under\nsudo\n(8)\nor similar\ntools (\n$SUDO_UID\nis set\n[1]\n). In those cases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not known to implement\n\"secure mode\" will not be used at all. Note that this autodetection only covers the most common\nmechanisms to elevate privileges and is intended as convenience. It is recommended to explicitly set\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables are to\nbe honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set\ntoo.\n$SYSTEMD_COLORS\nÂ¶\nTakes a boolean argument. When true,\nsystemd\nand related utilities\nwill use colors in their output, otherwise the output will be monochrome. Additionally, the variable can\ntake one of the following special values: \"\n16\n\", \"\n256\n\" to restrict the use\nof colors to the base 16 or 256 ANSI colors, respectively. This can be specified to override the automatic\ndecision based on\n$TERM\nand what the console is connected to.\n$SYSTEMD_URLIFY\nÂ¶\nThe value must be a boolean. Controls whether clickable links should be generated in\nthe output for terminal emulators supporting this. This can be specified to override the decision that\nsystemd\nmakes based on\n$TERM\nand other conditions.\nSee Also\nÂ¶\nsystemd\n(1)\n,\nlocale\n(7)\n,\nlocale.conf\n(5)\n,\nvconsole.conf\n(5)\n,\nloadkeys\n(1)\n,\nkbd\n(4)\n,\nThe XKB Configuration Guide\n,\nsystemctl\n(1)\n,\nsystemd-localed.service\n(8)\n,\nsystemd-firstboot\n(1)\n[1]\nIt is recommended for other tools to set and check\n$SUDO_UID\nas appropriate,\ntreating it is a common interface.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/localectl.html"}}
{"text": "networkctl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nnetworkctl â Query or modify the status of network links\nSynopsis\nnetworkctl\n[OPTIONS...]  COMMAND  [LINK...]\nDescription\nÂ¶\nnetworkctl\nmay be used to query or modify the\nstate of the network links as seen by\nsystemd-networkd\n.  Please refer to\nsystemd-networkd.service\n(8)\nfor an introduction to the basic concepts, functionality, and\nconfiguration syntax.\nCommands\nÂ¶\nThe following commands are understood:\nlist\n[\nPATTERNâ¦\n]\nÂ¶\nShow a list of existing links and their status. If one or more\nPATTERN\ns are specified, only links matching one of them are shown.\nIf no further arguments are specified shows all links,\notherwise just the specified links. Produces output similar to:\nIDX LINK         TYPE     OPERATIONAL SETUP\n1 lo           loopback carrier     unmanaged\n2 eth0         ether    routable    configured\n3 virbr0       ether    no-carrier  unmanaged\n4 virbr0-nic   ether    off         unmanaged\n4 links listed.\nThe operational status is one of the following:\nmissing\nÂ¶\nThe device is missing.\nAdded in version 245.\noff\nÂ¶\nThe device is powered down.\nAdded in version 240.\nno-carrier\nÂ¶\nThe device is powered up, but does not yet have a carrier.\nAdded in version 240.\ndormant\nÂ¶\nThe device has a carrier, but is not yet ready for normal traffic.\nAdded in version 240.\ndegraded-carrier\nÂ¶\nOne of the bonding or bridge slave network interfaces is in off, no-carrier, or\ndormant state, and the master interface has no address.\nAdded in version 242.\ncarrier\nÂ¶\nThe link has carrier, or for bond or bridge master, all bonding or bridge slave\nnetwork interfaces are enslaved to the master.\nAdded in version 240.\ndegraded\nÂ¶\nThe link has carrier and addresses valid on the local link configured. For bond or\nbridge master this means that not all slave network interfaces have carrier but at least\none does.\nAdded in version 240.\nenslaved\nÂ¶\nThe link has carrier and is enslaved to bond or bridge master network interface.\nAdded in version 242.\nroutable\nÂ¶\nThe link has carrier and routable address configured. For bond or bridge master it is\nnot necessary for all slave network interfaces to have carrier, but at least one must.\nAdded in version 240.\nThe setup status is one of the following:\npending\nÂ¶\nsystemd-udevd\n(8)\nis still processing the link, we do not yet know if we will manage it.\nAdded in version 240.\ninitialized\nÂ¶\nsystemd-udevd\n(8)\nhas processed the link, but we do not yet know if we will manage it.\nAdded in version 251.\nconfiguring\nÂ¶\nConfiguration for the link is being retrieved or the link is being configured.\nAdded in version 240.\nconfigured\nÂ¶\nLink has been configured successfully.\nAdded in version 240.\nunmanaged\nÂ¶\nsystemd-networkd\nis not handling the link.\nAdded in version 240.\nfailed\nÂ¶\nsystemd-networkd\nfailed to configure the link.\nAdded in version 240.\nlinger\nÂ¶\nThe link is gone, but has not yet been dropped by\nsystemd-networkd\n.\nAdded in version 240.\nAdded in version 219.\nstatus\n[\nPATTERNâ¦\n]\nÂ¶\nShow information about the specified links: type, state, kernel module driver, hardware and\nIP address, configured DNS servers, etc. If one or more\nPATTERN\ns are\nspecified, only links matching one of them are shown.\nWhen no links are specified, an overall network status is shown. Also see the option\n--all\n.\nProduces output similar to:\nâ        State: routable\nOnline state: online\nAddress: 10.193.76.5 on eth0\n192.168.122.1 on virbr0\n169.254.190.105 on eth0\nfe80::5054:aa:bbbb:cccc on eth0\nGateway: 10.193.11.1 (CISCO SYSTEMS, INC.) on eth0\nDNS: 8.8.8.8\n8.8.4.4\nIn the overall network status, the online state depends on the individual online state of all\nrequired links. Managed links are required for online by default. In this case, the online state is\none of the following:\nunknown\nÂ¶\nAll links have unknown online status (i.e. there are no required links).\nAdded in version 249.\noffline\nÂ¶\nAll required links are offline.\nAdded in version 249.\npartial\nÂ¶\nSome, but not all, required links are online.\nAdded in version 249.\nonline\nÂ¶\nAll required links are online.\nAdded in version 249.\nAdded in version 219.\nlldp\n[\nPATTERNâ¦\n]\nÂ¶\nShow discovered LLDP (Link Layer Discovery Protocol) neighbors. If one or more\nPATTERN\ns are specified only neighbors on those interfaces are shown.\nOtherwise, shows discovered neighbors on all interfaces. Note that for this feature to work,\nLLDP=\nmust be turned on for the specific interface, see\nsystemd.network\n(5)\nfor\ndetails.\nProduces output similar to:\nLINK    SYSTEM-NAME SYSTEM-DESCRIPTION CHASSIS-ID        PORT-ID PORT-DESCRIPTION CAPS\nenp0s25 GS1900      -                  00:e0:4c:00:00:00 2       Port #2           ..b........\nCapability Flags:\no - Other; p - Repeater;  b - Bridge; w - WLAN Access Point; r - Router;\nt - Telephone; d - DOCSIS cable device; a - Station; c - Customer VLAN;\ns - Service VLAN, m - Two-port MAC Relay (TPMR)\n1 neighbor(s) listed.\nAdded in version 219.\nlabel\nÂ¶\nShow numerical address labels that can be used for address selection.\nThis is the same information that\nip-addrlabel\n(8)\nshows. See\nRFC 3484\nfor a discussion of address labels.\nProduces output similar to:\nPrefix/Prefixlen                          Label\n::/0                                  1\nfc00::/7                                  5\nfec0::/10                                11\n2002::/16                                 2\n3ffe::/16                                12\n2001:10::/28                                 7\n2001::/32                                 6\n::ffff:0.0.0.0/96                             4\n::/96                                 3\n::1/128                                0\nAdded in version 234.\ndelete\nDEVICEâ¦\nÂ¶\nDeletes virtual netdevs. Takes interface name or index number.\nAdded in version 243.\nup\nDEVICEâ¦\nÂ¶\nBring devices up. Takes interface name or index number.\nAdded in version 246.\ndown\nDEVICEâ¦\nÂ¶\nBring devices down. Takes interface name or index number.\nAdded in version 246.\nrenew\nDEVICEâ¦\nÂ¶\nRenew dynamic configurations e.g. addresses received from DHCP server.\nTakes interface name or index number.\nAdded in version 244.\nforcerenew\nDEVICEâ¦\nÂ¶\nSend a FORCERENEW message to all connected clients, triggering DHCP reconfiguration.\nTakes interface name or index number.\nAdded in version 246.\nreconfigure\nDEVICEâ¦\nÂ¶\nReconfigure network interfaces. Takes interface name or index number. Note that\nthis does not reload\n.netdev\nor\n.network\ncorresponding to the specified interface. So, if you edit config files, it is necessary to call\nnetworkctl reload\nfirst to apply new settings.\nAdded in version 244.\nreload\nÂ¶\nReload\n.netdev\nand\n.network\nfiles.\nIf a new or modified\n.netdev\nfile is found, then the corresponding\nnetdev is created or updated, respectively. Note, if the corresponding interface already exists,\nthen some of new settings may not be applied. E.g., VLAN ID cannot be changed after the interface\nwas created, so changing [VLAN]\nId=\nwill not take effect if the matching VLAN\ninterface already exists. To apply such settings, the interfaces need to be removed manually before\nreload. Also note that even if a\n.netdev\nfile is removed,\nsystemd-networkd\n(8)\ndoes not remove the existing netdev corresponding to the file.\nIf a new, modified, or removed\n.network\nfile is found, then all\ninterfaces that matched the file are reconfigured.\nAdded in version 244.\nedit\nFILE\n|\n@DEVICE\nâ¦\nÂ¶\nEdit network configuration files, which include\n.network\n,\n.netdev\n, and\n.link\nfiles. If no network config file\nmatching the given name is found, a new one will be created under\n/etc/\nor\n/run/\n, depending on whether\n--runtime\nis specified.\nSpecially, if the name is prefixed by \"\n@\n\", it will be treated as\na network interface, and editing will be performed on the network config files associated\nwith it. Additionally, the interface name can be suffixed with \"\n:network\n\" (default),\n\"\n:link\n\", or \"\n:netdev\n\", in order to choose the type of network config\nto operate on.\nIf\n--drop-in=\nis specified, edit the drop-in file instead of\nthe main configuration file. Unless\n--no-reload\nis specified,\nsystemd-networkd\n(8)\nwill be reloaded after the edit of the\n.network\nor\n.netdev\nfiles finishes. The same applies for\n.link\nfiles and\nsystemd-udevd\n(8)\n.\nNote that the changed link settings are not automatically applied after reloading.\nTo achieve that, trigger uevents for the corresponding interface. Refer to\nsystemd.link\n(5)\nfor more information.\nIf\n--stdin\nis specified, the new content will be read from standard input.\nIn this mode, the old content of the file is discarded.\nAdded in version 254.\ncat\n[\nFILE\n|\n@DEVICE\nâ¦\n]\nÂ¶\nShow network configuration files. This command honors the \"\n@\n\" prefix in a\nsimilar way as\nedit\n, with support for an additional suffix \"\n:all\n\"\nfor showing all types of configuration files associated with the interface at once. When no argument\nis specified,\nnetworkd.conf\n(5)\nand its drop-in files will be shown.\nAdded in version 254.\nmask\nFILE\nâ¦\nÂ¶\nMask network configuration files, which include\n.network\n,\n.netdev\n, and\n.link\nfiles. A symlink of the given name will\nbe created under\n/etc/\nor\n/run/\n, depending on\nwhether\n--runtime\nis specified, that points to\n/dev/null\n.\nIf a non-empty config file with the specified name exists under the target directory or a directory\nwith higher priority (e.g.\n--runtime\nis used while an existing config resides\nin\n/etc/\n), the operation is aborted.\nThis command honors\n--no-reload\nin the same way as\nedit\n.\nAdded in version 256.\nunmask\nFILE\nâ¦\nÂ¶\nUnmask network configuration files, i.e. reverting the effect of\nmask\n.\nNote that this command operates regardless of the scope of the directory, i.e.\n--runtime\nis of no effect.\nThis command honors\n--no-reload\nin the same way as\nedit\nand\nmask\n.\nAdded in version 256.\npersistent-storage\nBOOL\nÂ¶\nNotify\nsystemd-networkd.service\n(8)\nthat the persistent storage for the service is ready. This is called by\nsystemd-networkd-persistent-storage.service\n. Usually, this command should not\nbe called manually by users or administrators.\nAdded in version 256.\nOptions\nÂ¶\nThe following options are understood:\n-a\n--all\nÂ¶\nShow all links with\nstatus\n.\nAdded in version 219.\n-s\n--stats\nÂ¶\nShow link statistics with\nstatus\n.\nAdded in version 243.\n-l\n,\n--full\nÂ¶\nDo not ellipsize the output.\nAdded in version 245.\n-n\n,\n--lines=\nÂ¶\nWhen used with\nstatus\n, controls the number of journal lines to show,\ncounting from the most recent ones. Takes a positive integer argument. Defaults to 10.\nAdded in version 245.\n--drop-in=\nNAME\nÂ¶\nWhen used with\nedit\n, edit the drop-in file\nNAME\ninstead of the main configuration file.\nAdded in version 254.\n--no-reload\nÂ¶\nWhen used with\nedit\n,\nmask\n, or\nunmask\n,\nsystemd-networkd.service\n(8)\nor\nsystemd-udevd.service\n(8)\nwill not be reloaded after the operation finishes.\nAdded in version 254.\n--runtime\nÂ¶\nWhen used with\nedit\nor\nmask\n,\noperate on the file under\n/run/\ninstead of\n/etc/\n.\nAdded in version 256.\n--stdin\nÂ¶\nWhen used with\nedit\n, the contents of the file will be read from standard\ninput and the editor will not be launched. In this mode, the old contents of the file are\nautomatically replaced. This is useful to \"edit\" configuration from scripts, especially so that\ndrop-in directories are created and populated in one go.\nMultiple drop-ins may be \"edited\" in this mode with\n--drop-in=\n, and\nthe same contents will be written to all of them. Otherwise, exactly one main configuration file\nis expected.\nAdded in version 257.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n--json=\nMODE\nÂ¶\nShows output formatted as JSON. Expects one of \"\nshort\n\" (for the\nshortest possible output without any redundant whitespace or line breaks), \"\npretty\n\"\n(for a pretty version of the same, with indentation and line breaks) or \"\noff\n\" (to turn\noff JSON output, the default).\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\n--no-legend\nÂ¶\nDo not print the legend, i.e. column headers and the\nfooter with hints.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\nExit status\nÂ¶\nOn success, 0 is returned, a non-zero failure code otherwise.\nSee Also\nÂ¶\nsystemd-networkd.service\n(8)\n,\nsystemd.network\n(5)\n,\nsystemd.netdev\n(5)\n,\nip\n(8)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/networkctl.html"}}
{"text": "resolvectl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\nresolvectl, resolvconf â Resolve domain names, IPV4 and IPv6 addresses, DNS resource records, and services; introspect and reconfigure the DNS resolver\nSynopsis\nresolvectl\n[OPTIONS...] {COMMAND} [NAME...]\nDescription\nÂ¶\nresolvectl\nmay be used to resolve domain names, IPv4 and IPv6 addresses, DNS resource\nrecords and services with the\nsystemd-resolved.service\n(8)\nresolver service. By default, the specified list of parameters will be resolved as hostnames, retrieving their IPv4\nand IPv6 addresses. If the parameters specified are formatted as IPv4 or IPv6 addresses the reverse operation is\ndone, and a hostname is retrieved for the specified addresses.\nThe program's output contains information about the protocol used for the look-up and on which network\ninterface the data was discovered. It also contains information on whether the information could be\nauthenticated. All data for which local DNSSEC validation succeeds is considered authenticated. Moreover, all data\noriginating from local, trusted sources is also reported authenticated, including resolution of the local host\nname, the \"\nlocalhost\n\" hostname or all data from\n/etc/hosts\n.\nCommands\nÂ¶\nquery\nHOSTNAME|ADDRESS\nâ¦\nÂ¶\nResolve domain names, as well as IPv4 and IPv6 addresses. When used in conjunction\nwith\n--type=\nor\n--class=\n(see below), resolves low-level DNS\nresource records.\nIf a single-label domain name is specified it is searched for according to the configured\nsearch domains â unless\n--search=no\nor\n--type=\n/\n--class=\nare specified, both of which turn this logic\noff.\nIf an international domain name is specified, it is automatically translated according to IDNA\nrules when resolved via classic DNS â but not for look-ups via MulticastDNS or LLMNR. If\n--type=\n/\n--class=\nis used IDNA translation is turned off and domain\nnames are processed as specified.\nIf combined with\n--json=\n(only supported in combination with\n--type=\n) will output the resource record data in a JSON object.\nAdded in version 239.\nservice\n[[\nNAME\n]\nTYPE\n]\nDOMAIN\nÂ¶\nResolve\nRFC 6763 DNS-SD\nand\nRFC 2782 SRV\nservices, depending on the\nspecified list of parameters. If three parameters are passed the first is assumed to be the DNS-SD\nservice name, the second the\nSRV\nservice type, and the third the\ndomain to search in. In this case, a full DNS-SD style\nSRV\nand\nTXT\nlookup is executed. If only two parameters are specified, the\nfirst is assumed to be the\nSRV\nservice type, and the second the\ndomain to look in. In this case, no\nTXT\nresource record is requested.\nFinally, if only one parameter is specified, it is assumed to be a domain name, that is already\nprefixed with an\nSRV\ntype, and an\nSRV\nlookup is done (no\nTXT\n).\nAdded in version 239.\nopenpgp\nEMAIL@DOMAIN\nâ¦\nÂ¶\nQuery PGP keys stored as\nOPENPGPKEY\nresource records,\nsee\nRFC 7929\n. Specified e-mail addresses\nare converted to the corresponding DNS domain name, and any\nOPENPGPKEY\nkeys are printed.\nAdded in version 239.\ntlsa\n[\nFAMILY\n]\nDOMAIN\n[:\nPORT\n]â¦\nÂ¶\nQuery TLS public keys stored as\nTLSA\nresource\nrecords, see\nRFC 6698\n. A query will be\nperformed for each of the specified names prefixed with the port and family\n(\"\n_\nport\n._\nfamily\n.\ndomain\n\").\nThe port number may be specified after a colon (\"\n:\n\"), otherwise\n443\nwill be used by default. The family may be specified as the first argument,\notherwise\ntcp\nwill be used.\nAdded in version 239.\nstatus\n[\nLINK\nâ¦]\nÂ¶\nShows the global and per-link DNS settings currently in effect. If no command is specified,\nthis is the implied default.\nAdded in version 239.\nstatistics\nÂ¶\nShows general resolver statistics, including information whether DNSSEC is\nenabled and available, as well as resolution and validation statistics.\nAdded in version 239.\nreset-statistics\nÂ¶\nResets the statistics counters shown in\nstatistics\nto zero.\nThis operation requires root privileges.\nAdded in version 239.\nflush-caches\nÂ¶\nFlushes all DNS resource record caches the service maintains locally. This is mostly\nequivalent to sending the\nSIGUSR2\nto the\nsystemd-resolved\nservice.\nAdded in version 239.\nreset-server-features\nÂ¶\nFlushes all feature level information the resolver learnt about specific servers, and ensures\nthat the server feature probing logic is started from the beginning with the next look-up request. This is\nmostly equivalent to sending the\nSIGRTMIN+1\nto the\nsystemd-resolved\nservice.\nAdded in version 239.\ndns\n[\nLINK\n[\nSERVER\nâ¦]],\ndomain\n[\nLINK\n[\nDOMAIN\nâ¦]],\ndefault-route\n[\nLINK\n[\nBOOL\nâ¦]],\nllmnr\n[\nLINK\n[\nMODE\n]],\nmdns\n[\nLINK\n[\nMODE\n]],\ndnssec\n[\nLINK\n[\nMODE\n]],\ndnsovertls\n[\nLINK\n[\nMODE\n]],\nnta\n[\nLINK\n[\nDOMAIN\nâ¦]]\nÂ¶\nGet/set per-interface DNS configuration. These commands may be used to configure various DNS\nsettings for network interfaces. These commands may be used to inform\nsystemd-resolved\nor\nsystemd-networkd\nabout per-interface DNS\nconfiguration determined through external means. The\ndns\ncommand expects IPv4 or\nIPv6 address specifications of DNS servers to use. Each address can optionally take a port number\nseparated with \"\n:\n\", a network interface name or index separated with\n\"\n%\n\", and a Server Name Indication (SNI) separated with \"\n#\n\". When\nIPv6 address is specified with a port number, then the address must be in the square brackets. That\nis, the acceptable full formats are \"\n111.222.333.444:9953%ifname#example.com\n\" for\nIPv4 and \"\n[1111:2222::3333]:9953%ifname#example.com\n\" for IPv6. The\ndomain\ncommand expects valid DNS domains, possibly prefixed with\n\"\n~\n\", and configures a per-interface search or route-only domain. The\ndefault-route\ncommand expects a boolean parameter, and configures whether the\nlink may be used as default route for DNS lookups, i.e. if it is suitable for lookups on domains no\nother link explicitly is configured for. The\nllmnr\n,\nmdns\n,\ndnssec\nand\ndnsovertls\ncommands may be used to configure the\nper-interface LLMNR, MulticastDNS, DNSSEC and DNSOverTLS settings. Finally,\nnta\ncommand may be used to configure additional per-interface DNSSEC NTA domains.\nCommands\ndns\n,\ndomain\nand\nnta\ncan take\na single empty string argument to clear their respective value lists.\nFor details about these settings, their possible values and their effect, see the\ncorresponding settings in\nsystemd.network\n(5)\n.\nAdded in version 239.\nrevert\nLINK\nÂ¶\nRevert the per-interface DNS configuration. If the DNS configuration is reverted all\nper-interface DNS setting are reset to their defaults, undoing all effects of\ndns\n,\ndomain\n,\ndefault-route\n,\nllmnr\n,\nmdns\n,\ndnssec\n,\ndnsovertls\n,\nnta\n. Note that when a network interface disappears all configuration is lost\nautomatically, an explicit reverting is not necessary in that case.\nAdded in version 239.\nmonitor\nÂ¶\nShow a continuous stream of local client resolution queries and their\nresponses. Whenever a local query is completed the query's DNS resource lookup key and resource\nrecords are shown. Note that this displays queries issued locally only, and does not immediately\nrelate to DNS requests submitted to configured DNS servers or the LLMNR or MulticastDNS zones, as\nlookups may be answered from the local cache, or might result in multiple DNS transactions (for\nexample to validate DNSSEC information). If CNAME/CNAME redirection chains are followed, a separate\nquery will be displayed for each element of the chain. Use\n--json=\nto enable JSON\noutput.\nAdded in version 252.\nshow-cache\nÂ¶\nShow current cache content, per scope. Use\n--json=\nto enable JSON\noutput.\nAdded in version 254.\nshow-server-state\nÂ¶\nShow detailed server state information, per DNS Server. Use\n--json=\nto enable JSON output.\nAdded in version 255.\nlog-level\n[\nLEVEL\n]\nÂ¶\nIf no argument is given, print the current log level of the manager. If an\noptional argument\nLEVEL\nis provided, then the command changes the\ncurrent log level of the manager to\nLEVEL\n(accepts the same values as\n--log-level=\ndescribed in\nsystemd\n(1)\n).\nAdded in version 244.\nOptions\nÂ¶\n-4\n,\n-6\nÂ¶\nBy default, when resolving a hostname, both IPv4 and IPv6\naddresses are acquired. By specifying\n-4\nonly IPv4 addresses are requested, by specifying\n-6\nonly IPv6 addresses are requested.\nAdded in version 239.\n-i\nINTERFACE\n,\n--interface=\nINTERFACE\nÂ¶\nSpecifies the network interface to execute the query on. This may either be specified as numeric\ninterface index or as network interface string (e.g. \"\nen0\n\"). Note that this option has no\neffect if system-wide DNS configuration (as configured in\n/etc/resolv.conf\nor\n/etc/systemd/resolved.conf\n) in place of per-link configuration is used.\nAdded in version 239.\n-p\nPROTOCOL\n,\n--protocol=\nPROTOCOL\nÂ¶\nSpecifies the network protocol for the query. May be one of \"\ndns\n\"\n(i.e. classic unicast DNS), \"\nllmnr\n\" (\nLink-Local Multicast Name Resolution\n),\n\"\nllmnr-ipv4\n\", \"\nllmnr-ipv6\n\" (LLMNR via the indicated underlying IP\nprotocols), \"\nmdns\n\" (\nMulticast DNS\n),\n\"\nmdns-ipv4\n\", \"\nmdns-ipv6\n\" (MDNS via the indicated underlying IP protocols).\nBy default, the lookup is done via all protocols suitable for the lookup. If used, limits the set of\nprotocols that may be used. Use this option multiple times to enable resolving via multiple protocols at the\nsame time. The setting \"\nllmnr\n\" is identical to specifying this switch once with\n\"\nllmnr-ipv4\n\" and once via \"\nllmnr-ipv6\n\". Note that this option does not force\nthe service to resolve the operation with the specified protocol, as that might require a suitable network\ninterface and configuration.\nThe special value \"\nhelp\n\" may be used to list known values.\nAdded in version 239.\n-t\nTYPE\n,\n--type=\nTYPE\n,\n-c\nCLASS\n,\n--class=\nCLASS\nÂ¶\nWhen used in conjunction with the\nquery\ncommand, specifies the DNS\nresource record type (e.g.\nA\n,\nAAAA\n,\nMX\n, â¦) and class (e.g.\nIN\n,\nANY\n, â¦) to look up. If these options are used a DNS resource record set matching\nthe specified class and type is requested. The class defaults to\nIN\nif only a\ntype is specified. The special value \"\nhelp\n\" may be used to list known values.\nWithout these options\nresolvectl query\nprovides high-level domain name to\naddress and address to domain name resolution. With these options it provides low-level DNS resource\nrecord resolution. The search domain logic is automatically turned off when these options are used,\ni.e. specified domain names need to be fully qualified domain names. Moreover, IDNA internal domain\nname translation is turned off as well, i.e. international domain names should be specified in\n\"\nxn--â¦\n\" notation, unless look-up in MulticastDNS/LLMNR is desired, in which case\nUTF-8 characters should be used.\nAdded in version 239.\n--service-address=\nBOOL\nÂ¶\nTakes a boolean parameter. If true (the default), when doing a service lookup with\n--service\nthe hostnames contained in the\nSRV\nresource records are resolved as well.\nAdded in version 239.\n--service-txt=\nBOOL\nÂ¶\nTakes a boolean parameter. If true (the default), when doing a DNS-SD service lookup\nwith\n--service\nthe\nTXT\nservice metadata record is\nresolved as well.\nAdded in version 239.\n--cname=\nBOOL\nÂ¶\nTakes a boolean parameter. If true (the default), DNS\nCNAME\nor\nDNAME\nredirections are\nfollowed. Otherwise, if a CNAME or DNAME record is encountered while resolving, an error is\nreturned.\nAdded in version 239.\n--validate=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), DNSSEC validation is applied as usual â under the condition that it is enabled for the\nnetwork and for\nsystemd-resolved.service\nas a whole. If false, DNSSEC validation\nis disabled for the specific query, regardless of whether it is enabled for the network or in the\nservice. Note that setting this option to true does not force DNSSEC validation on systems/networks\nwhere DNSSEC is turned off. This option is only suitable to turn off such validation where otherwise\nenabled, not enable validation where otherwise disabled.\nAdded in version 248.\n--synthesize=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), select domains are resolved on the local system, among them\n\"\nlocalhost\n\", \"\n_gateway\n\", \"\n_outbound\n\",\n\"\n_localdnsstub\n\" and \"\n_localdnsproxy\n\" or entries from\n/etc/hosts\n. If false these domains are not resolved locally, and either fail (in\ncase of \"\nlocalhost\n\", \"\n_gateway\n\" or \"\n_outbound\n\" and\nsuchlike) or go to the network via regular DNS/mDNS/LLMNR lookups (in case of\n/etc/hosts\nentries).\nAdded in version 248.\n--cache=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), lookups use the local DNS resource record cache. If false, lookups are routed to the\nnetwork instead, regardless of whether already available in the local cache.\nAdded in version 248.\n--zone=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), lookups are answered from locally registered LLMNR or mDNS resource records, if\ndefined. If false, locally registered LLMNR/mDNS records are not considered for the lookup\nrequest.\nAdded in version 248.\n--trust-anchor=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), lookups for DS and DNSKEY are answered from the local DNSSEC trust anchors if\npossible. If false, the local trust store is not considered for the lookup request.\nAdded in version 248.\n--network=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), lookups are answered via DNS, LLMNR or mDNS network requests if they cannot be\nsynthesized locally, or be answered from the local cache, zone or trust anchors (see above). If false,\nthe request is not answered from the network and will thus fail if none of the indicated sources can\nanswer them.\nAdded in version 248.\n--search=\nBOOL\nÂ¶\nTakes a boolean parameter. If true (the default), any specified single-label\nhostnames will be searched in the domains configured in the search domain list, if it is\nnon-empty. Otherwise, the search domain logic is disabled. Note that this option has no effect if\n--type=\nis used (see above), in which case the search domain logic is\nunconditionally turned off.\nAdded in version 239.\n--raw\n[\n=payload|packet\n]\nÂ¶\nDump the answer records as binary data. If there is no argument or if the argument is\n\"\npayload\n\", the payload of the resource record data is exported, i.e. not the whole\n\"RDATA\", but just primary contents. If the argument is \"\npacket\n\",\nthe whole resource record is dumped in wire format, prefixed by length specified as a little-endian\n64-bit integer. This format allows multiple record to be dumped and unambiguously parsed.\nNote that \"\npayload\n\" is only supported for a small subset of resource record\ntypes: SSHFP, TLSA, OPENPGPKEY where this dumps the key material only; and A, AAAA where\nthis dumps the address data.\nAdded in version 239.\n--legend=\nBOOL\nÂ¶\nTakes a boolean parameter. If true (the default), column headers and meta information about the\nquery response are shown. Otherwise, this output is suppressed.\nAdded in version 239.\n--stale-data=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If true\n(the default), lookups are answered with stale data (expired resource records) if\npossible. If false, the stale data is not considered for the lookup request.\nAdded in version 254.\n--relax-single-label=\nBOOL\nÂ¶\nTakes a boolean parameter; used in conjunction with\nquery\n. If\ntrue, rules regarding routing of single-label names are relaxed. Defaults to false. By default,\nlookups of single-label names are assumed to refer to local hosts to be resolved via local resolution\nsuch as LLMNR or via search domain qualification and are not routed to upstream servers as is. If\nthis option is enabled these rules are disabled and the queries are routed upstream anyway. Also see\nthe\nResolveUnicastSingleLabel=\noption in\nresolved.conf\n(5)\nwhich provides a system-wide option that controls this behaviour.\nAdded in version 256.\n--no-ask-password\nÂ¶\nDo not query the user for authentication for privileged operations.\n--json=\nMODE\nÂ¶\nShows output formatted as JSON. Expects one of \"\nshort\n\" (for the\nshortest possible output without any redundant whitespace or line breaks), \"\npretty\n\"\n(for a pretty version of the same, with indentation and line breaks) or \"\noff\n\" (to turn\noff JSON output, the default).\n-j\nÂ¶\nEquivalent to\n--json=pretty\nif running on a terminal, and\n--json=short\notherwise.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\nCompatibility with\nresolvconf\n(8)\nÂ¶\nresolvectl\nis a multi-call binary. When invoked as \"\nresolvconf\n\"\n(generally achieved by means of a symbolic link of this name to the\nresolvectl\nbinary) it\nis run in a limited\nresolvconf\n(8)\ncompatibility mode. It accepts mostly the same arguments and pushes all data into\nsystemd-resolved.service\n(8)\n,\nsimilar to how\ndns\nand\ndomain\ncommands operate. Note that\nsystemd-resolved.service\nis the only supported backend, which is different from other\nimplementations of this command.\n/etc/resolv.conf\nwill only be updated with servers added with this command\nwhen\n/etc/resolv.conf\nis a symlink to\n/run/systemd/resolve/resolv.conf\n, and not a static file. See the discussion of\n/etc/resolv.conf\nhandling in\nsystemd-resolved.service\n(8)\n.\nNot all operations supported by other implementations are supported natively. Specifically:\n-a\nÂ¶\nRegisters per-interface DNS configuration data with\nsystemd-resolved\n. Expects a network interface name as only command line argument. Reads\nresolv.conf\n(5)\n-compatible\nDNS configuration data from its standard input. Relevant fields are \"\nnameserver\n\" and\n\"\ndomain\n\"/\"\nsearch\n\". This command is mostly identical to invoking\nresolvectl\nwith a combination of\ndns\nand\ndomain\ncommands.\nAdded in version 239.\n-d\nÂ¶\nUnregisters per-interface DNS configuration data with\nsystemd-resolved\n. This\ncommand is mostly identical to invoking\nresolvectl revert\n.\nAdded in version 239.\n-f\nÂ¶\nWhen specified\n-a\nand\n-d\nwill not complain about missing\nnetwork interfaces and will silently execute no operation in that case.\nAdded in version 239.\n-x\nÂ¶\nThis switch for \"exclusive\" operation is supported only partially. It is mapped to an\nadditional configured search domain of \"\n~.\n\" â i.e. ensures that DNS traffic is preferably\nrouted to the DNS servers on this interface, unless there are other, more specific domains configured on other\ninterfaces.\nAdded in version 239.\n-p\nÂ¶\nWhen specified, the interface will not be used as the default route. See also\nsystemd-resolved.service\n(8)\nabout the default route.\nAdded in version 257.\n-m\nÂ¶\nThe switch is not supported and is silently ignored.\nAdded in version 239.\n-u\n,\n-I\n,\n-i\n,\n-l\n,\n-R\n,\n-r\n,\n-v\n,\n-V\n,\n--enable-updates\n,\n--disable-updates\n,\n--are-updates-enabled\nÂ¶\nThese switches are not supported and the command will fail if used.\nAdded in version 239.\nSee\nresolvconf\n(8)\nfor details on those command line options.\nExamples\nÂ¶\nExampleÂ 1.Â Retrieve the addresses of the \"\nwww.0pointer.net\n\" domain (\nA\nand\nAAAA\nresource records)\n$ resolvectl query www.0pointer.net\nwww.0pointer.net: 2a01:238:43ed:c300:10c3:bcf3:3266:da74\n85.214.157.71\n-- Information acquired via protocol DNS in 611.6ms.\n-- Data is authenticated: no\nExampleÂ 2.Â Retrieve the domain of the \"\n85.214.157.71\n\" IP address\n(\nPTR\nresource record)\n$ resolvectl query 85.214.157.71\n85.214.157.71: gardel.0pointer.net\n-- Information acquired via protocol DNS in 1.2997s.\n-- Data is authenticated: no\nExampleÂ 3.Â Retrieve the\nMX\nrecord of the \"\nyahoo.com\n\"\ndomain\n$ resolvectl --legend=no -t MX query yahoo.com\nyahoo.com. IN MX    1 mta7.am0.yahoodns.net\nyahoo.com. IN MX    1 mta6.am0.yahoodns.net\nyahoo.com. IN MX    1 mta5.am0.yahoodns.net\nExampleÂ 4.Â Resolve an\nSRV\nservice\n$ resolvectl service _xmpp-server._tcp gmail.com\n_xmpp-server._tcp/gmail.com: alt1.xmpp-server.l.google.com:5269 [priority=20, weight=0]\n173.194.210.125\nalt4.xmpp-server.l.google.com:5269 [priority=20, weight=0]\n173.194.65.125\nâ¦\nExampleÂ 5.Â Retrieve a PGP key (\nOPENPGP\nresource record)\n$ resolvectl openpgp zbyszek@fedoraproject.org\nd08ee310438ca124a6149ea5cc21b6313b390dce485576eff96f8722._openpgpkey.fedoraproject.org. IN OPENPGPKEY\nmQINBFBHPMsBEACeInGYJCb+7TurKfb6wGyTottCDtiSJB310i37/6ZYoeIay/5soJjlMyf\nMFQ9T2XNT/0LM6gTa0MpC1st9LnzYTMsT6tzRly1D1UbVI6xw0g0vE5y2Cjk3xUwAynCsSs\nâ¦\nExampleÂ 6.Â Retrieve a TLS key (\nTLSA\nresource record)\n$ resolvectl tlsa tcp fedoraproject.org:443\n_443._tcp.fedoraproject.org IN TLSA 0 0 1 19400be5b7a31fb733917700789d2f0a2471c0c9d506c0e504c06c16d7cb17c0\n-- Cert. usage: CA constraint\n-- Selector: Full Certificate\n-- Matching type: SHA-256\n\"\ntcp\n\" and \"\n:443\n\" are optional and could be skipped.\nSee Also\nÂ¶\nsystemd\n(1)\n,\nsystemd-resolved.service\n(8)\n,\nsystemd.dnssd\n(5)\n,\nsystemd-networkd.service\n(8)\n,\nresolvconf\n(8)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/resolvectl.html"}}
{"text": "coredumpctl\nIndex\nÂ·\nDirectives\nsystemd 258\nName\ncoredumpctl â Retrieve and process saved core dumps and metadata\nSynopsis\ncoredumpctl\n[OPTIONS...] {COMMAND} [PID|COMM|EXE|MATCH...]\nDescription\nÂ¶\ncoredumpctl\nis a tool that can be used to retrieve and process core\ndumps and metadata which were saved by\nsystemd-coredump\n(8)\n.\nCommands\nÂ¶\nThe following commands are understood:\nlist\nÂ¶\nList core dumps captured in the journal\nmatching specified characteristics. If no command is\nspecified, this is the implied default.\nThe output is designed to be human-readable and contains a table with the following\ncolumns:\nTIME\nÂ¶\nThe timestamp of the crash, as reported by the kernel.\nAdded in version 233.\nPID\nÂ¶\nThe identifier of the process that crashed.\nAdded in version 233.\nUID,\nGID\nÂ¶\nThe user and group identifiers of the process that crashed.\nAdded in version 233.\nSIGNAL\nÂ¶\nThe signal that caused the process to crash, when applicable.\nAdded in version 233.\nCOREFILE\nÂ¶\nInformation whether the coredump was stored, and whether\nit is still accessible: \"\nnone\n\" means the core was\nnot stored, \"\n-\n\" means that it was not available (for\nexample because the process was not terminated by a signal),\n\"\npresent\n\" means that the core file is accessible by the\ncurrent user, \"\njournal\n\" means that the core was stored\nin the \"\njournal\n\", \"\ntruncated\n\" is the\nsame as one of the previous two, but the core was too large and was not\nstored in its entirety, \"\nerror\n\" means that the core file\ncannot be accessed, most likely because of insufficient permissions, and\n\"\nmissing\n\" means that the core was stored in a file, but\nthis file has since been removed.\nAdded in version 233.\nEXE\nÂ¶\nThe full path to the executable. For backtraces of scripts\nthis is the name of the interpreter.\nAdded in version 233.\nIt's worth noting that different restrictions apply to\ndata saved in the journal and core dump files saved in\n/var/lib/systemd/coredump\n, see overview in\nsystemd-coredump\n(8)\n.\nThus it may very well happen that a particular core dump is still listed\nin the journal while its corresponding core dump file has already been\nremoved.\nAdded in version 215.\ninfo\nÂ¶\nShow detailed information about the last core dump\nor core dumps matching specified characteristics\ncaptured in the journal.\nAdded in version 215.\ndump\nÂ¶\nExtract the last core dump matching specified\ncharacteristics. The core dump will be written on standard\noutput, unless an output file is specified with\n--output=\n.\nAdded in version 215.\ndebug\nÂ¶\nInvoke a debugger on the last core dump\nmatching specified characteristics. By default,\ngdb\n(1)\nwill be used. This may be changed using the\n--debugger=\noption or the\n$SYSTEMD_DEBUGGER\nenvironment\nvariable. Use the\n--debugger-arguments=\noption to pass extra\ncommand line arguments to the debugger.\nAdded in version 239.\nOptions\nÂ¶\nThe following options are understood:\n-h\n,\n--help\nÂ¶\nPrint a short help text and exit.\n--version\nÂ¶\nPrint a short version string and exit.\n--no-pager\nÂ¶\nDo not pipe output into a pager.\n--no-legend\nÂ¶\nDo not print the legend, i.e. column headers and the\nfooter with hints.\n--json=\nMODE\nÂ¶\nShows output formatted as JSON. Expects one of \"\nshort\n\" (for the\nshortest possible output without any redundant whitespace or line breaks), \"\npretty\n\"\n(for a pretty version of the same, with indentation and line breaks) or \"\noff\n\" (to turn\noff JSON output, the default).\n-1\nÂ¶\nShow information of the most recent core dump only, instead of listing all known core\ndumps. Equivalent to\n--reverse -n 1\n.\nAdded in version 215.\n-n\nINT\nÂ¶\nShow at most the specified number of entries. The specified parameter must be an\ninteger greater or equal to 1.\nAdded in version 248.\n-S\n,\n--since\nÂ¶\nOnly print entries which are since the specified date.\nAdded in version 233.\n-U\n,\n--until\nÂ¶\nOnly print entries which are until the specified date.\nAdded in version 233.\n-r\n,\n--reverse\nÂ¶\nReverse output so that the newest entries are displayed first.\nAdded in version 233.\n-F\nFIELD\n,\n--field=\nFIELD\nÂ¶\nPrint all possible data values the specified\nfield takes in matching core dump entries of the\njournal.\nAdded in version 215.\n-o\nFILE\n,\n--output=\nFILE\nÂ¶\nWrite the core to\nFILE\n.\nAdded in version 215.\n--debugger=\nDEBUGGER\nÂ¶\nUse the given debugger for the\ndebug\ncommand. If not given and\n$SYSTEMD_DEBUGGER\nis unset, then\ngdb\n(1)\nwill be used.\nAdded in version 239.\n-A\nARGS\n,\n--debugger-arguments=\nARGS\nÂ¶\nPass the given\nARGS\nas extra command line arguments\nto the debugger. Quote as appropriate when\nARGS\ncontain whitespace.\n(See Examples.)\nAdded in version 248.\n--file=\nGLOB\nÂ¶\nTakes a file glob as an argument. If\nspecified, coredumpctl will operate on the specified journal\nfiles matching\nGLOB\ninstead of the\ndefault runtime and system journal paths. May be specified\nmultiple times, in which case files will be suitably\ninterleaved.\nAdded in version 246.\n-D\nDIR\n,\n--directory=\nDIR\nÂ¶\nUse the journal files in the specified\nDIR\n.\nAdded in version 225.\n--root=\nROOT\nÂ¶\nUse root directory\nROOT\nwhen searching for coredumps.\nAdded in version 252.\n--image=\nimage\nÂ¶\nTakes a path to a disk image file or block device node. If specified, all operations\nare applied to file system in the indicated disk image. This option is similar to\n--root=\n, but operates on file systems stored in disk images or block devices. The\ndisk image should either contain just a file system or a set of file systems within a GPT partition\ntable, following the\nDiscoverable Partitions\nSpecification\n. For further information on supported disk images, see\nsystemd-nspawn\n(1)\n's\nswitch of the same name.\nAdded in version 252.\n--image-policy=\npolicy\nÂ¶\nTakes an image policy string as argument, as per\nsystemd.image-policy\n(7)\n. The\npolicy is enforced when operating on the disk image specified via\n--image=\n, see\nabove. If not specified, defaults to the \"\n*\n\" policy, i.e. all recognized file systems\nin the image are used.\n-q\n,\n--quiet\nÂ¶\nSuppresses informational messages about lack\nof access to journal files and possible in-flight coredumps.\nAdded in version 233.\n--all\nÂ¶\nLook at all available journal files in\n/var/log/journal/\n(excluding journal namespaces) instead of only local ones.\nAdded in version 250.\nMatching\nÂ¶\nA match can be:\nPID\nÂ¶\nProcess ID of the\nprocess that dumped\ncore. An integer.\nAdded in version 215.\nCOMM\nÂ¶\nName of the executable (matches\nCOREDUMP_COMM=\n). Must not contain slashes.\nAdded in version 215.\nEXE\nÂ¶\nPath to the executable (matches\nCOREDUMP_EXE=\n). Must contain at least one\nslash.\nAdded in version 215.\nMATCH\nÂ¶\nGeneral journalctl match filter, must contain an equals\nsign (\"\n=\n\"). See\njournalctl\n(1)\n.\nAdded in version 215.\nExit status\nÂ¶\nOn success, 0 is returned; otherwise, a non-zero failure\ncode is returned. Not finding any matching core dumps is treated as\nfailure.\nEnvironment\nÂ¶\n$SYSTEMD_DEBUGGER\nÂ¶\nUse the given debugger for the\ndebug\ncommand. See the\n--debugger=\noption.\nAdded in version 239.\nExamples\nÂ¶\nExampleÂ 1.Â List all the core dumps of a program\n$ coredumpctl list /usr/lib64/firefox/firefox\nTIME       PID  UID  GID SIG     COREFILE EXE                         SIZE\nTue â¦   8018 1000 1000 SIGSEGV missing  /usr/lib64/firefox/firefox     -\nWed â¦ 251609 1000 1000 SIGTRAP missing  /usr/lib64/firefox/firefox     -\nFri â¦ 552351 1000 1000 SIGSEGV present  /usr/lib64/firefox/firefox 28.7M\nThe journal has three entries pertaining to\n/usr/lib64/firefox/firefox\n, and\nonly the last entry still has an available core file (in external storage on disk).\nNote that\ncoredumpctl\nneeds access to the journal files to retrieve the\nrelevant entries from the journal. Thus, an unprivileged user will normally only see information about\ncrashing programs of this user.\nExampleÂ 2.Â Invoke\ngdb\non the last core dump\n$ coredumpctl debug\nExampleÂ 3.Â Use\ngdb\nto display full register info from the last core dump\n$ coredumpctl debug --debugger-arguments=\"-batch -ex 'info all-registers'\"\nExampleÂ 4.Â Show information about a core dump matched by PID\n$ coredumpctl info 6654\nPID: 6654 (bash)\nUID: 1000 (user)\nGID: 1000 (user)\nSignal: 11 (SEGV)\nTimestamp: Mon 2021-01-01 00:00:01 CET (20s ago)\nCommand Line: bash -c $'kill -SEGV $$'\nExecutable: /usr/bin/bash\nControl Group: /user.slice/user-1000.slice/â¦\nUnit: user@1000.service\nUser Unit: vte-spawn-â¦.scope\nSlice: user-1000.slice\nOwner UID: 1000 (user)\nBoot ID: â¦\nMachine ID: â¦\nHostname: â¦\nStorage: /var/lib/systemd/coredump/core.bash.1000.â¦.zst (present)\nSize on Disk: 51.7K\nMessage: Process 130414 (bash) of user 1000 dumped core.\nStack trace of thread 130414:\n#0  0x00007f398142358b kill (libc.so.6 + 0x3d58b)\n#1  0x0000558c2c7fda09 kill_builtin (bash + 0xb1a09)\n#2  0x0000558c2c79dc59 execute_builtin.lto_priv.0 (bash + 0x51c59)\n#3  0x0000558c2c79709c execute_simple_command (bash + 0x4b09c)\n#4  0x0000558c2c798408 execute_command_internal (bash + 0x4c408)\n#5  0x0000558c2c7f6bdc parse_and_execute (bash + 0xaabdc)\n#6  0x0000558c2c85415c run_one_command.isra.0 (bash + 0x10815c)\n#7  0x0000558c2c77d040 main (bash + 0x31040)\n#8  0x00007f398140db75 __libc_start_main (libc.so.6 + 0x27b75)\n#9  0x0000558c2c77dd1e _start (bash + 0x31d1e)\nExampleÂ 5.Â Extract the last core dump of /usr/bin/bar to a file named\nbar.coredump\n$ coredumpctl -o bar.coredump dump /usr/bin/bar\nSee Also\nÂ¶\nsystemd-coredump\n(8)\n,\ncoredump.conf\n(5)\n,\nsystemd-journald.service\n(8)\n,\ngdb\n(1)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://www.freedesktop.org/software/systemd/man/latest/coredumpctl.html"}}
