{"text": "You should have been redirected.\nIf not, click here to continue.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://ubuntu.com/server/docs/package-management"}}
{"text": "You should have been redirected.\nIf not, click here to continue.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://ubuntu.com/server/docs/network-configuration"}}
{"text": "LVM - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nLVM\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nLVM\nDiscussion\nTranslation(s)\n:\nEnglish\n-\nEspañol\n-\nFrançais\n-\nLVM is a\nLogical Volume Manager\nfor the Linux operating system.\nContents\nOverview\nDefinitions\nEncrypted LVM\nBacking up passwords for encrypted LVM\nRestore passwords\nUsing Encrypted LVM as a swap partition\nLabels\n/boot\nLVM cached volumes\nInstallation\nList of LVM commands\nPhysical Volumes (PV)\nCreate a PV\nRemove a PV\nList of PV commands\nVolume Groups (VG)\nCreate a volume group\nExtend a volume group\nRenaming a volume group\nList VGs\nList of VG commands\nLogical Volumes (LV)\nCreate an LV\nRemove a LV\nIncrease the size of a partition using LVM\nShrinking a partition using LVM\nList of LV commands\nGraphical applications for managing LVM\nKDE PartitionManager\nBlivet-GUI\nSee also:\nOverview\nLogical volume management with LVM provides a more flexible way to manage the disk space on a system than the traditional approach of dividing a disk into  partitions. LVM gives the system administrator much more flexibility in allocating storage, because partitions controlled by LVM be resized and moved  around, and a single partition can reside on more than one physical hard disk.\nDefinitions\nPV\n: Physical Volumes.  This means a hard disk, hard disk partition, RAID or LUNs from a SAN.\nVG\n: Volume Groups.  This is a collection of one or more Physical Volumes.\nLV\n: Logical Volumes.  LVs sit inside a Volume Group and form, in effect, a virtual partition.\nPE\n: Physical Extents.  In order to manipulate the actual data, it is divided into blocks called\nP\nhysical\nE\nxtents.\nLE\n: Logical Extents.  Similar to Physical Extents, but at the Logical Volume level.  Physical Extents are to Physical Volumes as Logical Extents are to Logical Volumes.  The size of blocks are the same for each logical volume (LV) in the same volume group (VG).\nThe most important terms for users are the PVs, VGs and LVs.\nAn example:\n||-------------------------OS----------------------------||\n||-------------------------LVM---------------------------||\n||  LV-1 (/)    |LV-2 (swap)|  LV 3 (/home) | LV-4 (/tmp)|| Logical Volumes (LV)\n||------------------------------------------|------------||\n||                  VG 1                    |    VG 2    || Volume Groups (VG)\n||------------------------------------------|------------||\n||  /dev/sda2 |    /dev/sda3    | /dev/sdb2 | /dev/sdd4  || Physical Volumes (PV)\n||-------------------------------------------------------||\nEncrypted LVM\nWhen formatting an LVM volume, you can choose whether to encrypt the data on it or not. Using encrypted LVM is recommended if you are worried about your  computer or disk storage being stolen.\nIf you choose the encrypted LVM option, it is suggested to consider creating\nbackup passwords\nto ensure you can recover from data loss: Otherwise if you forget the password you will permanently lose all your valuable data\nBacking up passwords for encrypted LVM\nCreating backup passwords is a two step process. First you create a backup password and then you back them up.\nAdd backup passwords\nRun the following command as root:\ncryptsetup luksChangeKey <device> -S <key-slot>\nNotes\nThe\n-S\noption specifies a\n<key-slot>\n(number from 0 to 7) holding a password. You need to replace\n<device>\nwith the path to your encrypted LVM volume. For example\n/dev/sda\n.\nIt is suggested to create at least 3 backup passwords. To add an additional backup password simply run the same command, but change the\n<key-slot>\nnumber. For example to set the password in slot 2 use:\ncryptsetup luksChangeKey /dev/sda -S 2\nThe password(s) of a encrypted LVM volume are stored inside its Linux Unified Key Setup (LUKS) header.\nBack up the passwords\nRun the following command as root:\ncryptsetup luksHeaderBackup <device> --header-backup-file <file>\nNotes\n<device>\nis the location to save your backup to, for example\n/dev/sda\n. And\n<file>\nis the name of your backup file, for example\n/media/jenn/2017-05-18_luks_sda_backup\n. This command backs up the passwords in all eight key-slots.\nIt is suggested to store the backup file in a secure, off-line, and different location to ensure that you can access them if you lose access to LVM volume.\nSee the official\nLUKS wiki documentation\nfor more information\nRestore passwords\nRestore passwords from backup\nRun the following command as root\ncryptsetup luksHeaderRestore <device> --header-backup-file <file>\nNotes\nThis command will delete\nall\neight passwords, then restore\nall\nyour backed up passwords. Before running this command, you should double check that you are sure you really want to proceed: there is no undo\nYou need to change\n<device>\nto the path to your encrypted LVM volume, for example\n/dev/sda\n. You need to change\n<file>\nto the path to your backup file, for example\n/media/jenn/2017-05-18_luks_sda_backup\n.\nSee the official\nLUKS wiki documentation\nfor more information\nUsing Encrypted LVM as a swap partition\nIf you use encrypted LVM partitions then you will probably want to encrypt your swap partition as well, because the LVM encryption key is stored in memory and may be written to swap: anyone with physical access may be able to retrieve the encryption keys for all encrypted partitions by accessing the swap partition. The Debian installer will warn against creating an LVM encrypted partition unless the swap partition is encrypted (see\nSource\n)\nLabels\nYou should use labels for Logical Volume (LV) identification in\n/etc/fstab\n, instead of UUIDs or the kernel naming rules (/dev/sda) in order to avoid conflicts with the restoration of volume snapshots.\n/boot\nGrub\nv2 supports booting from an LVM partition since\nDebianSqueeze\n.\nIf you plan to encrypt your root filesystem\n/boot\nmay need to be located in a separate, unencrypted, Logical Volume or partition. Refer to the\nCryptsetup\ndocumentation for more information.\nGRUB v1 and\nLILO\nwere not compatible with LVM, if you use one of those legacy bootloaders\n/boot\ncould not be on the storage disk managed by LVM.\nLVM cached volumes\nTo use\nlvmcache(7)\nyour system must have the\nthin-provisioning-tools\ninstalled for its\ncache_check\ntool, otherwise cached volumes will not be available at boot.  This could result in the system being unbootable without manual intervention.\nInstallation\nAll tools to manage an LVM volume are available in the\nlvm2\npackage which can be installed by running\napt install lvm2\nList of LVM commands\nlvmchange\n— Change attributes of the Logical Volume Manager.\nlvmdiskscan\n— Scan for all devices visible to LVM2.\nlvmdump\n— Create lvm2 information dumps for diagnostic purposes.\nPhysical Volumes (PV)\nCreate a PV\nTo add a hard disk or partition, such as\n/dev/sda2\n, to LVM, you create a physical volume, by running the following as root:\npvcreate /dev/sda2\nYou can now add this PV to a volume group (or create a new VG, see below).\nRemove a PV\nIn order to remove a physical disk from LVM Physical Volume (PV) all data must first be moved off it.  To do this, make sure any other physical volumes in the same volume group have enough free space and then issue this command as root:\npvmove /dev/sda2\nAfter the data is moved, remove the disk from the volume group. Assuming the VG is named\nvol-group\n, run the following as root:\nvgreduce vol-group /dev/sda2\nAnd finally remove the PV by running this as root:\npvremove /dev/sda2\nList of PV commands\npvchange\n— Change attributes of a Physical Volume.\npvck\n— Check Physical Volume metadata.\npvcreate\n— Initialize a disk or partition for use by LVM.\npvdisplay\n— Display attributes of a Physical Volume.\npvmove\n— Move Physical Extents.\npvremove\n— Remove a Physical Volume.\npvresize\n— Resize a disk or partition in use by LVM2.\npvs\n— Report information about Physical Volumes.\npvscan\n— Scan all disks for Physical Volumes.\nVolume Groups (VG)\nCreate a volume group\nAssuming\n/dev/sda2\nhas been set up as an LVM Physical volume, root can add it to a new volume group by running:\nvgcreate myVirtualGroup1 /dev/sda2\nExtend a volume group\nA volume group can contian multiple physical volumes: after running\npvcreate /dev/sda3\nyou can add the new PV to an existing VG that already exists:\nvgextend VG /dev/sda3\nRenaming a volume group\nRenaming a volume group can be tricky if it contains the root or swap partition.  In that case it should be insured that the old names are still accessible via /dev/mapper until a full reboot cycle is complete.\nvgrename somename-vg vgsomename\ncd /dev/mapper\nls somename-vg*\n## somename--vg-lv1\n## somename--vg-lv2\n...\nln -s vgsomename-lv1   somename--vg-lv1\nln -s vgsomename-lv2   somename--vg-lv2\n...\n# if logical volumes of the group are contained in /etc/fstab:\nsed -i 's#/dev/mapper/somename--vg-#/dev/vgsomename/#g' /etc/fstab\n# if logical volumes of the group are contained in /boot/grub/grub.cfg:\nsed -i 's#/dev/mapper/somename--vg-#/dev/vgsomename/#g' /boot/grub/grub.cfg  # this is only good for the initramfs run and the initial next reboot\nupdate-initramfs -c -k all\nreboot\nupdate-grub #creating final /boot/grub/grub.cfg\nList VGs\nSimply run this command:\nvgdisplay\nList of VG commands\nvgcfgbackup\n— Backup Volume Group descriptor area.\nvgcfgrestore\n— Restore Volume Group descriptor area.\nvgchange\n— Change attributes of a Volume Group.\nvgck\n— Check Volume Group metadata.\nvgconvert\n— Convert Volume Group metadata format.\nvgcreate\n— Create a Volume Group.\nvgdisplay\n— Display attributes of Volume Groups.\nvgexport\n— Make volume Groups unknown to the system.\nvgextend\n— Add Physical Volumes to a Volume Group.\nvgimport\n— Make exported Volume Groups known to the system.\nvgimportclone\n— Import and rename duplicated Volume Group (e.g. a hardware snapshot).\nvgmerge\n— Merge two Volume Groups.\nvgmknodes\n— Recreate Volume Group directory and Logical Volume special files\nvgreduce\n— Reduce a Volume Group by removing one or more Physical Volumes.\nvgremove\n— Remove a Volume Group.\nvgrename\n— Rename a Volume Group.\nvgs\n— Report information about Volume Groups.\nvgscan\n— Scan all disks for Volume Groups and rebuild caches.\nvgsplit\n— Split a Volume Group into two, moving any logical volumes from one Volume Group to another by moving entire Physical Volumes.\nLogical Volumes (LV)\nCreate an LV\nDon't forget to check that you have enough space: naturally, an LV of 100 GB does not work if you only have 10 GB of space.\nUse\nvgdisplay\nto see the free space in each volume group. All these commands must be run as root.\nCreate a logical volume in a volume group:\nlvcreate --name myLogicalVolume1 --size 10g myVirtualGroup1\nCreate a filesystem on the logical volume:\nmkfs -t ext4 /dev/myVirtualGroup1/myLogicalVolume1\nYou can test to see if it's working:\nmkdir /test\nsudo mount /dev/myVirtualGroup1/myLogicalVolume1 /test\ndf -h\nYou can list your logical volumes with:\nsudo lvdisplay\nRemove a LV\nTo remove a logical volume, make sure it is not in use.  Then simply issue this command to remove the logical volume myLogicalVolume1 in volume group myVirtualGroup1:\nlvremove myVirtualGroup1/myLogicalVolume1\nIncrease the size of a partition using LVM\nTo increase the size of a partition, such as\n/boot\nstored in a logical volume\n/dev/vg/boot\nof a volume group\nvg\nthat has some unused space:\nlvextend --resizefs --verbose --size +3G /dev/vg/boot\nThis can be done with the partition still mounted. If you do not have free space in the volume group you will need to shrink one of the other LVs in the VG or add another physical volume.\nShrinking a partition using LVM\nTo shrink a partition, such as\n/tmp\nstored on a logical volume\n/dev/vg/tmp\nof a volume group\nvg\nlvreduce --resizefs --verbose --size -1G /dev/vg/tmp\nThis assumes there was 1GB of unused space on the partition. The commmand will unmount the partition and remount it when finished: you will need to ensure nothing is using the filesystem before starting (for the root partition you may need to boot into a rescue disk and resize from there)\nList of LV commands\nlvchange\n— Change attributes of a Logical Volume.\nlvconvert\n— Convert a Logical Volume from linear to mirror or snapshot.\nlvcreate\n— Create a Logical Volume in an existing Volume Group.\nlvdisplay\n— Display the attributes of a Logical Volume.\nlvextend\n— Extend the size of a Logical Volume.\nlvreduce\n— Reduce the size of a Logical Volume.\nlvremove\n— Remove a Logical Volume.\nlvrename\n— Rename a Logical Volume.\nlvresize\n— Resize a Logical Volume.\nlvs\n— Report information about Logical Volumes.\nlvscan\n— Scan (all disks) for Logical Volumes.\nGraphical applications for managing LVM\nBelow are applications with a graphical user interface (GUI) that allows you to manage LVM devices\nKDE PartitionManager\nTo install, get this KDE\npartitionmanager\npackage\nSupports LVM2, PV, VG, LV, LUKS encryption, and others\nCode repository at\nhttps://github.com/KDE/partitionmanager/\nLibre Source (Open Source) with LGPL 3, GPL 4, GFDL 1.2, CCO 1, CC-BY 4 licences\nBlivet-GUI\nTo install, click on the \"Debian\" button at\nhttps://software.opensuse.org/download.html?project=home:vtrefny&package=blivet-gui\nThen choose an installation option.\nAvailable for Debian 10 or 11\nSupport LVM2, PV, VG, LV, and others\nCode repository at\nhttps://github.com/storaged-project/blivet-gui/\nLibre Source (Open Source) with GPL 2 licence\nSee also:\nComparison of\nLinux volume management\nsolutions for Debian users\nhttps://tldp.org/HOWTO/LVM-HOWTO\nUpstream:\nhttps://sourceware.org/lvm2/\n- Homepage, mailing list, IRC...\nhttps://sourceware.org/lvm2/wiki/\n- Wiki\nCategorySystemAdministration\n|\nCategoryStorage\n|\nCategoryPermalink\n: mentioned in the\nRelease Notes for trixie\nLVM  (\nlast modified 2025-10-20 12:52:09\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/LVM"}}
{"text": "NetworkConfiguration - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nNetworkConfiguration\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nNetworkConfiguration\nTranslation(s)\n:\nEnglish\n-\nEspañol\n-\nFrançais\n-\nItaliano\n-\nPortuguês (Brasil)\n-\n简体中文\nSee the official manual:\nDebian Reference Manual - Chapter 5. Network setup\nReader Prerequisites\n: To get the most from this article, understand the following concepts before reading: basic unix command line tools, text editors, DNS, TCP/IP, DHCP, netmask, gateway\nTable of Contents\nContents\n4 ways to configure the network\nSetting up an Ethernet Interface\nStarting and Stopping Interfaces\nReinitialize new network setup\nNetwork Interface Names\nUpgrading and Network Interface Names\nUsing DHCP to automatically configure the interface\nConfiguring the interface manually\nSetting the speed and duplex\nBringing up an interface without an IP address\nDefining the (DNS) Nameservers\nDNS configuration for NetworkManager\nUsing systemd-resolved for DNS resolution\nEnabling systemd-resolved\nChecking the status and flushing the cache in systemd-resolved\nManaging systemd-resolved settings\nConfiguring dhclient\nModifying /etc/dhcp/dhclient.conf\nStop dhclient from modifying /etc/resolv.conf\nSetting additional DNS Servers\nSetting additional search domains\nConfiguring resolvconf (or a workalike)\nMaking /etc/resolv.conf immutable\nBridging\nFirewall\nHowto use vlan\nBridges and VLANs\nHowto create fault tolerant bonding with vlan\nNetwork config\nbonding with active backup\n/etc/network/interfaces\nHow to set the MTU (Max transfer unit / packet size) with VLANS over a bonded  interface\nMultiple IP addresses on one Interface\n4 ways to configure the network\nThe interfaces configuration file at /etc/network/interfaces (this page): for basic or simple configurations (e.g. workstation)\nNetworkManager\n: This is the default for Laptop configuration\nSystemd:\nDebian reference Doc Chapter 5\nNetplan\n:\nDebian reference Doc Chapter 5\nSetting up an Ethernet Interface\nThe majority of network setup can be done via the\ninterfaces\nconfiguration file at\n/etc/network/interfaces\n. Here, you can give your network card an IP address (or use dhcp), set up routing information, configure IP masquerading, set default routes and much more.\nRemember to add interfaces that you want brought up at boot time to the 'auto' line.\nSee\ninterfaces\nfor more options.\nStarting and Stopping Interfaces\nInterfaces configured with\n/etc/network/interfaces\ncan be brought up and down with the\nifup\nand\nifdown\ncommands.  For example, with an interface named\nenp7s0\n:\nsudo ifdown enp7s0\nsudo ifup enp7s0\nSome outdated guides claim you need to restart the networking service to apply changes to\n/etc/network/interfaces\n.  This was deprecated because it is possible that not all interfaces will be restarted.\nReinitialize new network setup\nIf you make more fundamental network changes to\n/etc/network/interfaces\n(e.g. adding new virtual interfaces like a bridge), you can reinitialize the network configuration by restarting the\nnetworking\ndaemon:\nsudo systemctl status networking\nsudo systemctl restart networking\nNetwork Interface Names\nSee\nNetworkInterfaceNames\n. Since\nStretch\n, old-style interface names (\neth0\n,\nwlan1\netc.) have been replaced by names based on hardware location (\nenp0s31f6\n,\nwlp1s7\netc.).  For USB dongles, these can even include the MAC address:\nenx2c56ac39ec0d\n).\nYou can list interfaces with:\nls /sys/class/net\nReplace\neno1\nwith your default interface name in the examples below.\nUpgrading and Network Interface Names\nBuster\nstill supports the old naming system as long as the file\n/etc/udev/rules.d/70-local-persistent-net.rules\nexists, but\nBullseye\nusers need to switch.\nUsing DHCP to automatically configure the interface\nIf you're just using DHCP, all you need is something like:\nauto eno1\nallow-hotplug eno1\niface eno1 inet dhcp\nFor IPv6 with DHCPv6,\nappend\nthe following:\niface eno1 inet6 dhcp\nOr for IPv6 with\nstateless address autoconfiguration\n(\"SLAAC\"),\nappend\nthe following:\niface eno1 inet6 auto\nSee also\nIPv6PrefixDelegation\n.\nConfiguring the interface manually\nIf you configure the interface manually, use something like this to set the default gateway (network, broadcast and gateway are optional):\nauto eno1\niface eno1 inet static\naddress 192.0.2.7/24\ngateway 192.0.2.254\nIf you want to add an IPv6 address too,\nappend\nsomething like:\niface eno1 inet6 static\naddress 2001:db8::c0ca:1eaf/64\ngateway 2001:db8::1ead:ed:beef\nSee\ninterfaces\nfor more options.\nMake sure to disable all DHCP services, e.g.\ndhcpcd\n.\nMixing manual and automatic configuration is also possible, e.g. to use IPv6 SLAAC for internet connectivity and static addresses within the network:\n# manual unique local address\niface eno1 inet6 static\naddress fdc3:cafe::3/64\n# use SLAAC to get global IPv6 address from the router\n# we may not enable ipv6 forwarding, otherwise SLAAC gets disabled\nautoconf 1\naccept_ra 2\nSetting the speed and duplex\nAutonegotiation repeatedly failing is often a symptom of faulty cabling - investigate physical matters before assuming that the interfaces' autonegotiation algorithms are incompatible.\nIf you turn off autonegotiation and set speed and duplex manually, the partner interface at the other end of the cable will assume that the absence of autonegotiation indicates a speed of 10Mbps and a duplex of half. For error-free operation when setting speed and duplex manually, set exactly the same speed and duplex for the devices at both ends of the cable.\nIf you set your interface's speed and duplex by hand, some trial and error may be required.  Here are the basic steps:\ninstall\nethtool\nand\nnet-tools\n, so that you have the\nethtool\nand\nmii-tool\nprograms\none or both of these might work for your interface\nhave a way to login to the system in case the network interface becomes nonfunctional\nan\nSSH\nconnection could be disrupted, so you need a fallback strategy\nidentify the interface in question (often\neno1\n)\nadjust the remainder of these instructions accordingly\ntry to determine what its current speed and duplex settings are...\ntry\nsudo ethtool eno1\nand see whether the \"Speed:\" and \"Duplex:\" lines look right\nif not,\nethtool\nmay not be supported by your device\ntry\nsudo mii-tool -v eno1\nand see whether its output looks right\nif not,\nmii-tool\nmay not be supported by your device\nif neither is supported, you may have to set parameters directly on the kernel driver module:\nidentify which driver module you're using by reading the output of\ndmesg\nand\nlsmod\ntry\nmodinfo MODULENAME\nto see what parameters it accepts, if any (you can use\nmodinfo\neven on modules that are not loaded, for comparison)\nToDo\n: where does one set kernel module parameters?\ntry to change the settings of the interface with one of these (assuming 100 Mbps and full duplex):\nsudo ethtool -s eno1 speed 100 duplex full autoneg off\nsudo mii-tool -F 100baseTx-FD eno1\nre-check to see whether the interface settings actually changed\ntry sending some data in and out of the system to see whether the NIC is operating correctly\nput the successful command in\n/etc/network/interfaces\nso it runs when you bring the interface up (e.g. at boot time)\nsome drivers begin autonegotiation when they're loaded, so you may need to delay the command a few seconds until autonegotiation finishes\niface eno1 inet static\naddress .../...\ngateway ...\nup sleep 5; ethtool -s eno1 ...\nreboot the machine to make sure it comes up correctly\nbe prepared to intervene manually (e.g. Ctrl-Alt-Del and then boot into single-user mode from GRUB or LILO)\nBringing up an interface without an IP address\nTo create a network interface without an IP address at all, use the\nmanual\nmethod and the\npre-up\nand\npost-down\ncommands:\niface eno1 inet manual\npre-up ifconfig $IFACE up\npost-down ifconfig $IFACE down\nIf the interface is a VLAN interface, the up/down commands must be executed after/before the vlan hooks.  You also have to install the\nvlan\npackage.\niface eno1.99 inet manual\npost-up ifconfig $IFACE up\npre-down ifconfig $IFACE down\nNote: If you create the VLAN interface only to put it in a bridge, there is no need to define the VLAN interface manually. Just configure the bridge, and the VLAN interface will be created automatically when creating the bridge (see below).\nDefining the (DNS) Nameservers\nBefore a computer can connect to an external network resource (e.g. a web server), it must have a means of resolving domain names used by people (e.g.\nwiki.debian.org\n) to numeric network addresses used by routers (e.g.\n140.211.166.4\n).  Here is an example\n/etc/resolv.conf\nfile that tells your computer to do that with\nCloudflare's nameserver\nand\nGoogle's nameserver\n:\nnameserver 1.1.1.1\nnameserver 8.8.8.8\nSee\nresolv.conf\nfor details.\nDNS configuration for NetworkManager\nNetworkManager\nnormally manages\n/etc/resolv.conf\n, even if you've configured DNS in\n/etc/dhcp/dhclient.conf\n.  You can get an idea of\nNetworkManager\n's settings by running\nnmcli\non the command line.\nYou can configure these settings graphically:\nrun\nnm-connection-editor\n\"Advanced Network Configuration\") in the menu system\nChoose a connection and click the cog button to edit\nClick on the IPv4 Settings tab\nChoose 'Automatic (DHCP) addresses only' instead of just 'Automatic (DHCP)'.\nEnter the DNS servers in the “DNS servers” field, separated by spaces (e.g.\n208.67.222.222\nfor OpenDNS).\nClick “Save”\nNetworkManager\nsaves these settings in\n/etc/NetworkManager/system-connections/name-of-connection\n.  For example:\n[802-3-ethernet]\nduplex\n=\nfull\nmac-address\n=\nXX:XX:XX:XX:XX:XX\n[connection]\nid\n=\nWired connection 1\nuuid\n=\nxxx-xxxxxx-xxxxxx-xxxxxx-xxx\ntype\n=\n802-3-ethernet\ntimestamp\n=\n1385213042\n[ipv6]\nmethod\n=\nauto\n[ipv4]\nmethod\n=\nauto\ndns\n=\n208.67.222.222;\nignore-auto-dns\n=\ntrue\nRun\nnmcli\nagain to check\nNetworkManager\nnow has the right idea of how your DNS should be resolved.\nUsing systemd-resolved for DNS resolution\nsystemd-resolved\nis not installed by default.  It runs a local caching dns resolver that can be integrated with\nNetworkManager\nand\nsystemd-networkd\n:\napt install systemd-resolved\nEnabling systemd-resolved\nsystemd-resolved\nis disabled by default.  To enable it:\nsystemctl enable systemd-resolved\nln -sf /run/systemd/resolve/resolv.conf /etc/resolv.conf\nAlso for glibc apps using nss, you need to edit\n/etc/nsswitch.conf\nso the hosts line looks like:\nhosts:           mymachines resolve [!UNAVAIL=return] files dns myhostname\nThis will use\nnss-resolve(8)\nfor resolution.\nNote that resolved supports\n/etc/hosts\nso should to go before the\nfiles\nentry.\nChecking the status and flushing the cache in systemd-resolved\nYou can check the status of\nsystemd-resolved\nwith\nresolvectl\n:\nresolvectl\nYou can flush the cache that resolved has with:\nresolvectl flush-cache\nManaging systemd-resolved settings\nGeneral settings for\nsystemd-resolved\nare managed in\n/etc/systemd/resolved.conf\n- see\nresolved.conf\n.\nConfiguring dhclient\nIf you have disabled\nNetworkManager\netc., the last remaining daemon which overwrites\nresolv.conf\nmay be\ndhclient(8)\n(from\nisc-dhcp-client\n).  If so, you can change\nresolv.conf\nby configuring this service.\nModifying /etc/dhcp/dhclient.conf\nIf you just want to override specific values from the DHCP server, edit\n/etc/dhcp/dhclient.conf\n:\nsupersede domain-name \"example.com\";\nsupersede domain-search \"example.com\";\nsupersede domain-name-servers 127.0.0.1;\nAnother option is to remove \"domain-name, domain-name-servers, domain-search\" from the request line.  However, this only works on\nsome\nnetworks.  If the DHCP server sends unsolicited domain-name-servers (et al.) responses,\ndhclient\nwill still heed them, and will still overwrite the\nresolv.conf\nfile.\nStop dhclient from modifying /etc/resolv.conf\nIf you don't want\ndhclient\nto change the file at all, do:\necho\n'make_resolv_conf() { :; }'\n> /etc/dhcp/dhclient-enter-hooks.d/leave_my_resolv_conf_alone\nchmod\n755\n/etc/dhcp/dhclient-enter-hooks.d/leave_my_resolv_conf_alone\nThe execute bit is required because dhclient-script uses\nrun-parts(8)\nto decide which files to read.  For that same reason, the filename\nmust not\ncontain anything but letters, digits, underscores and hyphens.\nAccording to\ndhclient-script(8)\n:\nWhen  it starts, the client script first defines a shell function, make_resolv_conf , which is later used to create the /etc/resolv.conf file.   To override the default behaviour, redefine this function in  the  enter hook script.\nSetting additional DNS Servers\nExample: dhclient3 uses\n/etc/dhcp/dhclient.conf\n.  The setting you want is:\nsupersede domain-name-servers 12.34.56.78, 12.34.56.79;\nor perhaps\nprepend domain-name-servers 12.34.56.78, 12.34.56.79;\nSetting additional search domains\nAdding search domains for VPNs or local virtual networks:\nappend domain-name \" virt vpn\";\nNote the leading space since the string is literally appended to the search domain provided by other configurations.\nSee the\ndhclient.conf\nfor details.\nConfiguring resolvconf (or a workalike)\nresolvconf\nprograms keep track of system information about the currently available nameservers.  They should not be confused with the\nconfiguration file\n/etc/resolv.conf\n, which unfortunately has a nearly identical name.  There was originally only one\nresolvconf\npackage, but now you can choose one of the other\npackages providing resolvconf\n.  These commands let you add settings without them being overwritten by other commands.\nA\nresolvconf\nprogram acts as an intermediary between programs that supply nameserver information (e.g. dhcp clients) and programs that use nameserver information (e.g. resolver).  If you have more than one program modifying\n/etc/resolv.conf\n, this stops them from overwriting each others' configuration.\nThese packages replace\n/etc/resolv.conf\nwith a symbolic link to\n/etc/resolvconf/run/resolv.conf\n, which is generated dynamically.\nThese packages include various configuration files for other packages (such as\nisc-dhcp-client\n).  For example,\nresolvconf\nincludes a file which modifies the\nmake_resolv_conf\nshell function used by\ndhclient-script(8)\n.\nTo manually define the nameservers (as with a static interface), add a line like the following to the\ninterfaces\nconfiguration file at\n/etc/network/interfaces\n:\ndns-nameservers 12.34.56.78 12.34.56.79\nPlace the line indented within an\niface\nstanza, e.g., right after the\ngateway\nline. Enter the IP addresses of the nameservers you need to use after\ndns-nameservers\n. Put all of them on one line separated by spaces. Don't forget the \"\ns\n\" on the end of\ndns-nameservers\n.\nopenresolv\nlets you tell it to\ndo nothing\nwhenever some daemon tries to modify\nresolv.conf\n, by putting\nresolvconf=NO\nin the\n/etc/resolvconf.conf\nfile.  (Note: this is\nnot\nthe\n/etc/resolv.conf\nfile!)\nSee\n/usr/share/doc/resolvconf/README\nfor more information.\nMaking /etc/resolv.conf immutable\nYou can make\n/etc/resolv.conf\nimmutable, so it cannot be changed by any package:\nrm -f /etc/resolv.conf\neditor /etc/resolv.conf\nchattr +i /etc/resolv.conf\nObviously, you will need to put the appropriate content into the file\nbefore\nsetting the immutable bit.  Any time you wish to change the file, you will have to remove the bit, make your change, and then restore the bit.\ndhclient-script\nmay clutter\n/etc\nwith temporary files when it fails to write to them - see\n860928\n.  You may need to periodically clean these files out of\n/etc\n.\nBridging\nBridging puts multiple interfaces into the same network segment. This is very popular for virtualization, and for connecting a server to multiple switches for high availability.\nSee\nBridgeNetworkConnections\nfor more information.\nFirewall\nSee\nnftables\nor\nufw\nfor more information.\nHowto use vlan\nAn\nIEEE_802.1Q\nVLAN lets you split a single physical LAN into multiple virtual LANs.  This lets network administrators do some configuration at layer 2 that would otherwise need to be done at the IP layer.\nAdd this to\n/etc/modules\n:\n8021q\nThen add a section to\n/etc/network/interfaces\nlike:\nauto eno1.222\niface eno1.222 inet static\naddress 10.10.10.1/24\nSee\nvlan-interfaces\nfor more information.\nBridges and VLANs\nIf you create VLAN interfaces only to put them into a bridge, there is no need to define the VLAN interfaces manually. Just config the bridge, and the VLAN interface will be created automatically when creating the bridge, e.g:\nauto br1\niface br1 inet manual\nbridge_ports eno1.99 eno2.99\nup /usr/sbin/brctl stp br1 on\nHowto create fault tolerant bonding with vlan\nTo \"bond\" two Ethernet connections together to create an auto failover interface, see\nBonding\n.\nNetwork config\nCisco switch interface example config:\ninterface GigabitEthernet1/2\ndescription eno2\nswitchport\nswitchport trunk encapsulation dot1q\nswitchport trunk allowed vlan 10,20,30\nswitchport mode trunk\nno ip address\nno cdp enable\nspanning-tree portfast trunk\nbonding with active backup\nCreate a file\n/etc/modprobe.d/bonding.conf\ncontaining:\nalias bond0 bonding\noptions bonding mode=active-backup miimon=100 downdelay=200 updelay=200 primary=eno2\n/etc/network/interfaces\n# The loopback network interface\nauto lo\niface lo inet loopback\n# The primary network interface\nauto bond0\niface bond0 inet manual\nup ifconfig bond0 0.0.0.0 up\nslaves eno2 eno1\nauto vlan10\niface vlan10 inet static\naddress 10.10.10.12/24\nvlan-raw-device bond0\ngateway 10.10.0.1\ndns-search hup.hu\ndns-nameservers 10.10.0.2\nauto vlan20\niface vlan20 inet static\naddress 10.20.10.12/24\nvlan-raw-device bond0\nauto vlan30\niface vlan30 inet static\naddress 10.30.10.12/24\nvlan-raw-device bond0\nIn Debian Buster, you must use interface names for VLANs in the form of:\nbond0.10\n,\nbond0.20\n, and\nbond0.30\ninstead of\nvlan10\n,\nvlan20\n,\nvlan30\nhttps://www.kernel.org/doc/Documentation/networking/bonding.txt\n- Linux kernel documentation on bonding\nHow to set the MTU (Max transfer unit / packet size) with VLANS over a bonded  interface\nMTU needs to be configured on the bonding interface and slave interfaces after the reset of the configuration has been applied to the bonding interfaces. This is done using a post-up line in the bonding interface configuration.\nauto bond0\niface bond0 inet manual\nup ifconfig lacptrunk0 0.0.0.0 up\nslaves eno1 eno2\n# bond-mode 4 = 802.3ad\nbond-mode 4\nbond-miimon 100\nbond-downdelay 200\nbond-updelay 200\nbond-lacp-rate 1\nbond-xmit-hash-policy layer2+3\npost-up ifconfig eno1 mtu 9000 && ifconfig eno2 mtu 9000 && ifconfig bond0 mtu 9000\n#vlan devices will use the MTU set on bond0 device\nauto vlan101\niface vlan101 inet static\naddress 10.101.60.123/24\ngateway 10.155.60.1\nvlan-raw-device bond0\nauto vlan151\niface vlan151 inet static\naddress 192.168.1.1/24\nvlan-raw-device bond0\nMultiple IP addresses on one Interface\nif you just need your web server to respond to two domain names,\nvirtual hosts\nare a better solution than multiple addresses.\nInterface aliases are deprecated and should not really be used anymore. (citation needed)\nThe link may fail to come up if no labels are assigned to the alias interfaces!\nThis issue may be driver/hardware-specific.  It has been seen on\nWheezy\nand\nJessie\nwith an\nRTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 01)\nauto-negotiating to\n10/full\n.  A similar warning from another person exists in the history of this page.\nThis\n/etc/network/interfaces\nexample assigns multiple IP addresses to\neno1\n.\nauto eno1\nallow-hotplug eno1\niface eno1 inet static\naddress 192.168.1.42/24\ngateway 192.168.1.1\nup   /sbin/ip addr add 192.168.1.43/24 dev $IFACE label $IFACE:0\ndown /sbin/ip addr del 192.168.1.43/24 dev $IFACE label $IFACE:0\nup   /sbin/ip addr add 192.168.1.44/24 dev $IFACE label $IFACE:1\ndown /sbin/ip addr del 192.168.1.44/24 dev $IFACE label $IFACE:1\nup   /sbin/ip addr add 10.10.10.14/24 dev $IFACE label $IFACE:2\ndown /sbin/ip addr del 10.10.10.14/24 dev $IFACE label $IFACE:2\niface eno1 inet6 static\naddress 2001:db8:1234::1/64\ngateway fe80::1\nup   /sbin/ip address add 2001:db8:1234:5678::1/64 dev $IFACE\ndown /sbin/ip address del 2001:db8:1234:5678::1/64 dev $IFACE\nCategoryNetwork\nCategorySystemAdministration\nNetworkConfiguration  (\nlast modified 2025-11-26 11:41:03\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/NetworkConfiguration"}}
{"text": "Apt - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nApt\nSearch:\nWiki\n/\nRedirected from page \"\napt\n\"\nClear message\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nApt\nTranslation(s)\n:\nCatalà\n-\nEnglish\n-\nEspañol\n-\nFrançais\n-\nItaliano\n-\n日本語 (Nihongo)\n-\n한국어(Korean)\n-\nPortuguês (Brasil)\n-\nРусский\n-\n简体中文\nAPT may refer to:\nAdvanced Package Tool (or APT)\n, the main command-line\npackage manager\nfor Debian and its derivatives. It provides command-line\ntools\nfor searching,\nmanaging\nand querying information about packages, as well as low-level access to all features provided by the libapt-pkg and libapt-inst libraries which higher-level package managers can depend upon.\nThe\napt\npackage, providing, among others, the\napt\nmanagement tool, a high-level command-line interface for better interactive usage.\nFor more information, see\nAptCLI\n.\nCategoryPackageManagement\nApt  (\nlast modified 2025-08-23 16:31:18\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/apt"}}
{"text": "systemd - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nsystemd\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nsystemd\nTranslation(s)\n:\nEnglish\n-\nEspañol\n-\nFrançais\n-\nItaliano\n-\n한국어\n-\nRussian\n-\nBrasileiro\n-\n简体中文\nsystemd - system and service manager\nContents\nsystemd - system and service manager\nIntroduction\nBasic usage\nGetting information on system status\nManaging services\nCreating or altering services\nSmall tweaks\nInstalling and Testing\nInstallation\nConfiguring for testing\nConfiguring as default\nDaemon Security\nOverview\nChecking Daemon Security\nIncreasing Daemon Security\nDebugging\nFailed units\nVerify units\nsystemd hangs on startup or shutdown\nKernel debug without systemd debug in Jessie\nBugs and Bug-Tracking-Systems\nKnown Issues and Workarounds\nShared bind mounts\nSSH session doesn't cleanly terminate on reboot/shutdown\nMissing startup messages on console(tty1) after the boot\nVirtual and serial console changes\nOrphaned processes\nWhere to get help?\nInstalling without systemd\nDebian Resources\nOther Resources\nIntroduction\nsystemd\nis a system and service manager for Linux. It is the default init system for Debian since\nDebian 8 (\"jessie\")\n. Systemd is compatible with SysV and LSB init scripts. It can work as a drop-in replacement for sysvinit. Systemd\nProvides aggressive parallelization capabilities\nUses socket and D-Bus activation for starting services\nOffers on-demand starting of daemons\nImplements transactional dependency-based service control logic\nTracks processes using Linux cgroups\nSupports snapshotting and restoring\nMaintains mount and automount points\nSystemd runs as a daemon with PID 1.\nSystemd tasks are organized as\nunits\n. The most common units are services (.service), mount points (.mount), devices (.device), sockets (.socket), or timers (.timer). For instance, starting the secure shell daemon is done by the unit ssh.service.\nSystemd puts every service into a dedicated\ncontrol group\n(cgroup) named after the service. Modern kernels support process isolation and resource allocation based on cgroups.\nTargets\nare groups of units. Targets call units to put the system together. For instance, graphical.target calls all units that are necessary to start a workstation with graphical user interface.  Targets can build on top of another or depend on other targets. At boot time, systemd activates the target default.target which is an alias for another target such as graphical.target.\nSystemd creates and manages the\nsockets\nused for communication between system components. For instance, it first creates the socket /dev/log and then starts the syslog daemon. This approach has two advantages: Firstly, processes communicating with syslog via /dev/log can be started in parallel. Secondly, crashed services can be restarted without processes that communicate via sockets with them losing their connection. The kernel will buffer the communication while the process restarts.\nPlease see the\nupstream systemd page\nfor more information.\nBasic usage\nsystemctl is the main tool used to introspect and control the state of the \"systemd\" system and service manager. You can use systemctl for instance to enable/disable services permanently or only for the current session. Refer to the\nsystemctl(1)\nmanpage for more details.\nGetting information on system status\nShow system status:\n$ systemctl status\nList failed units:\n$ systemctl --failed\nList installed unit files:\n$ systemctl list-unit-files\nManaging services\nList all running services:\n$ systemctl\nActivates the service \"example1\" immediately:\n# systemctl start example1\nDeactivates the service \"example1\" immediately:\n# systemctl stop example1\nRestarts the service \"example1\" immediately:\n# systemctl restart example1\nShows status of the service \"example1\":\n# systemctl status example1\nEnables \"example1\" to be started on bootup:\n# systemctl enable example1\nDisables \"example1\" to not start during bootup:\n# systemctl disable example1\nDisplays the configuration for \"example1\":\n# systemctl cat example1\nCreating or altering services\nUnits are defined by individual configuration files, called\nunit files\n. The type of the unit is recognized by the file name suffix, .mount in case of a mount point. Unit files provided by Debian are located in the /lib/systemd/system directory. If an identically named local unit file exists in the directory /etc/systemd/system, it will take precedence and systemd will ignore the file in the /lib/systemd/system directory.  Some units are created by systemd without a unit file existing in the file system.\nSystem administrators should put new or heavily-customized unit files in\n/etc/systemd/system\n.\nSmall tweaks\nFor small tweaks to a unit file, system administrators should use the \"drop-in directory\" feature (documented in\nsystemd.unit(5)\n).\nStart by determining the\ncanonical\nsystemd service name (e.g. ssh.service, not an alias like sshd.service). We'll use \"name.service\" for this example.\nUse the command\n# systemctl edit name.service\nto create or edit a file\n/etc/systemd/system/name.service.d/override.conf\nand make changes as needed.\nThis brings up the default\neditor\nwith all the sections and settings from the units\n.conf\n-file commented out and instructions on how to override theese.\nIf needed, create more files inside this directory ending with a \".conf\" suffix to separate overrides in atomic units. For example, /etc/systemd/system/name.service.d/local.conf\nEach file should contain the section headers and section options to be overridden, using the same format as unit files.\nIf you're overriding\nExecStart=\n, you need to put an empty\nExecStart=\nline in the override file, to \"clear out\" the existing command list.  Otherwise, all non-empty\nExecStart=\nlines append a new command to the list.\nHere's an example:\n# cat /etc/systemd/system/name.service.d/local.conf\n[Service]\nExecStart=\nExecStart=/usr/sbin/name-service --my-options\nFor information about writing your own services, see\nsystemd/Services\n.\nInstalling and Testing\nsystemd was included in Debian wheezy as a technology preview. Please make sure that you are using Debian jessie or newer to get a recent version of systemd.\nInstallation\nTo install systemd run:\n# apt-get update\n# apt-get install systemd\nThis will install the systemd packages but will not configure systemd as your init system.\nConfiguring for testing\nTo test systemd before switching to it by default, you can add the following boot parameter to the kernel:\ninit=/lib/systemd/systemd\nThis can be done in the grub menu for a single boot - press \"e\" in the grub menu and add this to the\nkernel\nline. For example, depending on the options required for\nyour\nparticular system, it might look something like:\nlinux   /vmlinuz-3.13-1-amd64 root=/dev/mapper/root-root init=/lib/systemd/systemd ro quiet\nIf PID\n1\nis\nsystemd\nthen your system is running with systemd.\nConfiguring as default\nIn order to use systemd you should also install\nsystemd-sysv\nwhich provides the symlinks links for /sbin/init. It is recommended to run this when already running under systemd, as described in the previous section.\n# apt-get install systemd-sysv\nIn order to boot your system with the newly installed systemd, simply reboot.\n# reboot\nIf you run a self-compiled kernel, make sure you have 2.6.39 or newer and enable the following options:\n* CONFIG_DEVTMPFS=y\n* CONFIG_CGROUPS=y\n* CONFIG_AUTOFS4_FS=[y|m]\n* CONFIG_IPV6=[y|m], optional, but highly recommended\n* CONFIG_FANOTIFY=y, optional, required for systemd readahead. available in Linux kernel >= 2.6.37.\nFor an up-to-date list, see section \"REQUIREMENTS\" in the upstream\nREADME\nfile.\nDaemon Security\nOverview\nA significant feature of systemd is the ability to consistently manage the access that daemons are granted to the system. Prior to systemd's adoption the expectation was that every daemon would call setgid(2), setuid(2), and daemon(3) to limit the scope of damage if the daemon is compromised. But before the daemon dropped privileges any bug, configuration error, or attack could cause unlimited damage. If a daemon was under the control of a hostile party from the initialisation phase and started manually by the sysadmin it could use the TIOCSTI ioctl to stuff characters into the keyboard buffer to take over the system, this was a difficult problem to solve as some daemons wanted the sysadmin to enter a password on startup (a web server with encrypted SSL keys was a common example).\nTo address this systemd manages the daemon startup process, has systemd-ask-password(1) and associated programs for getting passwords on daemon startup and apart from that gives them no direct access to the sysadmin terminal. The daemon can be started under a specific UID/GID, a specific\nSELinux\nsecurity context, and with the full range of Linux access control mechanisms (private mounts, read-only mounts, limits to system calls, etc). See\nthe documentation for systemd-exec for all the options\n.\nChecking Daemon Security\nThe following command shows a list of all units and the exposure number from 0 to 10 (high is bad):\nsystemd-analyze security\nThe following command shows the details of the exposure of the rsyslog service:\nsystemd-analyze security rsyslog.service\nGenerally you want to decrease the numbers as much as possible within the scope of what they do. But a login program (sshd, getty, xdm, etc) that allows either a direct root login or access to run su/sudo can't be meaningfully restricted much.\nIncreasing Daemon Security\nSee the\n?\nSmall Tweaks section of this document for information on tweaking a daemon configuration, for security or other reasons.\nOne of the most important things to set is the list of permitted capabilities for the daemon. The CapabilityBoundingSet is the list of capabilities that are permitted (space separated on a single line) or the list of capabilities to be blocked prefixed with a ~. Here is an example of allowing a daemon to have DAC_OVERRIDE (read files that aren't permitted by Unix permissions when running as UID 0), SETUID and SETGID (for dropping privs - not needed if you use systemd to run under the required UID/GID), PTRACE, and memory locking. All other capabilities will be denied:\nCapabilityBoundingSet=CAP_DAC_OVERRIDE CAP_SETGID CAP_SETUID CAP_SYS_PTRACE CAP_IPC_LOCK\nThere is a full list of capabilities with their descriptions in the file /usr/include/linux/capability.h from package linux-libc-dev or refer to\ncapabilities(7)\n. Usually it's best to just list the capabilities that are to be permitted as it's a smaller set.\nWorking out which capabilities are needed for a daemon is difficult, usually the logs don't indicate what was missing.\nAnother good option for restricting is system calls. The following example lists some system calls that are known to be risky (such as the @clock group and the @mount group as well as some that aren't usually used and which can be safely restricted to reduce the attack surface such as @cpu-emulation and @raw-io. Filtering system calls has some overlap with restricting capabilities but it's good to restrict things in two ways. It usually isn't difficult to map error messages logged by a daemon to which groups of syscalls were filtered and then do a binary search for the most restrictive options.\nSystemCallFilter=~@mount @cpu-emulation @debug @raw-io @reboot @resources @swap @module @obsolete @clock\nThe following is recommended for every daemon that doesn't directly interact with user files. Daemons such as database servers almost never need to access user home directories and should be prevented from accessing /home by default.\nProtectHome=true\nThe following settings are good for protecting the overall OS installation. You can use these on most daemons with little risk of breaking things:\nProtectKernelLogs=true\nProtectControlGroups=true\nProtectKernelModules=true\nMemoryDenyWriteExecute=true\nProtectHostname=true\nLockPersonality=true\nRestrictRealtime=true\nDevicePolicy=closed\nProtectClock=true\nRestrictSUIDSGID=true\nProtectKernelTunables=true\nPrivateDevices=true\nThe following setting is good to prevent a daemon being attacked by a user or another daemon via /tmp race conditions. It's unlikely to cause any problems.\nPrivateTmp=true\nThe following is good for daemons which need no networking. This allows Unix domain sockets by filesystem (EG /run/$DAEMON/whatever.sock) but not the abstract socket namespace. The risk of this is PAM services that use networking or other indirect network access. This is a good option for the sysadmin who is locking down their own system but risky for the package maintainer.\nPrivateNetwork=true\nThe NoNewPrivileges option prevents a daemon from running a SETUID program to gain privileges that are undesired. But there are some corner cases for this such as running a program that has a SE Linux automatic domain transition to LESS privileges can be denied.\nNoNewPrivileges=true\nDebugging\nFailed units\nIn some cases units enter a\nfailed state\n. The\nstatus\ncommand can be used to find out some details:\n$ systemctl status <UNITNAME>\nFailed units can be manually cleared out:\n# systemctl reset-failed\nVerify units\nTo check that we didn't misspell anything or used any unknown options when writing units,\nsystemd-analyze\n$ systemd-analyze verify <UNITNAME-or-PATHTOUNIT>\nNo output means everything checks out.\nsystemd hangs on startup or shutdown\nSometimes it is necessary to investigate why\nsystemd\nhangs on startup or on reboot/shutdown.\nSolution #0: Remove \"quiet\" from Kernel command line (so called \"cmdline\" or \"grub line\")\nSolution #1: Increase verbosity via cmdline: Add \"systemd.log_target=kmsg systemd.log_level=debug\"\nOf course you can have a \"temporary\" persistent solution:\n[ /etc/default/grub ]\nGRUB_CMDLINE_LINUX=\"systemd.log_target=kmsg systemd.log_level=debug\" <--- Add here (by uncommenting you can easily switch to debug)\n# update-grub\nSolution #2: Increase verbosity via /etc/systemd/system.conf\nLogLevel=debug           <--- Uncomment this line and use \"debug\" (default: commented and \"info\")\nLogTarget=syslog-or-kmsg <--- Uncomment this line (default: commented)\nSolution #3: Boot an emergency shell: Add\nsystemd.unit=rescue.target\nor just\n1\n(the number one) to the kernel command line.\nSolution #4: Enable the debug shell: Run\nsystemctl enable debug-shell.service\n. (You can do this in a chroot environment after booting a rescue system.) This starts a root shell on TTY 9.\nHINT: \"man systemd\" and \"man systemd-system.conf\"\nHINT: Extensive debugging information about systemd is on\nthis FreeDesktop page\n.\nHINT: How to check Kernel command line parameters/options?\n# cat /proc/cmdline\nNOTE on LogLevel (see\nsystemd(1)\nand\nsystemd-system.conf(5)\n):\n\"Set log level. As an argument this accepts a numerical log level or the well-known syslog(3) symbolic names\n(lowercase): emerg, alert, crit, err, warning, notice, info, debug.\"\nHINT: Keep a copy of /sbin/init from\nsysvinit\npackage in case of rescue (so you can use init=/sbin/init.sysvinit in cmdline)!\n# cp -av /sbin/init /sbin/init.sysvinit <--- Before installing systemd-sysv package\nSee also\nhttps://fedoraproject.org/wiki/How_to_debug_Systemd_problems\nKernel debug without systemd debug in Jessie\nUsing the old \"debug\" kernel parameter in Jessie will turn on systemd debug logging as well as kernel debug logging. To get the old behaviour, do not use \"debug\", instead use the kernel parameter \"loglevel=7\".\nBugs and Bug-Tracking-Systems\nUpstream issue tracker\nDebian bug tracker\nUsertagged bugs in Debian BTS\nFor known bugs please see topic \"Known Issues and Workarounds\"\nKnown Issues and Workarounds\nShared bind mounts\nThe default behavior of bind mounts changes under systemd. The Linux kernel makes bind mounts of anything below / PRIVATE. Systemd changes this to SHARED.\nThus, when you do this:\nmount --bind / $CHROOT\nmount --bind /dev/ $CHROOT/dev\numount $CHROOT/dev\nthen /dev will be unmounted in your base/parent system\nas well\n!\nWhat you can do now instead, is to:\nmount --bind --make-rslave / $CHROOT\nmount --bind --make-rslave /dev/ $CHROOT/dev\nthis will propagate mount changes (also mount options) in the base/parent system into the $CHROOT but not from the $CHROOT back to the parent.\nThe rationale for the change of the default behavior can be found in bug\n739593\n, particularly in\nLenart's comment\ntherein.\nSSH session doesn't cleanly terminate on reboot/shutdown\nIf you happen to reboot/shutdown remote machine over\nssh\nyou may find out that your session isn't terminated properly, leaving you with the non-reacting terminal until a long timeout has been reached. There was bug\n751636\nabout it. A workaround to this problem was to install:\napt-get install libpam-systemd\nwhich would terminate the\nssh\nsession before the network was dropped. Please note, that that would require\nPAM\nto be enabled in\nsshd\n.\nMissing startup messages on console(tty1) after the boot\nWith\nsystemd\nconsole(tty1) is handled differently and if you used to check it to see how did your boot go now you'll see only couple of non-informative lines.\nTo be able to get full transcript of the system boot on your console you need to perform two steps.\n1. Add to the kernel options\nsystemd.show_status=1\n, for example via\n/etc/default/grub\n:\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet systemd.show_status=1\"\nand run\nupdate-grub2\n.\n2. Create file\n/etc/systemd/system/getty@tty1.service.d/noclear.conf\nwith the content:\n[Service]\nTTYVTDisallocate=no\nto disable clearing of the terminal on\ngetty\ninvocation.\nVirtual and serial console changes\nThose used to change\ninittab\nto enable/disable virtual or serial consoles will notice that that file is gone from clean installs. This is all managed through systemd directly now. For example, you can enable a serial console on\nCOM1\nwith:\nsystemctl enable serial-getty@ttyS0.service\nsystemctl start serial-getty@ttyS0.service\nSo ... wouldn't it be better to, rather than put kernel command line and/or GRUB bits here that aren't systemd\nspecific, instead link to somewhere else where they're better and more authoritatively documented on Debian's\nwiki ... if that exists ... or when it comes to exist?\nHowever, it is generally preferable to add\nconsole=ttyS0\non the kernel commandline, since this also enables kernel output on reboots. For, e.g. GRUB, this is done by adding the following to\n/etc/default/grub\n:\nGRUB_CMDLINE_LINUX=\"console=ttyS0\"\n... and running\nupdate-grub\n. This will take effect only on the next reboot, however.\nNote also that Linux supports multiple consoles for output - but only one for input - the last named (or default if none named)\nfrom the kernel commandline specifies which is used for input, and all are used for output.  E.g. for GRUB:\nGRUB_CMDLINE_LINUX=\"console=tty0 console=ttyS0\"\nThat will, after running\nupdate-grub\nand rebooting, have console input from /dev/ttyS0 and output to both that and /dev/tty0\ndevice.  Note also that serial parameters can also be specified, e.g.:\nGRUB_CMDLINE_LINUX=\"console=tty0 console=ttyS0,9600n8\"\nOrphaned processes\nBecause it manages user sessions (taking over the role of X or other components), systemd may slightly change how processes survive a logoff.  By default, when X shuts down all processes should exit and systemd will clean up the session, but there are some corner cases where certain processes don't cleanup after themselves properly.\nYou can configure how systemd manages leftover processes with the\nKillUserProcesses=\nparameter in\nlogind.conf\n. By setting this to\nyes\n, processes will be forcibly killed when the session terminates. Note that this will break tools like\nscreen\nor\ntmux\n, unless they are configured to run under a distinct\nuser@.service\nunit and if\nenable-linger\nis set to\nyes\nin\nloginctl\n. A simple way to do this on the fly is to run the program in a \"transient scope\", using\nsystemd-run\n:\nsystemd-run --scope --user screen\nNow, normally sessions should cleanup after themselves, and such issues should be fixed without having to revert to the\nKillUserProcesses=yes\nsledgehammer.  A good way to list the affected processes is to group them by \"control group\", with the\nsystemd-cgls\ncommand:\nsystemd-cgls\nSome known misbehaving applications:\nparcimonie\n-\n849016\nredshift-gtk\n? - workaround: run as a systemd service,\n827098\nxplanet\nWhere to get help?\nSystemd is a young project with a strong emphasis on solving problems in a distribution agnostic manner.\nmailing-list @\nhttps://lists.freedesktop.org/mailman/listinfo/systemd-devel\n#systemd\n(irc.libera.chat)\nDebian specific channels include\nmailing-list @\nhttps://lists.alioth.debian.org/cgi-bin/mailman/listinfo/pkg-systemd-maintainers\n#debian-systemd\n(irc.oftc.net)\nSeveral other distributions are using systemd\nFedora systemd wiki\nGentoo systemd wiki\nopenSUSE systemd setup instructions\nUbuntu systemd wiki\nArch systemd wiki\nInstalling without systemd\nSee\nInit\n, under \"Changing the init system - at installation time\"\nDebian Resources\nsystemd\n- This page\nRelease Goals\n-\nIntegration\n-\nPackaging\n-\nDiscussion\n-\nHelping\n-\nDebian package\nOther Resources\nUpstream Homepage\nsystemd.directives(7)\nIndex of configuration directives\nsystemd.index(7)\nList all manpages from the systemd project\nThe systemd for Administrators Blog Series\nby Lennart Poettering may be suitable as an introduction. It was published in 2010-2013, so a bit outdated.\nslides\nand\nvideo\nabout simple security features that can be enabled in service files\na nethack systemd comic strip\nthorough runbook for Debugging Systemd Services\nCategoryPermalink\nsystemd  (\nlast modified 2025-01-19 12:20:54\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/systemd"}}
{"text": "FilesystemHierarchyStandard - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nFilesystemH...chyStandard\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nFilesystemHierarchyStandard\nTranslation(s)\n:\nEnglish\n-\nItaliano\n-\nCastellano\n-\nPortuguês (Brasil)\n-\nУкраїнська\nFile System Hierarchy Standard\nThe\nFilesystem Hierarchy Standard\n(FHS) defines the directory structure and directory contents in Linux distributions.\nDirectory structure in Debian\nIn addition to the directory structure described in the FHS, the following directories can be found on Debian systems:\n/lost+found/\n: File fragments that were recovered during the previous\nfsck\nExternal links\nhttps://www.debian.org/releases/stable/amd64/apcs02.en.html\n- Debian Directory tree overview\nhttps://wiki.linuxfoundation.org/lsb/fhs\n- The FHS Linux Foundation wiki page\nhttp://refspecs.linuxfoundation.org/fhs.shtml\n- FHS 3 Specification Series\nhttp://www.debian.org/doc/packaging-manuals/fhs/\n- Debian mirror of the FHS\nCategorySystemAdministration\nCategoryStorage\nFilesystemHierarchyStandard  (\nlast modified 2024-01-21 19:35:19\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/FilesystemHierarchyStandard"}}
{"text": "Permissions - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nPermissions\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nPermissions\nTranslation(s)\n:\nEnglish\n-\nItaliano\nDiscussion\nContents\nIntroduction\nSection 2: UNIX permissions explained\nHuman-readable form\nThe defaults for new files and directories\nSection 3: Modifying file permissions\nSection 4: Example scenarios involving chmod\nCase 1: Family photos\nCase 2: Software and data files for your department at work\nCase 3: Classified files\nGroup file sharing scenarios and the limits of basic UNIX permissions\nAccess Control Lists in Linux\nDefault (inherited) ACL\nAppendix: Some hints\nSetting default umask\nSystem-wide umask configuration\nPer-user umask settings\nSee also\nhttps://www.debian.org/doc/manuals/debian-reference/ch01.en.html#_filesystem_permissions\n- Filesystem permissions in\nDebian Reference\nhttps://www.debian.org/doc/manuals/debian-handbook/sect.rights-management.en.html\n- Managing Rights in\nThe Debian Administrator's Handbook\nIntroduction\nOne of the key factors to\nsystem security\nis access permissions control. All modern operating systems support this feature. It allows file owners to restrict who can read, write, execute and otherwise change files, running processes and other parts of the system.\nLinux, as every UNIX-like OS, has a built-in file permission control system. It assigns the following attributes to every file on its\nfile system\n:\nowner\n- user who owns the file, has unlimited control over it and can change other file attributes\ngroup\n- group the file belongs to\nUNIX permissions\n- a set of rules defining who can do what with the file\nTo see what user and group you are, run\nid -a\nin a\nShell\n:\nuid\n: your user name and id\ngid\n: your primary group name and id\ngroups\n: all other groups your user belongs to.\nIf a particular access permission is granted to one your groups, then it will be also be granted to you.\nYour\neffective\ngroup id (taken into account when creating files and directories, as explained below), is most of the time set to your primary group id.\nPage refactoring in progress below this point\nUsed terms:\nfile system\n- an on-disk structure holding descriptions of files (such as the attributes mentioned above, file modification date etc.) and the files' contents themselves. File systems are contained in disk\npartitions\n(also called\nslices\n). Some of the most popular file systems today are ext4, xfs and btrfs. If you run Debian, you probably use\next4\n.\nWorth mentioning is the fact that directories ('folders') are also considered files, simply containing other files. Therefore, permissions apply to directories, too.\nuser group\n- in UNIX-like systems, every user is assigned to some group(s). Users in the same group may share rights, for example a file's permissions may be set so that all users in a group can modify its contents.\nSection 2: UNIX permissions explained\nHaving learnt the theory, it's time to pass on to practice - what do UNIX file permissions look like and how to use them?\nFirst of all, let us examine the permissions of an example file. By issuing the following command in Linux console or a terminal emulator:\nstat /etc/hostname\nyou will see a list of file's attributes. It includes file type (it could also be a directory, a symlink, etc.), file size et cetera and a line like the one quoted below, which is the item of our interest:\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\nThis file is owned by the\nroot\nuser (system administrator) and belongs to the\nroot\ngroup. Before the slash, numeric user IDs are shown - that's the way they are stored in the file system. The user and group names are retrieved by looking up the numeric IDs in the password and group databases.\nThe\nAccess\nfield contains an octal number and its human-readable representation (though some people consider the numeric one to be more readable). It is crucial to know what the permission number means.\nIt consists of four digits, ranging from 0 to 7. For now, we shall skip the first one and focus on the last three, as they are used most commonly on every system. In our example, those are 644.\nEach digit may be a sum of 4, 2 and 1, but not every component has to be included, giving a possible range from 0 to 7. Below is the meaning of the sum components, with Subject being user, group or others, as discussed below.\n4 - read permission. Subject is allowed to read the contents of the file or list the content of a directory.  Directory content is more than the names of the files, sub-directories, and the other filesystem objects held within each directory; it also includes other meta-information such as whether the filesystem object is a file or directory, the permissions associated with the object, and so forth.\n2 - write permission. Subject may modify file content. With directories, it allows the subject to modify what's recorded as being in the directory.  This means being able to create files within the directory, or equivalently, move files into the directory; delete files from the directory, or equivalently, move files out of the directory; and, because the directory is where there's a record of the directory content, to modify the permissions of each file or sub-directory contained in the directory.\n1 - execute permission. Subject may execute the file.  Any file may be marked executable; when the content won't execute an error is reported at runtime.  Likewise any file may have execution privileges removed; files with executable content but no permission to execute can't be run. In the case of directories, execute permission lets the subject traverse through the directory into sub-directories.  Note that directory traversal does not require read permission.  See the note on path handling below.\nTherefore, number 5, for example, would mean: a permission to read and execute, but not to write.\nThe digits define respectively: owner, group and others' permissions. Therefore, we can see that, in our example, file owner (root) may write to the file and read its contents, while group 'root' and other users (not being root nor a member of group 'root') are given the right to read the file.\nNow, compare it to file permissions of\n/etc/shadow\n(use 'stat' again). This file has 0 as the third meaningful digit, so users not being root nor in group 'shadow' may not even read the file. You can easily confirm that by running a text editor and trying to open\n/etc/shadow\n- you, as a regular user, should not be allowed to see its contents as it contains system-wide passwords (and this is beyond the scope of this little How To).\nHuman-readable form\nSeveral system tools and graphical programs recognize the idea of a human-readable form - a string of 10 consecutive characters. To see an example, issue the command below:\nls -l /etc\nThe -l flag tells\nls\nto display file permissions in the left column of output.\nThe full sequence that you might encounter is as follows (although you probably won't find such files in\n/etc\n):\n-rwxrwxrwx+\nNow, let's divide this into parts. The first character defines node type, which is\n-\nfor normal file,\nd\nfor a directory,\nl\nfor symbolic link,\nc\nfor a character device,\np\nfor a pseudo-terminal and\nb\nfor a block device. You will find files, directories and links commonly throughout the filesystem, while devices and pseudo-terminals should only appear in\n/dev\n.\nThen we have 3 chunks, 3 characters each: rwx rwx rwx. They directly correspond to respective digits of permissions: if the permission is enabled, you get a letter, and if not, you get\n-\nin place of that letter. In this case, the first\nrwx\nmeans 7 to owner, the second is also 7 for owner's group, and the third is the world (others) permission. Thus, for example, 640 translates to:\nrw-r-----\n(rw- for owner, r-- for group, --- for others).\nThe last column is the\n+\nsign. You are unlikely to see it while listing a directory now (it will appear empty), but it means that extended access rules are in effect, so the file's real permissions are not only what the file access mode says - you can read about ACL below in this howto.\nA note on path handling\nTo access any path in the filesystem, the user (which the particular process is running as) needs at least execute privilege for all its parent directories. Therefore, if you try to access an\nexample file\n/etc/security/limits.conf\n, even though it has a mode of\n0755\n(for the sake of example), it does not necessarily mean you are free to read it. To read the file, you have to be able to 'execute' all of its parent directories, so you need execute permission on\n/etc\nand\n/etc/security\n. If either\n/etc\nor\n/etc/security\nhas permissions set so that you are not allowed to execute it (1), then reading /etc/security/limits.conf will fail. This rule applies anywhere in the filesystem.\nThe defaults for new files and directories\nThis section is included primarily for reference and to aid understanding.  Default permissions and group assignment are not often changed so it is safe to skim over this section and come back to re-read it for more detail should the need arise.\nThe permissions associated with newly created files and directories are, for the most part, determined by something called a umask.  The umask is a 3 digit octal number and often prefixed with extra 0 to make it clear that it is a base 8 number. The value is subtracted from\n0777\nto produce the default permission associated with objects newly created in the filesystem.  The umask of a 'stock' Debian system is\n0002\nor\n0022\n(depending on whether\nuser private groups\nare configured). For example\n0022\nmakes the default permissions be\n0755\n-- the owner has all permissions, the group read and execute but not write, and everybody else can read and execute but not write.  One would then expect all newly created files to be marked executable but this is prevented because the system call that creates files defaults to creating files that are not executable.  Directories on the other hand do have their execute bit set, umask permitting, and so by default can be traversed by all.\nThe shell\numask\ncommand can be used to display the current umask (without any arguments) or to change its value, see\nbash-builtins(7) § umask\n.\n$ umask\n0022\n$ (umask 0077; touch private.log)\n$ echo 'default' >default.log\n$ ls -l\ntotal 4\n-rw-r--r-- 1 test test 8 Jul 30 10:24 default.log\n-rw------- 1 test test 0 Jul 30 10:24 private.log\nSpawned process inherits umask value from its parent and may change it using the\numask(2)\nsystem call.\nSee the\nSetting default umask\nsection below how to configure default umask.\nThe user uid (user id number) associated with a newly created file or directory is that of the running process effective uid.  In most cases this is the uid of the user who logged in and started the process.\nThe group associated with a newly created file or directory is the effective group of the running process.  This is normally the group named with the username of the logged in user, but can be manually changed (along with the \"real\" group) on a per-process basis with the\nnewgrp\ncommand although this is rarely done.\nThe first of the 4 octal digits which represent permissions contains the\nsetuid\nand\nsetgid\nbits.  These can be used to override some of the defaults described above but it is not worth getting into details other than to note that the\nuser private groups\nproject collaboration idiom (see below) depends on the behavior of the\nsetgid\nbit.\nSection 3: Modifying file permissions\nThis section shows, using an example, the very basic usage of\nchmod\ncommand. Chmod is one of sysadmin's best friends and the standard tool for manipulating file permissions in various Unices (also works with *BSD and Solaris!). Let's begin...\nFirst of all, create a file for demonstration purposes. In the example, I will be using name\ntestfile\n. Commands below are to be executed in a terminal emulator or Linux console. You can just copy and paste, and see how it works.\n# first of all, create the file using touch command (see 'man touch' for details)\ntouch testfile\n# now, let's see its permissions\nstat testfile\n# modify the file so that group members and other users can write to it\nchmod 666 testfile\n# see the new permissions\nstat testfile\nThere is a special case: to clear special bits with directories, you must mention the file mode bits explicitly (in symbolic mode) or by operator numeric mode (in octal description) (see more with: 'info coreutils, section 27.5 \"Directories and the Set-User-ID and Set-Group-ID Bits\")\nHave the file permissions changed? You can verify that it actually worked by starting a new session and logging on to another user account, or issuing\nsu\nusername\n.\nIf you only have one user account, create a new one for testing:\nsu\n(your root password here, to log on to root account and add a test user)\nadduser demo\n# you can remove this user when you've finished: deluser demo\nNow, log on to demo, open\ntestfile\n(in your regular user's home directory) and type something in it. Save, and then check with your own user's account that it contains whatever you may have written. Voila!\nYou may now want to check it with various different permissions. Try chmod with arguments like 644, 640 and so on.\nSection 4: Example scenarios involving chmod\nYou now know how to change file permissions. However, how can they be useful in real life besides letting your buddy leave you a random message in your own text files?\nCase 1: Family photos\nSituation:\nYou store family photos in directory\nPhotos\non your user account. Several other family members use the computer and you want them to be able to access the photos.\nQuestion:\nHow to set directory permissions so that other users can see your files and their content?\nAnswer:\nSet the directory to 755 and all files under it to 644:\nchmod 755 Photos\n# Photos/* means all files in Photos directory\nchmod 0644 Photos/*\nCase 2: Software and data files for your department at work\nNote on below:\n~\nmeans your home directory.\nSituation:\nIn your home directory you have a program in\n~/AppSoftware/program.bin\n. It stores your department-specific data files in\n~/OurData\n. The system operator has assigned you and other people in your department a user group 'mydept'.\nYou want other people from your department to be able to run the provided software and to write the data files. At the same time, other people from outside the group\nshould be allowed\nto run the software\nbut not\nto modify the data. For simplicity's sake, we skip things like logging who added/removed what in terms of data (logging is a necessity in real life), focusing only on appropriate permissions.\nQuestion:\nHow to allow execute access for a group to one file (program binary) and read-write access to other directory for the same group, while denying world (other users) access?\nAnswer:\nIn our example, this would be:\n# below: -R flag, affects the directory and files/subdirs inside\nchmod -R 0755 ~/AppSoftware\nchmod -R 0770 ~/OurData\nIn case files have a wrong group attribute set, you can correct it by first running\nchgrp -R\nmydept files\n, where 'mydept' is the group name, 'files' is file path, and -R switch tells chgrp to run recursively (see above code example). Chgrp changes files' group to the one given.\nCase 3: Classified files\nQuestion:\nHow to protect files that are to be kept secret?\nAnswer:\nA very basic protection can be achieved by chmodding the sensitive files/directories to 0600. However, remember that the system administrator (root) can still access them, regardless of set file permissions. Therefore, besides locking down file permissions, it is\nhighly advisable\nthat you encrypt the files using strong encryption software (try OpenPGP encryption via programs like KGpg, or see ccrypt - symmetric cryptography).\nGroup file sharing scenarios and the limits of basic UNIX permissions\nExamples above show the usefulness of UNIX file permissions. You can grant users from your group access to your files, expose them to the whole world or have them only for yourself. However, there are use cases in which this access control model is not enough.\nAssume that you are on a large system (perhaps a server) and, together with several dozen users you are members of group 'users'. Now, you want to make some of your files available to just one of them so that the others can not read it. How can UNIX permissions benefit you?  You could use the\nuser private groups\ndirectory sharing idiom; a common solution to this problem.  But the user private groups idiom pushes the UNIX permission system to its limits and there are cases, even simple file sharing cases between 2 people, where the idiom is simply not suitable.\nWhen the limits of basic UNIX file permissions are reached it is time to make use of...\nAccess Control Lists in Linux\nAccess Control Lists (called ACL) are an extended means of defining access rights to files and objects. They allow you to specify file permissions in a more fine-grained way, assigning any user or group (besides owner and file's set group) different privileges. For instance, you may share a file with just one specific user, no matter what group they are in.\nHow to make use of this new, powerful feature?\nFirst, make sure your system supports ACL\n. Several criteria must be met before you can enable ACL for your files.\nCheck your kernel version. If it is anything later than 2.6.18, then chances are you already have ACL support built-in. (I'm not quite certain at which version Debian kernels received the ACL patch).\nThe next thing is\nacl\npackage, required for ACL attribute manipulation. You can install it by issuing:\n# if you are not logged on as root, use 'su' first\napt-get install acl\nAlternatively, you can use Synaptic package manager, or another package manager, to get and install the package. If you are not the system administrator, ask your sysadmin to enable ACL on your machine.\nOnce you have installed\nacl\n, you can try and see if your file system supports it. Example command (I assume that file 'testfile' exists):\nsetfacl --modify user:demo:5 testfile\nIf setfacl complains about an error, you probably need to mount your filesystem with\nacl\noption. Assuming that the filesystem 'testfile' is located on is\n/\n, execute the below as\nroot\n:\nmount -o remount,acl /\nTry\nsetfacl\nagain. If successful, a call to:\ngetfacl testfile\nshould show, among others, a line like this:\nuser:demo:r-x\nHere,\nrx\nmeans 'read, execute' permission, which is equivalent to\n5\n. To see if Access Control Lists work, set the file permissions on testfile to 700 using chmod and try to open it from 'demo' user account. If successful, ACL did override UNIX permissions indeed. Your file system is now ready for granular access control with ACL!\nNote: To enable ACL permanently for certain filesystems, you should include\nacl\noption in /etc/fstab. Please refer to fstab(5) manual page for instructions.\nExample uses of setfacl to manage file permissions\nsetfacl -R -m user:josh:6 filedir   # sets read-write permissions for josh on filedir and all its contents\nsetfacl -m group:junior-sys-admins:4 /var/log/apache2/error.log    # let group members of junior-sys-admins read Apache2 error log file\nsetfacl -m user:evilcraig:0 my_notes.txt    # prevent user evilcraig from accessing my_notes.txt\nDefault (inherited) ACL\nNote: a bug in coreutils commands cp and mv limits the scope of the below to pure file creation, e.g. with touch: with copy and move, the \"Default mask\" of the target parent directory won't be inherited as the \"Access mask\" for the copied/moved file/directory:\nhttp://debbugs.gnu.org/db/85/8527.html\nDefault ACL are an invaluable tool when making a directory that you want to share for reading or writing among users. This hint is inspired by this thread on the Debian forums:\nhttp://forums.debian.net/viewtopic.php?f=10&t=53591\nDefault ACL are access control entries that get inherited by all sub-items of a directory (recursion deeper is allowed!). Thus, if you want to create a directory for\nbob\nand\nfred\nso that both can work on each other's files, the below should suffice (notice the -d flag to setfacl, it sets a default ACL):\nmkdir common_workspace\nsetfacl -m u:bob:7 common_workspace\nsetfacl -d -m u:bob:7 common_workspace\nsetfacl -m u:fred:7 common_workspace\nsetfacl -d -m u:fred:7 common_workspace\nNote to the above: a default ACL is inherited by all child nodes as an ACL entry and default ACL, but a default ACL on its own\ndoes not take any action permission-wise\n- hence the double command. The first call gives user 'bob' the right to write, read and execute the directory, and the second one sets up the default ACL which will be inherited.\nNow, whenever a file gets created, it retains its original owner and group, but should automatically get assigned the above ACL. This is, for example, useful when you have users co-working on website development. You can use Apache or PHP running as www-data, write a script to change file ownership upon creation to www-data (inotify helps!), and all files are still writable by bob and fred, your Web developers.\nAppendix: Some hints\nOn Debian systems, every user is traditionally assigned their own group. File sharing may be accomplished by adding one user to other's group, as shown below (only to be done as root):\nadduser me otherguy # adds user 'me' to group 'otherguy'\nThen, 'otherguy' can just set their files to 07\n5\n0 or whatever permissions they want you to have. However, this is the old-fashioned approach to granular file permissions and should be avoided whenever possible in favour of\nuser private groups\nor ACLs.\nKonqueror (at least in Debian Squeeze) supports ACL out-of-the-box when filesystems are mounted with\nacl\noption. It allows for easy, graphical management of extended access rights, similar to that of Microsoft Windows.\nSometimes you have to mount a filesystem that does not support ACL. For example, a NFS volume exported by a central storage solution, or an userspace zfs diskset. In these situations, you can try one simple solution:\nhttp://cintrabatista.net/nfs_with_posix_acl.html\nYou can find a wonderful but pretty old (still current, though) ACL guide here:\nhttp://www.vanemery.com/Linux/ACL/linux-acl.html\nThat's all! Have fun and thanks for bearing with me.\nSetting default umask\nhttps://www.debian.org/doc/manuals/securing-debian-manual/ch04s11.en.html#idm1514\n- Setting users umasks in\nSecuring Debian Manual\nUmask affects\npermissions for new files and directories\n.\nExamples of wide spread values:\n022\nis the default for Debian 12 bookworm and earlier.\nIt is reasonable balance for cooperation with other users.\nFiles may be read and executed by other users, but they can not modify content.\nUnfortunately users have to explicitly make files group-writable inside shared directories.\n002\nis suitable for active usage of shared directories.\nIt requires configuration of\nuser private groups\n(enabled by default) and dangerous for users having no own group.\nIf user primary group is not their private group then all members of that group (e.g. a whole department) have chance to modify almost any user's file, in some cases it applies to whole home directory.\nPay attention to\nsecurity consideration\nand\nCAUTION\nsections of the article on user private groups.\nSince Debian Trixie it is default for users with proper primary group and\n022\notherwise.\nDebian 12 bookworm requires explicit\npam_umask\nconfiguration with\nusergroups\noption (see below).\n077\nor\n007\nmay be appropriate for users seeking privacy when other users should not be able to read files, maybe besides a specific group.\nCiting\n/etc/login.defs\n: \"There is no One True Answer here: each sysadmin must make up his/her mind\".\nYou may find some links to discussions in\nDebate/umask\n.\nSetting umask is similar to configuring\nEnvironmentVariables\nin some aspects and adding\numask 077\nto\n~/.profile\nor\n~/.bashrc\nmay not be enough despite you may notice this recipe in various guides.\nIn the past umask for all users were set in the\n/etc/profile\nfile, but it was changed in 2010 (\n#583967\n), so use PAM instead.\nSystem-wide umask configuration\nBe careful if you decide to change default umask value. Restrictive value may make files or directories not readable or writable by users who should have access. The worst case is broken applications that could not read config files. The opposite case is group write bit not cleared by umask combined with inappropriate default group.\nSystem administrator often create files that must be world readable.\nPay attention that umask for root is overridden by 022 for all ways to acquire privileges:\nsu\nwith and without\n-\n/\n--login\noption,\nsudo\nwith various options like\n-i\n/\n--login\n,\nsudoedit\n,\nssh\n, virtual terminal.\nSetting\numask 022\nin\n~/.profile\nor\n~/.bashrc\nis not enough since e.g.\nsudo\nmay execute commands directly with no shell involved.\nWith restrictive umask explicit\nchmod\nmay be required to make files accessible for e.g. web server.\nSince Debian 12 Bookworm home directories for users are created with 0700 permissions by default, so most of user files are protected despite default permissive umask.\nPermissions of earlier created directories may be changed in the same way.\nAs an alternative to umask it is not ideal. Files created in\n/tmp\nare not protected unless every application explicitly sets umask or permissions. In some cases home directory must be traversible for other users.\nExamples are\n~/public_html\nfor Apache and unprivileged LXC containers.\nPossible solutions are\naccess control lists\nor world execute bit without read one for the home directory.\nSystem-wide umask is configured in the\n/etc/login.defs\nfile.\nRead comments there and\nlogin.defs(5)\n.\nUMASK           077\nIn Debian 12 Bookworm and earlier releases,\npam_umask(8)\nis missing in PAM configuration. As a result, the value specified in\netc/login.defs\nis not applied. Because of this, umask is not reset when a user executes\ne.g.\nsu -\nto run some commands as administrator.\nThis group of bugs is fixed in Trixie (see e.g.\n583958\n).\nTo fix this locally, check that the\n/etc/pam.d/common-session\nand\n/etc/pam.d/common-session-noninteractive\nfiles contain\nsession optional pam_umask.so usergroups\nand add the line otherwise.\nIn Trixie\nusergroups\nmay be omitted, it is default set through a build option.\nConsider setting\nHOME_MODE\nin\n/etc/login.defs\nas well since otherwise\nUMASK\naffects permissions for home directories created by\nuseradd(8)\n.\nIn Debian however the recommended tool is\nadduser(8)\nthat ignores\nlogin.defs\nand reads\nadduser.conf(5)\ninstead.\n(With default settings\nadduser\nand\nadduser\ncreate home directories with different permissions.)\nPer-user umask settings\nDepending on login type and the way a particular process is started the following options may be applied:\numask 007\nshell built-in placed in\n~/.profile\nor an equivalent file for virtual terminal or ssh login. In the case of graphical login some\ndisplay managers\n, e.g.\nSDDM\nmay read this file as well.\numask 007\nshell built-in in an\nXsession\nfile, e.g.\n~/.xsessionrc\nfor graphical login and X11 session.\nUMask=007\nsystemd directive from\n[Service]\nsection, see\nsystemd.exec(5) § PROCESS PROPERTIES\nfor processes started by systemd. It is applied to some processes for any login type. Some desktop environments may start all application as or from services that belong to systemd user session.\nsystemd-homed(8)\nhas its own way to specify user's umask.\nHave in mind that umask value may be preserved by\nsu\nand\nsudo\nunless\npam_umask\nis enabled, see\nSystem-wide umask configuration\n.\nFor processes started through system user session system administrator may create override files for specific UID's, e.g\n/etc/systemd/system/user@1000.service.d/umask.conf\n(\nsource\n)\n[Service]\nUMask=0007\nand run\nsystemctl daemon-reload\nA user who cannot modify system files may drop the same file into\n~/.config/systemd/user/service.d/\nand it will be applied to all services in their user session;\nsee\nsystemd.unit(5) § EXAMPLES\n.\nIt is necessary to log out and log in again to make this change effective. It is not enough\nsystemctl --user daemon-reload\n, in addition running application launcher should be restarted as well.\nUse\nUMask=0077\nif the user does not have its private user group.\nSee also\nDebianSecurity\nDebianSecurity/AdvisoryCreation\nUse Aptitude to restore an installed package permissions to their default\nSecurityManagement\nTeams/Security\nCategoryCommandLineInterface\n|\nCategorySystemSecurity\n|\nCategorySystemAdministration\n|\nToDo\n: refactor\nPermissions  (\nlast modified 2024-08-01 14:12:17\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/Permissions"}}
{"text": "SSH - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nSSH\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nSSH\nTranslation(s)\n:\nDeutsch\n-\nEnglish\n-\nFrançais\n-\nItaliano\n-\nEspañol\n-\nPortuguês (Brasil)\nContents\nIntroduction\nInstallation\nInstallation of the client\nInstallation of the server\nConfiguration files\nRegenerating host keys\nRemote login\nWith password\nUsing shared keys\nKeys management\nUsing GUI\nSecuring\nSSH Server\nGood practices with SSH Server\nConfiguration Options\nExternal Utilities\nSSH Client\nGood practices with SSH Client\nAdditional Functions\nView files in GUI\nAdditional Commands\nscp\nsftp\ntext mode\ngraphical mode\nclusterssh\nssh-agent and ssh-add\nkeychain\nssh-askpass\nlibpam-usb\nRemote commands\nSSH into Debian from another OS\nGood practices of SSH usage\nTroubleshooting\nOpenSSL version mismatch. Built against 1000105f, you have 10001060\nSSH hangs\nResolution with IPQoS 0x00\nResolution with netcat\nKeep SSH connection alive\nFor Debian 7.x server\nSee also\nToDo\n: merge (and translate) this page and the french one (more complete)\nIntroduction\nSSH\nstands for\nS\necure\nSh\nell and is a protocol for secure remote login and other secure network services over an insecure network\n1\n.\nSee\nWikipedia - Secure Shell\nfor more general information and\nssh\n,\nlsh-client\nor\ndropbear\nfor the SSH software implementations out of which\nOpenSSH\nis the most popular and most widely used\n2\n.\nSSH replaces the unencrypted\ntelnet\n,\nrlogin\nand\nrsh\nand adds many features.\nIn this document we'll be using the OpenSSH command suite, it will also be assumed that the following two variables are defined:\nremote_host=<the remote computer>\nremote_user=<your user name on $remote_host>\nSo, if you want to use the recipes below, first set these variables to the remote computer name and the user name on that remote computer. Then cut and paste of the commands below should work. remote_host may also be an IP-address.\nInstallation\nInstallation of the client\nNormally the client is installed by default. If not it suffices to run as root:\napt install openssh-client\nInstallation of the server\nThe server allows to connect remotely and gets installed by running as root:\napt install openssh-server\nConfiguration files\nThe main configuration files are in the directory\n/etc/ssh\n:\nssh_config\n: client configuration file\nsshd_config\n: server configuration file\nStarting with Bullseye, configuration files will also be read from the following subfolders :\n/etc/ssh/ssh_config.d/*.conf\n: client configuration file\n/etc/ssh/sshd_config.d/*.conf\n: server configuration file\nThese have been enabled with the\nInclude\nparameter in ssh_config and sshd_config. Making changes locally using these directories can ease configuration management, and avoid issues with upgrades that make changes to package managed configuration files.\nIn addition the\n/etc/ssh\ndirectory contains the private/public key pairs\nidentifying your host :\nssh_host_dsa_key\nssh_host_dsa_key.pub\nssh_host_rsa_key\nssh_host_rsa_key.pub\nSince OpenSSH 5.7\n3\n, a new private/public key pair is available:\nssh_host_ecdsa_key\nssh_host_ecdsa_key.pub\nSince OpenSSH 6.5\n4\n, a new private/public key pair is available:\nssh_host_ed25519_key\nssh_host_ed25519_key.pub\nRegenerating host keys\nrm /etc/ssh/ssh_host_*\ndpkg-reconfigure openssh-server\nRemote login\nWith password\nIf you want to login to $remote_host as user $remote_user simply type\nssh $remote_user@$remote_host\nand then type in your password.\nIf the usernames on the local and the remote computer are identical, you can drop the $remote_user@-part and simply write\nssh $remote_host\nIf this is the first time you login to the remote computer, ssh will ask you whether you are sure you want to connect to the remote computer.  Answer 'yes' after you verified the remote computer's fingerprint, type in your password, and ssh will connect you to the remote host.\nUsing shared keys\nOne of the functions of ssh is using a pair of private/public keys to connect to a remote host. Also known as\nSSH keys\n. This method allows you to login to a remote host without typing your password every time. To do this you must generate a pair of private/public keys on your local machine and deposit the public key on the remote host.\nTo generate the key, use the program ssh-keygen as follows\nssh-keygen -t rsa\nThis program generates a pair of private/public keys in the directory ~/.ssh. The program first asks for the destination files for the keys, by default located in ~/.ssh.  Afterwards a passphrase is requested.\nNote: We recommend not to leave the passphrase empty. An attacker who gets hold of your private key can otherwise connect to the hosts where you deposited you public key since the passphrase is empty. Choose a long and complex passphrase.\nYour private key is id_rsa (don't give it to someone else), your public key is id_rsa.pub.\nYou copy your public key to a remote host with the command\nssh-copy-id\nssh-copy-id -i ~/.ssh/id_rsa.pub $remote_user@$remote_host\nNow you can connect simply to the remote host and the passphase is asked for. Once done, you get connected to the remote host. In case of a new connection the passphrase does not get asked for again during your entire session.\nIf you want more detailed information , read more on\nSetup SSH Passwordless Login\n.\nKeys management\nUsing GUI\nOptionally,\nseahorse\nis a GNOME application which easily manage encryption keys and passwords through an intuitive Graphical User Interface (GUI). Seahorse is able to do various operations. Such as create SSH or PGP keys, configure them, and cache them.\nRead more\n.\nSecuring\nSSH Server\nBy default a SSH server is relatively secure. With the help of some good practices, configuration options, and external utilities it is possible to make it even harder for 'robots' and\ncrackers\nGood practices with SSH Server\nApply\nopenssh-server\nsecurity updates as soon as possible. Which allows to protect against known security holes.\nActivate SSH keys authentication\nonly with passwords/passphrases. Deactivate password only authentication.\nConsider using\nfail2ban\nwhich is a log file monitor that automatically bans an IP address after a predefined number of failed login attempts. Which automatically guards against\nbrute-force attacks\n.\nMore good practices for using ssh at\nhttps://lackof.org/taggart/hacking/ssh/\nMozilla's recommendations on configuring SSH servers and clients at\nhttps://infosec.mozilla.org/guidelines/openssh.html\nConfiguration Options\nOne should edit the file /etc/ssh/sshd_config to change the parameters and then restart the ssh server with\nservice ssh restart\nDeactivate using passwords for authentication (\nPasswordAuthentication no\n).\nDeactivate using the root account (\nPermitRootLogin no\n).\nOnly allow login by certain users or groups (\nAllowUsers\nand\nAllowGroups\n)\nThe options\nAllowUsers\nand\nAllowGroups\ndo not improve the security of a SSH server. But in certain cases their use allows to resist a\nbrute force\nattack a little longer.\nYou can list your current sshd settings with the following command:\nsshd -T | sort\nExternal Utilities\nfail2ban\n: allows to automatically blacklist IPs attempting to\nbrute force\na SSH server with the help of\niptables\n.\ndenyhosts\n: as\nfail2ban\n,\ndenyhosts\nallows to block IP addresses trying to brute force a connection to ssh. But in contrast to\nfail2ban\nit does not use\niptables\n, but the file\n/etc/hosts.deny\n.\nSSH Client\nGood practices with SSH Client\nApply\nopenssh-client\nsecurity updates as soon as possible. Which allows to protect against known security holes.\nUse\nSSH keys\nauthentication. Rather than password authentication.\nAdd\nstrong passwords\n/passphrases to your SSH keys. This reduce risk of\nbrute-force attacks\n.\nAdditional Functions\nView files in GUI\nIn file managers like Konqueror, Dolphin, Krusader and Midnight Commander you can use FISH to view files in a GUI using:\nfish://username@server_name_or_ip\nAdditional Commands\nscp\nscp\nis a command line utility allowing to transfer files between two machines.\nSending a file:\nscp $source_file $remote_user@$remote_host:$destination_file\nCopying a file to the local machine:\nscp $remote_user@$remote_host:$source_file $destination_file\nsftp\n[empty for now]\ntext mode\n[empty for now]\ngraphical mode\n[empty for now]\nclusterssh\n[empty for now]\nssh-agent and ssh-add\nssh-agent\nis a useful utility to manage private keys and their passphrases.  Most desktop environments in Debian will already be setup to run ssh-agent (through systemd user services or /etc/X11/Xsession), so you shouldn't need to start it manually.\n# Check if ssh-agent is running\nenv | grep -i ssh\nYou will still need to tell the agent to manage your keys.\n# List keys managed by the agent\nssh-add -l\n# Add your ssh key\nssh-add ~/.ssh/your_private_key\nWhen a private key is first needed, you are prompted for its passphrase. ssh-agent will then remember the key so that your passphrase doesn't get asked anymore.\nkeychain\nKeychain\n, provided by the package\nkeychain\n, is a shell script allowing to use the ssh agent in multiple sessions of the same computer. In effect after the first start ssh-agent creates a permanent socket allowing the communication with ssh. This socket is referenced only in the environment of the session in which the agent was started. Keychain allows to detect the agent and propagate the access to this agent to other sessions; this allows to use a single instance of ssh-agent per user on a machine.\nssh-askpass\nssh-askpass\nis an utility to simply the question for the password of a private key when using it. Several implementations exist:\nx11-ssh-askpass\n: version for X11\nkaskpass\n: integration of ssh-askpass into the KDE environment\nssh-askpass-gnome\n: integration of ssh-askpass into the Gnome environment\nlibpam-usb\nlibpam-usb\nis an utility (only available up to Debian Jessie) allowing authentication with an USB  stick. This package includes a useful utilty :\npamusb-agent\n. This utility, once correctly configured, allows to load the SSH keys present on the USB stick once it is connected and to unload them when it is disconnected.\nRemote commands\nIf you just want to run one command on the remote computer, you don't need to login. You can tell ssh to run the command without login, for instance,\nssh $remote_user@$remote_host 'ls *.txt'\nlists all files with extension .txt on the remote computer. This works with single tick quotes '...' as shown here, with double tick quotes \"...\", and without quotes. There may be differences between these three cases, though, not yet documented here.\nSSH into Debian from another OS\nPuTTY\nis a\nterminal emulator\napplication which can act as a client for ssh. It's widely used by Windows users.\nWikipedia has\nComparison_of_SSH_clients\nGood practices of SSH usage\nYou\nmust\nread this:\nhttps://lackof.org/taggart/hacking/ssh/\nThis document sums up many good practices that regular SSH users should follow in order to avoid compromising the security of their accounts (and of the whole machine at the same time).\nConfigure your\n~/.ssh/config\nto send only the right key.\nHost master.debian.org\nUser account\nIdentityFile ~/.ssh/id_rsa\nIdentitiesOnly yes\nTroubleshooting\nOpenSSL version mismatch. Built against 1000105f, you have 10001060\nIf you get an error message like this when starting the\nssh\ndaemon, you need to run:\napt install openssh-server openssh-client\nAlso see\nbug #732940\n.\nSSH hangs\nIssue\nYou are trying to SSH into a remote computer. But during SSH log-in the session hangs/freezes indefinitely. Thus you are not presented with the command prompt. And you are not able to use any SSH commands\nWhen using SSH debug mode the session hangs at this line\ndebug2: channel 0: open confirm rwindow 0 rmax 32768\nPossible cause\nWith some routers behind NAT and when using OpenSSH. During session setup, after the password has been given, OpenSSH sets the TOS (type of service) field in the IP datagram. The router choke on this. The effect is that your SSH session hangs indefinitely. In other words, SSH commands or connections are seldom working or not working at all.\nResolution with IPQoS 0x00\nUntil your router manufacturer fix their firmware. Here is one option to resolve that issue:\nDouble check your\nopenssh-server\nand\nopenssh-client\nversion are 5.7 or more recent. For example the resolution below should work with Debian 7.11 Wheezy or more recent as it comes with OpenSSH version 6.0.\nEdit one of the following two files located at:\n~/.ssh/config\nor\n/etc/ssh/ssh_config\nNote:\nconfig\nfile is per user and\nssh_config\nfile is for all users and system wide. If unsure edit the appropriate user\nconfig\nfile.\nFile content before\nHost *\nFile content after\nHost *\nIPQoS 0x00\nIf you have any Terminal/Console window(s) already open. Fully close all of them. Doing so will close any active SSH sessions.\nNo need to restart OpenSSH or your Debian. Try again to SSH into any remote server. It should work. Done you have successfully fixed that issue\nThanks to Joe and catmaker for this tip\nRelated documentation at\nhttps://www.openssh.com/txt/release-5.7\nResolution with netcat\nWARNING:\nIt is suggested to consider using\nthat other resolution with IPQoS 0x00\ninstead of using netcat/\nProxyCommand nc %h %p\noption. Because\nIPQoS 0x00\nis the official built-in OpenSSH option. Also\nIPQoS 0x00\nis a more direct way to resolve that issue, and potentially more secure option. Because\nIPQoS 0x00\nuses SSH's built in encryption for secure transfers. Compare to netcat's\nnot\nencrypted transfers. Sources:\n1\n2\n. If you choose to use netcat/\nProxyCommand nc %h %p\noption read on.\nAnother option to resolve that SSH hangs issue is to use\nProxyCommand nc %h %p\n. To do so follow the same steps as\nthat above resolution with IPQoS 0x00\n. But replace\nIPQoS 0x00\nwith\nProxyCommand nc %h %p\nKeep SSH connection alive\nFor security reason, by default a SSH connection is automatically closed after a set period of time. But in some cases you want to keep that connection open. Such as cloud storage over SSH connection.\nWARNING:\nBefore activating that keep SSH connection alive option. It is suggested to consider\nsecuring\nboth your SSH Client and SSH Server. Because for example, there is a risk that if your users leave their SSH session open, and their computer unattended and unlocked. Anyone can approach that computer, then exploit that open SSH connection. For example by using the\npasswd\ncommand, and change the password. And thus gain access to the server. In other words, before activating that keep SSH connection alive option, it is suggested to use your best judgment and good security practices.\nFor Debian 7.x server\nSteps to keep SSH connection alive.\nOn the SSH server edit\n/etc/ssh/sshd_config\nfile and add the following at the bottom of that file.\n# Keep client SSH connection alive by sending every 300 seconds a small keep-alive packet to the server in order to use ssh connection. 300 seconds equal 5 minutes.\nClientAliveInterval 300\n# Disconnect client after 3333 \"ClientAlive\" requests. Format is (ClientAliveInterval x ClientAliveCountMax). In this example  (300 seconds x 3333) = ~999,900 seconds = ~16,665 minutes = ~277 hours = ~11 days.\nClientAliveCountMax 3333\nAs\nroot\nuser restart the SSH service:\nservice sshd restart\nPlease note that on recent Debian systems (e.g. Wheezy 7 with current updates as of Nov. 2015), the above command no longer works and returns the error:\nsudo service sshd restart\nsshd: unrecognized service\nHowever, the following works:\nsudo service ssh restart\n[ ok ] Restarting OpenBSD Secure Shell server: sshd.\nSee also\nscreen\n- terminal multiplexer with VT100/ANSI terminal emulation\ntmux\n- alternative terminal multiplexer\nCategoryNetwork\nCategorySoftware\nCategorySystemAdministration\nCategorySystemSecurity\nhttps://tools.ietf.org/html/rfc4252\n(\n1\n)\nhttps://www.openssh.com/users.html\n(\n2\n)\nhttps://www.openssh.com/txt/release-5.7\n(\n3\n)\nhttps://www.openssh.com/txt/release-6.5\n(\n4\n)\nSSH  (\nlast modified 2025-03-01 23:24:27\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/SSH"}}
{"text": "SystemMonitoring - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nSystemMonitoring\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nSystemMonitoring\nTranslation(s)\n:\nEnglish\n-\nEspañol\n-\nFrançais\n-\nItaliano\nWelcome to\nDebian\nsystem monitoring\nThis portal gives a list of resources for monitoring hardwares and softwares.\nContents\nLogging and activity indicators\nMonitoring Network Connections\nMonitoring disk I / O\nMonitoring the system load\nWatching a set of systems\nLogging and activity indicators\nbootchart\n- Graphic generator detailing the boot sequence of the system.\nbootlogd\n- Recording boot messages\nauth.log\n- Authentification logs\nMonitoring Network Connections\nnetstat\n- Monitor active connections on your system\niftop\n- Observe the flows on your network interfaces\ntcpdump\n- Capture communications transmitted over your network interfaces\nwireshark\n- Capture and analyze network traffic\napachetop\n- Realtime Apache monitoring tool\nngrep\n- grep for network traffic\nMonitoring disk I / O\niotop\n- Observe the disk I / O\nMonitoring the system load\nprocps\n-\n/proc\nfile system utilities - a \"pseudo\" file system that provides information about processes. Contains\nfree, kill, pkill, pgrep, pmap, ps, pwdx, skill, slabtop, snice, sysctl, tload, top, uptime, vmstat, w, watch\nhtop\n- Alternative to the traditional\ntop\n. Shows the resource demands and processes\nsaidar\n- Watch the burden simply and concisely (with network and disks)\natop\n- Similar to saidar in the available information (also generates stats for long periods if run in the background via /etc/init.d/atop)\ncpu-x\n- tool that gathers information on CPU, motherboard and more\nstacer\n- GUI for CPU/memory, and other things\nWatching a set of systems\nThese tools are typically used to monitor the overall functioning of a network computer fleet. In addition to your Debian servers, these tools can control most of the time heterogeneous systems. They are sometimes provided with plugins to monitor a particular feature of the system.\nPandora FMS\n- Open source monitoring system\nmunin\n-\nMunin\n- a networked resource monitoring tool written in Perl (see also\nTeams/MuninMaintainers\n)\nZabbix\n- an GPLv2 alternative to Nagios.\nhttp://www.zabbix.com/\n,\ngit\nShinken\n- flexible monitoring system\nhttp://www.shinken-monitoring.org/\nKSysGuard\n- a KDE monitoring tool with a\nQt client, and the headless\nksysguardd\ndaemon for monitoring your servers\nremotely\nthrough the client\ncollectd\n- a small daemon which collects system information periodically\nsysstat\n- The sysstat package contains a set of system performance tools like sar and iostat\nCacti\n- a complete frontend to rrdtool for monitoring systems and services\nhttp://www.cacti.net/\nmonit\n- a utility for monitoring and managing daemons or similar programs\nicinga\n- a monitoring and management system for hosts, services and networks\nhttp://www.icinga.org\nxymon\n- monitoring system for systems, networks and applications\nhttp://hobbitmon.sourceforge.net/\ngraphite\n- a tool for real-time visualization and storage of numeric time-series data\nhttps://launchpad.net/graphite\nGanglia\n- cluster monitoring toolkit\nhttp://ganglia.info/\nCockpit\n- Web Console for Linux servers\nhttps://cockpit-project.org/\nruptime\n- modern rwhod/rwho/ruptime implementation\nhttps://github.com/alexmyczko/ruptime\nCategoryPortal\nCategorySystemAdministration\nSystemMonitoring  (\nlast modified 2025-09-08 13:19:34\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/SystemMonitoring"}}
{"text": "iptables - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\niptables\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\niptables\nTranslation(s)\n: English -\nItaliano\n-\nEspañol\nNOTE: iptables was replaced by\nnftables\nstarting in Debian 10 Buster\nIptables\nprovides packet filtering, network address translation (NAT) and other packet mangling.\nTwo of the most common uses of iptables is to provide firewall support and NAT.\nConfiguring iptables manually is challenging for the uninitiated. Fortunately, there are many configuration tools (wizards) available to assist, and the most interesting is probably\nfirewalld\nbut others include\nfwbuilder\n,\nbastille\n,\nferm\n,\nufw\nand\nopensnitch\n.\nCurrent status\nNOTE: the nftables framework is used by default in Debian since Debian 10 Buster\n.\nStarting with Debian 10 Buster, nf_tables is the default backend when using iptables, by means of the iptables-nft layer (i.e, using iptables syntax with the nf_tables kernel subsystem).\nThis also affects ip6tables, arptables and ebtables.\nYou can switch back and forth between iptables-nft and iptables-legacy by means of update-alternatives (same applies to arptables and ebtables).\nThe default starting with Debian 10 Buster:\n# update-alternatives --set iptables /usr/sbin/iptables-nft\n# update-alternatives --set ip6tables /usr/sbin/ip6tables-nft\n# update-alternatives --set arptables /usr/sbin/arptables-nft\n# update-alternatives --set ebtables /usr/sbin/ebtables-nft\nSwitching to the legacy version:\n# update-alternatives --set iptables /usr/sbin/iptables-legacy\n# update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy\n# update-alternatives --set arptables /usr/sbin/arptables-legacy\n# update-alternatives --set ebtables /usr/sbin/ebtables-legacy\nViewing current configuration\nSee what rules are already configured. Issue this command:\niptables -L\nThe output will be similar to this:\nChain INPUT (policy ACCEPT)\ntarget     prot opt source               destination\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination\nThis allows anyone access to anything from anywhere.\nStoring iptables rules in a file\nNote: there is a package designed to help with this:\niptables-persistent\nLet's tighten that up a bit by creating a test iptables file:\neditor /etc/iptables.test.rules\nIn this file enter some basic rules:\n*filter\n# Allows all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0\n-A INPUT -i lo -j ACCEPT\n-A INPUT ! -i lo -d 127.0.0.0/8 -j REJECT\n# Accepts all established inbound connections\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n# Allows all outbound traffic\n# You could modify this to only allow certain traffic\n-A OUTPUT -j ACCEPT\n# Allows HTTP and HTTPS connections from anywhere (the normal ports for websites)\n-A INPUT -p tcp --dport 80 -j ACCEPT\n-A INPUT -p tcp --dport 443 -j ACCEPT\n# Allows SSH connections\n# The --dport number is the same as in /etc/ssh/sshd_config\n-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT\n# Now you should read up on iptables rules and consider whether ssh access\n# for everyone is really desired. Most likely you will only allow access from certain IPs.\n# Allow ping\n#  note that blocking other types of icmp packets is considered a bad idea by some\n#  remove -m icmp --icmp-type 8 from this line to allow all kinds of icmp:\n#  https://security.stackexchange.com/questions/22711\n-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT\n# log iptables denied calls (access via 'dmesg' command)\n-A INPUT -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7\n# Reject all other inbound - default deny unless explicitly allowed policy:\n-A INPUT -j REJECT\n-A FORWARD -j REJECT\nCOMMIT\nThat may look complicated, but look at each section at a time. You will see that it simply shuts all ports except the ones we have allowed - which in this case are ports 80 and 443 (the standard web browser ports) and the SSH port defined earlier.\nActivate these new rules:\niptables-restore < /etc/iptables.test.rules\nAnd see the difference:\niptables -L\nNow the output tells us that only the ports defined above are open. All the others are closed. If the machine is under remote control, you might wish to establish a new ssh-connection at this point.\nMaking Changes permanent\nAs IP-Tables are not persistent, they will be deleted (\"flushed\") with the next reboot.\nOnce you are happy with your ruleset, save the new rules to the master iptables file:\niptables-save > /etc/iptables.up.rules\nTo make sure the iptables rules are started on a reboot we'll create a new file:\neditor /etc/network/if-pre-up.d/iptables\nAdd these lines to it:\n#!/bin/sh\n/sbin/iptables-restore < /etc/iptables.up.rules\nThe file needs to be executable so change the permissions:\nchmod +x /etc/network/if-pre-up.d/iptables\nAnother way is to use the package\niptables-persistent\n. Rules can be stored something like this:\niptables-save > /etc/iptables/rules.v4\nip6tables-save > /etc/iptables/rules.v6\n}\nNote:\nThis HOWTO had been contributed by user Geejay to wiki.openvz.org as a part of installing container howto.\nSee also\nDocumentation about the netfilter/iptables:\n.\nhttp://www.netfilter.org/documentation/\nGentle Introductions/Overviews\nFirewall and Advanced Routing Under Linux:\n.\nhttp://ornellas.apanela.com/dokuwiki/pub:firewall_and_adv_routing\nIptables Basics:\n.\nhttp://forums.justlinux.com/showthread.php?70876-iptables-basics\nFirewalls\nSecuring Debian: Adding firewall capabilities:\n.\nhttp://www.debian.org/doc/manuals/securing-debian-howto/ch-sec-services.en.html#s-firewall-setup\nCategorySystemAdministration\niptables  (\nlast modified 2024-01-25 16:28:04\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/iptables"}}
{"text": "PackageManagement - Debian Wiki\nWiki\nLogin\nFrontPage\nRecentChanges\nFindPage\nHelpContents\nPackageManagement\nSearch:\nWiki\n/\nLogin\nComments\nInfo\nAttachments\nMore Actions:\nRaw Text\nPrint View\nRender as Docbook\nDelete Cache\n------------------------\nCheck Spelling\nLike Pages\nLocal Site Map\n------------------------\nRename Page\nDelete Page\n------------------------\nSubscribe User\n------------------------\nRemove Spam\nRevert to this revision\nPackage Pages\n------------------------\nLoad\nSave\nSlideShow\nPackageManagement\nTranslation(s)\n:\nعربية\n-\nEnglish\n-\nEspañol\n-\nفارسی (Persian)\n-\nFrançais\n-\nItaliano\n-\n한국어\n-\nPortuguês (Brasil)\n-\nРусский\n-\nSvenska\n-\nУкраїнська\n-\n简体中文\nDebian Reference Manual - Chapter 2. Debian package management\nList of Debian packages\nContents\nInstall, remove, and change software versions\nConfiguration\nTechniques not supported by Debian\nDebian package documentation\nPackaging\nRepository management\nOther packaging solutions\nSee also\nWiki pages\nMuch of why Debian is a strong Linux distribution comes from its\npackage management\n. Everything in Debian – every application, every component – everything – is built into a package.\nThere are many\nsoftware packages\navailable for Debian – everything from\nthe Linux kernel\nto\ngames\n. And their number grows with every release.\nThe\nApt\n(\nAdvanced Package Tool\n) package management system is a set of tools to download, install, remove, upgrade, configure and manage Debian packages, and therefore all software installed on a Debian system.\nInstall, remove, and change software versions\nHowToInstallPackages\n- how to install packages\nSynaptic\n- how to manage packages via a graphical interface\nAptCLI\n- how to manage packages via a command line\nPackageManagementTools\n- some niche package tools\napt-file\n- find which package provides a file\nPeriodicUpdates\n- configure an update schedule\nSourcesList\n- how to configure extra repositories\ndebconf\n- how to reconfigure installed packages\nManipulating package files\n(in the packaging FAQ) - how to work directly with package files\nDebianUpgrade\n- how to upgrade to the next Debian release\nDebianPackageManagement\n- background information\nConfiguration\nAptConfiguration\n- Apt configuration and\npinning\nPackageManagement/Preseed\n- preconfigure Debian packages before installation\nBackports\n- newer versions of packages compatible with\nDebianStable\nSecureApt\n- authenticate packages against cryptographic signatures\nTechniques not supported by Debian\nDebian does not guarantee these will work, but people have written up how to try:\nRollbackUpdate\n- switch to an earlier version of a package\nSystemDowngrade\n- switch to an earlier Debian release\nCrossGrading\n- switch from e.g.\ni386\nto\namd64\nDebian package documentation\nEvery Debian package installs its documentation under\n/usr/share/doc/<package_name>\n. Check this directory for more information on a specific package.\nAll programs provided by Debian come with their own\nman page\nPackaging\nPackaging\n- Information relevant to developers wishing to package software for Debian\nRepository management\nDebianRepository/Setup\n- summarizes the process of setting up a Debian package repository\nDebianRepository\n- Debian package repository\nDebianRepository/Format\n- Debian package repository format\nDebianRepository/UseThirdParty\n- Instructions to connect to a third-party repository\nOther packaging solutions\nAppImageKit\n- portable Linux destkop apps\nSnapcraft\n- a cross-platform app store, requires\nsnappy\nFlatpak\n- cross-platform sandboxed applications, requires\nflatpak\nSee also\nhttps://www.debian.org/Bugs/\n- information on finding, reporting and fixing bugs in Debian packages\nAptProtocol\n- Installing packages by clicking on links with\napt://\nURLs\nRestore an installed package permissions to their default\nWiki pages\nAll wiki pages related to package management:\nAlien\nApt\nAptCLI\nAptCacherNg\nAptConfiguration\nAptProtocol\nAptitude\nBackports\nCheckInstall\nCrossGrading\nDebianInstaller/Preseed\nDebianPackageManagement\nDebianRepository\nDebianRepository/Setup\nDebianRepository/UseThirdParty\nDebianUpgrade\nDontBreakDebian\nDpkgConffileHandling\nFastTrack\nFlatpak\nJava/JavaGit\nListInstalledPackages\nMediaWiki\nPackageInstallTips\nPackageKit\nPackageKit/Discussion\nPackageKit/ItemNotFound\nPackageManagement\nPackageManagement/Preseed\nPackageManagementTools\nPackaging/BinaryPackage\nPackaging/SourcePackage\nPeriodicUpdates\nRPM\nRollbackUpdate\nSoftware\nSourcesList\nSynaptic\nSystemDowngrade\nTeams/Apt\napt-file\napt-get\nbn/PackageManagement\ndeb\ndpkg\ndselect\nes/SourcesList\nftp.debian.org\nms/PackageManagement\npt_BR/ConfiguraçãoRepositorios\nta/PackageManagement\nzh_CN/Apt\nzh_CN/Aptitude\nzh_CN/Backports\nzh_CN/DebianRepository\nzh_CN/DebianRepository/Setup\nzh_CN/PackageManagement\nzh_CN/Software\nCategoryPortal\n|\nCategorySystemAdministration\n|\nCategoryPackageManagement\n|\nCategorySoftware\nPackageManagement  (\nlast modified 2025-08-25 13:11:06\n)\nChanges made after 24 July 2025 00:00 UTC are available under\nCreative Commons Attribution-ShareAlike 4.0 International\nunless otherwise noted.\nDebian\nprivacy policy\n, Wiki\nteam\n,\nbugs\nand\nconfig\n.\nPowered by\nMoinMoin\nand\nPython\n, with hosting provided by\nMetropolitan Area Network Darmstadt\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.debian.org/PackageManagement"}}
{"text": "LVM - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nLVM\n6 languages\nDeutsch\nEspañol\nMagyar\n日本語\nPortuguês\n中文（简体）\nFrom ArchWiki\nRelated articles\nInstall Arch Linux on LVM\nLVM on software RAID\ndm-crypt/Encrypting an entire system#LVM on LUKS\ndm-crypt/Encrypting an entire system#LUKS on LVM\nResizing LVM-on-LUKS\nCreate root filesystem snapshots with LVM\nFrom\nWikipedia:Logical Volume Manager (Linux)\n:\nLogical Volume Manager (LVM) is a\ndevice mapper\nframework that provides\nlogical volume management\nfor the\nLinux kernel\n.\nBackground\nLVM building blocks\nLogical Volume Management utilizes the kernel's\ndevice-mapper\nfeature to provide a system of\npartitions\nindependent of underlying disk layout. With LVM you abstract your storage and have \"virtual partitions\", making\nextending/shrinking\neasier (subject to potential filesystem limitations).\nVirtual partitions allow addition and removal without worry of whether you have enough contiguous space on a particular disk, getting caught up fdisking a disk in use (and wondering whether the kernel is using the old or new partition table), or, having to move other partitions out of the way.\nBasic building blocks of LVM:\nPhysical volume (PV)\nUnix block device node, usable for storage by LVM. Examples: a hard disk, an\nMBR\nor\nGPT\npartition, a loopback file, a device mapper device (e.g.\ndm-crypt\n). It hosts an LVM header.\nVolume group (VG)\nGroup of PVs that serves as a container for LVs. PEs are allocated from a VG for a LV.\nLogical volume (LV)\n\"Virtual/logical partition\" that resides in a VG and is composed of PEs. LVs are Unix block devices analogous to physical partitions, e.g. they can be directly formatted with a\nfile system\n.\nPhysical extent (PE)\nThe smallest contiguous extent (default 4 MiB) in the PV that can be assigned to a LV. Think of PEs as parts of PVs that can be allocated to any LV.\nExample:\nPhysical disks\nDisk1 (/dev/sda):\n┌──────────────────────────────────────┬─────────────────────────────────────┐\n│ Partition1  50 GiB (Physical volume) │ Partition2 80 GiB (Physical volume) │\n│ /dev/sda1                            │ /dev/sda2                           │\n└──────────────────────────────────────┴─────────────────────────────────────┘\nDisk2 (/dev/sdb):\n┌──────────────────────────────────────┐\n│ Partition1 120 GiB (Physical volume) │\n│ /dev/sdb1                            │\n└──────────────────────────────────────┘\nLVM logical volumes\nVolume Group1 (/dev/MyVolGroup/ = /dev/sda1 + /dev/sda2 + /dev/sdb1):\n┌─────────────────────────┬─────────────────────────┬──────────────────────────┐\n│ Logical volume1 15 GiB  │ Logical volume2 35 GiB  │ Logical volume3 200 GiB  │\n│ /dev/MyVolGroup/rootvol │ /dev/MyVolGroup/homevol │ /dev/MyVolGroup/mediavol │\n└─────────────────────────┴─────────────────────────┴──────────────────────────┘\nNote\nLogical volumes are accessible at both\n/dev/\nVolumeGroupName\n/\nLogicalVolumeName\nand\n/dev/mapper/\nVolumeGroupName-LogicalVolumeName\n. However,\nlvm(8) § VALID NAMES\nrecommends the former format for \"software and scripts\" (e.g.\nfstab\n) since the latter is intended for \"internal use\" and subject to possible \"change between releases and distributions\".\nAdvantages\nLVM gives you more flexibility than just using normal hard drive partitions:\nUse any number of disks as one big disk.\nHave logical volumes stretched over several disks (\nRAID\n, mirroring, striping which offer advantages such as additional resilience and performance\n[1]\n).\nCreate small logical volumes and resize them \"dynamically\" as they get filled up.\nResize logical volumes regardless of their order on disk. It does not depend on the position of the LV within VG, there is no need to ensure surrounding available space.\nResize/create/delete logical and physical volumes online. File systems on them still need to be resized, but some (such as\nExt4\nand\nBtrfs\n) support online resizing.\nOnline/live migration of LV (or segments) being used by services to different disks without having to restart services.\nSnapshots allow you to backup a frozen copy of the file system, while keeping service downtime to a minimum and easily merge the snapshot into the original volume later.\nSupport for unlocking separate volumes without having to enter a key multiple times on boot (\nmake LVM on top of LUKS\n).\nBuilt-in support for caching of frequently used data (\nlvmcache(7)\n).\nDisadvantages\nAdditional steps in setting up the system (may require changes to\nmkinitcpio\nconfiguration), more complicated. Requires (multiple) daemons to constantly run.\nIf dual-booting, note that Windows does not support LVM; you will be unable to access any LVM partitions from Windows. 3rd Party software may allow to mount certain kinds of LVM setups.\n[2]\nIf your physical volumes are not on a RAID-1, RAID-5 or RAID-6 losing one disk\ncan\nlose one or more logical volumes if you span (or extend) your logical volumes across multiple non-redundant disks.\nIt is not always easy to shrink the space used by the logical volume manager, meaning the physical volumes used for the logical volumes. If the physical extents are scattered across the physical volume until the end you might need to inspect the segments and move them (potentially to another physical device) or the same device with custom allocation settings (e.g.\n--alloc anywhere\n). If you want to dual-boot with other operating systems (e.g. with Microsoft Windows), the only space left on the device for Microsoft Windows is the space not used by LVM / not used as physical volume.\nPotentially worse performance than using plain partitions.\n[3]\nMay not work well with all file systems, especially those that are designed to be (multi-)device aware. For example,\nBtrfs\noffers some of the same functionality (\nmulti device support\n,\n(sub)volumes\n, snapshots and\nRAID\n) which could clash (read further about issues with LVM snapshots with\nBtrfs\n).\nInstallation\nMake sure the\nlvm2\npackage is\ninstalled\n.\nIf you have LVM volumes not activated via the\ninitramfs\n,\nenable\nlvm2-monitor.service\n, which is provided by the\nlvm2\npackage.\nVolume operations\nPhysical volumes\nCreating\nTo create a PV on\n/dev/sda1\n, run:\n# pvcreate /dev/sda1\nYou can check the PV is created using the following command:\n# pvs\nGrowing\nAfter extending or prior to reducing the size of a device that has a physical volume on it, you need to grow or shrink the PV using\npvresize(8)\n.\nTo expand the PV on\n/dev/sda1\nafter enlarging the\npartition\n, run:\n# pvresize /dev/sda1\nThis will automatically detect the new size of the device and extend the PV to its maximum.\nNote\nThis command can be done while the volume is online.\nShrinking\nTo shrink a physical volume prior to reducing its underlying device, add the\n--setphysicalvolumesize\nsize\nparameters to the command,\ne.g.\n:\n# pvresize --setphysicalvolumesize 40G /dev/sda1\nThe above command may leave you with this error:\n/dev/sda1: cannot resize to 25599 extents as later ones are allocated.\n0 physical volume(s) resized / 1 physical volume(s) not resized\nIndeed\npvresize\nwill refuse to shrink a PV if it has allocated extents after where its new end would be. One needs to run\npvmove\nbeforehand to relocate these elsewhere in the volume group if there is sufficient free space.\nMove physical extents\nBefore freeing up physical extents at the end of the volume, one must run\npvdisplay -v -m\nto see them. An alternative way to view segments in a tabular form is\npvs --segments -v\n.\nIn the below example, there is one physical volume on\n/dev/sdd1\n, one volume group\nvg1\nand one logical volume\nbackup\n.\n# pvdisplay -v -m\nFinding all volume groups.\nUsing physical volume(s) on command line.\n--- Physical volume ---\nPV Name               /dev/sdd1\nVG Name               vg1\nPV Size               1.52 TiB / not usable 1.97 MiB\nAllocatable           yes\nPE Size               4.00 MiB\nTotal PE              399669\nFree PE               153600\nAllocated PE          246069\nPV UUID               MR9J0X-zQB4-wi3k-EnaV-5ksf-hN1P-Jkm5mW\n--- Physical Segments ---\nPhysical extent 0 to 153600:\nFREE\nPhysical extent 153601 to 307199:\nLogical volume\t/dev/vg1/backup\nLogical extents\t1 to 153599\nPhysical extent 307200 to 307200:\nFREE\nPhysical extent 307201 to 399668:\nLogical volume\t/dev/vg1/backup\nLogical extents\t153601 to 246068\nOne can observe\nFREE\nspace are split across the volume. To shrink the physical volume, we must first move all used segments to the beginning.\nHere, the first free segment is from 0 to 153600 and leaves us with 153601 free extents. We can now move this segment number from the last physical extent to the first extent. The command will thus be:\n# pvmove --alloc anywhere /dev/sdd1:307201-399668 /dev/sdd1:0-92467\n/dev/sdd1: Moved: 0.1 %\n/dev/sdd1: Moved: 0.2 %\n...\n/dev/sdd1: Moved: 99.9 %\n/dev/sdd1: Moved: 100.0 %\nNote\nThis command moves 399668 - 307201 + 1 = 92468 PEs\nfrom\nthe last segment\nto\nthe first segment. This is possible as the first segment encloses 153600 free PEs, which can contain the 92467 - 0 + 1 = 92468 moved PEs.\nThe\n--alloc anywhere\noption is used as we move PEs inside the same partition. In case of different partitions, the command would look something like this:\n# pvmove /dev/sdb1:1000-1999 /dev/sdc1:0-999\nThis command may take a long time (one to two hours) in case of large volumes. It might be a good idea to run this command in a\ntmux\nor\nGNU Screen\nsession. Any unwanted stop of the process could be fatal.\nOnce the operation is complete, run\nfsck\nto make sure your file system is valid.\nResize physical volume\nOnce all your free physical segments are on the last physical extents, run\nvgdisplay\nwith root privileges and see your free PE.\nThen you can now run again the command:\n# pvresize --setphysicalvolumesize\nsize\nPhysicalVolume\nSee the result:\n# pvs\nPV         VG   Fmt  Attr PSize    PFree\n/dev/sdd1  vg1  lvm2 a--     1t     500g\nResize partition\nLast, you need to shrink the partition with your favorite\npartitioning tool\n.\nVolume groups\nCreating a volume group\nTo create a VG\nMyVolGroup\nwith an associated PV\n/dev/sdb1\n, run:\n# vgcreate MyVolGroup /dev/sdb1\nYou can check the VG\nMyVolGroup\nis created using the following command:\n# vgs\nYou can bind multiple PVs when creating a VG like this:\n# vgcreate MyVolGroup /dev/sdb1 /dev/sdb2\nActivating a volume group\nNote\nYou can restrict the volumes that are activated automatically by setting the\nauto_activation_volume_list\nin\n/etc/lvm/lvm.conf\n. If in doubt, leave this option commented out.\n# vgchange -a y MyVolGroup\nBy default, this will reactivate the volume group when applicable. For example, if you had a drive failure in a mirror and you swapped the drive; and ran (1)\npvcreate\n, (2)\nvgextend\nand (3)\nvgreduce --removemissing --force\n.\nRepairing a volume group\nTo start the rebuilding process of the degraded mirror array in this example, you would run:\n# lvconvert --repair /dev/MyVolGroup/mirror\nYou can monitor the rebuilding process (Cpy%Sync Column output) with:\n# lvs -a -o +devices\nDeactivating a volume group\nJust invoke\n# vgchange -a n MyVolGroup\nThis will deactivate the volume group and allow you to unmount the container it is stored in.\nRenaming a volume group\nUse the\nvgrename(8)\ncommand to rename an existing volume group.\nEither of the following commands renames the existing volume group\nMyVolGroup\nto\nmy_volume_group\n# vgrename /dev/MyVolGroup /dev/my_volume_group\n# vgrename MyVolGroup my_volume_group\nMake sure to update all configuration files (e.g.\n/etc/fstab\nor\n/etc/crypttab\n) that reference the renamed volume group.\nAdd physical volume to a volume group\nYou first create a new physical volume on the block device you wish to use, then extend your volume group\n# pvcreate /dev/sdb1\n# vgextend MyVolGroup /dev/sdb1\nThis of course will increase the total number of physical extents on your volume group, which can be allocated by logical volumes as you see fit.\nNote\nIt is considered good form to have a\npartition table\non your storage medium below LVM. Use the appropriate partition type:\n8e\nfor MBR, and\nE6D6D379-F507-44C2-A23C-238F2A3DF928\nfor GPT partitions (\n8e00\ntype code in\ngdisk\n,\nlvm\ntype alias in\nfdisk\n).\nRemove partition from a volume group\nIf you created a logical volume on the partition,\nremove\nit first.\nAll of the data on that partition needs to be moved to another partition. Fortunately, LVM makes this easy:\n# pvmove /dev/sdb1\nIf you want to have the data on a specific physical volume, specify that as the second argument to\npvmove\n:\n# pvmove /dev/sdb1 /dev/sdf1\nThen the physical volume needs to be removed from the volume group:\n# vgreduce MyVolGroup /dev/sdb1\nOr remove all empty physical volumes:\n# vgreduce --all MyVolGroup\nFor example: if you have a bad disk in a group that cannot be found because it has been removed or failed:\n# vgreduce --removemissing --force MyVolGroup\nAnd lastly, if you want to use the partition for something else, and want to avoid LVM thinking that the partition is a physical volume:\n# pvremove /dev/sdb1\nLogical volumes\nNote\nlvresize(8)\nprovides more or less the same options as the specialized\nlvextend(8)\nand\nlvreduce(8)\ncommands, while allowing to do both types of operation. Notwithstanding this, all those utilities offer a\n-r\n/\n--resizefs\noption which allows to resize the file system together with the LV using\nfsadm(8)\n(\next2\n,\next3\n,\next4\n,\nReiserFS\nand\nXFS\nsupported). Therefore it may be easier to simply use\nlvresize\nfor both operations and use\n--resizefs\nto simplify things a bit, except if you have specific needs or want full control over the process.\nWarning\nWhile enlarging a file system can often be done on-line (\ni.e.\nwhile it is mounted), even for the root partition, shrinking will nearly always require to first unmount the file system so as to prevent data loss. Make sure your file system supports what you are trying to do.\nTip\nIf a logical volume will be formatted with\next4\n, leave at least 256 MiB free space in the volume group to allow using\ne2scrub(8)\n. After creating the last volume with\n-l 100%FREE\n, this can be accomplished by reducing its size with\nlvreduce -L -256M\nvolume_group\n/\nlogical_volume\n.\nCreating a logical volume\nTo create a LV\nhomevol\nin a VG\nMyVolGroup\nwith 300 GiB of capacity, run:\n# lvcreate -L 300G MyVolGroup -n homevol\nor, to create a LV\nhomevol\nin a VG\nMyVolGroup\nwith the rest of capacity, run:\n# lvcreate -l 100%FREE MyVolGroup -n homevol\nTo create the LV while restricting it to specific PVs within the VG, append them to the command:\n# lvcreate -L 300G MyVolGroup -n homevol /dev/sda1\nThe new LV will appear as\n/dev/MyVolGroup/homevol\n. Now you can\nformat\nthe LV with an appropriate file system.\nYou can check the LV is created using the following command:\n# lvs\nRenaming a logical volume\nTo rename an existing logical volume, use the\nlvrename(8)\ncommand.\nEither of the following commands renames logical volume\nold_vol\nin volume group\nMyVolGroup\nto\nnew_vol\n.\n# lvrename /dev/MyVolGroup/old_vol /dev/MyVolGroup/new_vol\n# lvrename MyVolGroup old_vol new_vol\nMake sure to update all configuration files (e.g.\n/etc/fstab\nor\n/etc/crypttab\n) that reference the renamed logical volume.\nResizing the logical volume and file system in one go\nNote\nOnly\next2\n,\next3\n,\next4\n,\nReiserFS\nand\nXFS\nfile systems\nare supported. For a different type of file system see\n#Resizing the logical volume and file system separately\n.\nExtend the logical volume\nmediavol\nin\nMyVolGroup\nby 10 GiB  and resize its file system\nall at once\n:\n# lvresize -L +10G --resizefs MyVolGroup/mediavol\nSet the size of logical volume\nmediavol\nin\nMyVolGroup\nto 15 GiB and resize its file system\nall at once\n:\n# lvresize -L 15G --resizefs MyVolGroup/mediavol\nIf you want to fill all the free space on a volume group, use the following command:\n# lvresize -l +100%FREE --resizefs MyVolGroup/mediavol\nSee\nlvresize(8)\nfor more detailed options.\nResizing the logical volume and file system separately\nFor file systems not supported by\nfsadm(8)\nwill need to use the\nappropriate utility\nto resize the file system before shrinking the logical volume or after expanding it.\nTo extend logical volume\nmediavol\nwithin volume group\nMyVolGroup\nby 2 GiB\nwithout\ntouching its file system:\n# lvresize -L +2G MyVolGroup/mediavol\nNow expand the file system (\next4\nin this example) to the maximum size of the underlying logical volume:\n# resize2fs /dev/MyVolGroup/mediavol\nFor\nBtrfs\n,\nbtrfs-filesystem(8)\nexpects the mountpoint instead of the device, the equivalent is:\n# btrfs filesystem resize max\n/mnt/my-mountpoint\nTo reduce the size of logical volume\nmediavol\nin\nMyVolGroup\nby 500 MiB, first calculate the resulting file system size and shrink the file system (\nExt4\nin this example) to the new size:\n# resize2fs /dev/MyVolGroup/mediavol\nNewSize\nUnlike Ext4,\nBtrfs\nsupports online shrinking (again, a mountpoint should be specified) e.g.:\n# btrfs filesystem resize -500M\n/mnt/my-mountpoint\nWhen the file system is shrunk, reduce the size of logical volume:\n# lvresize -L -500M MyVolGroup/mediavol\nTo calculate the exact logical volume size for\next2\n,\next3\n,\next4\nfile systems, use a simple formula:\nLVM_EXTENTS = FS_BLOCKS × FS_BLOCKSIZE ÷ LVM_EXTENTSIZE\n.\n# tune2fs -l /dev/MyVolGroup/mediavol | grep Block\nBlock count:              102400000\nBlock size:               4096\nBlocks per group:         32768\n# vgdisplay MyVolGroup | grep \"PE Size\"\nPE Size               4.00 MiB\nNote\nThe file system block size is in bytes. Make sure to use the same units for both block and extent size.\n102400000 blocks × 4096 bytes/block ÷ 4 MiB/extent = 100000 extents\nPassing\n--resizefs\nwill confirm that the correctness.\n# lvreduce -l 100000 --resizefs /dev/MyVolGroup/mediavol\n...\nThe filesystem is already 102400000 (4k) blocks long.  Nothing to do!\n...\nLogical volume sysvg/root successfully resized.\nSee\nlvresize(8)\nfor more detailed options.\nRemoving a logical volume\nWarning\nBefore you remove a logical volume, make sure to move all data that you want to keep somewhere else; otherwise, it will be lost!\nFirst, find out the name of the logical volume you want to remove. You can get a list of all logical volumes with:\n# lvs\nNext, look up the mountpoint of the chosen logical volume:\n$ lsblk\nThen unmount the filesystem on the logical volume:\n# umount /\nmountpoint\nFinally, remove the logical volume:\n# lvremove\nvolume_group\n/\nlogical_volume\nFor example:\n# lvremove MyVolGroup/homevol\nConfirm by typing in\ny\n.\nMake sure to update all configuration files (e.g.\n/etc/fstab\nor\n/etc/crypttab\n) that reference the removed logical volume.\nYou can verify the removal of the logical volume by typing\nlvs\nas root again (see first step of this section).\nSnapshots\nLVM supports CoW (Copy-on-Write) snapshots. A CoW snapshot initially points to the original data. When data blocks are overwritten, the original copy is left intact and the new blocks are written elsewhere on-disk. This has several desirable properties:\nCreating snapshots is fast, because it does not copy data (just the much shorter list of pointers to the on-disk locations).\nSnapshots require just enough free space to hold the new data blocks (plus a negligible amount for the pointers to the new blocks). For example, a snapshot of 35 GiB of data, where you write only 2 GiB (on both the original and snapshot), only requires 2 GiB of free space.\nLVM snapshots are at the block level. They make a new block device, with no apparent relationship to the original except when dealing with the LVM tools. Therefore, deleting files in the original copy does not free space in the snapshots. If you need filesystem-level snapshots, you rather need\nbtrfs\n,\nZFS\nor\nbcachefs\n.\nWarning\nA CoW snapshot\nis not a backup\n, because it does not make a second copy of the original data. For example, a damaged disk sector that affects original data also affects the snapshots. That said, a snapshot can be helpful while using other tools to make backups, as outlined\nbelow\n.\nBtrfs expects different filesystems to have different UUIDs. If you snapshot a LVM volume that contains a btrfs filesystem, make sure to change the UUID of the original or the copy, before both are mounted (or made visible to the kernel, for example if an unrelated daemon triggers a\nbtrfs device scan\n). For details see\nbtrfs wiki Gotcha's\n.\nConfiguration\nYou create snapshot logical volumes just like normal ones.\n# lvcreate --size 100M --snapshot --name snap01vol /dev/MyVolGroup/lvol\nWith that volume, you may modify less than 100 MiB of data, before the snapshot volume fills up.\nReverting the modified\nlvol\nlogical volume to the state when the\nsnap01vol\nsnapshot was taken can be done with\n# lvconvert --merge /dev/MyVolGroup/snap01vol\nIn case the origin logical volume is active, merging will occur on the next reboot (merging can be done even from a LiveCD).\nNote\nThe snapshot will no longer exist after merging.\nAlso multiple snapshots can be taken and each one can be merged with the origin logical volume at will.\nBackups\nA snapshot provides a frozen copy of a file system to make backups. For example, a backup taking two hours provides a more consistent image of the file system than directly backing up the partition.\nThe snapshot can be mounted and backed up with\ndd\nor\ntar\n. The size of the backup file done with\ndd\nwill be the size of the files residing on the snapshot volume.\nTo restore just create a snapshot, mount it, and write or extract the backup to it. And then merge it with the origin.\nSee\nCreate root filesystem snapshots with LVM\nfor automating the creation of clean root file system snapshots during system startup for backup and rollback.\nThis article or section needs expansion.\nReason:\nShow scripts to automate snapshots of root before updates, to rollback... updating\nmenu.lst\nto boot snapshots (maybe in a separate article?) (Discuss in\nTalk:LVM\n)\nEncryption\nSee\ndm-crypt/Encrypting an entire system#LUKS on LVM\nand\ndm-crypt/Encrypting an entire system#LVM on LUKS\nfor the possible schemes of combining LUKS with LVM.\nCache\nThis article or section needs expansion.\nReason:\nLVM also supports\n--type writecache\nwhich uses dm-writecache. (Discuss in\nTalk:LVM\n)\nFrom\nlvmcache(7)\n:\nThe cache logical volume type uses a small and fast LV to improve the performance of a large and slow LV. It does this by storing the frequently used blocks on the faster LV. LVM refers to the small fast LV as a cache pool LV. The large slow LV is called the origin LV. Due to requirements from dm-cache (the kernel driver), LVM further splits the cache pool LV into two devices - the cache data LV and cache metadata LV. The cache data LV is where copies of data blocks are kept from the origin LV to increase speed. The cache metadata LV holds the accounting information that specifies where data blocks are stored (e.g. on the origin LV or on the cache data LV).  Users should be familiar with these LVs if they wish to create the best and most robust cached logical volumes. All of these associated LVs must be in the same VG.\nCreate cache\nConvert your fast disk (\n/dev/\nfastdisk\n) to PV and add to your existing VG (\nMyVolGroup\n):\n# vgextend MyVolGroup /dev/\nfastdisk\nUsing a cache logical volume\nCreate a cache logical volume with automatic metadata on\n/dev/\nfastdisk\nand convert the existing LV\nMyVolGroup/rootvol\nto a cached LV, all in one step:\n# lvcreate --type cache --cachemode writethrough -l 100%FREE -n root_cachevol MyVolGroup/rootvol /dev/\nfastdisk\nTip\nInstead of using\n-l 100%FREE\nto allocate 100% of available space from PV\n/dev/\nfastdisk\n, you can use\n-L 20G\ninstead to allocate only 20 GiB for cachevol.\nUsing a cache pool\nWith a cache logical volume, LVM automatically manages metadata and data for the cache. But you can also manually create the metatada and cache LVs, and create a cache pool:\n# lvcreate -n cache_meta -l 1%FREE MyVolGroup /dev/\nfastdisk\n# lvcreate -n cache_data -l 100%FREE MyVolGroup /dev/\nfastdisk\n# lvconvert --type cache-pool --cachemode writeback --poolmetadata MyVolGroup/cache_meta MyVolGroup/cache_data\n# lvconvert --type cache --cachepool MyVolGroup/cache_data MyVolGroup/rootvol\nCachemode options\nCachemode has two possible options:\nwritethrough\nensures that any data written will be stored both in the cache LV and on the origin LV. The loss of a device associated with the cache LV in this case would not mean the loss of any data;\nwriteback\nensures better performance, but at the cost of a higher risk of data loss in case the drive used for cache fails.\nIf a specific\n--cachemode\nis not indicated, the system will assume\nwritethrough\nas default.\nTip\nCache hit and miss counts can be viewed with\nlvdisplay\nor alternatively with\nlvm-cache-stats\nfrom\nlibblockdev-lvm\nwhich also shows them in percentages.\nRemove cache\nIf you ever need to undo the one step creation operation above:\n# lvconvert --uncache MyVolGroup/rootvol\nThis commits any pending writes still in the cache back to the origin LV, then deletes the cache. Other options are available and described in\nlvmcache(7)\n.\nRAID\nLVM may be used to create a\nsoftware RAID\n. It is a good choice if the user does not have hardware RAID and was planning on using LVM anyway. From\nlvmraid(7)\n:\nlvm(8)\nRAID is a way to create a Logical Volume (LV) that uses multiple physical devices to improve performance or tolerate device failures.  In LVM, the physical devices are Physical Volumes (PVs) in a single Volume Group (VG).\nLVM RAID supports RAID 0, RAID 1, RAID 4, RAID 5, RAID 6 and RAID 10. See\nWikipedia:Standard RAID levels\nfor details on each level.\nTip\nmdadm\nmay also be used to create a software RAID. It is arguably simpler, more popular, and easier to setup.\nSetup RAID\nCreate physical volumes:\n# pvcreate /dev/sda2 /dev/sdb2\nCreate volume group on the physical volumes:\n# vgcreate MyVolGroup /dev/sda2 /dev/sdb2\nNew volumes\nCreate logical volumes using\nlvcreate --type\nraidlevel\n, see\nlvmraid(7)\nand\nlvcreate(8)\nfor more options.\n# lvcreate --type RaidLevel [OPTIONS] -n Name -L Size VG [PVs]\nPlease mind how the examples below each specify the physical volumes. This can make sense in some situations to have LVM use a specific subset of devices for your new logical volume. But generally speaking, this is not necessary.\nRAID 0\nFor example:\n# lvcreate -n myraid1vol -i 2 -I 64 -L 70G VolGroup00 /dev/nvme1n1p1 /dev/nvme0n1p1\nwill create a 70 GiB striped (raid0) logical volume named \"myraid1vol\" in VolGroup00. Stripes will be spread over\n/dev/nvme1n1p1\nand\n/dev/nvme0n1p1\n. Stripesize is set to be 64K.\nRAID 1\nFor example:\n# lvcreate --type raid1 --mirrors 1 -L 20G -n myraid1vol MyVolGroup /dev/sda2 /dev/sdb2\nwill create a 20 GiB mirrored logical volume named \"myraid1vol\" in VolGroup00 on\n/dev/sda2\nand\n/dev/sdb2\n.\nRAID 5\nRAID5 requires at least three drives (number of\n--stripes\nplus one parity device). Data and parity blocks are stored on each device, typically in a rotating pattern.\nFor example:\n# lvcreate --type raid5 --stripes 2 -L 40G -n myraid5vol MyVolGroup /dev/sda2 /dev/sdb2 /dev/sdc2\nwill create a 40 GiB striped logical volume named \"myraid5vol\" in VolGroup00 on\n/dev/sda2\n,\n/dev/sdb2\nand\n/dev/sdc2\n. On each disk, the RAID5 will occupy about 20 GiB.\nRAID 6\nRAID6 requires at least five drives (number of\n--stripes\nplus two parity devices). As with RAID5, data and parity blocks are stored on each device, typically in a rotating pattern.\nFor example:\n# lvcreate --type raid6 --stripes 3 -L 60G -n myraid6vol MyVolGroup /dev/sda2 /dev/sdb2 /dev/sdc2 /dev/sdd2\nwill create a 60 GiB striped logical volume named \"myraid6vol\" in VolGroup00 on\n/dev/sda2\n,\n/dev/sdb2\n,\n/dev/sdc2\nand\n/dev/sdd2\n. On each disk, the RAID6 will occupy about 20 GiB.\nRAID 10\nFor example:\n# lvcreate -n myraid1vol -L 100G --type raid10 -m 1 -i 2 MyVolGroup /dev/sdd1 /dev/sdc1 /dev/sdb1 /dev/sda5\nwill create a 100 GiB RAID10 logical volume named \"myraid1vol\" in VolGroup00 on\n/dev/sdd1\n,\n/dev/sdc1\n,\n/dev/sdb1\n, and\n/dev/sda5\n.\nExisting volumes\nYou can convert easily a non-RAID (e.g. linear) volume to pretty much any other raid configuration provided that you have enough physical devices to meet the RAID requirements. Some of them will require you to go through intermediate steps which\nlvconvert\nwill inform you about and prompt you to agree.\nraid10\nbelow can be replaced with\nraid0\n,\nraid1\n,\nraid5\netc.\n# lvconvert --type raid10 /dev/vg01/lv01\nUse specific PVs:\n# lvconvert --type raid10 /dev/vg01/lv01 /dev/sda1 /dev/sdb2 /dev/nvme0n1p1 ...\nYou can keep track of the progress of conversion with:\n# watch lvs -o name,vg_name,copy_percent\nThin provisioning\nNote\nWhen mounting a thin LV file system, always remember to use the\ndiscard\noption or to use\nfstrim\nregularly, to allow the thin LV to shrink as files are deleted.\nFrom\nlvmthin(7)\n:\nBlocks in a standard\nlvm(8)\nLogical Volume (LV) are allocated when the LV is created, but blocks in a thin provisioned LV are allocated as they are written. Because of this, a thin provisioned LV is given a virtual size, and can then be much larger than physically available storage. The amount of physical storage provided for thin provisioned LVs can be increased later as the need arises.\nExample: implementing virtual private servers\nHere is the classic use case. Suppose you want to start your own VPS service, initially hosting about 100 VPSes on a single PC with a 930 GiB hard drive. Hardly any of the VPSes will actually use all of the storage they are allotted, so rather than allocate 9 GiB to each VPS, you could allow each VPS a maximum of 30 GiB and use thin provisioning to only allocate as much hard drive space to each VPS as they are actually using. Suppose the 930 GiB hard drive is\n/dev/sdb\n. Here is the setup.\nPrepare the volume group,\nMyVolGroup\n.\n# vgcreate MyVolGroup /dev/sdb\nCreate the thin pool LV,\nMyThinPool\n. This LV provides the blocks for storage.\n# lvcreate --type thin-pool -n MyThinPool -l 95%FREE MyVolGroup\nThe thin pool is composed of two sub-volumes, the data LV and the metadata LV. This command creates both automatically. But the thin pool stops working if either fills completely, and LVM currently does not support the shrinking of either of these volumes. This is why the above command allows for 5% of extra space, in case you ever need to expand the data or metadata sub-volumes of the thin pool.\nFor each VPS, create a thin LV. This is the block device exposed to the user for their root partition.\n# lvcreate -n SomeClientsRoot -V 30G --thinpool MyThinPool MyVolGroup\nThe block device\n/dev/MyVolGroup/SomeClientsRoot\nmay then be used by a\nVirtualBox\ninstance as the root partition.\nUse thin snapshots to save more space\nThin snapshots are much more powerful than regular snapshots, because they are themselves thin LVs. See Red Hat's guide\n[4]\nfor a complete list of advantages thin snapshots have.\nInstead of installing Linux from scratch every time a VPS is created, it is more space-efficient to start with just one thin LV containing a basic installation of Linux:\n# lvcreate -n GenericRoot -V 30G --thinpool MyThinPool MyVolGroup\n*** install Linux at /dev/MyVolGroup/GenericRoot ***\nThen create snapshots of it for each VPS:\n# lvcreate -s MyVolGroup/GenericRoot -n SomeClientsRoot\nThis way, in the thin pool there is only one copy the data common to all VPSes, at least initially. As an added bonus, the creation of a new VPS is instantaneous.\nSince these are thin snapshots, a write operation to\nGenericRoot\nonly causes one COW operation in total, instead of one COW operation per snapshot. This allows you to update\nGenericRoot\nmore efficiently than if each VPS were a regular snapshot.\nExample: zero-downtime storage upgrade\nThere are applications of thin provisioning outside of VPS hosting. Here is how you may use it to grow the effective capacity of an already-mounted file system without having to unmount it. Suppose, again, that the server has a single 930 GiB hard drive. The setup is the same as for VPS hosting, only there is only one thin LV and the LV's size is far larger than the thin pool's size.\n# lvcreate -n MyThinLV -V 16T --thinpool MyThinPool MyVolGroup\nThis extra virtual space can be filled in with actual storage at a later time by extending the thin pool.\nSuppose some time later, a storage upgrade is needed, and a new hard drive,\n/dev/sdc\n, is plugged into the server. To upgrade the thin pool's capacity, add the new hard drive to the VG:\n# vgextend MyVolGroup /dev/sdc\nNow, extend the thin pool:\n# lvextend -l +95%FREE MyVolGroup/MyThinPool\nSince this thin LV's size is 16 TiB, you could add another 15.09 TiB of hard drive space before finally having to unmount and resize the file system.\nNote\nYou will probably want to use\nreserved blocks\nor a\ndisk quota\nto prevent applications from attempting to use more physical storage than there actually is.\nCustomizing\nSome customisation is available by editing\n/etc/lvm/lvm.conf\n. You may find it useful to customize the output of\nlvs\nand\npvs\nwhich by default does not include the % sync (useful to see progress of conversion between e.g. linear and raid type) and type of logical volume:\n/etc/lvm/lvm.conf\nreport {\nlvs_cols = \"lv_name,lv_attr,lv_active,vg_name,lv_size,lv_layout,lv_allocation_policy,copy_percent,chunk_size\"\npvs_cols = \"pv_name,vg_name,pv_size,pv_free,pv_used,dev_size\"\n}\nTroubleshooting\nLVM commands do not work\nLoad proper module:\n# modprobe dm_mod\nThe\ndm_mod\nmodule should be automatically loaded. In case it does not, explicitly\nload the module at boot\n.\nTry preceding commands with\nlvm\nlike this:\n# lvm pvdisplay\nLogical volumes do not show up\nIf you are trying to mount existing logical volumes, but they do not show up in\nlvscan\n, you can use the following commands to activate them:\n# vgscan\n# vgchange -ay\nLVM on removable media\nSymptoms:\n# vgscan\nReading all physical volumes.  This may take a while...\n/dev/backupdrive1/backup: read failed after 0 of 4096 at 319836585984: Input/output error\n/dev/backupdrive1/backup: read failed after 0 of 4096 at 319836643328: Input/output error\n/dev/backupdrive1/backup: read failed after 0 of 4096 at 0: Input/output error\n/dev/backupdrive1/backup: read failed after 0 of 4096 at 4096: Input/output error\nFound volume group \"backupdrive1\" using metadata type lvm2\nFound volume group \"networkdrive\" using metadata type lvm2\nCause: removing an external LVM drive without deactivating the volume group(s) first. Before you disconnect, make sure to:\n# vgchange -an\nvolume_group_name\nFix: assuming you already tried to activate the volume group with\nvgchange -ay\nvg\n, and are receiving the Input/output errors:\n# vgchange -an\nvolume_group_name\nUnplug the external drive and wait a few minutes:\n# vgscan\n# vgchange -ay\nvolume_group_name\nSuspend/resume with LVM and removable media\nThe factual accuracy of this article or section is disputed.\nReason:\nProvided solution will not work in more complex setups like LUKS on LVM. (Discuss in\nTalk:LVM#LVM on removable media\n)\nIn order for LVM to work properly with removable media – like an external USB drive – the volume group of the external drive needs to be deactivated before suspend. If this is not done, you may get buffer I/O errors on the dm device (after resume). For this reason, it is not recommended to mix external and internal drives in the same volume group.\nTo automatically deactivate the volume groups with external USB drives, tag each volume group with the\nsleep_umount\ntag in this way:\n# vgchange --addtag sleep_umount\nvg_external\nOnce the tag is set, use the following unit file for systemd to properly deactivate the volumes before suspend. On resume, they will be automatically activated by LVM.\n/etc/systemd/system/ext_usb_vg_deactivate.service\n[Unit]\nDescription=Deactivate external USB volume groups on suspend\nBefore=sleep.target\n[Service]\nType=oneshot\nExecStart=-/etc/systemd/system/deactivate_sleep_vgs.sh\n[Install]\nWantedBy=sleep.target\nand this script:\n/etc/systemd/system/deactivate_sleep_vgs.sh\n#!/bin/sh\nTAG=@sleep_umount\nvgs=$(vgs --noheadings -o vg_name $TAG)\necho \"Deactivating volume groups with $TAG tag: $vgs\"\n# Unmount logical volumes belonging to all the volume groups with tag $TAG\nfor vg in $vgs; do\nfor lv_dev_path in $(lvs --noheadings  -o lv_path -S lv_active=active,vg_name=$vg); do\necho \"Unmounting logical volume $lv_dev_path\"\numount $lv_dev_path\ndone\ndone\n# Deactivate volume groups tagged with sleep_umount\nfor vg in $vgs; do\necho \"Deactivating volume group $vg\"\nvgchange -an $vg\ndone\nFinally,\nenable\nthe unit.\nResizing a contiguous logical volume fails\nIf trying to extend a logical volume errors with:\n\" Insufficient suitable contiguous allocatable extents for logical volume \"\nThe reason is that the logical volume was created with an explicit contiguous allocation policy (options\n-C y\nor\n--alloc contiguous\n) and no further adjacent contiguous extents are available.\n[5]\n[\ndead link\n2025-11-17—SSL error]\nTo fix this, prior to extending the logical volume, change its allocation policy with\nlvchange --alloc inherit\nlogical_volume\n. If you need to keep the contiguous allocation policy, an alternative approach is to move the volume to a disk area with sufficient free extents. See\n[6]\n.\nCommand \"grub-mkconfig\" reports \"unknown filesystem\" errors\nMake sure to remove snapshot volumes before\ngenerating grub.cfg\n.\nThinly-provisioned root volume device times out\nWith a large number of snapshots,\nthin_check\nruns for a long enough time so that waiting for the root device times out. To compensate, add the\nrootdelay=60\nkernel boot parameter to your boot loader configuration.  Or, make\nthin_check\nskip checking block mappings (see\n[7]\n) and\nregenerate the initramfs\n:\n/etc/lvm/lvm.conf\nthin_check_options = [ \"-q\", \"--clear-needs-check-flag\", \"--skip-mappings\" ]\nDelay on shutdown\nIf you use RAID, snapshots or thin provisioning and experience a delay on shutdown, make sure\nlvm2-monitor.service\nis\nstarted\n. See\nFS#50420\n.\nHibernating into a thinly-provisioned swap volume\nSee\nPower management/Suspend and hibernate#Hibernation into a thinly-provisioned LVM volume\n.\nSee also\nLVM2 Resource Page\non SourceWare.org\nGentoo:LVM\nRed Hat Enterprise 9: Configuring and managing logical volumes\nUbuntu LVM Guide Part 1\nPart 2 details snapshots\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=LVM&oldid=853734\n\"\nCategory\n:\nStorage virtualization\nHidden categories:\nPages or sections flagged with Template:Expansion\nPages or sections flagged with Template:Accuracy\nPages with dead links\nSearch\nSearch\nLVM\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/LVM"}}
{"text": "Network configuration - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nNetwork configuration\n9 languages\nČeština\nEspañol\nSuomi\nMagyar\nItaliano\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nDomain name resolution\nFirewalls\nInternet sharing\nNetwork Debugging\nRouter\nThis article describes how to configure network connections on\nOSI layer 3\nand above. Medium-specifics are handled in the\n/Ethernet\nand\n/Wireless\nsubpages.\nCheck the connection\nThis article or section needs expansion.\nReason:\nStep 4. is unclear,\n#Routing table\ndoes not explain what a correct setup looks like. (Discuss in\nTalk:Network configuration\n)\nTo troubleshoot a network connection, go through the following conditions and ensure that you meet them:\nYour\nnetwork interface\nis listed and enabled. Otherwise, check the device driver – see\n/Ethernet#Device driver\nor\n/Wireless#Device driver\n.\nYou are connected to the network. The cable is plugged in or you are\nconnected to the wireless LAN\n.\nYour network interface has an\nIP address\n.\nYour\nrouting table\nis correctly set up.\nYou can\nping\na local IP address (e.g. your default gateway).\nYou can\nping\na public IP address (e.g.\n9.9.9.9\n, which is a DNS server operated by the Quad9 Foundation and is a convenient address to test with).\nCheck if you can resolve domain names\n(e.g.\narchlinux.org\n).\nNote\nIf your network is fine during install, but can't ping in the new system, even having proper networking services (e.g.\nNetworkManager\n) installed, check whether your network needed device authenation (i.e. School network). If so, wait prabably 2 hours and try again. The reason may be that during the installation, the host name \"archiso\", is changed to \"archlinux\" in the installed system, causing authenation failure, therefore ignoring the connection request from the new system.\nPing\nping\nis used to test if you can reach a host.\n$ ping www.example.com\nPING www.example.com (93.184.216.34) 56(84) bytes of data.\n64 bytes from 93.184.216.34 (93.184.216.34): icmp_seq=1 ttl=56 time=11.632 ms\n64 bytes from 93.184.216.34 (93.184.216.34): icmp_seq=2 ttl=56 time=11.726 ms\n64 bytes from 93.184.216.34 (93.184.216.34): icmp_seq=3 ttl=56 time=10.683 ms\n...\nFor every reply received, the\nping\nutility will print a line like the above until you interrupt (\nCtrl+c\n) it interactively. For more information see the\nping(8)\nmanual. Note that computers can be configured not to respond to ICMP echo requests.\n[1]\nIf you receive an error message (see\nping error indications\n) or no reply, this may be related to incomplete configuration, but also your default gateway or your Internet Service Provider (ISP). You can run a\ntraceroute\nto further diagnose the route to the host.\nNetwork management\nThis article or section needs language, wiki syntax or style improvements. See\nHelp:Style\nfor reference.\nReason:\nSplit into manual configuration with iproute2 and automatic with DHCP & SLAAC. (Discuss in\nTalk:Network configuration#Style_notice_in_Network_Management_section\n)\nTo set up a network connection, go through the following steps:\nEnsure your\nnetwork interface\nis listed and enabled.\nConnect to the network. Plug in the Ethernet cable or\nconnect to the wireless LAN\n.\nConfigure your network connection:\nMost networks use the\nDynamic Host Configuration Protocol\nfor network configuration. Clients can automatically obtain a dynamic or static IP address from the DHCP server via\na standalone DHCP client or using a network manager\n.\nIf the network does not have a DHCP server, you can configure a static IP address, routing table and DNS servers manually for each client. See\n#Static IP address\nfor details.\nNote\nThe installation image uses\nsystemd-networkd\n, which is configured as a DHCP client for\nEthernet\n,\nWLAN\nand\nWWAN\nnetwork interfaces, and\nsystemd-resolved\nconfigured for system-wide\nDNS\n, see\nsystemd-resolved#DNS\n.\nManual\niproute2\nThis article or section needs language, wiki syntax or style improvements. See\nHelp:Style\nfor reference.\nReason:\nThis section does not fit in\n#Network management\n– it does not\nmanage\nanything, it only introduces the\niproute2\npackage. (Discuss in\nTalk:Network configuration\n)\niproute2\nis a dependency of the\nbase\nmeta package\nand provides the\nip(8)\ncommand-line interface, used to manage\nnetwork interfaces\n,\nIP addresses\nand the\nrouting table\n. Be aware that configuration made using\nip\nwill be lost after a reboot. For persistent configuration, you can automate\nip\ncommands using scripts and\nsystemd units\n. Also note that\nip\ncommands can generally be abbreviated, for clarity they are however spelled out in this article.\nNote\nArch Linux has deprecated\nnet-tools\nin favor of\niproute2\n.\n[2]\nSee also\nDeprecated Linux networking commands and their replacements\n.\nStatic IP address\nA static IP address can be configured with most standard\nnetwork managers\nand also\ndhcpcd\n.\nTo manually configure a static IP address, add an IP address as described in\n#IP addresses\n, set up your\nrouting table\nand\nconfigure your DNS servers\n.\nIP addresses\nIP addresses\nare managed using\nip-address(8)\n.\nList IP addresses:\n$ ip address show\nAdd an IP address to an interface:\n# ip address add\naddress/prefix_len\nbroadcast + dev\ninterface\nNote that:\nthe address is given in\nCIDR notation\nto also supply a\nsubnet mask\n+\nis a special symbol that makes\nip\nderive the\nbroadcast address\nfrom the IP address and the subnet mask\nNote\nMake sure manually assigned IP addresses do not conflict with DHCP assigned ones.\nDelete an IP address from an interface:\n# ip address del\naddress/prefix_len\ndev\ninterface\nDelete all addresses matching a criteria, e.g. of a specific interface:\n# ip address flush dev\ninterface\nTip\nIPv4 addresses can be calculated with\nipcalc\n(\nipcalc\n).\nRouting table\nThe\nrouting table\nis used to determine if you can reach an IP address directly or what gateway (router) you should use. If no other route matches the IP address, the\ndefault gateway\nis used.\nThe routing table is managed using\nip-route(8)\n.\nPREFIX\nis either a CIDR notation or\ndefault\nfor the default gateway.\nList IPv4 routes:\n$ ip route show\nList IPv6 routes:\n$ ip -6 route show\nAdd a route:\n# ip route add\nPREFIX\nvia\naddress\ndev\ninterface\nDelete a route:\n# ip route del\nPREFIX\nvia\naddress\ndev\ninterface\nAutomatic\nThis article or section needs expansion.\nReason:\nExplain\nSLAAC\n. (Discuss in\nTalk:Network configuration\n)\nAutomatic network configuration is accomplished using\nDynamic Host Configuration Protocol\n(DHCP). The network's DHCP server provides IP address(es), the default gateway IP address(es) and optionally also DNS name servers upon request\nfrom the DHCP client.\nSee\nRouter#DNS and DHCP\nfor a DHCP server comparison table.\nNetwork managers\nA network manager lets you manage network connection settings in so called network profiles to facilitate switching networks.\nTip\nYou can check if a DHCPv4 server is running with\ndhcping\n.\nNote\nEach network interface should be managed by only one DHCP client or network manager, so it is advised to run only one DHCP client or network manager on the system.\nSoftware\nConnection type\nWireless authentication\nIP address, route and DNS management\nInterface\nEthernet\nPPPoE\nMobile broadband\nStatic IP\nDHCP client\nDomain name resolution\nCLI\nTUI\nGUI\ndhclient\n1\nYes\nNo\nNo\nNo\n2\nYes\ninternal\nYes (writes\n/etc/resolv.conf\n)\nNo\nNo\nNo\ndhcpcd\nYes\nNo\nNo\nLaunches wpa_supplicant\n3\nYes\ninternal\nYes\n(uses\nresolvconf\nor writes\n/etc/resolv.conf\n)\nNo\nNo\ndhcpcd-ui\nAUR\nConnMan\nYes\nNo\nYes (via\nofono\nAUR\n)\nYes (via\nwpa_supplicant\nor\niwd\n)\nYes\ninternal\nYes\n(runs a builtin resolver and writes\n/etc/resolv.conf\n)\nconnmanctl(1)\nYes\nYes\nnetctl\nYes\nYes\n(via\nppp\n)\nYes (via\nppp\n)\nYes (via\nwpa_supplicant\n)\nYes\ndhcpcd\nor\ndhclient\nYes\n(uses\nresolvconf\n)\nnetctl(1)\nwifi-menu(1)\n4\nNo\nNetworkManager\nYes\nYes\n(via\nppp\n)\nYes\n(via\nmodemmanager\n)\nYes (via\nwpa_supplicant\nor\niwd\n)\nYes\ninternal,\ndhclient\nor\ndhcpcd\n5\nYes\n(uses\nsystemd-resolved\n,\nresolvconf\nor writes\n/etc/resolv.conf\n)\nnmcli(1)\nnmtui(1)\nYes\nsystemd-networkd\nYes\nNo\nNo\nNo\n2\nYes\ninternal\nYes (uses\nsystemd-resolved\n)\nnetworkctl(1)\nNo\nNo\nwpa_supplicant\nIEEE 802.1X\nNo\nNo\nYes\nNo\nwpa_cli(8)\nNo\nwpa_supplicant_gui\nAUR\niwd\nIEEE 802.1X\nNo\nNo\nYes\nYes\ninternal\nYes\n(uses\nsystemd-resolved\nor\nresolvconf\n)\niwctl(1)\nimpala\niwgtk\nAUR\nNo longer maintained as of early 2022. ISC advises no longer using it in production.\nWireless authentication can be configured separately with\nwpa_supplicant\nor\niwd\n.\nWireless authentication must be configured separately with\nwpa_supplicant\n.\nOnly Wi-Fi connections can be managed.\nNetworkManager does not use dhcpcd for DHCPv6, see\nNetworkManager#DHCP client\n.\nNetwork interfaces\nNetwork interfaces are managed by\nudev\nand configured by\nsystemd.link(5)\nfiles. The default configuration assigns names to your\nnetwork interface controllers\nusing\nPredictable Network Interface Names\n, which prefixes interfaces names with\nen\n(wired/\nEthernet\n),\nwl\n(wireless/\nWLAN\n), or\nww\n(mobile broadband/\nWWAN\n). See\nsystemd.net-naming-scheme(7)\n.\nTip\nThe system\n/usr/lib/systemd/network/99-default.link\nis generally sufficient for most cases.\nTo change interface names, see\n#Change interface name\nand\n#Revert to traditional interface names\n.\nYou can run\nudevadm test-builtin net_setup_link\n/sys/path/to/network/device\nas the root user to diagnose problems with\n.link\nfiles.\nNote\nThe predictable network interface names can change after adding or removing a PCIe device if the system firmware decides to renumber the devices. See\nsystemd issue 33347\n.\nThe\niwd\npackage contains a\n.link\nfile that disables predictable network interface names. Merely having it installed will prevent all network interfaces from being renamed to predictable names. See\niwd#Wireless device is not renamed by udev\n.\nListing network interfaces\nBoth wired and wireless interface names can be found via\nls /sys/class/net\nor\nip link\n. Note that\nlo\nis the\nvirtual loopback interface\nand not used in making network connections.\nWireless device names can also be retrieved using\niw dev\n. See also\n/Wireless#Get the name of the interface\n.\nIf your network interface is not listed, make sure your device driver was loaded successfully. See\n/Ethernet#Device driver\nor\n/Wireless#Device driver\n.\nEnabling and disabling network interfaces\nNetwork interfaces can be enabled or disabled using\nip link set\ninterface\nup|down\n, see\nip-link(8)\n.\nTo check the status of the interface\nenp2s0\n:\n$ ip link show dev enp2s0\n2: enp2s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000\n...\nThe\nUP\nin\n<BROADCAST,MULTICAST,UP,LOWER_UP>\nis what indicates the interface is up, not the later\nstate DOWN\n.\nNote\nIf your default route is through interface\nenp2s0\n, taking it down will also remove the route, and bringing it back up will not automatically re-establish the default route.  See\n#Routing table\nfor re-establishing it.\nChange interface name\nThis article or section needs expansion.\nReason:\nSuggest using an\nalternative name\n(altname), or assigning one, as an alternative to changing the interface name. (Discuss in\nTalk:Network configuration\n)\nNote\nWhen changing the naming scheme, do not forget to update all network-related configuration files and custom systemd unit files to reflect the change.\nYou can change the device name by defining the name manually with a\nsystemd.link(5)\nfile. The file must be ordered lexicographically before\n99-default.link\n, for example:\n/etc/systemd/network/10-net0.link\n[Match]\nPermanentMACAddress=aa:bb:cc:dd:ee:ff\n[Link]\nName=net0\nAlternatively, a udev rule can be used:\n/etc/udev/rules.d/10-network.rules\nSUBSYSTEM==\"net\", ACTION==\"add\", ATTR{address}==\"aa:bb:cc:dd:ee:ff\", NAME=\"net0\"\nThese rules will be applied automatically at boot. To apply the change immediately, do a manual trigger of the udev rule on the\nnet\nsubsystem:\n# udevadm trigger --verbose --subsystem-match=net --action=add\nIf you want to run a\ntest\non the changes made,\nudevadm --debug test /sys/class/net/*\ncan be of help.\nNote\nThe priority of\nName\nis lower than\nNamePolicy\n, so make sure the latter is unset/empty or the name will not be changed.\nThe network interface must be down before changing its name.\n[3]\nTo get the MAC address of each card, run\nip link\n.\nMake sure to use the lower-case hex values in your udev rules. It does not like upper-case.\nIf the network card has a dynamic MAC, you can use\nPath\n(which can be checked using\nnetworkctl status\ninterface_name\n):\n/etc/systemd/network/10-net1.link\n[Match]\nPath=pci-0000:01:00.0\n[Link]\nName=net1\nOr, use a udev rule with\nDEVPATH\n:\n/etc/udev/rules.d/10-network.rules\nSUBSYSTEM==\"net\", DEVPATH==\"/devices/pci*/*1c.0/*/net/*\", NAME=\"net1\"\nTo get the\nDEVPATH\nof all currently-connected devices, see where the symlinks in\n/sys/class/net/\nlead. For example:\n$ file /sys/class/net/*\n/sys/class/net/enp0s20f0u4u1: symbolic link to ../../devices/pci0000:00/0000:00:14.0/usb2/2-4/2-4.1/2-4.1:1.0/net/enp0s20f0u4u1\n/sys/class/net/enp0s31f6:     symbolic link to ../../devices/pci0000:00/0000:00:1f.6/net/enp0s31f6\n/sys/class/net/lo:            symbolic link to ../../devices/virtual/net/lo\n/sys/class/net/wlp4s0:        symbolic link to ../../devices/pci0000:00/0000:00:1c.6/0000:04:00.0/net/wlp4s0\nThe device path should match both the new and old device name, since the rule may be executed more than once on bootup. For example, in the given rule,\n\"/devices/pci*/*1c.0/*/net/en*\"\nwould be wrong since it will stop matching once the name is changed to\nnet1\n. Only the system-default rule will fire the second time around, causing the name to be changed back.\nIf you are using a USB network device (e.g. Android phone tethering) that has a dynamic MAC address and you want to be able to use different USB ports, you could use a rule that matched depending on vendor and model ID instead:\n/etc/systemd/network/20-net2.link\n[Match]\nProperty=ID_VENDOR_ID=12ab ID_MODEL_ID=3cd4\n[Link]\nName=net2\nor\n/etc/udev/rules.d/10-network.rules\nSUBSYSTEM==\"net\", ACTION==\"add\", ATTRS{idVendor}==\"12ab\", ATTRS{idProduct}==\"3cd4\", NAME=\"net2\"\nNote\nWhen choosing the static names\nit should be avoided to use names in the format of \"eth\nX\n\" and \"wlan\nX\n\"\n, because this may lead to race conditions between the kernel and udev during boot. Instead, it is better to use interface names that are not used by the kernel as default, e.g.:\nnet0\n,\nnet1\n,\nwifi0\n,\nwifi1\n. For further details please see the\nsystemd\ndocumentation.\nRevert to traditional interface names\nIf you would prefer to retain traditional interface names such as\neth0\n,\nPredictable Network Interface Names\ncan be disabled by changing the default\nNamePolicy\nfor udev's\nnet_setup_link\nbuilt-in:\n/etc/systemd/network/99-default.link.d/traditional-naming.conf\n[Link]\nNamePolicy=keep kernel\nAlternatively,\nnet_setup_link\ncan be completely disabled by masking the corresponding udev rule:\n# ln -s /dev/null /etc/udev/rules.d/80-net-setup-link.rules\nor by adding\nnet.ifnames=0\nto the\nkernel parameters\n.\nNote\nsystemd.link(5)\nrelies on\nnet_setup_link\nto work. Prefer to use the first approach unless you fully understand what you are doing.\nSet device MTU and queue length\nThe factual accuracy of this article or section is disputed.\nReason:\nCreating a\n30-mtu.link\nfile means that\n99-default.link\nwill not get applied. (Discuss in\nTalk:Network configuration\n)\nYou can change the device\nMTU\nand queue length by defining manually with a\nsystemd.link(5)\nconfig. For example:\n/etc/systemd/network/30-mtu.link\n[Match]\nType=wlan\n[Link]\nMTUBytes=1500\nTransmitQueueLength=2000\nOr through a udev rule:\n/etc/udev/rules.d/10-network.rules\nACTION==\"add\", SUBSYSTEM==\"net\", KERNEL==\"wl*\", ATTR{mtu}=\"1500\", ATTR{tx_queue_len}=\"2000\"\nMTUBytes\n: Using a value larger than 1500 (so called\njumbo frames\n) can significantly speed up your network transfers. Note that all network interfaces, including switches in the local network, must support the same MTU in order to use jumbo frames. For PPPoE, the MTU should not be larger than 1492. You can also set MTU via\nsystemd.netdev(5)\n.\nTransmitQueueLength\n: Small value for slower devices with a high latency like modem links and ISDN. High value is recommended for server connected over the high-speed internet connections that perform large data transfers.\nSet the hostname\nA\nhostname\nis a unique name created to identify a machine on a network, configured in\n/etc/hostname\n—see\nhostname(5)\nand\nhostname(7)\nfor details. The file can contain the system's domain name, if any. To set the hostname,\nedit\n/etc/hostname\nto include a single line with\nyourhostname\n:\n/etc/hostname\nyourhostname\nTip\nFor advice on choosing a hostname, see\nRFC 1178\n.\nAlternatively, using\nhostnamectl(1)\n:\n# hostnamectl hostname\nyourhostname\nTo temporarily set the hostname (until reboot), use\nhostname(1)\nfrom\ninetutils\n:\n# hostname\nyourhostname\nTo set the \"pretty\" hostname and other machine metadata, see\nmachine-info(5)\n.\nLocal network hostname resolution\nTo make your machine accessible in your LAN via its hostname you can:\nedit the\n/etc/hosts\nfile for every device in your LAN, see\nhosts(5)\nset up a\nDNS server\nto resolve your hostname and make the LAN devices use it (e.g. via\nDHCP\n)\nor the easy way: use a\nZero-configuration networking\nservice:\nHostname resolution via Microsoft's\nNetBIOS\n. Provided by\nSamba\non Linux. It only requires the\nnmb.service\n. Computers running Windows, macOS, or Linux with\nnmb\nrunning, will be able to find your machine.\nHostname resolution via\nmDNS\n. Provided by either\nnss_mdns\nwith\nAvahi\n(see\nAvahi#Hostname resolution\nfor setup details) or\nsystemd-resolved\n. Computers running macOS, or Linux with Avahi or systemd-resolved running, will be able to find your machine. The older Win32 API does not support mDNS, which may prevent some older Windows applications from accessing your device.\nTips and tricks\nBonding or LAG\nSee\nnetctl\nor\nsystemd-networkd\n, or\nWireless bonding\n.\nIP address aliasing\nIP aliasing is the process of adding more than one IP address to a network interface. With this, one node on a network can have multiple connections to a network, each serving a different purpose. Typical uses are virtual hosting of Web and FTP servers, or reorganizing servers without having to update any other machines (this is especially useful for nameservers).\nExample\nTo manually set an alias, for some NIC, use\niproute2\nto execute\n# ip addr add 192.168.2.101/24 dev enp2s0 label enp2s0:1\nTo remove a given alias execute\n# ip addr del 192.168.2.101/24 dev enp2s0:1\nPackets destined for a subnet will use the primary alias by default. If the destination IP is within a subnet of a secondary alias, then the source IP is set respectively. Consider the case where there is more than one NIC, the default routes can be listed with\nip route\n.\nPromiscuous mode\nToggling\npromiscuous mode\nwill make a (wireless) NIC forward all traffic it receives to the OS for further processing. This is opposite to \"normal mode\" where a NIC will drop frames it is not intended to receive. It is most often used for advanced network troubleshooting and\npacket sniffing\n.\n/etc/systemd/system/promiscuous@.service\n[Unit]\nDescription=Set %i interface in promiscuous mode\nAfter=network.target\n[Service]\nType=oneshot\nExecStart=/usr/bin/ip link set dev %i promisc on\nRemainAfterExit=yes\n[Install]\nWantedBy=multi-user.target\nIf you want to enable promiscuous mode on interface\nenp2s0\n,\nenable\npromiscuous@enp2s0.service\n.\nInvestigate sockets\nss\nis a utility to investigate network ports and is part of the\niproute2\npackage. It has a similar functionality to the\ndeprecated\nnetstat utility.\nCommon usage includes:\nDisplay all TCP Sockets with service names:\n$ ss -at\nDisplay all TCP Sockets with port numbers:\n$ ss -atn\nDisplay all UDP Sockets:\n$ ss -au\nFor more information see\nss(8)\n.\nTroubleshooting\nThe TCP window scaling problem\nTCP packets contain a \"window\" value in their headers indicating how much data the other host may send in return. This value is represented with only 16 bits, hence the window size is at most 64KiB. TCP packets are cached for a while (they have to be reordered), and as memory is (or used to be) limited, one host could easily run out of it.\nBack in 1992, as more and more memory became available,\nRFC:1323\nwas written to improve the situation: Window Scaling. The \"window\" value, provided in all packets, will be modified by a Scale Factor defined once, at the very beginning of the connection. That 8-bit Scale Factor allows the Window to be up to 32 times higher than the initial 64KiB.\nIt appears that some broken routers and firewalls on the Internet are rewriting the Scale Factor to 0 which causes misunderstandings between hosts. The Linux kernel 2.6.17 introduced a new calculation scheme generating higher Scale Factors, virtually making the aftermaths of the broken routers and firewalls more visible.\nThe resulting connection is at best very slow or broken.\nHow to diagnose the problem\nFirst of all, let us make it clear: this problem is odd. In some cases, you will not be able to use TCP connections (HTTP, FTP, ...) at all and in others, you will be able to communicate with some hosts (very few).\nWhen you have this problem, the output from\ndmesg\nis okay, logs are clean and\nip addr\nwill report normal status... and actually everything appears normal.\nIf you cannot browse any website, but you can ping some random hosts, chances are great that you are experiencing this problem: ping uses ICMP and is not affected by TCP problems.\nYou can try to use\nWireshark\n. You might see successful UDP and ICMP communications but unsuccessful TCP communications (only to foreign hosts).\nWays of fixing it\nBad\nTo fix it the bad way, you can change the\ntcp_rmem\nvalue, on which Scale Factor calculation is based. Although it should work for most hosts, it is not guaranteed, especially for very distant ones.\n# sysctl -w net.ipv4.tcp_rmem=\"4096 87380 174760\"\nGood\nSimply disable Window Scaling. Since Window Scaling is a nice TCP feature, it may be uncomfortable to disable it, especially if you cannot fix the broken router. There are several ways to disable Window Scaling, and it seems that the most bulletproof way (which will work with most kernels) is to add the following line to\n/etc/sysctl.d/99-disable_window_scaling.conf\n(see also\nsysctl\n):\nnet.ipv4.tcp_window_scaling = 0\nBest\nThis problem is caused by broken routers/firewalls, so let us change them. Some users have reported that the broken router was their very own DSL router.\nMore about it\nThis section is based on the LWN article\nTCP window scaling and broken routers\nand an archived Kernel Trap article:\nWindow Scaling on the Internet\n.\nThere are also several relevant threads on the LKML.\nlocal hostname is resolved over the network\nnss-myhostname(8)\n(an\nNSS\nmodule provided by\nsystemd\nand enabled by default in\n/etc/nsswitch.conf\n) provides\nlocalhost\nand the local\nhostname\nresolution to an IP address. Some software may, however, still instead read\n/etc/hosts\ndirectly; see\n[4]\n[5]\nfor examples.\nTo prevent such software from unsafely resolving the local hostname over the network, add an entry for it to the\nhosts(5)\nfile:\n/etc/hosts\n127.0.0.1        localhost\n::1              localhost\n127.0.1.1\nyourhostname\nFor a system with a permanent IP address, replace\n127.0.1.1\nwith that permanent IP address. For a system with a\nfully qualified domain name\n, insert the fully qualified domain name before the hostname (see the following link for\nthe reasoning\n). For example:\n/etc/hosts\n127.0.0.1        localhost\n::1              localhost\n203.0.113.45     host1.fqdomain.example host1\nNote\nThe order of hostnames/aliases that follow the IP address in\n/etc/hosts\nis significant. The first string is considered the canonical hostname and may be appended with parent domains, where domain components are separated by a dot. All following strings on the same line are considered aliases. See\nhosts(5)\nfor more information.\nSee also\nLinux Network Administrators Guide\nDebian Reference: Network setup\nRHEL7: Networking Guide\nMonitoring and tuning the Linux Networking Stack: Receiving data\nMonitoring and tuning the Linux Networking Stack: Sending data\nTracing a packet journey using tracepoints, perf and eBPF\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Network_configuration&oldid=853724\n\"\nCategory\n:\nNetwork configuration\nHidden categories:\nPages or sections flagged with Template:Expansion\nPages or sections flagged with Template:Style\nPages or sections flagged with Template:Accuracy\nSearch\nSearch\nNetwork configuration\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Network_configuration"}}
{"text": "systemd - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nsystemd\n10 languages\nDeutsch\nEspañol\nSuomi\nFrançais\nMagyar\nItaliano\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nsystemd/User\nsystemd/Timers\nsystemd/Journal\nsystemd/Sandboxing\nsystemd/FAQ\ninit\nudev\nImproving performance/Boot process\nAllow users to shutdown\nFrom the\nproject web page\n:\nsystemd\nis a suite of basic building blocks for a Linux system. It provides a system and service manager that runs as PID 1 and starts the rest of the system.\nsystemd\nprovides aggressive parallelization capabilities, uses socket and\nD-Bus\nactivation for starting services, offers on-demand starting of daemons, keeps track of processes using Linux\ncontrol groups\n, maintains mount and automount points, and implements an elaborate transactional dependency-based service control logic.\nsystemd\nsupports SysV and LSB init scripts and works as a replacement for sysvinit. Other parts include a logging daemon, utilities to control basic system configuration like the hostname, date, locale, maintain a list of logged-in users and running containers and virtual machines, system accounts, runtime directories and settings, and daemons to manage simple network configuration, network time synchronization, log forwarding, and name resolution.\nHistorically, what systemd calls \"service\" was named\ndaemon\n: any program that runs as a \"background\" process (without a terminal or user interface), commonly waiting for events to occur and offering services. A good example is a web server that waits for a request to deliver a page, or an ssh server waiting for someone trying to log in. While these are full featured applications, there are daemons whose work is not that visible. Daemons are for tasks like writing messages into a log file (e.g.\nsyslog\n,\nmetalog\n) or keeping your system time accurate (e.g.\nntpd\n). For more information see\ndaemon(7)\n.\nNote\nFor a detailed explanation of why Arch moved to\nsystemd\n, see\nthis forum post\n.\nBasic systemctl usage\nThe main command used to introspect and control\nsystemd\nis\nsystemctl\n. Some of its uses are examining the system state and managing the system and services. See\nsystemctl(1)\nfor more details.\nTip\nYou can use all of the following\nsystemctl\ncommands with the\n-H\nuser\n@\nhost\nswitch to control a\nsystemd\ninstance on a remote machine. This will use\nSSH\nto connect to the remote\nsystemd\ninstance.\nPlasma\nusers can install\nsystemdgenie\nas a graphical frontend for\nsystemctl\n.\nUsing units\nUnits commonly include, but are not limited to, services (\n.service\n), mount points (\n.mount\n), devices (\n.device\n) and sockets (\n.socket\n).\nWhen using\nsystemctl\n, you generally have to specify the complete name of the unit file, including its suffix, for example\nsshd.socket\n. There are however a few short forms when specifying the unit in the following\nsystemctl\ncommands:\nIf you do not specify the suffix, systemctl will assume\n.service\n. For example,\nnetctl\nand\nnetctl.service\nare equivalent.\nMount points will automatically be translated into the appropriate\n.mount\nunit. For example, specifying\n/home\nis equivalent to\nhome.mount\n.\nSimilar to mount points, devices are automatically translated into the appropriate\n.device\nunit, therefore specifying\n/dev/sda2\nis equivalent to\ndev-sda2.device\n.\nSee\nsystemd.unit(5)\nfor details.\nNote\nSome unit names contain an\n@\nsign (e.g.\nname@\nstring\n.service\n): this means that they are\ninstances\nof a\ntemplate\nunit, whose actual file name does not contain the\nstring\npart (e.g.\nname@.service\n).\nstring\nis called the\ninstance identifier\n, and is similar to an argument that is passed to the template unit when called with the\nsystemctl\ncommand: in the unit file it will substitute the\n%i\nspecifier. To be more accurate,\nbefore\ntrying to instantiate the\nname@.\nsuffix\ntemplate unit,\nsystemd\nwill actually look for a unit with the exact\nname@\nstring\n.\nsuffix\nfile name, although by convention such a \"clash\" happens rarely, i.e. most unit files containing an\n@\nsign are meant to be templates. Also, if a template unit is called without an instance identifier, it will generally fail (except with certain\nsystemctl\ncommands, like\ncat\n).\nThe commands in the below table operate on\nsystem units\nsince\n--system\nis the implied default for\nsystemctl\n. To instead operate on\nuser units\n(for the\ncalling user\n), use\nsystemctl --user\nwithout root privileges. See also\nsystemd/User#Basic setup\nto enable/disable user units for\nall users\n.\nTip\nMost commands also work if multiple units are specified, see\nsystemctl(1)\nfor more information.\nThe\n--now\nswitch can be used in conjunction with\nenable\n,\ndisable\n, and\nmask\nto respectively start, stop, or mask the unit\nimmediately\nrather than after rebooting.\nA package may offer units for different purposes. If you just installed a package,\npacman -Qql\npackage\n| grep -Fe .service -e .socket\ncan be used to check and find them.\nWhen available, enabling\nunit\n.socket\ninstead of\nunit\n.service\nmight be beneficial because the socket would start the service when necessary. See\n#Socket activation\nfor more details.\nAction\nCommand\nNote\nAnalyzing the system state\nShow system status\nsystemctl status\nList running\nunits\nsystemctl\nor\nsystemctl list-units\nList failed\nunits\nsystemctl --failed\nList installed\nunit files\n1\nsystemctl list-unit-files\nShow process status\nfor a PID\nsystemctl status\npid\ncgroup slice\n, memory and parent\nChecking the unit status\nShow a manual page\nassociated with a unit\nsystemctl help\nunit\nas supported by the unit\nStatus\nof a unit\nsystemctl status\nunit\nincluding whether it is running or not\nCheck\nwhether a unit is enabled\nsystemctl is-enabled\nunit\nStarting, restarting, reloading a unit\nStart\na unit immediately\nsystemctl start\nunit\nas root\nStop\na unit immediately\nsystemctl stop\nunit\nas root\nRestart\na unit\nsystemctl restart\nunit\nas root\nReload\na unit and its configuration\nsystemctl reload\nunit\nas root\nReload systemd manager\nconfiguration\n2\nsystemctl daemon-reload\nas root\nscan for new or changed units\nEnabling a unit\nEnable\na unit to start automatically at boot\nsystemctl enable\nunit\nas root\nEnable\na unit to start automatically at boot and\nstart\nit immediately\nsystemctl enable --now\nunit\nas root\nDisable\na unit to no longer start at boot\nsystemctl disable\nunit\nas root\nReenable\na unit\n3\nsystemctl reenable\nunit\nas root\ni.e. disable and enable anew\nMasking a unit\nMask\na unit to make it impossible to start\n4\nsystemctl mask\nunit\nas root\nUnmask\na unit\nsystemctl unmask\nunit\nas root\nSee\nsystemd.unit(5) § UNIT FILE LOAD PATH\nfor the directories where available unit files can be found.\nThis does not ask the changed units to reload their own configurations (see the\nReload\naction).\nFor example, in case its\n[Install]\nsection has changed since last enabling it.\nBoth manually and as a dependency, which makes masking dangerous. Check for existing masked units with:\n$ systemctl list-unit-files --state=masked\nPower management\npolkit\nis necessary for power management as an unprivileged user. If you are in a local\nsystemd-logind\nuser session and no other session is active, the following commands will work without root privileges. If not (for example, because another user is logged into a tty),\nsystemd\nwill automatically ask you for the root password.\nAction\nCommand\nShut down and reboot the system\nsystemctl reboot\nShut down and power-off the system\nsystemctl poweroff\nSuspend the system\nsystemctl suspend\nPut the system into hibernation (write RAM to disk)\nsystemctl hibernate\nPut the system into hybrid-sleep state (also called suspend-to-both, it saves RAM to disk and then suspends)\nsystemctl hybrid-sleep\nFirst suspend the system, then wake up after a configured time in order to just hibernate the system\nsystemctl suspend-then-hibernate\nPerform a reboot of the userspace-only with a\n#Soft reboot\n.\nsystemctl soft-reboot\nSoft reboot\nSoft reboot is a special kind of a userspace-only reboot operation that does not involve the kernel. It is implemented by\nsystemd-soft-reboot.service(8)\nand can be invoked through\nsystemctl soft-reboot\n. As with\nkexec\n, it skips firmware re-initialization, but additionally the system does not go through kernel initialization and\ninitramfs\n, and unlocked\ndm-crypt\ndevices remain attached.\nWhen\n/run/nextroot/\ncontains a valid root file system hierarchy (e.g. is the root mount of another distribution or another snapshot),\nsoft-reboot\nwould switch the system root into it, allowing for switching to another installation without losing states managed by kernel, e.g.\nnetworking\n.\nTip\n/run/nextroot/\nis not necessarily a mount point or backed by physical device. For example, it can reside in the\n/run/\ntmpfs.\nsystemd\nwill turn\n/run/nextroot/\nautomatically into a mount point on\nsoft-reboot\n.\nNote\nDo not invoke\nsystemctl soft-reboot\nafter package updates that involved the kernel and initramfs.\nWriting unit files\nThe syntax of\nsystemd'\ns unit files (\nsystemd.unit(5)\n) is inspired by\nXDG Desktop Entry Specification .desktop files\n, which are in turn inspired by\nMicrosoft Windows .ini files\n. Unit files are loaded from multiple locations (to see the full list, run\nsystemctl show --property=UnitPath\n), but the main ones are (listed from lowest to highest precedence):\n/usr/lib/systemd/system/\n: units provided by installed packages\n/etc/systemd/system/\n: units installed by the system administrator\nNote\nThe load paths are completely different when running\nsystemd\nin\nuser mode\n.\nsystemd\nunit names may only contain ASCII alphanumeric characters, underscores and periods. All other characters must be replaced by C-style \"\\x2d\" escapes, or employ their predefined semantics ('@', '-'). See\nsystemd.unit(5)\nand\nsystemd-escape(1)\nfor more information.\nLook at the units installed by your packages for examples, as well as\nsystemd.service(5) § EXAMPLES\n.\nTip\nComments prepended with\n#\nmay be used in unit-files as well, but only in new lines. Do not use end-line comments after\nsystemd\nparameters or the unit will fail to activate.\nsystemd-analyze(1)\ncan help verifying the work. See the\nsystemd-analyze verify FILE...\nsection of that page.\nHandling dependencies\nWith\nsystemd\n, dependencies can be resolved by designing the unit files correctly. The most typical case is when unit\nA\nrequires unit\nB\nto be running before\nA\nis started. In that case add\nRequires=\nB\nand\nAfter=\nB\nto the\n[Unit]\nsection of\nA\n. If the dependency is optional, add\nWants=\nB\nand\nAfter=\nB\ninstead. Note that\nWants=\nand\nRequires=\ndo not imply\nAfter=\n, meaning that if\nAfter=\nis not specified, the two units will be started in parallel.\nDependencies are typically placed on services and not on\n#Targets\n. For example,\nnetwork.target\nis pulled in by whatever service configures your network interfaces, therefore ordering your custom unit after it is sufficient since\nnetwork.target\nis started anyway.\nService types\nThere are several different start-up types to consider when writing a custom service file. This is set with the\nType=\nparameter in the\n[Service]\nsection:\nType=simple\n(default):\nsystemd\nconsiders the service to be started up immediately. The process must not fork. Do not use this type if other services need to be ordered on this service, unless it is socket activated.\nType=forking\n:\nsystemd\nconsiders the service started up once the process forks and the parent has exited. For classic daemons, use this type unless you know that it is not necessary. You should specify\nPIDFile=\nas well so\nsystemd\ncan keep track of the main process.\nType=oneshot\n: this is useful for scripts that do a single job and then exit. You may want to set\nRemainAfterExit=yes\nas well so that\nsystemd\nstill considers the service as active after the process has exited. Setting\nRemainAfterExit=yes\nis appropriate for the units which change the system state (e.g., mount some partition). See also\n[1]\nfor the differences of simple and oneshot.\nType=notify\n: identical to\nType=simple\n, but with the stipulation that the daemon will send a signal to\nsystemd\nwhen it is ready. The reference implementation for this notification is provided by\nlibsystemd-daemon.so\n.\nType=dbus\n: the service is considered ready when the specified\nBusName\nappears on DBus's system bus.\nType=idle\n:\nsystemd\nwill delay execution of the service binary until all jobs are dispatched unless these take longer than 5s, where the service binary is started anyway. Other than that its behaviour is very similar to\nType=simple\n. It should never be used for service ordering and is intended for helping with console output readability.\nSee the\nsystemd.service(5) § OPTIONS\nman page for a more detailed explanation of the\nType\nvalues.\nEditing provided units\nThis article or section needs expansion.\nReason:\nWe should fit \"If\n--runtime\nis specified, the changes will be made temporarily in\n/run/\nand they will be lost on the next reboot.\" in here. An example would be passing debug flags to a service and not wanting to keep the changes permanently. (Discuss in\nTalk:Systemd\n)\nTo avoid conflicts with pacman, unit files provided by packages should not be directly edited. There are two safe ways to modify a unit without touching the original file: create a new unit file which\noverrides the original unit\nor create\ndrop-in snippets\nwhich are applied on top of the original unit. For both methods, you must reload the unit afterwards to apply your changes. This can be done either by editing the unit with\nsystemctl edit\n(which reloads the unit automatically) or by reloading all units with:\n# systemctl daemon-reload\nTip\nYou can use\nsystemd-delta\nto see which unit files have been overridden or extended and what exactly has been changed.\nUse\nsystemctl cat\nunit\nto view the content of a unit file and all associated drop-in snippets.\nReplacement unit files\nTo replace the unit file\n/usr/lib/systemd/system/\nunit\n, create the file\n/etc/systemd/system/\nunit\nand\nreenable\nthe unit to update the symlinks.\nAlternatively, run:\n# systemctl edit --full\nunit\nThis opens\n/etc/systemd/system/\nunit\nin your editor (copying the installed version if it does not exist yet) and automatically reloads it when you finish editing.\nNote\nThe replacement units will keep on being used even if Pacman updates the original units in the future. This method makes system maintenance more difficult and therefore the next approach is preferred.\nDrop-in files\nTo create drop-in files for the unit file\n/usr/lib/systemd/system/\nunit\n, create the directory\n/etc/systemd/system/\nunit\n.d/\nand place\n.conf\nfiles there to override or add new options.\nsystemd\nwill parse and apply these files on top of the original unit.\nThe easiest way to do this is to run:\n# systemctl edit\nunit\n--drop-in=\ndrop_in_name\nThis opens the file\n/etc/systemd/system/\nunit\n.d/\ndrop_in_name\n.conf\nin your text editor (creating it if necessary) and automatically reloads the unit when you are done editing. Omitting\n--drop-in=\noption will result in systemd using the default file name\noverride.conf\n.\nNote\nThe key must be still placed in the appropriate section in the override file.\nNot all keys can be overridden with drop-in files. For example, for changing\nConflicts=\na replacement file\nis necessary\n.\nYou can use top-level drop-in files to affect all units of the same type. For example, a drop-in file in\n/etc/systemd/system/service.d/\naffects all\n.service\nunits. You can see an example in\n#Notifying about failed services\nRevert to vendor version\nTo revert any changes to a unit made using\nsystemctl edit\ndo:\n# systemctl revert\nunit\nExamples\nFor example, if you simply want to add an additional dependency to a unit, you may create the following file:\n/etc/systemd/system/\nunit\n.d/customdependency.conf\n[Unit]\nRequires=\nnew dependency\nAfter=\nnew dependency\nAs another example, in order to replace the\nExecStart\ndirective, create the following file:\n/etc/systemd/system/\nunit\n.d/customexec.conf\n[Service]\nExecStart=\nExecStart=\nnew command\nNote how\nExecStart\nmust be cleared before being re-assigned\n[2]\n. The same holds for every item that can be specified multiple times, e.g.\nOnCalendar\nfor timers.\nOne more example to automatically restart a service:\n/etc/systemd/system/\nunit\n.d/restart.conf\n[Service]\nRestart=always\nRestartSec=30\nService logging levels\nFor services that send logs directly to journald or syslog, you can control their verbosity by setting a numeric value between 0 and 6 for the\nLogLevelMax=\nparameter in the\n[Service]\nsection using the methods described above. For example:\n/etc/systemd/system/\nunit\n.d/override.conf\n[Service]\nLogLevelMax=3\nThe standard log levels are identical to those used to filter the\njournal\n. Setting a lower number excludes all higher and less important log messages from your journal.\nSuppressing a service's standard output\nIf a service is echoing stdout and/or stderr output, by default this will end up in the journal as well. This behavior can be suppressed by setting\nStandardOutput=null\nand/or\nStandardError=null\nin the\n[Service]\nsection. Other values than\nnull\ncan be used to further tweak this behavior. See\nsystemd.exec(5) § LOGGING_AND_STANDARD_INPUT/OUTPUT\n.\nTargets\nsystemd\nuses\ntargets\nto group units together via dependencies and as standardized synchronization points. They serve a similar purpose as\nrunlevels\nbut act a little differently. Each\ntarget\nis named instead of numbered and is intended to serve a specific purpose with the possibility of having multiple ones active at the same time. Some\ntarget\ns are implemented by inheriting all of the services of another\ntarget\nand adding additional services to it. There are\nsystemd\ntarget\ns that mimic the common SystemVinit runlevels.\nGet current targets\nThe following should be used under\nsystemd\ninstead of running\nrunlevel\n:\n$ systemctl list-units --type=target\nCreate custom target\nThe runlevels that held a defined meaning under sysvinit (i.e., 0, 1, 3, 5, and 6); have a 1:1 mapping with a specific\nsystemd\ntarget\n. Unfortunately, there is no good way to do the same for the user-defined runlevels like 2 and 4. If you make use of those it is suggested that you make a new named\nsystemd\ntarget\nas\n/etc/systemd/system/\nyour target\nthat takes one of the existing runlevels as a base (you can look at\n/usr/lib/systemd/system/graphical.target\nas an example), make a directory\n/etc/systemd/system/\nyour target\n.wants\n, and then symlink the additional services from\n/usr/lib/systemd/system/\nthat you wish to enable.\nMapping between SysV runlevels and systemd targets\nSysV Runlevel\nsystemd Target\nNotes\n0\npoweroff.target\nHalt the system.\n1, s, single\nrescue.target\nSingle user mode.\n2, 4\nmulti-user.target\nUser-defined/Site-specific runlevels. By default, identical to 3.\n3\nmulti-user.target\nMulti-user, non-graphical. Users can usually login via multiple consoles or via the network.\n5\ngraphical.target\nMulti-user, graphical. Usually has all the services of runlevel 3 plus a graphical login.\n6\nreboot.target\nReboot\nemergency\nemergency.target\nEmergency shell\nChange current target\nIn\nsystemd\n, targets are exposed via\ntarget units\n. You can change them like this:\n# systemctl isolate graphical.target\nThis will only change the current target, and has no effect on the next boot. This is equivalent to commands such as\ntelinit 3\nor\ntelinit 5\nin Sysvinit.\nChange default target to boot into\nThe standard target is\ndefault.target\n, which is a symlink to\ngraphical.target\n. This roughly corresponds to the old runlevel 5.\nTo verify the current target with\nsystemctl\n:\n$ systemctl get-default\nTo change the default target to boot into, change the\ndefault.target\nsymlink. With\nsystemctl\n:\n# systemctl set-default multi-user.target\nRemoved /etc/systemd/system/default.target.\nCreated symlink /etc/systemd/system/default.target -> /usr/lib/systemd/system/multi-user.target.\nAlternatively, append one of the following\nkernel parameters\nto your boot loader:\nsystemd.unit=multi-user.target\n(which roughly corresponds to the old runlevel 3),\nsystemd.unit=rescue.target\n(which roughly corresponds to the old runlevel 1).\nDefault target order\nsystemd\nchooses the\ndefault.target\naccording to the following order:\nKernel parameter shown above\nSymlink of\n/etc/systemd/system/default.target\nSymlink of\n/usr/lib/systemd/system/default.target\nsystemd components\nSome (not exhaustive) components of\nsystemd\nare:\nkernel-install\n— to automatically move\nkernels\nand their respective\ninitramfs\nimages to the boot partition;\nsystemd-analyze(1)\n— may be used to determine boot-up performance,  statistics and retrieve other state and tracing information, and to verify the correctness of unit files. It is also used to access special functions useful for advanced debugging.\nsystemd-boot\n— simple UEFI\nboot manager\n;\nsystemd-creds\n— to securely store and retrieve credentials used by systemd units;\nsystemd-cryptenroll\n— Enroll PKCS#11, FIDO2, TPM2 token/devices to LUKS2 encrypted volumes;\nsystemd-firstboot\n— basic system setting initialization before first boot;\nsystemd-homed\n— portable human-user\naccounts\n;\nsystemd-logind(8)\n—\nsession management\n;\nsystemd-networkd\n—\nnetwork configuration\nmanagement;\nsystemd-nspawn\n— light-weight namespace container;\nsystemd-repart\n— creates partition tables, adds or grows partitions;\nsystemd-resolved\n— network\nname resolution\n;\nsystemd-run(1)\n/\nrun0(1)\n— Temporarily and interactively acquire elevated or different privileges.\nsystemd-stub(7)\n— a UEFI boot stub used for creating\nunified kernel images\n;\nsystemd-sysusers(8)\n— creates system users and groups and adds users to groups at package installation or boot time;\nsystemd-timesyncd\n—\nsystem time\nsynchronization across the network;\nsystemd/Journal\n— system logging;\nsystemd/Timers\n— monotonic or realtime timers for controlling\n.service\nfiles or events, reasonable alternative to\ncron\n.\nsystemd.mount - mounting\nsystemd\nis in charge of mounting the partitions and filesystems specified in\n/etc/fstab\n. The\nsystemd-fstab-generator(8)\ntranslates all the entries in\n/etc/fstab\ninto\nsystemd\nunits; this is performed at boot time and whenever the configuration of the system manager is reloaded.\nsystemd\nextends the usual\nfstab\ncapabilities and offers additional mount options. These affect the dependencies of the mount unit. They can, for example, ensure that a mount is performed only once the network is up or only once another partition is mounted. The full list of specific\nsystemd\nmount options, typically prefixed with\nx-systemd.\n, is detailed in\nsystemd.mount(5) § FSTAB\n.\nAn example of these mount options is\nautomounting\n, which means mounting only when the resource is required rather than automatically at boot time. This is provided in\nfstab#Automount with systemd\n.\nGPT partition automounting\nOn UEFI-booted systems, GPT partitions such as\nroot\n,\nhome\n,\nswap\n, etc. can be mounted automatically following the\nDiscoverable Partitions Specification\n. These partitions can thus be omitted from\nfstab\n, and if the root partition is automounted, then\nroot=\ncan be omitted from the kernel command line. See\nsystemd-gpt-auto-generator(8)\n.\nThe prerequisites are:\nWhen using\nmkinitcpio\n, the\nsystemd hook\nis required to automount the\nroot\npartition.\nAll automounted partitions must reside on the same physical disk as the ESP.\nThe correct GPT partition types must be set. See\nPartitioning#Partition scheme\n.\nThe boot loader must set the\nLoaderDevicePartUUID\nEFI variable, so that the used EFI system partition can be identified. This is supported by\nsystemd-boot\n,\nsystemd-stub(7)\n,\nLimine\n,\nGRUB\n(with\ngrub-mkconfig\ngenerated\ngrub.cfg\n; custom\ngrub.cfg\nrequires\nloading the bli module\n) and\nrEFInd (not enabled by default)\n. This can be verified by running\nbootctl\nand checking if there is a line with\nPartition:\nunder\nCurrent Boot Loader\nor\nCurrent Stub\nwhen booting via\nUnified kernel images\n.\nudev\nwill create\nsymlinks to the discovered partitions\nwhich can be used to reference the partitions and volumes in configuration files.\nTip\nThe automounting of a partition can be disabled by changing the partition's\ntype GUID\nor setting the partition attribute bit 63 \"do not automount\", see\ngdisk#Prevent GPT partition automounting\n.\n/var\nFor\n/var\nautomounting to work, the PARTUUID must match the SHA256 HMAC hash of the partition type UUID keyed by the machine ID. The required PARTUUID can be obtained using:\n$ systemd-id128 -u var-partition-uuid\nNote\nsystemd-id128(1)\nreads the machine ID from\n/etc/machine-id\n, this makes it impossible to know the needed PARTUUID before the system is installed.\nsystemd-sysvcompat\nThe primary role of\nsystemd-sysvcompat\n(required by\nbase\n) is to provide the traditional linux\ninit\nbinary. For\nsystemd\n-controlled systems,\ninit\nis just a symbolic link to its\nsystemd\nexecutable.\nIn addition, it provides four convenience shortcuts that\nSysVinit\nusers might be used to. The convenience shortcuts are\nhalt(8)\n,\npoweroff(8)\n,\nreboot(8)\nand\nshutdown(8)\n. Each one of those four commands is a symbolic link to\nsystemctl\n, and is governed by\nsystemd\nbehavior. Therefore, the discussion at\n#Power management\napplies.\nsystemd\n-based systems can give up those System V compatibility methods by using the\ninit=\nboot parameter\n(see, for example,\n/bin/init is in systemd-sysvcompat ?\n) and\nsystemd\nnative\nsystemctl\ncommand arguments.\nsystemd-tmpfiles - temporary files\nsystemd-tmpfiles\ncreates, deletes and cleans up volatile and temporary files and directories. It reads configuration files in\n/etc/tmpfiles.d/\nand\n/usr/lib/tmpfiles.d/\nto discover which actions to perform. Configuration files in the former directory take precedence over those in the latter directory.\nConfiguration files are usually provided together with service files, and they are named in the style of\n/usr/lib/tmpfiles.d/\nprogram\n.conf\n. For example, the\nSamba\ndaemon expects the directory\n/run/samba\nto exist and to have the correct permissions. Therefore, the\nsamba\npackage ships with this configuration:\n/usr/lib/tmpfiles.d/samba.conf\nD /run/samba 0755 root root\nConfiguration files may also be used to write values into certain files on boot. For example, if you used\n/etc/rc.local\nto disable wakeup from USB devices with\necho USBE > /proc/acpi/wakeup\n, you may use the following tmpfile instead:\n/etc/tmpfiles.d/disable-usb-wake.conf\n#    Path                  Mode UID  GID  Age Argument\nw    /proc/acpi/wakeup     -    -    -    -   USBE\nIt is possible to write multiple lines to the same file, either with\n\\n\nin the argument or using the\nw+\ntype on multiple lines (including the first one) for\nappending\n:\n/etc/tmpfiles.d/disable-usb-wake.conf\n#    Path                  Mode UID  GID  Age Argument\nw+   /proc/acpi/wakeup     -    -    -    -   USBE\nw+   /proc/acpi/wakeup     -    -    -    -   LID0\nSee the\nsystemd-tmpfiles(8)\nand\ntmpfiles.d(5)\nman pages for details.\nNote\nThis method may not work to set options in\n/sys\nsince the\nsystemd-tmpfiles-setup\nservice may run before the appropriate device modules are loaded. In this case, you could check whether the module has a parameter for the option you want to set with\nmodinfo\nmodule\nand set this option with a\nconfig file in /etc/modprobe.d\n. Otherwise, you will have to write a\nudev rule\nto set the appropriate attribute as soon as the device appears.\nDrop-in configuration files\nThe factual accuracy of this article or section is disputed.\nReason:\nThis page is about PID 1 (init), and unit drop-ins are already mentioned. Drop-in is a generic concept, plus other systemd components have their dedicated wiki pages. Therefore this section doesn't seem to belong here. (Discuss in\nTalk:Systemd#YHNdnzj : Configuration files in conf.d / drop-in snippets: misplaced?\n)\nConfiguration files provided by packages should not be directly edited to avoid conflicts with pacman updates. For this, many (but not all) systemd packages provide a way to modify the configuration, but without touching the original file by creation of drop-in snippets. Check the package manual to see if drop-in configuration files are supported.\nTo create a drop-in configuration file for the unit file\n/etc/systemd/\nunit\n.conf\n, create the directory\n/etc/systemd/\nunit\n.conf.d/\nand place\n.conf\nfiles there to override or add new options.\nsystemd\nwill parse and apply these files on top of the original unit.\nCheck the overall configuration:\n$ systemd-analyze cat-config systemd/\nunit\n.conf\nThe applied drop-in snippets file(s) and content will be listed at the end.\nRestart\nthe service for the changes to take effect.\nTips and tricks\nSocket activation\nSome packages provide a\n.socket\nunit. For example,\ncups\nprovides a\ncups.socket\nunit\n[3]\n. If\ncups.socket\nis\nenabled\n(and\ncups.service\nis left disabled),\nsystemd\nwill not start CUPS immediately; it will just listen to the appropriate sockets. Then, whenever a program attempts to connect to one of these CUPS sockets,\nsystemd\nwill start\ncups.service\nand transparently hand over control of these ports to the CUPS process.\nGUI configuration tools\nsystemadm\n— Graphical browser for\nsystemd\nunits. It can show the list of units, possibly filtered by type.\nhttps://github.com/systemd/systemd-ui\n||\nsystemd-ui\nsystemdGenie\n—\nsystemd\nmanagement utility based on KDE technologies.\nhttps://apps.kde.org/systemdgenie/\n||\nsystemdgenie\nisd\n—  TUI for working with\nsystemd\nunits.\nhttps://github.com/kainctl/isd\n||\nisd\nRunning services after the network is up\nTo delay a service until after the network is up, include the following dependencies in the\n.service\nfile:\n/etc/systemd/system/\nfoo\n.service\n[Unit]\n...\nWants=network-online.target\nAfter=network-online.target\n...\nThe network wait service of the\nnetwork manager\nin use must also be enabled so that\nnetwork-online.target\nproperly reflects the network status.\nIf using\nNetworkManager\n,\nNetworkManager-wait-online.service\nshould be enabled together with\nNetworkManager.service\n. Check if this is the case with\nsystemctl is-enabled NetworkManager-wait-online.service\n. If it is not enabled, then\nreenable\nNetworkManager.service\n.\nIn the case of\nnetctl\n,\nenable\nthe\nnetctl-wait-online.service\n(unless you are using\nnetctl-auto\n; see\nFS#75836\n).\nIf using\nsystemd-networkd\n,\nsystemd-networkd-wait-online.service\nshould be enabled together with\nsystemd-networkd.service\n. Check if this is the case with\nsystemctl is-enabled systemd-networkd-wait-online.service\n. If it is not enabled, then\nreenable\nsystemd-networkd.service\n.\nFor more detailed explanations, see the discussion in the\nNetwork configuration synchronization points\n.\nIf a service needs to perform DNS queries, it should additionally be ordered after\nnss-lookup.target\n:\n/etc/systemd/system/\nfoo\n.service\n[Unit]\n...\nWants=network-online.target\nAfter=network-online.target nss-lookup.target\n...\nSee\nsystemd.special(7) § Special Passive System Units\n.\nFor\nnss-lookup.target\nto have any effect it needs a service that pulls it in via\nWants=nss-lookup.target\nand orders itself before it with\nBefore=nss-lookup.target\n. Typically this is done by local\nDNS resolvers\n.\nCheck which active service, if any, is pulling in\nnss-lookup.target\nwith:\n$ systemctl list-dependencies --reverse nss-lookup.target\nEnable installed units by default\nThis article or section needs expansion.\nReason:\nHow does it work with instantiated units? (Discuss in\nTalk:Systemd\n)\nBy default, Arch Linux does not make use of systemd presets, and does not enable most services on installation.\nIf you wish for systemd presets to be honored when packages are installed, you will need to create a\na pacman hook\nin order to run\nsystemctl preset\nor\nsystemctl preset-all\nwhenever a new systemd unit is installed. Something like\n/etc/pacman.d/hooks/40-systemd-presets.hook\n[Trigger]\nOperation = Install\nType = Path\nTarget = usr/lib/systemd/system/*.service\nTarget = usr/lib/systemd/system/*.timer\nTarget = usr/lib/systemd/system/*.socket\nTarget = usr/lib/systemd/system/*.slice\nTarget = usr/lib/systemd/system/*.path\nTarget = usr/lib/systemd/system/*.target\n[Action]\nDescription = Run systemctl preset\nWhen = PostTransaction\nDepends = systemd\nNeedsTargets\n# Alternatively, you could just run systemd preset-all.\n# However, note that this will reset ALL services to the defaults,\n# which is probably not what you want unless you have carefully configured\n# your presets.\nExec = /etc/pacman.d/scripts/systemd-presets-hook\n/etc/pacman.d/scripts/systemd-presets-hook\n#!/bin/sh -e\nwhile read -r f; do\nunit=\"${f##*/}\"\n# alternatively, you could read all the units and pass them to systemctl preset in a single invocation\nsystemctl preset \"$unit\"\ndone\nArch Linux ships with\n/usr/lib/systemd/system-preset/99-default.preset\ncontaining\ndisable *\n. This causes\nsystemctl preset\nto disable all units by default, such that when a new package is installed, the user must manually enable the unit.\nTo enable units by default instead, simply create a symlink from\n/etc/systemd/system-preset/99-default.preset\nto\n/dev/null\nor replace with a file containing\nenable *\nin order to override the configuration file. This will cause\nsystemctl preset\nto enable all units that get installed—regardless of unit type—unless specified in another file in one\nsystemctl preset'\ns configuration directories. User units are not affected. It is also possible to configure higher priority files with more specific rules on what should be enabled. See\nsystemd.preset(5)\nfor more information.\nNote\nEnabling all units by default may cause problems with packages that contain two or more mutually exclusive units.\nsystemctl preset\nis designed to be used by distributions and spins or system administrators. In the case where two conflicting units would be enabled, you should explicitly specify which one is to be disabled in a preset configuration file as specified in the\nsystemd.preset(5)\nman page.\nSandboxing application environments\nSee\nsystemd/Sandboxing\n.\nNotifying about failed services\nIn order to notify about service failures, an\nOnFailure=\ndirective needs to be added to the according service file, for example by using a\ndrop-in configuration file\n. Adding this directive to every service unit can be achieved with a top-level drop-in configuration file. For details about top-level drop-ins, see\nsystemd.unit(5)\n.\nCreate a top-level drop-in for services:\n/etc/systemd/system/service.d/toplevel-override.conf\n[Unit]\nOnFailure=failure-notification@%n.service\nThis adds\nOnFailure=failure-notification@%n.service\nto every service file. If\nsome_service_unit\nfails,\nfailure-notification@\nsome_service_unit\n.service\nwill be started to handle the notification delivery (or whatever task it is configured to perform).\nCreate the\nfailure-notification@.service\ntemplate unit:\n/etc/systemd/system/failure-notification@.service\n[Unit]\nDescription=Send a notification about a failed systemd unit\n[Service]\nType=oneshot\nExecStart=/\npath\n/\nto\n/failure-notification.sh %i\n# runs as a temporary user/group and enables several other security precautions\nDynamicUser=true\nYou can create the\nfailure-notification.sh\nscript and define what to do or how to notify. Examples include\nsending e-mail\n,\nshowing desktop notifications\n, using gotify, XMPP, etc. The\n%i\nwill be the name of the failed service unit and will be passed as an argument to the script.\nIn order to prevent a recursion for starting instances of\nfailure-notification@.service\nagain and again if the start fails, create an empty drop-in configuration file with the same name as the top-level drop-in (the empty service-level drop-in configuration file takes precedence over the top-level drop-in and overrides the latter one):\n# mkdir /etc/systemd/system/failure-notification@.service.d\n# touch /etc/systemd/system/failure-notification@.service.d/toplevel-override.conf\nNotifying with e-mail\nYou can set up systemd to send an e-mail when a unit fails. Cron sends mail to\nMAILTO\nif the job outputs to stdout or stderr, but many jobs are setup to only output on error. First you need two files: an executable for sending the mail and a\n.service\nfor starting the executable. For this example, the executable is just a shell script using\nsendmail\n, which is in packages that provide\nsmtp-forwarder\n.\n/usr/local/bin/systemd-email\n#!/bin/sh\n/usr/bin/sendmail -t <<ERRMAIL\nTo: $1\nFrom: systemd <root@$HOSTNAME>\nSubject: $2\nContent-Transfer-Encoding: 8bit\nContent-Type: text/plain; charset=UTF-8\n$(systemctl status --full \"$2\")\nERRMAIL\nWhatever executable you use, it should probably take at least two arguments as this shell script does: the address to send to and the unit file to get the status of. The\n.service\nwe create will pass these arguments:\n/etc/systemd/system/status_email_\nuser\n@.service\n[Unit]\nDescription=status email for %i to\nuser\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/systemd-email\naddress\n%i\nUser=nobody\nGroup=systemd-journal\nWhere\nuser\nis the user being emailed and\naddress\nis that user's email address. Although the recipient is hard-coded, the unit file to report on is passed as an instance parameter, so this one service can send email for many other units. At this point you can\nstart\nstatus_email_\nuser\n@dbus.service\nto verify that you can receive the emails.\nThen simply\nedit\nthe service you want emails for and add\nOnFailure=status_email_\nuser\n@%n.service\nto the\n[Unit]\nsection.\n%n\npasses the unit's name to the template.\nNote\nIf you set up sSMTP security according to\nsSMTP#Security\nthe user\nnobody\nwill not have access to\n/etc/ssmtp/ssmtp.conf\n, and the\nsystemctl start status_email_\nuser\n@dbus.service\ncommand will fail. One solution is to use\nroot\nas the User in the\nstatus_email_\nuser\n@.service\nunit.\nIf you try to use\nmail -s somelogs\naddress\nin your email script,\nmail\nwill fork and systemd will kill the mail process when it sees your script exit. Make the mail non-forking by doing\nmail -Ssendwait -s somelogs\naddress\n.\nTip\nNewer versions of systemd recommend using\nDynamicUser=true\nas a replacement for\nUser=nobody\nwhich is now discouraged. See\nGitHub issue 428\nfor more details.\nAutomatically turn off an external HDD at shutdown\nSee\nudisks#Automatically turn off an external HDD at shutdown\n.\nTroubleshooting\nInvestigating failed services\nTo find the\nsystemd\nservices which failed to start:\n$ systemctl --failed\nTo find out why they failed, examine their log output. See\nsystemd/Journal#Filtering output\nfor details.\nDiagnosing boot problems\nsystemd\nhas several options for diagnosing problems with the boot process. See\nboot debugging\nfor more general instructions and options to capture boot messages before\nsystemd\ntakes over the\nboot process\n. Also see\nsystemd debugging documentation\n.\nDiagnosing a service\nIf some\nsystemd\nservice misbehaves or you want to get more information about what is happening, set the\nSYSTEMD_LOG_LEVEL\nenvironment variable\nto\ndebug\n. For example, to run the\nsystemd-networkd\ndaemon in debug mode:\nAdd a\ndrop-in file\nfor the service adding the two lines:\n[Service]\nEnvironment=SYSTEMD_LOG_LEVEL=debug\nOr equivalently, set the environment variable manually:\n# SYSTEMD_LOG_LEVEL=debug /lib/systemd/systemd-networkd\nthen\nrestart\nsystemd-networkd\nand watch the journal for the service with the\n-f\n/\n--follow\noption.\nShutdown/reboot takes terribly long\nIf the shutdown process takes a very long time (or seems to freeze), most likely a service not exiting is to blame.\nsystemd\nwaits some time for each service to exit before trying to kill it. To find out whether you are affected, see\nShutdown completes eventually\nin the\nsystemd\ndocumentation.\nA common problem is a stalled shutdown or suspend process. To verify whether that is the case, you could run either of these commands and check the outputs\n# systemctl poweroff\nFailed to power off system via logind: There's already a shutdown or sleep operation in progress\n# systemctl list-jobs\nJOB UNIT                    TYPE  STATE\n...\n21593 systemd-suspend.service start running\n21592 suspend.target          start waiting\n..\nThe\nsolution\nto this would be to cancel these jobs by running\n# systemctl cancel\n# systemctl stop systemd-suspend.service\nand then trying shutdown or reboot again.\nShort lived processes do not seem to log any output\nIf running\njournalctl -u foounit\nas root does not show any output for a short lived service, look at the PID instead. For example, if\nsystemd-modules-load.service\nfails, and\nsystemctl status systemd-modules-load\nshows that it ran as PID 123, then you might be able to see output in the journal for that PID, i.e. by running\njournalctl -b _PID=123\nas root. Metadata fields for the journal such as\n_SYSTEMD_UNIT\nand\n_COMM\nare collected asynchronously and rely on the\n/proc\ndirectory for the process existing. Fixing this requires fixing the kernel to provide this data via a socket connection, similar to\nSCM_CREDENTIALS\n. In short, it is a\nbug\n. Keep in mind that immediately failed services might not print anything to the journal as per design of\nsystemd\n.\nBoot time increasing over time\nThe factual accuracy of this article or section is disputed.\nReason:\nNetworkManager issues are not\nsystemd\n's fault, the alleged reports are missing. Slow\nsystemctl status\nor\njournalctl\ndo not affect boot time. (Discuss in\nTalk:Systemd\n)\nAfter using\nsystemd-analyze\na number of users have noticed that their boot time has increased significantly in comparison with what it used to be. After using\nsystemd-analyze blame\nNetworkManager\nis being reported as taking an unusually large amount of time to start.\nThe problem for some users has been due to\n/var/log/journal\nbecoming too large. This may have other impacts on performance, such as for\nsystemctl status\nor\njournalctl\n. As such the solution is to remove every file within the folder (ideally making a backup of it somewhere, at least temporarily) and then setting a journal file size limit as described in\nsystemd/Journal#Journal size limit\n.\nsystemd-tmpfiles-setup.service fails to start at boot\nStarting with\nsystemd\n219,\n/usr/lib/tmpfiles.d/systemd.conf\nspecifies ACL attributes for directories under\n/var/log/journal\nand, therefore, requires ACL support to be enabled for the filesystem the journal resides on.\nSee\nAccess Control Lists#Enable ACL\nfor instructions on how to enable ACL on the filesystem that houses\n/var/log/journal\n.\nDisable emergency mode on remote machine\nYou may want to disable emergency mode on a remote machine, for example, a virtual machine hosted at Azure or Google Cloud. It is because if emergency mode is triggered, the machine will be blocked from connecting to network.\nTo disable it,\nmask\nemergency.service\nand\nemergency.target\n.\nError \"Unit xxx.service not found\", but service does exist\nYou may be trying to start or enable a user unit as a system unit.\nsystemd.unit(5)\nindicates, which units reside where. By default\nsystemctl\noperates on system services.\nSee\nsystemd/User\nfor more details.\nManually renewing LoaderDevicePartUUID after changing EFI partition UUID\nSome bootloaders only set the\nLoaderDevicePartUUID\nvariable when it is empty. Consequently, even if the UUID of the EFI partition changes, the bootloader will not update\nLoaderDevicePartUUID\n. By deleting the EFI variable with the commands below, the bootloader will then repopulate it with the new UUID.\n# chattr -i /sys/firmware/efi/efivars/LoaderDevicePartUUID-4a67b082-0a4c-41cf-b6c7-440b29bb8c4f\n# rm /sys/firmware/efi/efivars/LoaderDevicePartUUID-4a67b082-0a4c-41cf-b6c7-440b29bb8c4f\nSee also\nWikipedia:systemd\nOfficial web site\nsystemd optimizations\nsystemd FAQ\nsystemd Tips and tricks\nsystemd(1)\nOther distributions\nGentoo:systemd\nFedora:systemd\nFedora:How to debug Systemd problems\nFedora:SysVinit to Systemd Cheatsheet\nDebian:systemd\nLennart's blog story\n,\nupdate 1\n,\nupdate 2\n,\nupdate 3\n,\nsummary\nDebug Systemd Services\nsystemd for Administrators (PDF)\nHow To Use Systemctl to Manage Systemd Services and Units\nSession management with systemd-logind\nEmacs#Syntax highlighting for systemd files\nTwo\npart\nintroductory article in\nThe H Open\nmagazine.\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Systemd&oldid=852074\n\"\nCategory\n:\nInit\nHidden categories:\nPages or sections flagged with Template:Expansion\nPages or sections flagged with Template:Accuracy\nSearch\nSearch\nsystemd\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Systemd"}}
{"text": "pacman - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\npacman\n11 languages\nDeutsch\nEspañol\nSuomi\nFrançais\nItaliano\nMagyar\n日本語\nPortuguês\nРусский\nSvenska\n中文（简体）\nFrom ArchWiki\nRelated articles\n/Package signing\n/Pacnew and Pacsave\n/Restore local database\n/Rosetta\n/Tips and tricks\nArch User Repository\nCreating packages\nDowngrading packages\nnamcap\nFAQ#Package management\nSystem maintenance\nPackage Proxy Cache\nThe\npacman\npackage manager\nis one of the major distinguishing features of\nArch Linux\n. It combines a simple binary package format with an easy-to-use\nArch build system\n. The goal of\npacman\nis to make it possible to easily manage packages, whether they are from the\nofficial repositories\nor the user's own builds.\nPacman\nkeeps the system up-to-date by synchronizing package lists with the master server. This server/client model also allows the user to download/install packages with a simple command, complete with all required dependencies.\nPacman\nis written in the\nC\nprogramming language and uses the\nbsdtar(1)\ntar\nformat for packaging.\nTip\nThe\npacman\npackage contains tools such as\nmakepkg\nand\nvercmp(8)\n. Other useful tools such as\npactree\nand\ncheckupdates\nare found in\npacman-contrib\n(\nformerly\npart of\npacman\n). Run\npacman -Ql pacman pacman-contrib | grep -E 'bin/.+'\nto see the full list.\nUsage\nWhat follows is just a small sample of the operations that\npacman\ncan perform. To read more examples, refer to\npacman(8)\n.\nTip\nFor those who have used other Linux distributions before, there is a helpful\nPacman/Rosetta\narticle.\nInstalling packages\nA package is an archive containing:\nall of the (compiled) files of an application\nmetadata about the application, such as application name, version, dependencies, etc.\ninstallation files and directives for\npacman\nArch's package manager\npacman\ncan install, update, and remove those packages. Using packages instead of compiling and installing programs yourself has various benefits:\neasily updatable:\npacman\nwill update existing packages as soon as updates are available\ndependency checks:\npacman\nhandles dependencies for you, you only need to specify the program and\npacman\ninstalls it together with every other program it needs\nclean removal:\npacman\nhas a list of every file in a package; this way, no files are unintentionally left behind when you decide to remove a package.\nNote\nPackages often have\noptional dependencies\nwhich are packages that provide additional functionality to the application but not strictly required for running it. When installing a package,\npacman\nwill list a package's optional dependencies, but they will not be found in\npacman.log\n. Use the\n#Querying package databases\ncommand to view the optional dependencies of a package.\nWhen installing a package which you require only as a (optional) dependency of some other package (i.e. not required by you explicitly), it is recommended to use the\n--asdeps\noption. For details, see the\n#Installation reason\nsection.\nWarning\nWhen installing packages in Arch, avoid refreshing the package list without\nupgrading the system\n(for example, when a\npackage is no longer found\nin the official repositories). In practice, do\nnot\nrun\npacman -Sy\npackage_name\ninstead of\npacman -Sy\nu\npackage_name\n, as this could lead to dependency issues. See\nSystem maintenance#Partial upgrades are unsupported\nand\nBBS#89328\n.\nInstalling specific packages\nTo install a single package or list of packages, including dependencies, issue the following command:\n# pacman -S\npackage_name1\npackage_name2\n...\nTo install a list of packages with regex (see\nthis forum thread\n):\n# pacman -S $(pacman -Ssq\npackage_regex\n)\nSometimes there are multiple versions of a package in different repositories (e.g.\nextra\nand\nextra-testing\n). To install the version from the\nextra\nrepository in this example, the repository needs to be defined in front of the package name:\n# pacman -S extra/\npackage_name\nTo install a number of packages sharing similar patterns in their names, one can use curly brace expansion. For example:\n# pacman -S plasma-{desktop,mediacenter,nm}\nThis can be expanded to however many levels needed:\n# pacman -S plasma-{workspace{,-wallpapers},pa}\nVirtual packages\nA virtual package is a special package which does not exist by itself, but is\nprovided\nby one or more other packages. Virtual packages allow other packages to not name a specific package as a dependency, in case there are several candidates. Virtual packages cannot be installed by their name, instead they become installed in your system when you have installed a package\nproviding\nthe virtual package. An example is the\ndbus-units\npackage.\nTip\nWhen there are multiple candidates, the list of choices presented will sort first by\nrepositories\nin the order they appear in\npacman.conf\n, then alphabetically when multiple results exist from the same repository.\nInstalling package groups\nSome packages belong to a\ngroup of packages\nthat can all be installed simultaneously. For example, issuing the command:\n# pacman -S gnome\nwill prompt you to select the packages from the\ngnome\ngroup that you wish to install.\nSometimes a package group will contain a large amount of packages, and there may be only a few that you do or do not want to install. Instead of having to enter all the numbers except the ones you do not want, it is sometimes more convenient to select or exclude packages or ranges of packages with the following syntax:\nEnter a selection (default=all): 1-10 15\nwhich will select packages 1 through 10 and 15 for installation, or:\nEnter a selection (default=all): ^5-8 ^2\nwhich will select all packages except 5 through 8 and 2 for installation.\nTo see what packages belong to the gnome group, run:\n$ pacman -Sg gnome\nAlso visit\nhttps://archlinux.org/groups/\nto see what package groups are available.\nNote\nIf a package in the list is already installed on the system, it will be reinstalled even if it is already up-to-date. This behavior can be overridden with the\n--needed\noption.\nRemoving packages\nTo remove a single package, leaving all of its dependencies installed:\n# pacman -R\npackage_name\nTo remove a package and its dependencies which are not required by any other installed package:\n# pacman -Rs\npackage_name\nWarning\nWhen removing a group, such as\ngnome\n, this ignores the install reason of the packages in the group, because it acts as though each package in the group is listed separately. Install reason of dependencies is still respected.\nThe above may sometimes refuse to run when removing a group which contains otherwise needed packages. In this case try:\n# pacman -Rsu\npackage_name\nTo remove a package, its dependencies and all the packages that depend on the target package:\nWarning\nThis operation is recursive, and must be used with care since it can remove many potentially needed packages.\n# pacman -Rsc\npackage_name\nTo remove a package, which is required by another package, without removing the dependent package:\nWarning\nThe following operation can break a system and should be avoided. See\nSystem maintenance#Avoid certain pacman commands\n.\n# pacman -Rdd\npackage_name\nPacman\nsaves important configuration files when removing certain applications and names them with the extension:\n.pacsave\n. To prevent the creation of these backup files use the\n-n\noption:\n# pacman -Rn\npackage_name\nNote\nPacman\nwill not remove configurations that the application itself creates (for example \"dotfiles\" in the home directory).\nUpgrading packages\nWarning\nUsers are expected to follow the guidance in the\nSystem maintenance#Upgrading the system\nsection to upgrade their systems regularly and not blindly run the following command.\nArch only supports full system upgrades. See\nSystem maintenance#Partial upgrades are unsupported\nand\n#Installing packages\nfor details.\nPacman\ncan update all packages on the system with just one command. This could take quite a while depending on how up-to-date the system is. The following command synchronizes the repository databases\nand\nupdates the system's packages, excluding \"local\" packages that are not in the configured repositories:\n# pacman -Syu\nQuerying package databases\nPacman\nqueries the local package database with the\n-Q\nflag, the sync database with the\n-S\nflag and the files database with the\n-F\nflag. See\npacman -Q --help\n,\npacman -S --help\nand\npacman -F --help\nfor the respective suboptions of each flag.\nNote\nSync the files database before querying it to get up-to-date results:\n# pacman -Fy\nTip\nYou can\nenable/start\nthe\npacman-filesdb-refresh.timer\n(provided within the\npacman-contrib\npackage) to refresh\npacman\nfiles database weekly.\nPacman\ncan search for packages in the database, searching both in packages' names and descriptions:\n$ pacman -Ss\nstring1\nstring2\n...\nSometimes,\n-s\n's builtin ERE (Extended Regular Expressions) can cause a lot of unwanted results, so it has to be limited to match the package name only; not the description nor any other field:\n$ pacman -Ss '^vim-'\nTo search for already installed packages:\n$ pacman -Qs\nstring1\nstring2\n...\nTo search for package file names in remote packages:\n$ pacman -F\nstring1\nstring2\n...\nTo display extensive information about a given package (e.g. its dependencies):\n$ pacman -Si\npackage_name\nFor locally installed packages:\n$ pacman -Qi\npackage_name\nPassing two\n-i\nflags will also display the list of backup files and their modification states:\n$ pacman -Qii\npackage_name\nTo retrieve a list of the files installed by a package:\n$ pacman -Ql\npackage_name\nTo retrieve a list of the files installed by a remote package:\n$ pacman -Fl\npackage_name\nTo verify the presence of the files installed by a package:\n$ pacman -Qk\npackage_name\nPassing the\nk\nflag twice will perform a more thorough check.\nTo query the database to know which package a file in the file system belongs to:\n$ pacman -Qo\n/path/to/file_name\nTo query the database to know which remote package a file belongs to:\n$ pacman -F\n/path/to/file_name\nTo list all packages no longer required as dependencies (orphans):\n$ pacman -Qdt\nTo list all packages explicitly installed and not required as dependencies:\n$ pacman -Qet\nSee\npacman/Tips and tricks\nfor more examples.\nFor advanced functionality, install\npkgfile\n, which uses a separate database with all files and their associated packages.\nPactree\nNote\npactree(8)\nis not part of the\npacman\npackage anymore. Instead it can be found in\npacman-contrib\n.\nTo view the dependency tree of a package:\n$ pactree\npackage_name\nTo view the dependent tree of a package, pass the reverse flag\n-r\nto\npactree\n.\nDatabase structure\nThe\npacman\ndatabases are normally located at\n/var/lib/pacman/sync\n. For each repository specified in\n/etc/pacman.conf\n, there will be a corresponding database file located there. Database files are gzipped tar archives containing one directory for each package, for example for the\nwhich\npackage:\n$ tree which-2.21-5\nwhich-2.21-5\n|-- desc\nThe\ndesc\nfile contains meta data such as the package description, dependencies, file size and MD5 hash.\nCleaning the package cache\nPacman\nstores its downloaded packages in\n/var/cache/pacman/pkg/\nand does not remove the old or uninstalled versions automatically. This has some advantages:\nIt allows to\ndowngrade\na package without the need to retrieve the previous version through other means, such as the\nArch Linux Archive\n.\nA package that has been uninstalled can easily be reinstalled directly from the cache directory, not requiring a new download from the repository.\nHowever, it is necessary to deliberately clean up the cache periodically to prevent the directory to grow indefinitely in size.\nThe\npaccache(8)\nscript, provided within the\npacman-contrib\npackage, deletes all cached versions of installed and uninstalled packages, except for the most recent three, by default:\n# paccache -r\nEnable\nand\nstart\npaccache.timer\nto discard unused packages weekly. You can configure the arguments for the service in\n/etc/conf.d/pacman-contrib\n, e.g with\nPACCACHE_ARGS='-k1'\nor\nPACCACHE_ARGS='-uk0'\nfor the two examples below.\nTip\nYou can create a\nhook\nto run this automatically after every\npacman\ntransaction,\ninstall\npaccache-hook\nAUR\nand see\nother examples\nYou can also define how many recent versions you want to keep. To retain only one past version use:\n# paccache -rk1\nAdd the\n-u\n/\n--uninstalled\nswitch to limit the action of\npaccache\nto uninstalled packages. For example to remove all cached versions of uninstalled packages, use the following:\n# paccache -ruk0\nSee\npaccache -h\nfor more options.\nPacman\nalso has some built-in options to clean the cache and the leftover database files from repositories which are no longer listed in the configuration file\n/etc/pacman.conf\n. However\npacman\ndoes not offer the possibility to keep a number of past versions and is therefore more aggressive than\npaccache\ndefault options.\nTo remove all the cached packages that are not currently installed, and the unused sync databases, execute:\n# pacman -Sc\nTo remove all files from the cache, use the clean switch twice, this is the most aggressive approach and will leave nothing in the cache directory:\n# pacman -Scc\nWarning\nOne should avoid deleting from the cache all past versions of installed packages and all uninstalled packages unless one desperately needs to free some disk space. This will prevent downgrading or reinstalling packages without downloading them again.\npkgcacheclean\nAUR\nand\npacleaner\nAUR\nare two further alternatives to clean the cache.\nAdditional commands\nDownload a package without installing it:\n# pacman -Sw\npackage_name\nInstall a 'local' package that is not from a remote repository (e.g. the package is from the\nAUR\n):\n# pacman -U\n/path/to/package/package_name-version.pkg.tar.zst\nTo keep a copy of the local package in\npacman'\ns cache, use:\n# pacman -U file:///\npath/to/package/package_name-version.pkg.tar.zst\nInstall a 'remote' package (not from a repository stated in\npacman'\ns configuration files):\n# pacman -U\nhttp://www.example.com/repo/example.pkg.tar.zst\ndry run\nPacman\nalways\nlists packages to be installed or removed, and asks for permission before taking any action.\nTo get a list in a processable format, and to prevent the actions of\n-S\n,\n-U\nand\n-R\n, you can use\n-p\n, short for\n--print\n.\n--print-format\ncan be added to format this list in various ways.\n--print-format %n\nwill return a list without package versions.\nInstallation reason\nThe\npacman\ndatabase organizes installed packages into two groups, according to installation reason:\nexplicitly-installed\n: packages that were literally passed to a generic\npacman\n-S\nor\n-U\ncommand;\ndependencies\n: packages that, despite never (in general) having been passed to a\npacman\ninstallation command, were\nimplicitly\ninstalled because they were\nrequired\nby packages explicitly installed.\nWhen installing a package, it is possible to force its installation reason to\ndependency\nwith:\n# pacman -S --asdeps\npackage_name\nThe command is normally used because explicitly-installed packages may offer\noptional packages\n, usually for non-essential features for which the user has discretion.\nTip\nInstalling optional dependencies with\n--asdeps\nwill ensure that, if you\nremove orphans\n,\npacman\nwill also remove optional packages set this way.\nWhen\nre\ninstalling a package, though, the current installation reason is preserved by default.\nThe list of explicitly-installed packages can be shown with\npacman -Qe\n, while the complementary list of dependencies can be shown with\npacman -Qd\n.\nTo change the installation reason of an already installed package, execute:\n# pacman -D --asdeps\npackage_name\nUse\n--asexplicit\nto do the opposite operation.\nNote\nUsing\n--asdeps\nand\n--asexplicit\noptions when upgrading, such as with\npacman -Syu\npackage_name\n--asdeps\n, is discouraged. This would change the installation reason of not only the package being installed, but also the packages being upgraded.\nWhat happens during package install/upgrade/removal\nWhen successful, the workflow of a transaction follows five high-level steps plus pre/post transaction hooks:\nInitialize the transaction if there is not a database lock.\nChoose which packages will be added or removed in the transaction.\nPrepare the transaction, based on flags, by performing sanity checks on the sync databases, packages, and their dependencies.\nCommit the transaction:\nWhen applicable, download packages (\n_alpm_sync_load\n).\nIf pre-existing\npacman\nPreTransaction\nhooks apply, they are executed.\nPackages are removed that are to-be-replaced, conflicting, or explicitly targeted to be removed.\nIf there are packages to add, then each package is committed:\nIf the package has an install script, its\npre_install\nfunction is executed (or\npre_upgrade\nor\npre_remove\nin the case of an upgraded or removed package).\nPacman\ndeletes all the files from a pre-existing version of the package (in the case of an upgraded or removed package). However, files that were marked as configuration files in the package are kept (see\n/Pacnew and Pacsave\n).\nPacman\nuntars the package and dumps its files into the file system (in the case of an installed or upgraded package). Files that would overwrite kept, and manually modified, configuration files (see previous step), are stored with a new name (\n.pacnew\n).\nIf the package has an install script, its\npost_install\nfunction is executed (or\npost_upgrade\nor\npost_remove\nin the case of an upgraded or removed package).\nIf\npacman\nPostTransaction\nhooks that exist at the end of the transaction apply, they are executed.\nRelease the transaction and transaction resource (i.e. database lock).\nConfiguration\nPacman\nsettings are located in\n/etc/pacman.conf\n: this is the place where the user configures the program to work in the desired manner. In-depth information about the configuration file can be found in\npacman.conf(5)\n.\nGeneral options\nGeneral options are in the\n[options]\nsection. Read\npacman.conf(5)\nor look in the default\npacman.conf\nfor information on what can be done here.\nComparing versions before updating\nTo see old and new versions of available packages, uncomment the \"VerbosePkgLists\" line in\n/etc/pacman.conf\n. The output of\npacman -Syu\nwill be like this:\nPackage (6)             Old Version  New Version  Net Change  Download Size\nextra/libmariadbclient  10.1.9-4     10.1.10-1      0.03 MiB       4.35 MiB\nextra/libpng            1.6.19-1     1.6.20-1       0.00 MiB       0.23 MiB\nextra/mariadb           10.1.9-4     10.1.10-1      0.26 MiB      13.80 MiB\nParallel downloads\nThe number of packages being downloaded in parallel (at the same time) are configured in\n/etc/pacman.conf\nwith the\nParallelDownloads\noption under\n[options]\n. The\n/etc/pacman.conf\nshipped with the\npacman\npackage sets it to\n5\n. If the option is unset, packages will be downloaded sequentially.\nSkip package from being upgraded\nWarning\nBe careful in skipping packages, since\npartial upgrades\nare unsupported.\nTo have a specific package skipped when\nupgrading\nthe system, add this line in the\n[options]\nsection:\nIgnorePkg=linux\nFor multiple packages use a space-separated list, or use additional\nIgnorePkg\nlines. Also,\nglob\npatterns can be used. If you want to skip packages just once, you can also use the\n--ignore\noption on the command-line - this time with a comma-separated list.\nIt will still be possible to upgrade the ignored packages using\npacman -S\n: in this case\npacman\nwill remind you that the packages have been included in an\nIgnorePkg\nstatement.\nSkip package group from being upgraded\nWarning\nBe careful in skipping package groups, since\npartial upgrades\nare unsupported.\nAs with packages, skipping a whole package group is also possible:\nIgnoreGroup=gnome\nSkip file from being upgraded\nAll files listed with a\nNoUpgrade\ndirective will never be touched during a package install/upgrade, and the new files will be installed with a\n.pacnew\nextension.\nNoUpgrade=\npath/to/file\nMultiple files can be specified like this:\nNoUpgrade=\npath/to/file1 path/to/file2\nNote\nThe path refers to files in the package archive. Therefore, do not include the leading slash.\nSkip files from being installed to system\nTo always skip installation of specific files or directories list them under\nNoExtract\n. For example, to avoid installing bash completion scripts, use:\nNoExtract=usr/share/bash-completion/completions/*\nLater rules override previous ones, and you can negate a rule by prepending\n!\n.\nMaintain several configuration files\nIf you have several configuration files (e.g. main configuration and configuration with\ntesting\nrepository enabled) and would have to share options between configurations you may use\nInclude\noption declared in the configuration files, e.g.:\nInclude =\n/path/to/common/settings\nwhere\n/path/to/common/settings\nfile contains the same options for both configurations.\nHooks\nPacman can run pre- and post-transaction hooks from the\n/usr/share/libalpm/hooks/\ndirectory; more directories can be specified with the\nHookDir\noption in\npacman.conf\n, which defaults to\n/etc/pacman.d/hooks\n. Hook file names must be suffixed with\n.hook\n. Pacman hooks are not interactive.\nPacman hooks are used, for example, in combination with\nsystemd-sysusers\nand\nsystemd-tmpfiles\nto automatically create system users and files during the installation of packages. For example,\ntomcat8\nspecifies that it wants a system user called\ntomcat8\nand certain directories owned by this user. The\npacman\nhooks\nsystemd-sysusers.hook\nand\nsystemd-tmpfiles.hook\ninvoke\nsystemd-sysusers\nand\nsystemd-tmpfiles\nwhen\npacman\ndetermines that\ntomcat8\ncontains files specifying users and tmp files.\nFor more information on alpm hooks, see\nalpm-hooks(5)\n.\nRepositories and mirrors\nBesides the special\n[options]\nsection, each other\n[section]\nin\npacman.conf\ndefines a package repository to be used. A\nrepository\nis a\nlogical\ncollection of packages, which are\nphysically\nstored on one or more servers: for this reason each server is called a\nmirror\nfor the repository.\nRepositories are distinguished between\nofficial\nand\nunofficial\n. The order of repositories in the configuration file matters; repositories listed first will take precedence over those listed later in the file when packages in two repositories have identical names, regardless of version number. In order to use a repository after adding it, you will need to\nupgrade\nthe whole system first.\nEach repository section allows defining the list of its mirrors directly or in a dedicated external file through the\nInclude\ndirective; for example, the mirrors for the official repositories are included from\n/etc/pacman.d/mirrorlist\n. See the\nMirrors\narticle for mirror configuration.\nPackage cache directory\nPacman stores downloaded package files in cache, in a directory denoted by\nCacheDir\nin\n[options]\nsection of\npacman.conf\n(defaults to\n/var/cache/pacman/pkg/\nif not set).\nCache directory may grow over time, even if keeping just the freshest versions of installed packages.\nIf you want to move that directory to some more convenient place, do one of the following:\nSet the\nCacheDir\noption in\npacman.conf\nto new directory. Remember to retain the trailing slash.\nThis is the recommended solution\n.\nMount a dedicated partition or e.g.\nBtrfs subvolume\nin\n/var/cache/pacman/pkg/\n.\nBind-mount selected directory in\n/var/cache/pacman/pkg/\n.\nWarning\nDo not symlink\nthe\n/var/cache/pacman/pkg/\ndirectory to some other location. It\nwill\ncause pacman to misbehave, especially when pacman attempts to update itself.\nPackage security\nPacman supports package signatures, which add an extra layer of security to the packages. The default configuration,\nSigLevel = Required DatabaseOptional\n, enables signature verification for all the packages on a global level. This can be overridden by per-repository\nSigLevel\nlines. For more details on package signing and signature verification, take a look at\npacman-key\n.\nTroubleshooting\n\"Failed to commit transaction (conflicting files)\" error\nIf you see the following error:\n[1]\nerror: could not prepare transaction\nerror: failed to commit transaction (conflicting files)\npackage\n:\n/path/to/file\nexists in filesystem\nErrors occurred, no packages were upgraded.\nThis is happening because\npacman\nhas detected a file conflict, and by design, will not overwrite files for you. This is by design, not a flaw.\nThe problem is usually trivial to solve (although to be sure, you should try to find out how these files got there in the first place). A safe way is to first check if another package owns the file (\npacman -Qo\n/path/to/file\n). If the file is owned by another package,\nfile a bug report\n. If the file is not owned by another package, rename the file which \"exists in filesystem\" and re-issue the update command. If all goes well, the file may then be removed.\nIf you had installed a program manually without using\npacman\n, for example through\nmake install\n, you have to remove/uninstall this program with all of its files. See also\nPacman tips#Identify files not owned by any package\n.\nEvery installed package provides a\n/var/lib/pacman/local/\npackage-version\n/files\nfile that contains metadata about this package. If this file gets corrupted, is empty or goes missing, it results in\nfile exists in filesystem\nerrors when trying to update the package. Such an error usually concerns only one package. Instead of manually renaming and later removing all the files that belong to the package in question, you may explicitly run\npacman -S --overwrite\nglob\npackage\nto force\npacman\nto overwrite files that match\nglob\n.\nWarning\nGenerally avoid using the\n--overwrite\nswitch. See\nSystem maintenance#Avoid certain pacman commands\n.\n\"Failed to commit transaction (invalid or corrupted package)\" error\nThis article or section is out of date.\nReason:\nWith pacman 7.1.0, expired keys should have updates fetched automatically (reliability depends on key infrastructure...) - this should remove the \"package is corrupt\" messages when keys need updated. (Discuss in\nTalk:Pacman\n)\nLook for\n.part\nfiles (partially downloaded packages) in\n/var/cache/pacman/pkg/\nand remove them (often caused by usage of a custom\nXferCommand\nin\npacman.conf\n).\n# find /var/cache/pacman/pkg/ -iname \"*.part\" -delete\nThat same error may also appear if\narchlinux-keyring\nis out-of-date, preventing\npacman\nfrom verifying signatures. See\nPacman/Package signing#Upgrade system regularly\nfor the fix and how to avoid it in the future.\n\"Failed to init transaction (unable to lock database)\" error\nWhen\npacman\nis about to alter the package database, for example installing a package, it creates a lock file at\n/var/lib/pacman/db.lck\n. This prevents another instance of\npacman\nfrom trying to alter the package database at the same time.\nIf\npacman\nis interrupted while changing the database, this stale lock file can remain. If you are certain that no instances of\npacman\nare running then delete the lock file:\n# rm /var/lib/pacman/db.lck\nTip\nYou can run\nfuser /var/lib/pacman/db.lck\nas root to verify if there is any process still using it.\nPackages cannot be retrieved on installation\nThis error manifests as\nNot found in sync db\n,\nTarget not found\nor\nFailed retrieving file\n.\nFirstly, ensure the package actually exists. If certain the package exists, your package list may be out-of-date. Try running\npacman -Syu\nto force a refresh of all package lists and upgrade. Also make sure the selected\nmirrors\nare up-to-date and\nrepositories\nare correctly configured. You can also use\nReflector\nto keep the mirrors up-to-date.\nIf\npacman\nreports there is nothing to update, but the\nFailed retrieving file\nerror continues to be printed, consider\nforcing a database download\nwith\npacman -Syyu\n. This is never needed under normal circumstances, so inspect more closely the\nstatus and consistency of the mirror\n.\nIt could also be that the repository containing the package is not enabled on your system, e.g. the package could be in the\nmultilib\nrepository, but\nmultilib\nis not enabled in your\npacman.conf\n.\nSee also\nFAQ#Why is there only a single version of each shared library in the official repositories?\n.\nFixing an unbootable system caused by an interrupted upgrade\nThis article or section needs expansion.\nReason:\nMultiple things to consider. (Discuss in\nTalk:Pacman#More details in pacman crashes during an update\n)\nWhether due to power loss, kernel panic or hardware failure an update may be interrupted. In most cases, there will not be much damage but the system will likely be unbootable.\nReady a\nUSB flash installation medium\nand boot it.\nMount\nthe root filesystem as well as your\nESP\n.\narch-chroot\ninto the mounted root filesystem.\nCheck\n/var/log/pacman.log\nand replicate the exact update by supplying the\nentire\nlist of packages that was upgraded during the failed transaction to\npacman -Syu\n, allowing it to reinstall while resuming the original update:\n# pacman -Syu $(grep \"\\[\n2025-07-27T22.*\n\\] \\[ALPM\\] upgraded\" /var/log/pacman.log | cut -d \" \" -f4 | tr \"\\n\" \" \")\nReplicating the\nexact\nupgrade is needed to ensure the right scriptlets and hooks will run.\nPacman crashes during an upgrade\nIn the case that\npacman\ncrashes with a \"database write\" error while removing packages, and reinstalling or upgrading packages fails thereafter, do the following:\nBoot using the Arch\nUSB flash installation medium\n. Preferably use a recent media so that the\npacman\nversion matches/is newer than the system.\nMount the system's root filesystem, e.g.,\nmount /dev/sdaX /mnt\nas root, and check the mount has sufficient space with\ndf -h\nMount the proc, sys and dev filesystems as well:\nmount -t proc proc /mnt/proc; mount --rbind /sys /mnt/sys; mount --rbind /dev /mnt/dev\nIf the system uses default database and directory locations, you can now update the system's\npacman\ndatabase and upgrade it via\npacman --root=/mnt --cachedir=/mnt/var/cache/pacman/pkg -Syu\nas root.\nAlternatively, if you cannot update/upgrade, refer to\nPacman/Tips and tricks#Reinstalling all packages\n.\nAfter the upgrade, one way to double-check for not upgraded but still broken packages:\nfind /mnt/usr/lib -size 0\nFollowed by a re-install of any still broken package via\npacman --root /mnt --cachedir=/mnt/var/cache/pacman/pkg -S\npackage\n.\npacman: command not found\nIf\n/var/cache/pacman/pkg\nis a symlink,\npacman\nwill try to make a directory instead and thus remove this symlink during self-upgrade. This will cause the update to fail. As a result,\n/usr/bin/pacman\nand other contents of the\npacman\npackage will be missing.\nNever symlink\n/var/cache/pacman/pkg\nbecause it is controlled by\npacman\n. Use the\nCacheDir\noption or a bind mount instead; see\n#Package cache directory\n.\nIf you have already encountered this problem and broke your system, you can manually extract\n/usr\ncontents from the package to restore\npacman\nand then reinstall it properly; see\nFS#73306\nand\nrelated forum thread\nfor details.\nManually reinstalling pacman\nUsing pacman-static\npacman-static\nAUR\nis a statically compiled version of\npacman\n, so it will be able to run even when the libraries on the system are not working. This can also come in handy when a\npartial upgrade\nwas performed and\npacman\ncan not run anymore.\nThe pinned comment and the PKGBUILD provides a way to directly download the binary, which can be used to reinstall\npacman\nor to upgrade the entire system in case of partial upgrades.\nUsing a precompiled pacman-static binary when PKGBUILD build fails\nIn some situations, your system may be too broken (e.g., due to missing or incompatible libraries) to run `makepkg` or build the `pacman-static` package from the AUR successfully.\nIf building from the PKGBUILD fails or `makepkg` cannot be run, you can download a precompiled `pacman-static` binary from a trusted source. This static binary does not depend on system libraries and can be used to restore a working `pacman` on your system.\nA reliable source for the binary is:\n#\nhttps://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static\nTo use it, run:\n$ curl -L -o pacman-static\nhttps://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static\n$ chmod +x pacman-static\n$ sudo ./pacman-static -Syu pacman\nThis will update your system and reinstall `pacman`, fixing broken dependencies related to missing shared libraries.\nUsing an external pacman\nIf even\npacman-static\ndoes not work, it is possible to recover using an external\npacman\n. One of the easiest methods to do so is by using the\narchiso\nand simply using\n--sysroot\nor\n--root\nto specify the mount point of the system to perform the operation on. See\nChroot#Using chroot\non how to mount the necessary filesystems required by\n--sysroot\n.\nBy manually extracting\nWarning\nIt is extremely easy to break your system even worse using this approach. Use this only as a last resort if the method from\n#Pacman crashes during an upgrade\nis not an option.\nEven if\npacman\nis terribly broken, you can fix it manually by downloading the latest packages and extracting them to the correct locations. The rough steps to perform are:\nDetermine the\npacman\ndependencies to install\nDownload each package from a\nmirror\nof your choice\nExtract each package to root\nReinstall these packages with\npacman -S --overwrite\nto update the package database accordingly\nDo a full system upgrade\nIf you have a healthy Arch system on hand, you can see the full list of dependencies with:\n$ pacman -Q $(pactree -u pacman)\nBut you may only need to update a few of them depending on your issue. An example of extracting a package is\n# tar -xvpwf\npackage.tar.zst\n-C / --exclude .PKGINFO --exclude .INSTALL --exclude .MTREE --exclude .BUILDINFO\nNote the use of the\nw\nflag for interactive mode. Running non-interactively is very risky since you might end up overwriting an important file. Also take care to extract packages in the correct order (i.e. dependencies first).\nThis forum post\ncontains an example of this process where only a couple\npacman\ndependencies are broken.\n\"Unable to find root device\" error after rebooting\nMost likely the\ninitramfs\nbecame corrupted during a\nkernel\nupdate (improper use of\npacman'\ns\n--overwrite\noption can be a cause). There are two options; first, try the\nFallback\nentry.\nTip\nIn case you removed the\nFallback\nentry, you can always press the\nTab\nkey when the boot loader menu shows up (for Syslinux) or\ne\n(for GRUB or systemd-boot), rename it\ninitramfs-linux-fallback.img\nand press\nEnter\nor\nb\n(depending on your\nboot loader\n) to boot with the new parameters.\nOnce the system starts, run this command (for the stock\nlinux\nkernel) either from the console or from a terminal to rebuild the initramfs image:\n# mkinitcpio -p linux\nIf that does not work, from a current Arch release (CD/DVD or USB stick),\nmount\nyour root and boot partitions to\n/mnt\nand\n/mnt/boot\n, respectively. Then\nchroot\nusing\narch-chroot\n:\n# arch-chroot /mnt\n# pacman -Syu mkinitcpio systemd linux\nNote\nIf you do not have a current release or if you only have some other \"live\" Linux distribution laying around, you can\nchroot\nusing the old fashioned way. Obviously, there will be more typing than simply running the\narch-chroot\nscript.\nIf\npacman\nfails with\nCould not resolve host\n, please\ncheck your internet connection\n.\nIf you cannot enter the arch-chroot or chroot environment but need to re-install packages, you can use the command\npacman --sysroot /mnt -Syu foo bar\nto use\npacman\non your root partition.\nReinstalling the kernel (the\nlinux\npackage) will automatically re-generate the initramfs image with\nmkinitcpio -p linux\n. There is no need to do this separately.\nAfterwards, it is recommended that you run\nexit\n,\numount /mnt/{boot,}\nand\nreboot\n.\n\"Warning: current locale is invalid; using default \"C\" locale\" error\nAs the error message says, your locale is not correctly configured. See\nLocale\n.\nMissing Locales Warning Messages\nWhen locale files are intentionally removed by tools such as\nbleachbit\nor\nlocalepurge\nAUR\n, pacman may issue warnings about missing locales during package updates.\nTo suppress these warnings, you can comment out the\nCheckSpace\noption in\npacman.conf\n. Keep in mind that disabling CheckSpace turns off the space-checking functionality for all package installations, so use this workaround only when you have alternative means to monitor disk space.\nPacman does not honor proxy settings\nMake sure that the relevant environment variables (\n$http_proxy\n,\n$ftp_proxy\netc.) are set up. If you use\npacman\nwith\nsudo\n, you need to configure sudo to\npass these environment variables to pacman\n. Also, ensure the configuration of\ndirmngr\nhas\nhonor-http-proxy\nin\n/etc/pacman.d/gnupg/dirmngr.conf\nto honor the proxy when refreshing the keys.\nHow do I reinstall all packages, retaining information on whether something was explicitly installed or as a dependency?\nTo reinstall all the native packages:\npacman -Qnq | pacman -S -\nor\npacman -S $(pacman -Qnq)\n(the\n-S\noption preserves the installation reason by default).\nYou will then need to reinstall all the foreign packages, which can be listed with\npacman -Qmq\n.\n\"Cannot open shared object file\" error\nIt looks like previous\npacman\ntransaction removed or corrupted shared libraries needed for\npacman\nitself.\nTo recover from this situation, you need to unpack required libraries to your filesystem manually. First find what package contains the missed library and then locate it in the\npacman\ncache (\n/var/cache/pacman/pkg/\n). Unpack required shared library to the filesystem. This will allow to run\npacman\n.\nNow you need to\nreinstall\nthe broken package. Note that you need to use\n--overwrite\nflag as you just unpacked system files and\npacman\ndoes not know about it. Pacman will correctly replace our shared library file with one from package.\nThat is it. Update the rest of the system.\nFreeze of package downloads\nSome issues have been reported regarding network problems that prevent\npacman\nfrom updating/synchronizing repositories.\n[2]\n[3]\nWhen installing Arch Linux natively, these issues have been resolved by replacing the default\npacman\nfile downloader with an alternative (see\nImprove pacman performance\nfor more details). When installing Arch Linux as a guest OS in\nVirtualBox\n, this issue has also been addressed by using\nHost interface\ninstead of\nNAT\nin the machine properties.\nFailed retrieving file 'core.db' from mirror\nIf you receive this error message with correct\nmirrors\n, try setting a different\nname server\n.\nerror: 'local-package.pkg.tar': permission denied\nIf you want to install a package on an sshfs mount using\npacman -U\nand receive this error, move the package to a local directory and try to install again.\nerror: could not determine cachedir mount point /var/cache/pacman/pkg\nUpon executing, e.g.,\npacman -Syu\ninside a chroot environment an error is encountered:\nerror: could not determine cachedir mount point /var/cache/pacman/pkg\nerror: failed to commit transaction (not enough free disk space)\nThis is frequently caused by the chroot directory not being a mountpoint when the chroot is entered. See the note at\nInstall Arch Linux from existing Linux#Downloading basic tools\nfor a solution, and\narch-chroot(8)\nfor an explanation and an example of using bind mounting to make the chroot directory a mountpoint.\nerror: GPGME error: No data\nIf you are unable to update packages and receive this error, then try\nrm -r /var/lib/pacman/sync/\nbefore attempting to update.\nIf removing sync files does not help, check that the sync files are\ngzip compressed data\nusing\nfile /var/lib/pacman/sync/*\nbefore attempting to update. A router or proxy might corrupt the downloads. Corruption could possibly be HTML type.\nIf sync files are of the correct type, there might be an issue with the mirror server. Look up the mirror server(s) in use with\npacman-conf -r core\nand\npacman-conf -r extra\n. Paste the first returned url in a browser and check that a file listing is returned. In case the mirror returns an error, comment it in\n/etc/pacman.d/mirrorlist\n. You may try updating or re-ranking\nmirrors\n.\nerror: GPGME error: General error and \":: File /var/cache/pacman/pkg/<package>.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).\nIf this error occurs and you are, for instance, unable to update your system or any package at all, it is possible that you have\nDISPLAY\nset to a blank value, which seems to break the GPG-Flow.\nIn this case,\nunset DISPLAY\nor setting it to a arbitrary value will most likely allow to update again, in case any other option above did not do the trick yet.\nSee\nthis\npost for further details.\nReinstall broken or out-of-sync packages\nOne may use the\npacman -Qk $pkg\nto check if the installed files of the\n$pkg\npackage match the files from its database version. For several packages, one may use the following loop to\nreinstall all packages which have missing file(s):\n# LC_ALL=C.UTF-8 pacman -Qk 2>/dev/null | grep -v ' 0 missing files' | cut -d: -f1 |\nwhile read -r package; do\npacman -S \"$package\" --noconfirm\ndone\nSuppose that your local database located in\n/var/lib/pacman\nis more up-to-date compared to installed packages in the\n/\nfilesystem (\ne.g.\n, because of a partial rollback), then this method is the appropriate one to re-synchronize the root filesystem with the local database.\nSee also\nlibalpm(3)\npacman(8)\npacman.conf(5)\nrepo-add(8)\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Pacman&oldid=852140\n\"\nCategories\n:\nArch projects\nPackage manager\nHidden categories:\nPages or sections flagged with Template:Out of date\nPages or sections flagged with Template:Expansion\nSearch\nSearch\npacman\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Pacman"}}
{"text": "Users and groups - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nUsers and groups\n9 languages\nالعربية\nDeutsch\nEspañol\nFrançais\nMagyar\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nDeveloperWiki:UID / GID Database\nSudo\nPolkit\nFile permissions and attributes\nsystemd-homed\nReset lost root password\nIdentity management\nUsers and groups are used on GNU/Linux for\naccess control\n—that is, to control access to the system's files, directories, and peripherals. Linux offers relatively simple/coarse access control mechanisms by default. For more advanced options, see\nACL\n,\nCapabilities\nand\nPAM#Configuration How-Tos\n.\nOverview\nA\nuser\nis anyone who uses a computer. In this case, we are describing the names which represent those users. It may be Mary or Bill, and they may use the names Dragonlady or Pirate in place of their real name. All that matters is that the computer has a name for each account it creates, and it is this name by which a person gains access to use the computer. Some system services also run using restricted or privileged user accounts.\nManaging users is done for the purpose of security by limiting access in certain specific ways. The\nsuperuser\n(root) has complete access to the operating system and its configuration; it is intended for administrative use only. Unprivileged users can use several programs for controlled\nprivilege elevation\n.\nAny individual may have more than one account as long as they use a different name for each account they create. Further, there are some reserved names which may not be used such as \"root\".\nUsers may be grouped together into a \"group\", and users may be added to an existing group to utilize the privileged access it grants.\nNote\nThe beginner should use these tools carefully and stay away from having anything to do with any other\nexisting\nuser account, other than their own.\nPermissions and ownership\nFrom\nIn UNIX Everything is a File\n:\nThe UNIX operating system crystallizes a couple of unifying ideas and concepts that shaped its design, user interface, culture and evolution. One of the most important of these is probably the mantra: \"everything is a file,\" widely regarded as one of the defining points of UNIX.\nThis key design principle consists of providing a unified paradigm for accessing a wide range of input/output resources: documents, directories, hard-drives, CD-ROMs, modems, keyboards, printers, monitors, terminals and even some inter-process and network communications. The trick is to provide a common abstraction for all of these resources, each of which the UNIX fathers called a \"file.\" Since every \"file\" is exposed through the same API, you can use the same set of basic commands to read/write to a disk, keyboard, document or network device.\nFrom\nExtending UNIX File Abstraction for General-Purpose Networking\n:\nA fundamental and very powerful, consistent abstraction provided in UNIX and compatible operating systems is the file abstraction. Many OS services and device interfaces are implemented to provide a file or file system metaphor to applications. This enables new uses for, and greatly increases the power of, existing applications — simple tools designed with specific uses in mind can, with UNIX file abstractions, be used in novel ways. A simple tool, such as cat, designed to read one or more files and output the contents to standard output, can be used to read from I/O devices through special device files, typically found under the\n/dev\ndirectory. On many systems, audio recording and playback can be done simply with the commands, \"\ncat /dev/audio > myfile\n\" and \"\ncat myfile > /dev/audio\n,\" respectively.\nEvery file on a GNU/Linux system is owned by a user and a group. In addition, there are three types of access permissions: read, write, and execute. Different access permissions can be applied to a file's owning user, owning group, and others (those without ownership). One can determine a file's owners and permissions by viewing the long listing format of the\nls\ncommand:\n$ ls -l /boot/\ntotal 13740\ndrwxr-xr-x 2 root root    4096 Jan 12 00:33 grub\n-rw-r--r-- 1 root root 8570335 Jan 12 00:33 initramfs-linux-fallback.img\n-rw-r--r-- 1 root root 1821573 Jan 12 00:31 initramfs-linux.img\n-rw-r--r-- 1 root root 1457315 Jan  8 08:19 System.map26\n-rw-r--r-- 1 root root 2209920 Jan  8 08:19 vmlinuz-linux\nThe first column displays the file's permissions (for example, the file\ninitramfs-linux.img\nhas permissions\n-rw-r--r--\n). The third and fourth columns display the file's owning user and group, respectively. In this example, all files are owned by the\nroot\nuser and the\nroot\ngroup.\n$ ls -l /media/\ntotal 16\ndrwxrwx--- 1 root vboxsf 16384 Jan 29 11:02 sf_Shared\nIn this example, the\nsf_Shared\ndirectory is owned by the\nroot\nuser and the\nvboxsf\ngroup. It is also possible to determine a file's owners and permissions using the stat command:\nOwning user:\n$ stat -c %U /media/sf_Shared/\nroot\nOwning group:\n$ stat -c %G /media/sf_Shared/\nvboxsf\nAccess rights:\n$ stat -c %A /media/sf_Shared/\ndrwxrwx---\nAccess permissions are displayed in three groups of characters, representing the permissions of the owning user, owning group, and others, respectively. For example, the characters\n-rw-r--r--\nindicate that the file's owner has read and write permission, but not execute (\nrw-\n), whilst users belonging to the owning group and other users have only read permission (\nr--\nand\nr--\n). Meanwhile, the characters\ndrwxrwx---\nindicate that the file's owner and users belonging to the owning group all have read, write, and execute permissions (\nrwx\nand\nrwx\n), whilst other users are denied access (\n---\n). The first character represents the file's type.\nList files owned by a user or group with the\nfind\nutility:\n# find / -group\ngroupname\n# find / -group\ngroupnumber\n# find / -user\nuser\nA file's owning user and group can be changed with the\nchown\n(change owner) command. A file's access permissions can be changed with the\nchmod\n(change mode) command.\nSee\nchown(1)\n,\nchmod(1)\n, and\nLinux file permissions\nfor additional detail.\nShadow\nThe user, group and password management tools on Arch Linux come from the\nshadow\npackage, which is a dependency of the\nbase\nmeta package\n.\nFile list\nWarning\nDo not edit these files by hand. There are utilities that properly handle locking and avoid invalidating the format of the database. See\n#User management\nand\n#Group management\nfor an overview.\nFile\nPurpose\n/etc/shadow\nSecure user account information\n/etc/passwd\nUser account information\n/etc/gshadow\nContains the shadowed information for group accounts\n/etc/group\nDefines the groups to which users belong\nUser management\nTo list users currently logged on the system, the\nwho\ncommand can be used. To list all existing user accounts including their properties stored in the\nuser database\n, run\npasswd -Sa\nas root. See\npasswd(1)\nfor the description of the output format.\nTo add a new user, use the\nuseradd\ncommand:\n# useradd -m -G\nadditional_groups\n-s\nlogin_shell\nusername\n-m\n/\n--create-home\nthe user's home directory is created as\n/home/\nusername\n. The directory is populated by the files in the skeleton directory. The created files are owned by the new user.\n-G\n/\n--groups\na comma separated list of supplementary groups which the user is also a member of. The default is for the user to belong only to the initial group.\n-s\n/\n--shell\na path to the user's login shell. Ensure the chosen shell is installed if choosing something other than\nBash\n. The default shell for newly created user can be set in\n/etc/default/useradd\n.\nWarning\nIn order to be able to log in, the login shell must be one of those listed in\n/etc/shells\n, otherwise the\nPAM\nmodule\npam_shells(8)\nwill deny the login request.\nNote\nThe password for the newly created user must then be defined, using\npasswd\nas shown in\n#Example adding a user\n.\nIf an initial login group is specified by name or number, it must refer to an already existing group. If not specified, the behaviour of\nuseradd\nwill depend on the\nUSERGROUPS_ENAB\nvariable contained in\n/etc/login.defs\n. The default behaviour (\nUSERGROUPS_ENAB yes\n) is to create a group with the same name as the username.\nWhen the login shell is intended to be non-functional, for example when the user account is created for a specific service,\n/usr/bin/nologin\nmay be specified in place of a regular shell to politely refuse a login (see\nnologin(8)\n).\nSee\nuseradd(8)\nfor other supported options.\nExample adding a user\nTo add a new user named\narchie\n, creating its home directory and otherwise using all the defaults in terms of groups, directory names, shell used and various other parameters:\n# useradd -m archie\nAlthough it is not required to protect the newly created user\narchie\nwith a password, it is highly recommended to do so:\n# passwd archie\nThe above\nuseradd\ncommand will also automatically create a group called\narchie\nand makes this the default group for the user\narchie\n. Making each user have their own group (with the group name same as the user name) is the preferred way to add users.\nYou could also make the default group something else using the\n-g\noption, but note that, in multi-user systems, using a single default group (e.g.\nusers\n) for every user is not recommended. The reason is that typically, the method for facilitating shared write access for specific groups of users is setting user\numask\nvalue to\n002\n, which means that the default group will by default always have write access to any file you create. See also\nUser Private Groups\n. If a user must be a member of a specific group specify that group as a supplementary group when creating the user.\nIn the recommended scenario, where the default group has the same name as the user name, all files are by default writeable only for the user who created them. To allow write access to a specific group, shared files/directories can be made writeable by default for everyone in this group and the owning group can be automatically fixed to the group which owns the parent directory by setting the\nsetgid\nbit on this directory:\n# chmod g+s\nour_shared_directory\nOtherwise the file creator's default group (usually the same as the user name) is used.\nIf a GID change is required temporarily you can also use the\nnewgrp\ncommand to change the user's default GID to another GID at runtime. For example, after executing\nnewgrp\ngroupname\nfiles created by the user will be associated with the\ngroupname\nGID, without requiring a re-login. To change back to the default GID, execute\nnewgrp\nwithout a groupname.\nChanging user defaults\nThe default values used for creating new accounts are set in\n/etc/default/useradd\nand can be displayed using\nuseradd --defaults\n. For example, to change the default shell globally, set\nSHELL=/usr/bin/\nshell\n. A different shell can also be specified individually with the\n-s\n/\n--shell\noption. Use\nchsh -l\nto list valid login shells.\nFiles can also be specified to be added to newly created user home directories in\n/etc/skel\n. This is useful for minimalist window managers where config files need manual configuration to reach DE-familiar behavior. For example, to set up default shortcuts for all newly created users:\n# mkdir /etc/skel/.config\n# cp ~archie/.config/sxhkd /etc/skel/.config\nSee also:\nDisplay manager#Run ~/.xinitrc as a session\nto add xinitrc as an option to all users on the display manager.\nExample adding a system user\nSystem users can be used to run processes/daemons under a different user,  protecting (e.g. with\nchown\n) files and/or directories and more examples of computer hardening.\nWith the following command a system user without shell access and without a\nhome\ndirectory is created (optionally append the\n-U\nparameter to create a group with the same name as the user, and add the user to this group):\n# useradd --system -s /usr/bin/nologin\nusername\nIf the system user requires a specific user and group ID, specify them with the\n-u\n/\n--uid\nand\n-g\n/\n--gid\noptions when creating the user:\n# useradd --system -u 850 -g 850 -s /usr/bin/nologin\nusername\nChange a user's login name or home directory\nTo change a user's home directory:\n# usermod -d\n/my/new/home\n-m\nusername\nThe\n-m\noption also automatically creates the new directory and moves the content there.\nTip\nYou can create a link from the user's former home directory to the new one. Doing this will allow programs to find files that have hardcoded paths.\n# ln -s /my/new/home/ /my/old/home\nMake sure there is\nno\ntrailing\n/\non\n/my/old/home\n.\nTo change a user's login name:\n# usermod -l\nnewname\noldname\nWarning\nMake certain that you are not logged in as the user whose name you are about to change. Open a new tty (e.g.\nCtrl+Alt+F6\n) and log in as root or as another user and\nelevate to root\n.\nusermod\nshould prevent you from doing this by mistake.\nChanging a username is safe and easy when done properly, just use the\nusermod\ncommand. If the user is associated to a group with the same name, you can rename this with the\ngroupmod\ncommand.\nAlternatively, the\n/etc/passwd\nfile can be edited directly, see\n#User database\nfor an introduction to its format.\nAlso keep in mind the following notes:\nIf you are using\nsudo\nmake sure you update your\n/etc/sudoers\nto reflect the new username(s) (via the\nvisudo\ncommand as root).\nPersonal\ncrontabs\nneed to be adjusted by renaming the user's file in\n/var/spool/cron\nfrom the old to the new name, and then opening\ncrontab -e\nto change any relevant paths and have it adjust the file permissions accordingly.\nWine's\npersonal directories/files' contents in\n~/.wine/drive_c/users\n,\n~/.local/share/applications/wine/Programs\nand possibly more need to be manually renamed/edited.\nCertain Thunderbird addons, like\nEnigmail\n, may need to be reinstalled.\nAnything on your system (desktop shortcuts, shell scripts, etc.) that uses an absolute path to your home dir (i.e.\n/home/oldname\n) will need to be changed to reflect your new name. To avoid these problems in shell scripts, simply use the\n~\nor\n$HOME\nvariables for home directories.\nAlso do not forget to edit accordingly the configuration files in\n/etc/\nthat relies on your absolute path (e.g. Samba, CUPS, so on). A nice way to learn what files you need to update involves using the grep command this way:\ngrep -r\nold_user\n*\nOther examples of user management\nTo enter user information for the\nGECOS\ncomment (e.g. the full user name), type:\n# chfn\nusername\n(this way\nchfn\nruns in interactive mode).\nAlternatively the GECOS comment can be set more liberally with:\n# usermod -c \"Comment\"\nusername\nTo mark a user's password as expired, requiring them to create a new password the first time they log in, type:\n# chage -d 0\nusername\nUser accounts may be deleted with the\nuserdel\ncommand:\n# userdel -r\nusername\nThe\n-r\noption specifies that the user's home directory and mail spool should also be deleted.\nTo change the user's login shell:\n# usermod -s\n/usr/bin/bash\nusername\nTip\nThe\nadduser\nAUR\nscript allows carrying out the jobs of\nuseradd\n,\nchfn\nand\npasswd\ninteractively. See also\nFS#32893\n.\nUser database\nLocal user information is stored in the plain-text\n/etc/passwd\nfile: each of its lines represents a user account, and has seven fields delimited by colons.\naccount:password:UID:GID:GECOS:directory:shell\nWhere:\naccount\nis the user name. This field cannot be blank. Standard *NIX naming rules apply.\npassword\nis the user password.\nWarning\nThe\npasswd\nfile is world-readable, so storing passwords (hashed or otherwise) in this file is insecure. Instead, Arch Linux uses\nshadowed passwords\n: the\npassword\nfield will contain a placeholder character (\nx\n) indicating that the hashed password is saved in the access-restricted file\n/etc/shadow\n. For this reason it is recommended to always change passwords using the\npasswd\ncommand.\nUID\nis the numerical user ID. In Arch, the first login name (after root) for a so called normal user, as opposed to services, is UID 1000 by default; subsequent UID entries for users should be greater than 1000.\nGID\nis the numerical primary group ID for the user. Numeric values for GIDs are listed in\n/etc/group\n.\nGECOS\nis an optional field used for informational purposes; usually it contains the full user name, but it can also be used by services such as\nfinger\nand managed with the\nchfn\ncommand. This field is optional and may be left blank.\ndirectory\nis used by the login command to set the\n$HOME\nenvironment variable. Several services with their own users use\n/\n, but normal users usually set a directory under\n/home\n.\nshell\nis the path to the user's default\ncommand shell\n. This field is optional and defaults to\n/usr/bin/bash\n.\nExample:\narchie:x:1001:1003:Archie,\nsome comment here\n,,:/home/archie:/usr/bin/bash\nBroken down, this means: user\narchie\n, whose password is in\n/etc/shadow\n, whose UID is 1001 and whose primary group is 1003. Archie is their full name and there is a comment associated to their account; their home directory is\n/home/archie\nand they are using\nBash\n.\nThe\npwck\ncommand can be used to verify the integrity of the user database. It can sort the user list by UID at the same time, which can be helpful for comparison:\n# pwck -s\nWarning\nArch Linux defaults of the files are created as\npacnew files\nby new releases of the\nfilesystem\npackage. Unless Pacman outputs related messages for action, these\n.pacnew\nfiles can, and should, be disregarded/removed. New required default users and groups are added or re-added as needed by\nsystemd-sysusers(8)\nor the package install script.\nAutomatic integrity checks\nInstead of running\npwck\n/\ngrpck\nmanually, the\nsystemd timer\nshadow.timer\n, which is part of, and is enabled by, installation of the\nshadow\npackage, will start\nshadow.service\ndaily.\nshadow.service\nwill run\npwck(8)\nand\ngrpck(8)\nto verify the integrity of both password and group files.\nIf discrepancies are reported, group can be edited with the\nvigr(8)\ncommand and users with\nvipw(8)\n. This provides an extra margin of protection in that these commands lock the databases for editing. Note that the default text editor is vi, but an alternative editor will be used if the\nEDITOR\nenvironment variable\nis set, then that editor will be used instead.\nKeeping users on the live system in parity with systemd sysuser.d defaults\nWarning\nsystemd does not provide any official way to migrate existing accounts to fully locked system accounts\n[1]\n.\nAs packages adopt the\nchange-sysusers-to-fully-locked-system-accounts\n, package created system users generated in the past will not inherit new package defaults for the increased security of locked/expired status. These users need to be modified manually for this change.\nuser-analysis.sh\ndoes just that.\nIn addition, the script also identifies orphaned users (those created by a package no longer on the system) and can automatically delete them.\nGroup management\n/etc/group\nis the file that defines the groups on the system (see\ngroup(5)\nfor details). There is also its companion\ngshadow\nwhich is rarely used. Its details are at\ngshadow(5)\n.\nDisplay group membership with the\ngroups\ncommand:\n$ groups\nuser\nIf\nuser\nis omitted, the current user's group names are displayed.\nThe\nid\ncommand provides additional detail, such as the user's UID and associated GIDs:\n$ id\nuser\nTo list all groups on the system:\n$ cat /etc/group\nCreate new groups with the\ngroupadd\ncommand:\n# groupadd\ngroup\nNote\nIf the user is currently logged in, they must log out and in again for changes to take effect.\nAdd users to a group with the\ngpasswd\ncommand (see\nFS#58262\nregarding errors):\n# gpasswd -a\nuser\ngroup\nAlternatively, add a user to additional groups with\nusermod\n(replace\nadditional_groups\nwith a comma-separated list):\n# usermod -aG\nadditional_groups\nusername\nWarning\nIf the\n-a\noption is omitted in the\nusermod\ncommand above, the user is removed from all groups not listed in\nadditional_groups\n(i.e. the user will be member only of those groups listed in\nadditional_groups\n).\nModify an existing group with the\ngroupmod\ncommand, e.g. to rename the\nold_group\ngroup to\nnew_group\n:\n# groupmod -n\nnew_group\nold_group\nNote\nThis will change a group name but not the numerical GID of the group. Hence, all files previously owned by\nold_group\nwill be owned by\nnew_group\n.\nTo delete existing groups:\n# groupdel\ngroup\nTo remove users from a group:\n# gpasswd -d\nuser\ngroup\nThe\ngrpck\ncommand can be used to verify the integrity of the system's group files.\nWarning\nArch Linux defaults of the files are created as\n.pacnew\nfiles by new releases of the\nfilesystem\npackage. Unless Pacman outputs related messages for action, these\n.pacnew\nfiles can, and should, be disregarded/removed. New required default users and groups are added or re-added as needed by\nsystemd-sysusers(8)\nor the package install script.\nGroup list\nThis section explains the purpose of the essential groups from the\nfilesystem\npackage. There are many other groups, which will be created with\ncorrect GID\nwhen the relevant package is installed. See the main page for the software for details.\nNote\nA later removal of a package does not remove the automatically created user/group (UID/GID) again. This is intentional because any files created during its usage would otherwise be left orphaned as a potential security risk.\nUser groups\nNon-root workstation/desktop users often need to be added to some of following groups to allow access to hardware peripherals and facilitate system administration:\nGroup\nAffected files\nPurpose\nadm\nAdministration group, commonly used to give read access to protected logs. It has full read access to\njournal\nfiles.\nftp\n/srv/ftp/\nAccess to files served by\nFTP servers\n.\ngames\n/var/games\nAccess to some game software.\nhttp\n/srv/http/\nAccess to files served by\nHTTP servers\n.\nlog\nAccess to log files in\n/var/log/\ncreated by\nsyslog-ng\n.\nrfkill\n/dev/rfkill\nRight to control wireless devices power state (used by\nrfkill\n).\nsys\nRight to administer printers in\nCUPS\n.\nsystemd-journal\n/var/log/journal/*\nCan be used to provide read-only access to the systemd logs, as an alternative to\nadm\nand\nwheel\n[2]\n. Otherwise, only user generated messages are displayed.\nuucp\n/dev/ttyS[0-9]+\n,\n/dev/tts/[0-9]+\n,\n/dev/ttyUSB[0-9]+\n,\n/dev/ttyACM[0-9]+\n,\n/dev/rfcomm[0-9]+\nRS-232\nserial ports and devices connected to them.\nwheel\nAdministration group, commonly used to give privileges to perform administrative actions. It has full read access to\njournal\nfiles and the right to administer printers in\nCUPS\n. Can also be used to give access to the\nsudo\nand\nsu\nutilities (neither uses it by default).\nSystem groups\nThe following groups are used for system purposes, an assignment to users is only required for dedicated purposes:\nGroup\nAffected files\nPurpose\ndbus\nused internally by\ndbus\nkmem\n/dev/port\n,\n/dev/mem\n,\n/dev/kmem\nlocate\n/usr/bin/locate\n,\n/var/lib/locate\n,\n/var/lib/mlocate\n,\n/var/lib/slocate\nSee\nLocate\n.\nlp\n/dev/lp[0-9]*\n,\n/dev/parport[0-9]*\nAccess to parallel port devices (printers and others).\nmail\n/usr/bin/mail\nnobody\nUnprivileged group.\nproc\n/proc/\npid\n/\nA group authorized to learn processes information otherwise prohibited by\nhidepid=\nmount option of the\nproc file system\n. The group must be explicitly set with the\ngid=\nmount option.\nroot\n/*\nComplete system administration and control (root, admin).\nsmmsp\nsendmail\ngroup.\ntty\n/dev/tty\n,\n/dev/vcc\n,\n/dev/vc\n,\n/dev/ptmx\nutmp\n/run/utmp\n,\n/var/log/btmp\n,\n/var/log/wtmp\nSee\nWikipedia:utmp#utmp, wtmp and btmp\n.\nPre-systemd groups\nBefore arch migrated to\nsystemd\n, users had to be manually added to these groups in order to be able to access the corresponding devices. This way has been deprecated in favour of\nudev\nmarking the devices with a\nuaccess\ntag\nand\nlogind\nassigning the permissions to users dynamically via\nACLs\naccording to which session is currently active. Note that the session must not be broken for this to work (see\nGeneral troubleshooting#Session permissions\nto check it).\nThere are some notable exceptions which require adding a user to some of these groups: for example if you want to allow users to access the device even when they are not logged in. However, note that adding users to the groups can even cause some functionality to break (for example, the\naudio\ngroup will break fast user switching and allows applications to block software mixing).\nGroup\nAffected files\nPurpose\naudio\n/dev/audio\n,\n/dev/snd/*\n,\n/dev/rtc0\nDirect access to sound hardware, for all sessions. It is still required to make\nALSA\nand\nOSS\nwork in remote sessions, see\nALSA#User privileges\n, otherwise not recommended. Unlike on certain other distros, this group is not used for\nrealtime privileges\n.\ndisk\n/dev/sd[a-zA-Z]*[1-9]*\n,\n/dev/nvme[0-9]*p[1-9]*\n,\n/dev/mmcblk[0-9]*p[1-9]*\nAccess to block devices not affected by other groups such as\noptical\n,\nfloppy\n, and\nstorage\n.\nfloppy\n/dev/fd[0-9]*\nAccess to floppy drives.\ninput\n/dev/input/event[0-9]*\n,\n/dev/input/mouse[0-9]*\nAccess to input devices. Introduced in systemd 215\n[3]\n.\nkvm\n/dev/kvm\nAccess to virtual machines using\nKVM\n.\noptical\n/dev/sr[0-9]\n,\n/dev/sg[0-9]\nAccess to optical devices such as CD and DVD drives.\nscanner\n/var/lock/sane\nAccess to scanner hardware.\nstorage\n/dev/st[0-9]*[lma]*\n,\n/dev/nst[0-9]*[lma]*\nUsed to gain access to removable drives such as USB hard drives, flash/jump drives, MP3 players; enables the user to mount storage devices.\n[4]\nNow solely for direct access to tapes if no custom udev rules is involved.\n[5]\n[6]\n[7]\n.\nAlso required for manipulating some devices via\nudisks/udisksctl\n.\nvideo\n/dev/fb/0\n,\n/dev/misc/agpgart\nAccess to video capture devices, 2D/3D hardware acceleration, framebuffer (\nX\ncan be used\nwithout\nbelonging to this group).\nUnused groups\nThe following groups are currently not used for any purpose:\nGroup\nAffected files\nPurpose\nbin\nnone\nHistorical\ndaemon\nlock\nUsed for lockfile access. Required by e.g.\ngnokii\nAUR\n.\nmem\nnetwork\nUnused by default. Can be used e.g. for granting access to NetworkManager (see\nNetworkManager#Set up PolicyKit permissions\n).\npower\nuuidd\nusers\nThe primary group for users when user private groups are not used (generally not recommended), e.g. when creating users with\nUSERGROUPS_ENAB no\nin\n/etc/login.defs\nor the\n-N\n/\n--no-user-group\noption of\nuseradd\n.\nOther tools related to these databases\nThis article or section is a candidate for merging with\n#Shadow\n.\nNotes:\nSeparate section does not make sense. (Discuss in\nTalk:Users and groups\n)\nThe factual accuracy of this article or section is disputed.\nReason:\nDoes Arch Linux really prefer\nchage\nover\nvipw -s\nand\nvigr -s\n. (Discuss in\nTalk:Users and groups#Utilities to handle the shadow file in acrh\n)\ngetent(1)\ncan be used to read a particular record.\n$ getent group tty\nAs warned in\n#User database\n, using specific utilities such as\npasswd\nand\nchfn\n, is a better way to change the databases. Nevertheless, there are times when editing them directly is looked after. For those times,\nvipw\n,\nvigr\nare provided. It is strongly recommended to use these tailored editors over using a general text editor as they lock the databases against concurrent editing. They also help prevent invalid entries and/or syntax errors. Note that Arch Linux prefers usage of specific tools, such as\nchage\n, for modifying the shadow database over using\nvipw -s\nand\nvigr -s\nfrom\nutil-linux\n. See also\nFS#31414\n.\nlslogins(1)\nand\nlastlog2(1)\nare some of the tools for viewing utmp related files.\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Users_and_groups&oldid=845405\n\"\nCategory\n:\nSecurity\nHidden categories:\nPages or sections flagged with Template:Merge\nPages or sections flagged with Template:Accuracy\nSearch\nSearch\nUsers and groups\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Users_and_groups"}}
{"text": "File permissions and attributes - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nFile permissions and attributes\n6 languages\nEspañol\nMagyar\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nUsers and groups\numask\nAccess Control Lists\nCapabilities\nExtended attributes\nFile systems\nuse\npermissions\nand\nattributes\nto regulate the level of interaction that system processes can have with files and directories.\nWarning\nWhen used for security purposes, permissions and attributes only defend against attacks launched from the booted system. To protect the stored data from attackers with physical access to the machine, one must also implement\ndata-at-rest encryption\n.\nViewing permissions\nUse the\nls\ncommand's\n-l\noption to view the permissions (or\nfile mode\n) set for the contents of a directory, for example:\n$ ls -l /path/to/directory\ntotal 128\ndrwxr-xr-x 2 archie archie  4096 Jul  5 21:03 Desktop\ndrwxr-xr-x 6 archie archie  4096 Jul  5 17:37 Documents\ndrwxr-xr-x 2 archie archie  4096 Jul  5 13:45 Downloads\n-rw-rw-r-- 1 archie archie  5120 Jun 27 08:28 customers.ods\n-rw-r--r-- 1 archie archie  3339 Jun 27 08:28 todo\n-rwxr-xr-x 1 archie archie  2048 Jul  6 12:56 myscript.sh\nThe first column is what we must focus on. Taking an example value of\ndrwxrwxrwx+\n, the meaning of each character is explained in the following tables:\nd\nrwx\nrwx\nrwx\n+\nThe file type, technically not part of its permissions. See\ninfo ls -n \"What information is listed\"\nfor an explanation of the possible values.\nThe permissions that the owner has over the file, explained below.\nThe permissions that the group has over the file, explained below.\nThe permissions that all the other users have over the file, explained below.\nA single character that specifies whether an alternate access method applies to the file. When this character is a space, there is no alternate access method. A\n.\ncharacter indicates a file with a security context, but no other alternate access method. A file with any other combination of alternate access methods is marked with a\n+\ncharacter, for example in the case of\nAccess Control Lists\n.\nEach of the three permission triads (\nrwx\nin the example above) can be made up of the following characters:\nCharacter\nEffect on files\nEffect on directories\nRead permission (first character)\n-\nThe file cannot be read.\nThe directory's contents cannot be shown.\nr\nThe file can be read.\nThe directory's contents can be shown.\nWrite permission (second character)\n-\nThe file cannot be modified.\nThe directory's contents cannot be modified.\nw\nThe file can be modified.\nThe directory's contents can be modified (create new files or directories; rename or delete existing files or directories); requires the execute permission to be also set, otherwise this permission has no effect.\nExecute permission (third character)\n-\nThe file cannot be executed.\nThe directory cannot be accessed with\ncd\n.\nx\nThe file can be executed.\nThe directory can be accessed with\ncd\n; this is the only permission bit that in practice can be considered to be \"inherited\" from the ancestor directories, in fact if\nany\ndirectory in the path does not have the\nx\nbit set, the final file or directory cannot be accessed either, regardless of its permissions; see\npath_resolution(7)\nfor more information.\ns\nThe\nsetuid\nbit when found in the\nu\nser triad; the\nsetgid\nbit when found in the\ng\nroup triad; it is not found in the\no\nthers triad; it also implies that\nx\nis set.\nS\nSame as\ns\n, but\nx\nis not set; rare on regular files, and useless on directories.\nt\nThe\nsticky\nbit; it can only be found in the\no\nthers triad; it also implies that\nx\nis set.\nT\nSame as\nt\n, but\nx\nis not set; rare on regular files.\nSee\ninfo Coreutils -n \"Mode Structure\"\nand\nchmod(1)\nfor more details.\nTip\nYou can view permissions along a path with\nnamei -l\npath\n.\nExamples\nLet us see some examples to clarify:\ndrwx------\n6 archie archie  4096 Jul  5 17:37 Documents\nArchie has full access to the\nDocuments\ndirectory. They can list, create files and rename, delete any file in Documents, regardless of file permissions. Their ability to access a file depends on the file's permissions.\ndr-x------\n6 archie archie  4096 Jul  5 17:37 Documents\nArchie has full access except they can not create, rename, delete any file. They can list the files and (if the file's permissions allow it) may access an existing file in Documents.\nd-wx------\n6 archie archie  4096 Jul  5 17:37 Documents\nArchie can not do\nls\nin the\nDocuments\ndirectory but if they know the name of an existing file then they may list, rename, delete or (if the file's permissions allow it) access it. Also, they are able to create new files.\nd--x------\n6 archie archie  4096 Jul  5 17:37 Documents\nArchie is only capable of (if the file's permissions allow it) accessing those files the\nDocuments\ndirectory which they know of. They can not list already existing files or create, rename, delete any of them.\nYou should keep in mind that we elaborate on directory permissions and it has nothing to do with the individual file permissions. When you create a new file it is the directory that changes. That is why you need write permission to the directory.\nLet us look at another example, this time of a file, not a directory:\n-rw-r--r--\n1 archie web  5120 Jun 27 08:28 foobar\nHere we can see the first letter is not\nd\nbut\n-\n. So we know it is a file, not a directory. Next the owner's permissions are\nrw-\nso the owner has the ability to read and write but not execute. This may seem odd that the owner does not have all three permissions, but the\nx\npermission is not needed as it is a text/data file, to be read by a text editor such as Gedit, EMACS, or software like R, and not an executable in its own right (if it contained something like python programming code then it very well could be). The group's permissions are set to\nr--\n, so the group has the ability to read the file but not write/edit it in any way — it is essentially like setting something to read-only. We can see that the same permissions apply to everyone else as well.\nChanging permissions\nchmod\nis a command in Linux and other Unix-like operating systems that allows to\nch\nange the permissions (or access\nmod\ne) of a file or directory.\nText method\nTo change the permissions — or\naccess mode\n— of a file, use the\nchmod\ncommand in a terminal. Below is the command's general structure:\nchmod\nwho\n=\npermissions\nfilename\nWhere\nwho\nis any from a range of letters, each signifying who is being given the permission. They are as follows:\nu\n: the\nuser\nthat owns the file.\ng\n: the\nuser group\nthat the file belongs to.\no\n: the\no\nther users, i.e. everyone else.\na\n:\na\nll of the above; use this instead of typing\nugo\n.\nThe permissions are the same as discussed in\n#Viewing permissions\n(\nr\n,\nw\nand\nx\n).\nNow have a look at some examples using this command. Suppose you became very protective of the Documents directory and wanted to deny everybody but yourself, permissions to read, write, and execute (or in this case search/look) in it:\nBefore:\ndrwxr-xr-x 6 archie web  4096 Jul  5 17:37 Documents\n$ chmod g= Documents\n$ chmod o= Documents\nAfter:\ndrwx------ 6 archie web  4096 Jul  6 17:32 Documents\nHere, because you want to deny permissions, you do not put any letters after the\n=\nwhere permissions would be entered. Now you can see that only the owner's permissions are\nrwx\nand all other permissions are\n-\n.\nThis can be reverted with:\nBefore:\ndrwx------ 6 archie web  4096 Jul  6 17:32 Documents\n$ chmod g=rx Documents\n$ chmod o=rx Documents\nAfter:\ndrwxr-xr-x 6 archie web  4096 Jul  6 17:32 Documents\nIn the next example, you want to grant read and execute permissions to the group, and other users, so you put the letters for the permissions (\nr\nand\nx\n) after the\n=\n, with no spaces.\nYou can simplify this to put more than one\nwho\nletter in the same command, e.g:\n$ chmod go=rx Documents\nNote\nIt does not matter in which order you put the\nwho\nletters or the permission letters in a\nchmod\ncommand: you could have\nchmod go=rx file\nor\nchmod og=xr file\n. It is all the same.\nNow let us consider a second example, suppose you want to change a\nfoobar\nfile so that you have read and write permissions, and fellow users in the group\nweb\nwho may be colleagues working on\nfoobar\n, can also read and write to it, but other users can only read it:\nBefore:\n-rw-r--r-- 1 archie web  5120 Jun 27 08:28 foobar\n$ chmod g=rw foobar\nAfter:\n-rw-rw-r-- 1 archie web  5120 Jun 27 08:28 foobar\nThis is exactly like the first example, but with a file, not a directory, and you grant write permission (just so as to give an example of granting every permission).\nText method shortcuts\nThe\nchmod\ncommand lets add and subtract permissions from an existing set using\n+\nor\n-\ninstead of\n=\n. This is different from the above commands, which essentially re-write the permissions (e.g. to change a permission from\nr--\nto\nrw-\n, you still need to include\nr\nas well as\nw\nafter the\n=\nin the\nchmod\ncommand invocation. If you missed out\nr\n, it would take away the\nr\npermission as they are being re-written with the\n=\n. Using\n+\nand\n-\navoids this by adding or taking away from the\ncurrent\nset of permissions).\nLet us try this\n+\nand\n-\nmethod with the previous example of adding write permissions to the group:\nBefore:\n-rw-r--r-- 1 archie web 5120 Jun 27 08:28 foobar\n$ chmod g+w foobar\nAfter:\n-rw-rw-r-- 1 archie web  5120 Jun 27 08:28 foobar\nAnother example, denying write permissions to all (\na\n):\nBefore:\n-rw-rw-r-- 1 archie web  5120 Jun 27 08:28 foobar\n$ chmod a-w foobar\nAfter:\n-r--r--r-- 1 archie web  5120 Jun 27 08:28 foobar\nA different shortcut is the special\nX\nmode: this is not an actual file mode, but it is often used in conjunction with the\n-R\noption to set the executable bit only for directories, and leave it unchanged for regular files, for example:\n$ chmod -R a+rX ./data/\nCopying permissions\nIt is possible to tell\nchmod\nto copy the permissions from one class, say the owner, and give those same permissions to group or even all. To do this, instead of putting\nr\n,\nw\n, or\nx\nafter the\n=\n, put another\nwho\nletter. e.g:\nBefore:\n-rw-r--r-- 1 archie web 5120 Jun 27 08:28 foobar\n$ chmod g=u foobar\nAfter:\n-rw-rw-r-- 1 archie web 5120 Jun 27 08:28 foobar\nThis command essentially translates to \"change the permissions of group (\ng=\n), to be the same as the owning user (\n=u\n). Note that you cannot copy a set of permissions as well as grant new ones e.g.:\n$ chmod g=wu foobar\nIn that case\nchmod\nthrow an error.\nNumeric method\nchmod\ncan also set permissions using numbers.\nUsing numbers is another method which allows you to edit the permissions for all three owner, group, and others at the same time, as well as the setuid, setgid, and sticky bits. This basic structure of the code is this:\n$ chmod\nxxx\nfilename\nWhere\nxxx\nis a 3-digit number where each digit can be anything from 0 to 7. The first digit applies to permissions for owner, the second digit applies to permissions for group, and the third digit applies to permissions for all others.\nIn this number notation, the values\nr\n,\nw\n, and\nx\nhave their own number value:\nr=4\nw=2\nx=1\nTo come up with a 3-digit number you need to consider what permissions you want owner, group, and all others to have, and then total their values up. For example, if you want to grant the owner of a directory read write and execution permissions, and you want group and everyone else to have just read and execute permissions, you would come up with the numerical values like so:\nOwner:\nrwx\n=4+2+1=7\nGroup:\nr-x\n=4+0+1=5\nOther:\nr-x\n=4+0+1=5\n$ chmod 755\nfilename\nThis is the equivalent of using the following:\n$ chmod u=rwx\nfilename\n$ chmod go=rx\nfilename\nTo view the existing permissions of a file or directory in numeric form, use the\nstat(1)\ncommand:\n$ stat -c %a\nfilename\nWhere the %a option specifies output in numeric form.\nMost directories are set to\n755\nto allow reading, writing and execution to the owner, but deny writing to everyone else, and files are normally\n644\nto allow reading and writing for the owner but just reading for everyone else; refer to the last note on the lack of\nx\npermissions with non executable files: it is the same thing here.\nTo see this in action with examples consider the previous example that has been used but with this numerical method applied instead:\nBefore:\n-rw-r--r-- 1 archie web  5120 Jun 27 08:28 foobar\n$ chmod 664 foobar\nAfter:\n-rw-rw-r-- 1 archie web  5120 Jun 27 08:28 foobar\nIf this were an executable the number would be\n774\nif you wanted to grant executable permission to the owner and group. Alternatively if you wanted everyone to only have read permission the number would be\n444\n. Treating\nr\nas 4,\nw\nas 2, and\nx\nas 1 is probably the easiest way to work out the numerical values for using\nchmod\nxxx\nfilename\n, but there is also a binary method, where each permission has a binary number, and then that is in turn converted to a number. It is a bit more convoluted, but here included for completeness.\nConsider this permission set:\n-rwxr-xr--\nIf you put a 1 under each permission granted, and a 0 for every one not granted, the result would be something like this:\n-rwxrwxr-x\n111111101\nYou can then convert these binary numbers:\n000=0\t    100=4\n001=1\t    101=5\n010=2\t    110=6\n011=3\t    111=7\nThe value of the above would therefore be 775.\nConsider we wanted to remove the writable permission from group:\n-rwxr-xr-x\n111101101\nThe value would therefore be 755 and you would use\nchmod 755\nfilename\nto remove the writable permission. You will notice you get the same three digit number no matter which method you use. Whether you use text or numbers will depend on personal preference and typing speed. When you want to restore a directory or file to default permissions e.g. read and write (and execute) permission to the owner but deny write permission to everyone else, it may be faster to use\nchmod 755/644\nfilename\n. However if you are changing the permissions to something out of the norm, it may be simpler and quicker to use the text method as opposed to trying to convert it to numbers, which may lead to a mistake. It could be argued that there is not any real significant difference in the speed of either method for a user that only needs to use\nchmod\non occasion.\nYou can also use the numeric method to set the\nsetuid\n,\nsetgid\n, and\nsticky\nbits by using four digits.\nsetuid=4\nsetgid=2\nsticky=1\nFor example,\nchmod 2777\nfilename\nwill set read/write/executable bits for everyone and also enable the\nsetgid\nbit.\nBulk chmod\nGenerally directories and files should not have the same permissions. If it is necessary to bulk modify a directory tree, use\nfind\nto selectively modify one or the other.\nTo\nchmod\nonly directories to 755:\n$ find\ndirectory\n-type d -exec chmod 755 {} +\nTo\nchmod\nonly files to 644:\n$ find\ndirectory\n-type f -exec chmod 644 {} +\nChanging ownership\nchown\nchanges the owner of a file or directory, which is quicker and easier than altering the permissions in some cases.\nConsider the following example, making a new partition with\nGParted\nfor backup data. Gparted does this all as root so everything belongs to root by default. This is all well and good but when it comes to writing data to the mounted partition, permission is denied for regular users.\nbrw-rw---- 1 root disk 8,    9 Jul  6 16:02 sda9\ndrwxr-xr-x 5 root root    4096 Jul  6 16:01 Backup\nAs you can see the device in\n/dev\nis owned by root, as is the mount location (\n/media/Backup\n). To change the owner of the mount location one can do the following:\nBefore:\ndrwxr-xr-x 5 root  root 4096 Jul  6 16:01 Backup\n# chown archie /media/Backup\nAfter:\ndrwxr-xr-x 5 archie  root 4096 Jul  6 16:01 Backup\nNow the partition can have data written to it by the new owner, archie, without altering the permissions (as the owner triad already had\nrwx\npermissions).\nNote\nchown\nalways clears the setuid and setgid bits.\nNon-root users cannot use\nchown\nto \"give away\" files they own to another user.\nAccess Control Lists\nAccess Control Lists\nprovides an additional, more flexible permission mechanism for file systems by allowing to set permissions for any user or group to any file.\nUmask\nThe\numask\nutility is used to control the file-creation mode mask, which determines the initial value of file permission bits for newly created files.\nFile attributes\nApart from the file mode bits that control\nuser and group\nread, write and execute permissions, several\nfile systems\nsupport file attributes that enable further customization of allowable file operations.\nWarning\nBy default, file attributes are not preserved by\ncp\n,\nrsync\n, and other similar programs.\nThe\ne2fsprogs\npackage contains the programs\nlsattr(1)\nand\nchattr(1)\nthat list and change a file's attributes, respectively.\nThese are a few useful attributes. Not all filesystems support every attribute.\na\n- append only: File can only be opened for appending.\nc\n- compressed: Enable filesystem-level compression for the file.\ni\n- immutable: Cannot be modified, deleted, renamed, linked to. Can only be set by root.\nj\n- data journaling: Use the\njournal\nfor file data writes as well as metadata.\nm\n- no compression: Disable filesystem-level compression for the file.\nA\n- no atime update: The file's atime will not be modified.\nC\n- no copy on write: Disable copy-on-write, for filesystems that support it.\nSee\nchattr(1)\nfor a complete list of attributes and for more info on what each attribute does.\nFor example, if you want to set the immutable bit on some file, use the following command:\n# chattr +i\n/path/to/file\nTo remove an attribute on a file just change\n+\nto\n-\n.\nExtended attributes\nSee\nExtended attributes\n.\nTips and tricks\nPreserve root\nUse the\n--preserve-root\nflag to prevent\nchmod\nfrom acting recursively on\n/\n. This can, for example, prevent one from removing the executable bit systemwide and thus breaking the system. To use this flag every time, set it within an\nalias\n. See also\n[1]\n.\nSee also\nwikipedia:Chattr\nLinux File Permission Confusion\nLinux File Permission Confusion part 2\nBackup and restore file permissions in Linux\nWhy is \"chmod -R 777 /\" destructive?\nThe How and Why of User Private Groups in Unix\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=File_permissions_and_attributes&oldid=851282\n\"\nCategories\n:\nFile systems\nCommand-line\nSearch\nSearch\nFile permissions and attributes\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/File_permissions_and_attributes"}}
{"text": "Secure Shell - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nSecure Shell\n8 languages\nČeština\nEspañol\nFrançais\nMagyar\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nSSHFS\nMosh\nTailscale\nVPN over SSH\nThis article or section is a candidate for merging with\nOpenSSH\n.\nNotes:\nAmbiguation of questionable value (Discuss in\nTalk:Secure_Shell#Remove ambiguation\n)\nAccording to\nWikipedia\n:\nSecure Shell (SSH) is a cryptographic network protocol for operating network services securely over an unsecured network. Its most notable applications are remote login and command-line execution.\nExamples of services that can use SSH are\nGit\n,\nrsync\nand\nX11 forwarding\n. Services that always use SSH are\nSCP and SFTP\n.\nAn SSH server, by default, listens on the standard TCP port 22. An SSH client program is typically used for establishing connections to an\nsshd\ndaemon accepting remote connections. Both are commonly present on most modern operating systems, including macOS, GNU/Linux, Solaris and OpenVMS. Proprietary, freeware and open source versions of various levels of complexity and completeness exist.\nSoftware\nDropbear\n— Lightweight SSH server. The command-line SSH client is named\ndbclient(1)\n.\nhttps://matt.ucc.asn.au/dropbear/dropbear.html\n||\ndropbear\nOpenSSH\n— Premier connectivity tool for remote login with the SSH protocol\nhttps://www.openssh.com/portable.html\n||\nopenssh\nServer only\nTinySSH\n— A minimalistic SSH server which implements only a subset of SSHv2 features; glibc as its single dependency.\nhttps://tinyssh.org/\n||\ntinyssh\nClient only\nPuTTY\n— A terminal integrated SSH/Telnet client\nhttps://www.chiark.greenend.org.uk/~sgtatham/putty/\n||\nputty\nSecuring\nSee\nSecurity#SSH\n.\nSee also\nTerminal multiplexers\n(often used over SSH)\nWikipedia:Comparison of SSH clients\nWikipedia:Comparison of SSH servers\nSSH Key Fingerprint formats\n[\ndead link\n2025-11-17—domain name not resolved]\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Secure_Shell&oldid=853294\n\"\nCategory\n:\nSecure Shell\nHidden categories:\nPages or sections flagged with Template:Merge\nPages with dead links\nSearch\nSearch\nSecure Shell\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Secure_Shell"}}
{"text": "Security - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nSecurity\n7 languages\nDeutsch\nEspañol\nMagyar\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nArch Security Team\nGeneral recommendations\nIdentity management\nCapabilities\nList of Applications/Security\nArch package guidelines/Security\nThis article contains recommendations and best practices for\nhardening\nan Arch Linux system.\nConcepts\nIt\nis\npossible to tighten security to the point where the system is unusable. Security and convenience must be balanced. The trick is to create a secure\nand\nuseful system.\nThe biggest threat is, and will always be, the user.\nThe\nprinciple of least privilege\n: Each part of a system should only be able to access what is strictly required, and nothing more.\nDefense in depth: Security works better in independent layers. When one layer is breached, another should stop the attack.\nBe a little paranoid. And be suspicious. If anything sounds too good to be true, it probably is!\nYou can never make a system 100% secure unless you unplug the machine from all networks, turn it off, lock it in a safe, smother it in concrete and never use it.\nPrepare for failure. Create a plan ahead of time to follow when your security is broken.\nPasswords\nPasswords are key to a secure system. They secure your\nuser accounts\n,\nencrypted filesystems\n, and\nSSH\n/\nGPG\nkeys. They are the main way a computer chooses to trust the person using it, so a big part of security is just about picking secure passwords and protecting them.\nChoosing secure passwords\nPasswords must be complex enough to not be easily guessed from e.g. personal information, or\ncracked\nusing methods like social engineering or brute-force attacks. The tenets of strong passwords are based on\nlength\nand\nrandomness\n. In cryptography the quality of a password is often referred to as its\nentropy\n.\nInsecure passwords include those containing or those using as a base before substitution/variation:\nPersonally identifiable information (e.g., your dog's name, date of birth, area code, favorite video game)\nSimple character substitutions on words (e.g.,\nk1araj0hns0n\n), as modern dictionary attacks can easily work with these\nRoot \"words\" or common strings followed or preceded by added numbers, symbols, or characters (e.g.,\nDG091101%\n)\nCommon phrases or short strings of common dictionary words (e.g.\nphotocopyhauntbranchexpose\n) including with character substitution (e.g.\nPh0toc0pyh4uN7br@nch3xp*se\n) (See Diceware below for when a combination of dictionary words can be secure)\nAny of the\nmost common passwords\nThe best choice for a password is something long (the longer, the better) and generated from a random source. It is important to use a long password.\nWeak hash algorithms allow an 8-character password hash to be compromised in just a few hours.\nTools like\npwgen\nor\napg\nAUR\ncan generate random passwords. However, these passwords can be difficult to memorize. One memorization technique (for ones often typed) is to generate a long password and memorize a minimally secure number of characters, temporarily writing down the full generated string. Over time, increase the number of characters typed - until the password is ingrained in muscle memory and need not be remembered. This technique is more difficult, but can provide confidence that a password will not turn up in wordlists or \"intelligent\" brute force attacks that combine words and substitute characters.\nApart from password management,\nkeepassxc\noffers password/passphrase generation. It is possible to customize the generation in a GUI. Dictionary based passphrases are also supported.\nOne technique for memorizing a password is to use a mnemonic phrase, where each word in the phrase reminds you of the next character in the password.\nTake for instance “the girl is walking down the rainy street” could be translated to\nt6!WdtR5\nor, less simply,\nt&6!RrlW@dtR,57\n.\nThis approach could make it easier to remember a password, but note that the various letters have very different probabilities of being found at the start of words (\nWikipedia:Letter frequency\n).\nAnother effective technique can be to write randomly generated passwords down and store them in a\nsafe\nplace, such as in a wallet, purse, or document safe. Most people do a generally good job of protecting their physical valuables from attack, and it is easier for most people to understand physical security best practices compared to digital security practices.\nIt is also very effective to combine the mnemonic and random technique by saving long randomly generated passwords with a\npassword manager\n, which will be in turn accessed with a memorable \"master password\"/primary password that must be used only for that purpose. The master password must be memorized and never saved. This requires the password manager to be installed on a system to easily access the password (which could be seen as an inconvenience or a security feature, depending on the situation). Some password managers also have smartphone apps which can be used to display passwords for manual entry on systems without that password manager installed (if that is a common use case, you could still use easily typeable but secure passwords for each service instead of completely random ones, see below). Note that a password manager introduces a single point of failure if you ever forget the master password.\nSome password managers compute the contained passwords based on the master password and the service name where you want to log in instead of encrypting them, making it possible to use it on a new system without syncing any data.\nIt can be effective to use a memorable long series of unrelated words as a password. The theory is that if a sufficiently long phrase is used, the gained entropy from the password's length can counter the lost entropy from the use of dictionary words. This\nxkcd comic\ndemonstrates the entropy tradeoff of this method, taking into account the limited set of possible words for each word in the passphrase. If the set of words you choose from is large (multiple thousand words) and you choose 5-7 or even more random words from it, this method provides great entropy, even assuming the attacker knows the set of possible words chosen from and the number of words chosen. The number of possible passphrases after settling on a set of words and number of words is: (number of words in the set of words to select from) to the power of (the number of words chosen for the passphrase). See e.g.\nDiceware\nfor more.\nSee\nThe passphrase FAQ\nor\nWikipedia:Password strength\nfor some additional background.\nMaintaining passwords\nOnce you pick a strong password, be sure to keep it safe. Watch out for\nkeyloggers\n(software and hardware), screen loggers,\nsocial engineering\n,\nshoulder surfing\n, and avoid reusing passwords so insecure servers cannot leak more information than necessary.\nPassword managers\ncan help manage large numbers of complex passwords: if you are copy-pasting the stored passwords from the manager to the applications that need them, make sure to clear the copy buffer every time, and ensure they are not saved in any kind of log (e.g. do not paste them in plain terminal commands, which would store them in files like\n.bash_history\n). Note that password managers that are implemented as browser extensions may be vulnerable to\nside channel attacks\n. These can be mitigated by using password managers that run as separate applications.\nAs a rule, do not pick insecure passwords just because secure ones are harder to remember. Passwords are a balancing act. It is better to have an encrypted database of secure passwords, guarded behind a key and one strong master password, than it is to have many similar weak passwords. Writing passwords down is perhaps equally effective\n[1]\n, avoiding potential vulnerabilities in software solutions while requiring physical security.\nAnother aspect of the strength of the passphrase is that it must not be easily recoverable from other places.\nIf you use the same passphrase for disk encryption as you use for your login password (useful e.g. to auto-mount the encrypted partition or folder on login), make sure that\n/etc/shadow\nends up on an encrypted partition or/and uses a strong key derivation function (i.e. yescrypt/argon2 or sha512 with PBKDF2, but not md5 or low iterations in PBKDF2) for the stored password hash (see\nSHA password hashes\nfor more information).\nTip\nArch Linux switched the\ndefault hashing\nalgorithm to yescrypt. If you have not customized the default, executing a password change with\npasswd\nis necessary (and sufficient) to apply the new default.\nIf you are backing up your password database, make sure that each copy is not stored behind any other passphrase which in turn is stored in it, e.g. an encrypted drive or an authenticated remote storage service, or you will not be able to access it in case of need; a useful trick is to protect the drives or accounts where the database is backed up using a simple cryptographic hash of the master password. Maintain a list of all the backup locations: if one day you fear that the master passphrase has been compromised you will have to change it immediately on all the database backups and the locations protected with keys derived from the master password.\nVersion-controlling the database in a secure way can be very complicated: if you choose to do it, you must have a way to update the master password of all the database versions. It may not always be immediately clear when the master password is leaked: to reduce the risk of somebody else discovering your password before you realize that it leaked, you may choose to change it on a periodical basis. If you fear that you have lost control over a copy of the database, you will need to change all the passwords contained in it within the time that it may take to brute-force the master password, according to its entropy.\nPassword hashes\nA hash is a one-way function, i.e. it is designed to make it impossible to deduct the input without computing the hash function with it (example: MD5, SHA).\nA password-hash function is designed to make deducting a user-input (password) impossible without computing the hash function with it (example: bcrypt). A\nkey derivation function\n(KDF; examples: yescrypt, scrypt, PBKDF2) is a cryptographic algorithm designed to derive secret keys (e.g. an AES key, a password hash) from an input (a master key, a password). Hence, a KDF can serve multiple applications, including those of a password-hash function.\nBy default, Arch stores the hashed user passwords in the root-only-readable\n/etc/shadow\nfile, separated from the other user parameters stored in the world-readable\n/etc/passwd\nfile, see\nUsers and groups#User database\n. See also\n#Restricting root\n.\nPasswords are set with the\npasswd\ncommand, which\nstretches\nthem with the system's crypt function and then saves them in\n/etc/shadow\n. The passwords are also\nsalted\nin order to defend them against\nrainbow table\nattacks. See also\nHow are passwords stored in Linux (Understanding hashing with shadow utils)\n.\nSince password hashes follow a defined format, the method and parameter can be configured for subsequent new invocations of the\npasswd\ncommand. Hence, the individual hashes stored in the\n/etc/shadow\nfile can be a heterogeneous mix of the hash functions supported by the system.\nSee\ncrypt(5)\nfor more information on the format, hashing methods and parameters.\nThe\n/etc/login.defs\nfile configures the\ndefault password hashing\nmethod\nENCRYPT_METHOD YESCRYPT\nand its parameter\nYESCRYPT_COST_FACTOR\n.\nFor example, an increment of the default\nYESCRYPT_COST_FACTOR\nparameter will lead to a logarithmic increase of the compute time required to deduce the hash from a password. This applies, likewise, to a third-party trying to obtain the password secret, and the system to authenticate a user log-in.\nIn contrast, the compute time for the SHA-512 hash function is configured by a parameter with a linear influence. See\nSHA password hashes\nfor information on the previous Arch default. Note the yescrypt algorithm internally uses SHA-256, HMAC and PBKDF2 to compute its password-hash. The main reason is to combine positive attributes of these widely used and tested functions for an enhanced resistance to attacks. For example, the usability of SHA for various purposes has resulted in hardware support for the function, i.e. the performance to compute a pure SHA hash has accelerated considerably, making its application as a password-hash function more and more derelict.\nEnforcing strong passwords with pam_pwquality\npam_pwquality\nprovides protection against\nDictionary attacks\nand helps configure a password policy that can be enforced throughout the system. It is based on\npam_cracklib\n, so it is backwards compatible with its options.\nInstall\nthe\nlibpwquality\npackage.\nWarning\nThe\nroot\naccount is not affected by this policy by default.\nNote\nYou can use the\nroot\naccount to set a password for a user that bypasses the desired/configured policy. This is useful when setting temporary passwords.\nCurrent security guidelines around passwords, e.g. from NIST, but also from others, do not recommend enforcing special characters, since they often only lead to predictable alterations.\nIf for example you want to enforce this policy:\nprompt 2 times for password in case of an error (retry option)\n10 characters minimum length (minlen option)\nat least 6 characters should be different from old password when entering a new one (difok option)\nat least 1 digit (dcredit option)\nat least 1 uppercase (ucredit option)\nat least 1 lowercase (lcredit option)\nat least 1 other character (ocredit option)\ncannot contain the words \"myservice\" and \"mydomain\"\nenforce the policy for root\nEdit the\n/etc/pam.d/passwd\nfile to read as:\n#%PAM-1.0\npassword required pam_pwquality.so retry=2 minlen=10 difok=6 dcredit=-1 ucredit=-1 ocredit=-1 lcredit=-1 [badwords=myservice mydomain] enforce_for_root\npassword required pam_unix.so use_authtok sha512 shadow\nThe\npassword required pam_unix.so use_authtok\ninstructs the\npam_unix\nmodule to not prompt for a password but rather to use the one provided by\npam_pwquality\n.\nYou can refer to the\npam_pwquality(8)\nand\npam_unix(8)\nman pages for more information.\nCPU\nMicrocode\nSee\nmicrocode\nfor information on how to install important security updates for your CPU's microcode.\nHardware vulnerabilities\nSome CPUs contain hardware vulnerabilities. See the\nkernel documentation on hardware vulnerabilities\nfor a list of these vulnerabilities, as well as mitigation selection guides to help customize the kernel to mitigate these vulnerabilities for specific usage scenarios.\nTo check if you are affected by a known vulnerability, run the following:\n$ grep -r . /sys/devices/system/cpu/vulnerabilities/\nIn most cases, updating the kernel and microcode will mitigate vulnerabilities.\nSimultaneous multithreading (hyper-threading)\nSimultaneous multithreading\n(SMT), also called hyper-threading on Intel CPUs, is a hardware feature that may be a source of\nL1 Terminal Fault\nand\nMicroarchitectural Data Sampling\nvulnerabilities. The Linux kernel and microcode updates contain mitigations for known vulnerabilities, but\ndisabling SMT may still be required on certain CPUs if untrusted virtualization guests are present\n.\nNote\nDisabling SMT is something mostly hypervisors benefit from.\n[2]\nOn an ordinary system it has very little to no security benefits.\nSMT can often be disabled in your system's firmware. Consult your motherboard or system documentation for more information. You can also disable SMT in the kernel by adding the following\nkernel parameter\n:\nmitigations=auto,nosmt\nMemory\nHardened malloc\nhardened_malloc\nAUR\nis a hardened replacement for\nglibc\n's malloc(). The project was originally developed for integration into Android's\nBionic\nand\nmusl\nby Daniel Micay, of\nGrapheneOS\n, but he has also built in support for standard Linux distributions on the x86_64 architecture.\nWhile hardened_malloc is not yet integrated into glibc (assistance and pull requests welcome) it can be used easily with LD_PRELOAD. In testing so far, it only causes issues with a handful of applications if enabled globally in\n/etc/ld.so.preload\n. Since hardened_malloc has a performance cost, you may want to decide which implementation to use on a case-by-case basis based on attack surface and performance needs.\nThe factual accuracy of this article or section is disputed.\nReason:\nFirefox may require a rebuild for use with hardened-malloc to be effective (Discuss in\nTalk:Security#Use of hardened-malloc with Firefox\n)\nTo try it out in a standalone manner, use the hardened-malloc-preload wrapper script, or manually start an application with the proper preload value:\nLD_PRELOAD=\"/usr/lib/libhardened_malloc.so\" /usr/bin/firefox\nProper usage with\nFirejail\ncan be found on its wiki page, and some configurable build options for hardened_malloc can be found on the github repo.\nStorage\nData-at-rest encryption\nData-at-rest encryption\n, preferably full-disk encryption with a\nstrong passphrase\n, is the only way to guard data against physical recovery. This provides data confidentiality when the computer is turned off or the disks in question are unmounted.\nOnce the computer is powered on and the drive is mounted, however, its data becomes just as vulnerable as an unencrypted drive. It is therefore best practice to unmount data partitions as soon as they are no longer needed.\nYou may also\nencrypt a drive with the key stored in a TPM\n, although it has had\nvulnerabilites in the past\nand the key can be extracted by a\nbus sniffing attack\n.\nCertain programs, like\ndm-crypt\n, allow the user to encrypt a loop file as a virtual volume. This is a reasonable alternative to full-disk encryption when only certain parts of the system need to be secure.\nWhile the block-device or filesystem-based encryption types compared in the\ndata-at-rest encryption\narticle are useful at protecting data on physical media, most can not be used to protect data on a remote system that you can not control (such as\ncloud storage\n). In some cases, individual file encryption will be useful.\nThese are some methods to encrypt files:\nSome\narchiving and compressing\ntools also provide basic encryption. Some examples are\n7-Zip\n(\n-p\nflag),\nzip\n(\n-e\nflag). The encryption should only be relied on particular care, because the tools may use custom algorithms for cross-platform compatibility.\n[3]\nGnuPG\ncan be used to\nencrypt files\n.\nage\nis a simple and easy to use file encryption tool. It also supports multiple recipients and encryption using SSH keys, which is useful for secure file sharing.\nFile systems\nThe kernel now prevents security issues related to hardlinks and symlinks if the\nfs.protected_hardlinks\nand\nfs.protected_symlinks\nsysctl switches are enabled, so there is no longer a major security benefit from separating out world-writable directories.\nFile systems containing world-writable directories can still be kept separate as a coarse way of limiting the damage from disk space exhaustion. However, filling\n/var\nor\n/tmp\nis enough to take down services. More flexible mechanisms for dealing with this concern exist (like\nquotas\n), and some\nfile systems\ninclude related features themselves (Btrfs has quotas on subvolumes).\nMount options\nFollowing the principle of least privilege, file systems should be mounted with the most restrictive mount options possible (without losing functionality).\nRelevant mount options are:\nnodev\n: Do not interpret character or block special devices on the file system.\nnosuid\n: Do not allow set-user-identifier or set-group-identifier bits to take effect.\nnoexec\n: Do not allow direct execution of any binaries on the mounted file system.\nSetting\nnoexec\non\n/home\ndisallows executable scripts and breaks\nWine\n,\nSteam\n, PyCharm,\n.NET\n, etc.\nWine does not need the\nexec\nflag for opening Windows binaries. It is only needed when Wine itself is installed in\n/home\n.\nTo keep\nSteam\nworking you can mount\n/home/user/.local/share/Steam\nas\nexec\nin\nfstab\nby adding the following:\n/home/user/.local/share/Steam  /home/user/.local/share/Steam  none defaults,bind,user,exec,nofail  0  0\nSome packages (building\nnvidia-dkms\nfor example) may require\nexec\non\n/var\n.\nFile systems used for data should always be mounted with\nnodev\n,\nnosuid\nand\nnoexec\n.\nPotential file system mounts to consider:\n/var\n/home\n/dev/shm\n/tmp\n/boot\nTip\nWhen using\nGPT partition automounting\n, the ESP and XBOOTLDR partitions are\nalways hardened\nwith\nnoexec,nosuid,nodev\n.\nSnapshots\nWhen utilizing file system snapshots, e.g. with\nBtrfs\n,\nLVM\n, or\nZFS\n, it is essential to be aware that snapshots may retain sensitive information that users expect to be deleted. This is especially true when automatic snapshotting tools like\nSnapper\nare configured, as they can capture snapshots at regular intervals or in response to system events. Here are some examples of how sensitive information in\n/home/\ncan persist within snapshots:\nDeleted files and directories\n: Even though files or directories are deleted from the file system, they may still exist within older snapshots. This is expected most of the time, but consider whether files and directories such as\n.local/share/Trash/\n,\n.history\n, etc. should be retained.\nTemporary files and cache\n: Temporary files and cached data generated by applications may be included in snapshots. For example, files kept in encrypted directories might generate thumbnails (\n.cache/thumbnails\n) or work copies when opened, which might in turn be included in snapshots. The same applies e.g. to browsing history (\n.mozilla/\n,\n.config/chromium/\n, etc.), which could have been included in a snapshot before being purged.\nIf this is supported, consider excluding such directories from snapshots altogether. For example, if using\nBtrfs\n, you can create subvolumes for example\n.cache/\n,\n.config/\n,\n.local/\n,\n.var/\nor any other directory according to your use-case.\nNote\nMoving\n.local/share/Trash\nto a separate subvolume might break the trash feature in some cases, e.g. with\nGNOME/Files\n.\nFile access permissions\nThe factual accuracy of this article or section is disputed.\nReason:\nchmod go-r\ndoes not \"take away all permissions\", it only removes the read permission. (Discuss in\nTalk:Security\n)\nThe default\nfile permissions\nallow read access to almost everything and changing the permissions can hide valuable information from an attacker who gains access to a non-root account such as the\nhttp\nor\nnobody\nusers. You can use\nchmod\nto take away all permissions from the group and others:\n# chmod go-r\npath_to_hide\nWarning\nDo not apply this broadly. Try this for one config at a time, ensuring that it is worth hiding, and that it will not break program functionality. You may need to remove the\ng\nfrom the command (or re-add the permission with\nchmod g+r\npath\nif already ran) if the group is relied on.\nSome paths to consider are:\n/boot\n: The\nboot directory\n, which may include traditional\nvmlinuz\nand\ninitramfs\nimages, or a\nUnified kernel image\n. Note that safe permissions are used by default when using\nsystemd#GPT partition automounting\n.\n/etc/nftables.conf\n: The\nnftables\nconfiguration, applicable to\nnftables\nand\niptables-nft\n.\n/etc/iptables\n: The legacy\niptables\nconfiguration, applicable to\niptables\n.\nThe default\numask\n0022\ncan be changed to improve security for newly created files. The\nNSA RHEL5 Security Guide\nsuggests a umask of\n0077\nfor maximum security, which makes new files not readable by users other than the owner. To change this, see\nUmask#Set the mask value\n. If you use\nsudo\n, consider configuring it to use the\ndefault root umask\n.\nSUID and SGID files\nIt is important to be aware of any files with the\nSetuid\nor Setgid bit. Examples of relevant files with the SUID bit set:\nunix_chkpwd\nchage, expiry, gpasswd, groupmems,\npasswd\n, sg (\nshadow\n)\nfusermount3\n, fusermount2\npkexec, polkit-agent-helper-1\n[4]\n(\npolkit\n)\nssh-keysign\nchfn, chsh, mount, newgrp, umount, wall, write (\nutil-linux\n)\nsudo\n,\nsudo-rs\n,\ndoas\n,\nsu\n, su-rs,\nksu\nfirejail\ndbus-daemon-launch-helper\nchromium-sandbox\nXorg.wrap\nThe prominent risks of such executable files include privilege escalation vulnerabilities, see e.g\nWikipedia:Setuid#Security impact\n.\n[5]\n[6]\n[7]\nFiles with the SUID bit set and not owned by root, or files with the SGID bit set\ntypically\nhave less potential impact but can theoretically still do decent damage if vulnerable. It is usually possible to avoid using SUID or SGID by assigning\nCapabilities\ninstead.\nTip\nIt is vital to be vigilant in keeping packages which provide SUID/SGID executables up to date in order to prevent having a vulnerable system.\nTo search for files with either the SUID or SGID bit:\n$ find / -perm \"/u=s,g=s\" -type f 2>/dev/null\nBackups\nThis article or section is a candidate for merging with\nSystem backup\n.\nNotes:\nThere is a dedicated page for system backups. (Discuss in\nTalk:Security\n)\nRegularly create backups of important data. Regularly test the integrity of the backups. Regularly test that the backups can be restored.\nMake sure that at least one copy of the data is stored offline, i.e. not connected to the system under threat in any way.\nRansomware\nand other destructive attacks may also attack any connected backup systems.\nSATA SSD frozen mode\nSee\nSolid state drive#Setting the SATA SSD state to frozen mode after waking up from sleep\n.\nUser setup\nDo not use the root account for daily use\nFollowing the principle of least privilege, do not use the root user for daily use. Create a non-privileged user account for each person using the system. See\nList of applications/Security#Privilege elevation\nfor ways of temporarily gaining privileged access.\nEnforce a delay after a failed login attempt\nAdd the following line to\n/etc/pam.d/system-login\nto add a delay of at least 4 seconds between failed login attempts:\n/etc/pam.d/system-login\nauth optional pam_faildelay.so delay=4000000\n4000000\nis the time in microseconds to delay.\nNote\nOther PAM modules besides\npam_faildelay\ncan also suggest such a delay; if multiple modules do so, PAM will use the longest one.\nIn particular, both\npam_unix\nand\npam_faillock\nset a minimum delay of 2 seconds by default.\nIn order to completely remove this delay, you need to add the\nnodelay\nparameter to any\nauth\nlines of these modules, e.g.\n/etc/pam.d/system-auth\nauth       [success=1 default=bad]     pam_unix.so          try_first_pass nullok nodelay\nLock out user after three failed login attempts\nSince\npambase\n20200721.1-2,\npam_faillock.so\nis enabled by default to lock out users for 10 minutes after 3 failed login attempts in a 15 minute period (see\nFS#67644\n). The lockout only applies to password authentication (e.g. login and\nsudo\n), public key authentication over SSH is still accepted. To prevent complete denial-of-service, this lockout is disabled for the root user by default.\nTo unlock a user, do:\n$ faillock --user\nusername\n--reset\nBy default, the lock mechanism is a file per-user located at\n/run/faillock/\n. Deleting or emptying the file unlocks that user—the directory is owned by root, but the file is owned by the user, so the\nfaillock\ncommand only empties the file, therefore does not require root.\nThe module\npam_faillock.so\ncan be configured with the file\n/etc/security/faillock.conf\n. The lockout parameters:\nunlock_time\n— the lockout time (in seconds, default 10 minutes).\nfail_interval\n— the time in which failed logins can cause a lockout (in seconds, default 15 minutes).\ndeny\n— the number of failed logins before lockout (default 3).\nTip\nThe primary purpose for the lockout is to slow down brute-force attacks so that they become infeasible. Hence, if lockouts due to mistyping of passwords become too frequent, relaxing the number of attempts may be preferred to reducing the lockout time.\nNote\ndeny = 0\nwill disable the lockout mechanism entirely.\nBy default, all user locks are lost after reboot. If your attacker can reboot the machine, it is more secure if locks persist. To make locks persist, change the\ndir\nparameter in\n/etc/security/faillock.conf\nto\n/var/lib/faillock\n.\nNo restart is required for changes to take effect. See\nfaillock.conf(5)\nfor further configuration options, such as enabling lockout for the root account, disabling for centralized login (e.g. LDAP), etc.\nLimit amount of processes\nOn systems with many, or untrusted users, it is important to limit the number of processes each can run at once, therefore preventing\nfork bombs\nand other denial of service attacks. The\n/etc/security/limits.conf\nconfiguration determines how many processes each user, or group can have open, and is empty (except for useful comments) by default. Adding the following lines to this file will limit all users to 100 active processes, unless they use the\nprlimit\ncommand to explicitly raise their maximum to 200 for that session. These values can be changed according to the appropriate number of processes a user should have running, or the hardware of the box you are administrating.\n* soft nproc 100\n* hard nproc 200\nThe current number of threads for each user can be found with\nps --no-headers -Leo user | sort | uniq --count\n. This may help with determining appropriate values for the users' limits; see also\nlimits.conf\n.\nUse Wayland\nPrefer using\nWayland\nover\nXorg\n. Xorg's design predates modern security practices and is\nconsidered insecure\nby many. For example, Xorg applications may record keystrokes while inactive.\nIf you must run Xorg, it is recommended to\navoid running it as root\n. Within Wayland, the Xwayland compatibility layer will automatically use rootless Xorg.\nRestricting root\nThe root user is, by definition, the most powerful user on a system. It is also difficult to\naudit\nthe root user account. It is therefore important to restrict usage of the root user account as much as possible. There are a number of ways to keep the power of the root user while limiting its ability to cause harm.\nUse sudo instead of su\nThis article or section is a candidate for merging with\nsudo\n.\nNotes:\nThere is a dedicated article. (Discuss in\nTalk:Security\n)\nUsing\nsudo\nfor privileged access is preferable to\nsu\nfor a number of reasons.\nIt keeps a log of which normal privilege user has run each privileged command.\nThe root user password need not be given out to each user who requires root access.\nsudo\nprevents users from accidentally running commands as\nroot\nthat do not need root access, because a full root terminal is not created. This aligns with the\nprinciple of least privilege\n.\nIndividual programs may be enabled per user, instead of offering complete root access just to run one command. For example, to give the user\narchie\naccess to a particular program:\n# visudo\n/etc/sudoers\narchie ALL = NOPASSWD: /path/to/program\nOr, individual commands can be allowed for all users. To mount Samba shares from a server as a regular user:\n%users ALL=/sbin/mount.cifs,/sbin/umount.cifs\nThis allows all users who are members of the group users to run the commands\n/sbin/mount.cifs\nand\n/sbin/umount.cifs\nfrom any machine (ALL).\nTip\nTo use restricted version of\nnano\ninstead of\nvi\nwith\nvisudo\n,\n/etc/sudoers\nDefaults editor=/usr/bin/rnano\nExporting\nEDITOR=nano visudo\nis regarded as a severe security risk since everything can be used as an\nEDITOR\n.\nEditing files using sudo\nSee\nSudo#Editing files\n. Alternatively, you can use an editor like\nrvim\nor\nrnano\nwhich has restricted capabilities in order to be safe to run as root.\nRestricting root login\nOnce\nsudo\nis properly configured, full root access can be heavily restricted or denied without losing much usability. To disable root, but still allowing to use\nsudo\n, you can use\npasswd(1)\nwith\npasswd --lock root\n.\nAllow only certain users\nThe\nPAM\npam_wheel.so\nlets you allow only users in the group\nwheel\nto login using\nsu\n. See\nsu#su and wheel\n.\nDenying SSH login\nEven if you do not wish to deny root login for local users, it is always good practice to\ndeny root login via SSH\n. The purpose of this is to add an additional layer of security before a user can completely compromise your system remotely.\nSpecify acceptable login combinations with access.conf\nWarning\nIf you are using GNOME 49 or later, you should make sure the group\ngdm\ncan log in locally. This can be done with a\n+:(gdm):LOCAL\nrule.\n[8]\nWhen someone attempts to log in with\nPAM\n,\n/etc/security/access.conf\nis checked for the first combination that matches their login properties. Their attempt then fails or succeeds based on the rule for that combination.\n+:root:LOCAL\n-:root:ALL\nRules can be set for specific groups and users. In this example, the user archie is allowed to login locally, as are all users in the wheel and adm groups. All other logins are rejected:\n+:archie:LOCAL\n+:(wheel):LOCAL\n+:(adm):LOCAL\n-:ALL:ALL\nRead more at\naccess.conf(5)\nMandatory access control\nMandatory access control\n(MAC) is a type of security policy that differs significantly from the\ndiscretionary access control\n(DAC) used by default in Arch and most Linux distributions. MAC essentially means that every action a program could perform that affects the system in any way is checked against a security ruleset. This ruleset, in contrast to DAC methods, cannot be modified by users. Using virtually any mandatory access control system will significantly improve the security of your computer, although there are differences in how it can be implemented.\nPathname MAC\nPathname-based access control is a simple form of access control that offers permissions based on the path of a given file. The downside to this style of access control is that permissions are not carried with files if they are moved around the system. On the positive side, pathname-based MAC can be implemented on a much wider range of filesystems, unlike labels-based alternatives.\nAppArmor\nis a\nCanonical\n-maintained MAC implementation seen as an \"easier\" alternative to SELinux.\nTOMOYO\nis another simple, easy-to-use system offering mandatory access control. It is designed to be both simple in usage and in implementation, requiring very few dependencies.\nLabels MAC\nLabels-based access control means the extended attributes of a file are used to govern its security permissions. While this system is arguably more flexible in its security offerings than pathname-based MAC, it only works on filesystems that support these extended attributes.\nSELinux\n, based on an\nNSA\nproject to improve Linux security, implements MAC completely separate from system users and roles. It offers an extremely robust multi-level MAC policy implementation that can easily maintain control of a system that grows and changes past its original configuration.\nAccess Control Lists\nAccess Control Lists\n(ACLs) are an alternative to attaching rules directly to the filesystem in some way. ACLs implement access control by checking program actions against a list of permitted behavior.\nKernel hardening\nKernel self-protection / exploit mitigation\nThe\nlinux-hardened\npackage uses a\nbasic kernel hardening patch set\nand more security-focused compile-time configuration options than the\nlinux\npackage. A custom build can be made to choose a different compromise between security and performance than the security-leaning defaults.\nHowever, it should be noted that several packages will not work when using this kernel. For example\nthrottled\n.\nIf you use an out-of-tree driver such as\nNVIDIA\n, you may need to switch to its\nDKMS\npackage.\nUserspace ASLR comparison\nThe\nlinux-hardened\npackage provides an improved implementation of Address Space Layout Randomization for userspace processes. The\npaxtest\ncommand can be used to obtain an estimate of the provided entropy:\n64-bit processes\nlinux-hardened 5.4.21.a-1-hardened\nAnonymous mapping randomization test     : 32 quality bits (guessed)\nHeap randomization test (ET_EXEC)        : 40 quality bits (guessed)\nHeap randomization test (PIE)            : 40 quality bits (guessed)\nMain executable randomization (ET_EXEC)  : 32 quality bits (guessed)\nMain executable randomization (PIE)      : 32 quality bits (guessed)\nShared library randomization test        : 32 quality bits (guessed)\nVDSO randomization test                  : 32 quality bits (guessed)\nStack randomization test (SEGMEXEC)      : 40 quality bits (guessed)\nStack randomization test (PAGEEXEC)      : 40 quality bits (guessed)\nArg/env randomization test (SEGMEXEC)    : 44 quality bits (guessed)\nArg/env randomization test (PAGEEXEC)    : 44 quality bits (guessed)\nOffset to library randomisation (ET_EXEC): 34 quality bits (guessed)\nOffset to library randomisation (ET_DYN) : 34 quality bits (guessed)\nRandomization under memory exhaustion @~0: 32 bits (guessed)\nRandomization under memory exhaustion @0 : 32 bits (guessed)\nlinux 5.5.5-arch1-1\nAnonymous mapping randomization test     : 28 quality bits (guessed)\nHeap randomization test (ET_EXEC)        : 28 quality bits (guessed)\nHeap randomization test (PIE)            : 28 quality bits (guessed)\nMain executable randomization (ET_EXEC)  : 28 quality bits (guessed)\nMain executable randomization (PIE)      : 28 quality bits (guessed)\nShared library randomization test        : 28 quality bits (guessed)\nVDSO randomization test                  : 20 quality bits (guessed)\nStack randomization test (SEGMEXEC)      : 30 quality bits (guessed)\nStack randomization test (PAGEEXEC)      : 30 quality bits (guessed)\nArg/env randomization test (SEGMEXEC)    : 22 quality bits (guessed)\nArg/env randomization test (PAGEEXEC)    : 22 quality bits (guessed)\nOffset to library randomisation (ET_EXEC): 28 quality bits (guessed)\nOffset to library randomisation (ET_DYN) : 28 quality bits (guessed)\nRandomization under memory exhaustion @~0: 29 bits (guessed)\nRandomization under memory exhaustion @0 : 29 bits (guessed)\nlinux-lts 4.19.101-1-lts\nAnonymous mapping randomization test     : 28 quality bits (guessed)\nHeap randomization test (ET_EXEC)        : 28 quality bits (guessed)\nHeap randomization test (PIE)            : 28 quality bits (guessed)\nMain executable randomization (ET_EXEC)  : 28 quality bits (guessed)\nMain executable randomization (PIE)      : 28 quality bits (guessed)\nShared library randomization test        : 28 quality bits (guessed)\nVDSO randomization test                  : 19 quality bits (guessed)\nStack randomization test (SEGMEXEC)      : 30 quality bits (guessed)\nStack randomization test (PAGEEXEC)      : 30 quality bits (guessed)\nArg/env randomization test (SEGMEXEC)    : 22 quality bits (guessed)\nArg/env randomization test (PAGEEXEC)    : 22 quality bits (guessed)\nOffset to library randomisation (ET_EXEC): 28 quality bits (guessed)\nOffset to library randomisation (ET_DYN) : 28 quality bits (guessed)\nRandomization under memory exhaustion @~0: 28 bits (guessed)\nRandomization under memory exhaustion @0 : 28 bits (guessed)\n32-bit processes (on an x86_64 kernel)\nlinux-hardened\nAnonymous mapping randomization test     : 16 quality bits (guessed)\nHeap randomization test (ET_EXEC)        : 22 quality bits (guessed)\nHeap randomization test (PIE)            : 27 quality bits (guessed)\nMain executable randomization (ET_EXEC)  : No randomization\nMain executable randomization (PIE)      : 18 quality bits (guessed)\nShared library randomization test        : 16 quality bits (guessed)\nVDSO randomization test                  : 16 quality bits (guessed)\nStack randomization test (SEGMEXEC)      : 24 quality bits (guessed)\nStack randomization test (PAGEEXEC)      : 24 quality bits (guessed)\nArg/env randomization test (SEGMEXEC)    : 28 quality bits (guessed)\nArg/env randomization test (PAGEEXEC)    : 28 quality bits (guessed)\nOffset to library randomisation (ET_EXEC): 18 quality bits (guessed)\nOffset to library randomisation (ET_DYN) : 16 quality bits (guessed)\nRandomization under memory exhaustion @~0: 18 bits (guessed)\nRandomization under memory exhaustion @0 : 18 bits (guessed)\nlinux\nAnonymous mapping randomization test     : 8 quality bits (guessed)\nHeap randomization test (ET_EXEC)        : 13 quality bits (guessed)\nHeap randomization test (PIE)            : 13 quality bits (guessed)\nMain executable randomization (ET_EXEC)  : No randomization\nMain executable randomization (PIE)      : 8 quality bits (guessed)\nShared library randomization test        : 8 quality bits (guessed)\nVDSO randomization test                  : 8 quality bits (guessed)\nStack randomization test (SEGMEXEC)      : 19 quality bits (guessed)\nStack randomization test (PAGEEXEC)      : 19 quality bits (guessed)\nArg/env randomization test (SEGMEXEC)    : 11 quality bits (guessed)\nArg/env randomization test (PAGEEXEC)    : 11 quality bits (guessed)\nOffset to library randomisation (ET_EXEC): 8 quality bits (guessed)\nOffset to library randomisation (ET_DYN) : 13 quality bits (guessed)\nRandomization under memory exhaustion @~0: No randomization\nRandomization under memory exhaustion @0 : No randomization\nRestricting access to kernel pointers in the proc filesystem\nSetting\nkernel.kptr_restrict\nto 1 will hide kernel symbol addresses in\n/proc/kallsyms\nfrom regular users without\nCAP_SYSLOG\n, making it more difficult for kernel exploits to resolve addresses/symbols dynamically. This will not help that much on a pre-compiled Arch Linux kernel, since a determined attacker could just download the kernel package and get the symbols manually from there, but if you are compiling your own kernel, this can help mitigating local root exploits. This will break some\nperf\ncommands when used by non-root users (but many\nperf\nfeatures require root access anyway). See\nFS#34323\nfor more information.\nSetting\nkernel.kptr_restrict\nto 2 will hide kernel symbol addresses in\n/proc/kallsyms\nregardless of privileges.\n/etc/sysctl.d/51-kptr-restrict.conf\nkernel.kptr_restrict = 1\nNote\nlinux-hardened\nsets\nkptr_restrict=2\nby default rather than\n0\n.\nBPF hardening\nBPF is a system used to load and execute bytecode within the kernel dynamically during runtime. It is used in a number of Linux kernel subsystems such as networking (e.g. XDP, tc), tracing (e.g. kprobes, uprobes, tracepoints) and security (e.g. seccomp). It is also useful for advanced network security, performance profiling and dynamic tracing.\nBPF was originally an acronym of\nBerkeley Packet Filter\nsince the original classic BPF was used for packet capture tools for BSD. This eventually evolved into Extended BPF (eBPF), which was shortly afterwards renamed to just BPF (not an acronym). BPF should not be confused with packet filtering tools like iptables or netfilter, although BPF can be used to implement packet filtering tools.\nBPF code may be either interpreted or compiled using a\nJust-In-Time (JIT) compiler\n. The Arch kernel is built with\nCONFIG_BPF_JIT_ALWAYS_ON\nwhich disables the BPF interpreter and forces all BPF to use JIT compilation. This makes it harder for an attacker to use BPF to escalate attacks that exploit SPECTRE-style vulnerabilities. See\nthe kernel patch which introduced CONFIG_BPF_JIT_ALWAYS_ON\nfor more details.\nThe kernel includes a hardening feature for JIT-compiled BPF which can mitigate some types of JIT spraying attacks at the cost of performance and the ability to trace and debug many BPF programs. It may be enabled by setting\nnet.core.bpf_jit_harden\nto\n1\n(to enable hardening of unprivileged code) or\n2\n(to enable hardening of all code).\nSee the\nnet.core.bpf_*\nsettings in the\nkernel documentation\nfor more details.\nTip\nlinux-hardened\nsets\nnet.core.bpf_jit_harden=2\nby default rather than\n0\n.\nBy default, BPF programs can be run even by unprivileged users. To change that behaviour set\nkernel.unprivileged_bpf_disabled=1\n[9]\n.\nptrace scope\nThe\nptrace(2)\nsyscall provides a means by which one process (the \"tracer\") may observe and control the execution of another process (the \"tracee\"), and examine and change the tracee's memory and registers.\nptrace\nis commonly used by debugging tools including\ngdb\n,\nstrace\n,\nperf\n,\nreptyr\nand other debuggers. However, it also provides a means by which a malicious process can read data from and take control of other processes.\nArch enables the\nYama LSM\nby default, which provides a\nkernel.yama.ptrace_scope\nkernel parameter\n. This parameter is set to\n1\n(restricted) by default which prevents tracers from performing a\nptrace\ncall on traces outside of a restricted scope unless the tracer is privileged or has the\nCAP_SYS_PTRACE\ncapability\n. This is a significant improvement in security compared to the classic permissions. Without this module, there is no separation between processes running as the same user (in the absence of additional security layers such as\npid_namespaces(7)\n).\nNote\nBy default, you can still use tools which require\nptrace\nby running them as privileged processes, e.g. using\nsudo\n.\nIf you do not need to use debugging tools, consider setting\nkernel.yama.ptrace_scope\nto\n2\n(admin-only) or\n3\n(no\nptrace\npossible) to harden the system.\nhidepid\nThis article or section needs expansion.\nReason:\nLinux 5.8 implemented private instances\nand new values for\nhidepid=\n. (Discuss in\nTalk:Security\n)\nThe factual accuracy of this article or section is disputed.\nReason:\nEnabling\nhidepid\nglobally is not a supported way of operation by\nsystemd\n, nor does it have any practical improvements security-wise when systemd is running as service manager.\n[10]\n(Discuss in\nTalk:Security\n)\nWarning\nThis may cause issues for certain applications like an application running in a sandbox and\nXorg\n(see workaround).\nThis causes issues with\nD-Bus\n,\nPolkit\n,\nPulseAudio\nand\nbluetooth\nwhen using\nsystemd\n> 237.64-1.\nThe kernel has the ability to hide other users' processes, normally accessible via\n/proc\n, from unprivileged users by mounting the\nproc\nfilesystem with the\nhidepid=\nand\ngid=\noptions documented in\nhttps://docs.kernel.org/filesystems/proc.html\n.\nThis greatly complicates an intruder's task of gathering information about running processes, whether some daemon runs with elevated privileges, whether other user runs some sensitive program, whether other users run any program at all, makes it impossible to learn whether any user runs a specific program (given the program does not reveal itself by its behaviour), and, as an additional bonus, poorly written programs passing sensitive information via program arguments are now protected against local eavesdroppers.\nThe\nproc\ngroup\n, provided by the\nfilesystem\npackage, acts as a whitelist of users authorized to learn other users' process information. If users or services need access to\n/proc/<pid>\ndirectories beyond their own,\nadd them to the group\n.\nFor example, to hide process information from other users except those in the\nproc\ngroup:\n/etc/fstab\nproc\t/proc\tproc\tnosuid,nodev,noexec,hidepid=2,gid=proc\t0\t0\nFor user sessions to work correctly, an exception needs to be added for\nsystemd-logind\n:\n/etc/systemd/system/systemd-logind.service.d/hidepid.conf\n[Service]\nSupplementaryGroups=proc\nRestricting module loading\nThe default Arch kernel has\nCONFIG_MODULE_SIG_ALL\nenabled, which signs all kernel modules built as part of the\nlinux\npackage. This allows the kernel to only load modules signed with a valid key, i.e. out-of-tree modules compiled locally or provided by packages such as\nvirtualbox-host-modules-arch\ncannot be loaded.\nKernel module loading can be restricted by setting the\nmodule.sig_enforce=1\nkernel parameter\n. More information can be found in the\nkernel documentation\n.\nFurther, unneeded individual modules can be\nblacklisted\n, see\nsecureblue\n[\ndead link\n2025-11-17—HTTP 404]\nfor examples.\nDisable kexec\nKexec allows replacing the current running kernel.\n/etc/sysctl.d/51-kexec-restrict.conf\nkernel.kexec_load_disabled = 1\nTip\nkexec is disabled by default in\nlinux-hardened\n.\nKernel lockdown mode\nSince Linux 5.4 the kernel\nhas gained\nan optional\nlockdown feature\n, intended to strengthen the boundary between UID 0 (root) and the kernel. When enabled some applications may cease to work which rely on low-level access to either hardware or the kernel.\nTo use lockdown, its LSM must be initialized and a lockdown mode must be set.\nAll\nofficially supported kernels\ninitialize the LSM, but none of them enforce any lockdown mode.\nTip\nInitialized LSMs can be verified by running\ncat /sys/kernel/security/lsm\n.\nLockdown has two modes of operation:\nintegrity\n: kernel features that allow userland to modify the running kernel are disabled (e.g. kexec, bpf).\nconfidentiality\n: kernel features that allow userland to extract confidential information from the kernel are also disabled.\nIt is recommended to use\nintegrity\n, unless your specific threat model dictates otherwise.\nTo enable kernel lockdown at runtime, run:\n# echo\nmode\n> /sys/kernel/security/lockdown\nTo enable kernel lockdown on boot, use the\nkernel parameter\nlockdown=\nmode\n.\nNote\nKernel lockdown cannot be disabled at runtime.\nKernel lockdown disables\nhibernation\n.\nThe\nkernel_lockdown(7)\nman page incorrectly states that \"lockdown will be automatically enabled if the system boots in EFI Secure Boot mode\". This is not the behaviour of the upstream kernel, nor Arch's packaged\nkernels\n.\nSee also\nkernel_lockdown(7)\n.\nLinux Kernel Runtime Guard (LKRG)\nLKRG\n(\nlkrg-dkms\nAUR\n) is a kernel module which performs integrity checking of the kernel and detection of exploit attempts.\nDisable emergency shell\nThe factual accuracy of this article or section is disputed.\nReason:\nMasking\nemergency.target\nand\nemergency.service\nwill have no effect on those units being added to the initramfs and run in early userspace. Even with them in the initramfs, mkinitcpio's systemd hook locks the root account\n[11]\n[12]\nfor \"security reasons\" (see\nFS#70408\n). The solution for the issue in the linked article, if even needed, would be to prevent\nrescue.target\n,\nrescue.service\n,\nemergency.target\nand\nemergency.service\nfrom being added to the initramfs image. (Discuss in\nTalk:Security\n)\nThe emergency shell is used to interactively troubleshoot the machine during the boot process. However, it is also a gadget that an attacker can use to access secure resources such as the TPM. See\nthis article\nfor a practical example. The difficulty of attacks can be increased by disabling the emergency shell, at the tradeoff of removing a tool to troubleshoot early boot failures.\nTo disable the emergency shell, See\nsystemd#Disable emergency mode on remote machine\n.\nSandboxing applications\nSee also\nWikipedia:Sandbox (computer security)\n.\nTo improve the security of systemd service units, see\nsystemd/Sandboxing\n.\nNote\nThe user namespace configuration item\nCONFIG_USER_NS\nis currently enabled in\nlinux\n,\nlinux-lts\n,\nlinux-zen\nand\nlinux-hardened\n. Lack of it may prevent certain sandboxing features from being made available to applications.\nWarning\nUnprivileged user namespace usage (\nCONFIG_USER_NS_UNPRIVILEGED\n) is enabled by default in\nlinux\n,\nlinux-lts\nand\nlinux-zen\n, which greatly increases the attack surface for local privilege escalation (see\nAppArmor's Wiki\nand\nFS#36969\n).\nTo mitigate this, either:\nuse the\nlinux-hardened\nkernel which has the safe default, or\nset the\nkernel.unprivileged_userns_clone\nsysctl\nto\n0\n.\nNote that this can break applications such as\nnsjail\n.\nChromium\nbased applications need SUID bit for\nchrome-sandbox\nto work with this setting.\nFirejail\nFirejail\nis an easy to use tool for sandboxing applications and servers alike. It was originally created for browsers and internet facing applications, but supports a large number of applications by now. To establish a sandboxed environment with a variety of features, it is installed as a suid binary and builds a sandboxed runtime environment for the target application based on black and white lists.\nbubblewrap\nbubblewrap\nis a sandbox application developed for unprivileged container tools like\nFlatpak\nwith a significantly smaller resource footprint and complexity than Firejail. While it lacks certain features such as file path whitelisting, bubblewrap does offer bind mounts as well as the creation of user/IPC/PID/network/cgroup namespaces and can support both simple and complex sandboxes. For the\nlinux-hardened\nkernel you will need to to use\nbubblewrap-suid\n.\nBubblejail\nsandbox is based on\nbubblewrap\nand provides a resource oriented permission model with a graphical interface to tweak permissions.\nPortable\nPortable\nis a sandboxing framework which utilizes\nbubblewrap\nand many other tools to lockdown running applications. It is designed to be simple for packagers and efficient for users, yet cuts off security holes and monitors background processes by default.\nSee\nportable-arch\nfor a repository of applications sandboxed by portable.\nIf a sandboxed application does not utilize the Portal file chooser, portable can pass files to the sandbox (by passing\n--actions share-files\n).\nPortable is fully functional on GNOME, while other desktops may lack small amounts of features like advanced background monitoring and ScreenShot portal.\nchroots\nManual\nchroot\njails can also be constructed to build sandboxed process environments. It is much more limited than other sandboxing technologies; the extent of its sandboxing is file path isolation.\nLinux containers\nLinux Containers\nare another good option when you need more separation than the other options (short of\nfull system virtualization\n) provide. LXC is run on top of the existing kernel in a pseudo-chroot with their own virtual hardware.\nFull virtualization options\nUsing full virtualization options such as\nVirtualBox\n,\nKVM\n,\nXen\nor\nQubes OS\n(based on Xen) can also improve isolation and security in the event you plan on running risky applications or browsing dangerous websites.\nNetwork and firewalls\nFirewalls\nWhile the stock Arch kernel is capable of using\nNetfilter\n's\niptables\nand\nnftables\n, the services are not\nenabled\nby default. It is highly recommended to set up some form of firewall to protect the services running on the system. Many resources (including ArchWiki) do not state explicitly which services are worth protecting, so enabling a firewall is a good precaution.\nSee\niptables\nand\nnftables\nfor general information.\nSee\nSimple stateful firewall\nfor a guide on setting up an iptables firewall.\nSee\nCategory:Firewalls\nfor other ways of setting up netfilter.\nSee\nIpset\nfor blocking lists of ip addresses, such as those from Bluetack.\nopensnitch\nis a configurable inbound and outbound firewall with support for configurable rules by application, port, host, etc.\nOpen ports\nThis article or section needs language, wiki syntax or style improvements. See\nHelp:Style\nfor reference.\nReason:\n\"Open ports\" is not a good title since it disregards interfaces and addresses that the application may be bound to. From the firewalls' point of view, ports may be \"open\" even if no application listens on them at the moment. (Discuss in\nTalk:Security\n)\nSome services listen for inbound traffic on open network ports. It is important to only bind these services to the addresses and interfaces that are strictly necessary. It may be possible for a remote attacker to\nexploit flawed network protocols to access exposed services\n. This can even happen with\nprocesses bound to localhost\n.\nIn general, if a service only needs to be accessible to the local system, bind to a Unix domain socket (\nunix(7)\n) or a loopback address such as\nlocalhost\ninstead of a non-loopback address like\n0.0.0.0/0\n.\nIf a service needs to be accessible to other systems via the network, control the access with strict\nfirewall\nrules and configure authentication, authorization and encryption whenever possible.\nYou can list all current open ports with\nss -l\n. To show all\nl\nistening\np\nrocesses and their\nn\numeric\nt\ncp and\nu\ndp port numbers:\n# ss -lpntu\nSee\nss(8)\nfor more options.\nKernel parameters\nKernel parameters which affect networking can be set using\nSysctl\n. For how to do this, see\nSysctl#TCP/IP stack hardening\n.\nSSH\nTo mitigate\nbrute-force attacks\nit is recommended to enforce key-based authentication. For OpenSSH see\nOpenSSH#Protection\nfor more recommendations. Alternatively\nFail2ban\nor\nSshguard\noffer lesser forms of protection by monitoring logs and writing\nfirewall\nrules but open up the potential for a denial of service, since an attacker can\nspoof\npackets as if they came from the administrator after identifying their address. Spoofing IP has lines of defense, such as by\nreverse path filtering\nand\ndisabling ICMP redirects\n.\nYou may want to harden authentication even more by using two-factor authentication.\nGoogle Authenticator\nprovides a two-step authentication procedure using one-time passcodes (OTP).\nDenying root login is also a good practice, both for tracing intrusions and adding an additional layer of security before root access. For OpenSSH, see\nOpenSSH#Deny\n.\nMozilla publishes an\nOpenSSH configuration guide\nwhich configures more verbose audit logging and restricts ciphers.\nDNS\nThe default domain name resolution (DNS) configuration is highly compatible but has security weaknesses. See\nDNS privacy and security\nfor more information.\nProxies\nProxies are commonly used as an extra layer between applications and the network, sanitizing data from untrusted sources. The attack surface of a small proxy running with lower privileges is significantly smaller than a complex application running with the end user privileges.\nFor example the DNS resolver is implemented in\nglibc\n, that is linked with the application (that may be running as root), so a bug in the DNS resolver might lead to a remote code execution. This can be prevented by installing a DNS caching server, such as\ndnsmasq\n, which acts as a proxy.\n[13]\nManaging TLS certificates\nSee\nTLS#Trust management\n.\nPhysical security\nPhysical access to a computer is root access given enough time and resources. However, a high\npractical\nlevel of security can be obtained by putting up enough barriers.\nAn attacker can gain full control of your computer on the next boot by simply attaching a malicious IEEE 1394 (FireWire), Thunderbolt or PCI Express device as they are given full memory access by default.\n[14]\nFor Thunderbolt, you can restrict the direct memory access completely or to known devices, see\nThunderbolt#User device authorization\n. For Firewire and PCI Express, there is little you can do from preventing this, or modification of the hardware itself - such as flashing malicious firmware onto a drive. However, the vast majority of attackers will not be this knowledgeable and determined.\n#Data-at-rest encryption\nwill prevent access to your data if the computer is stolen, but malicious firmware can be installed to obtain this data upon your next log in by a resourceful attacker.\nLocking down BIOS\nAdding a password to the BIOS prevents someone from booting into removable media, which is basically the same as having root access to your computer. You should make sure your drive is first in the boot order and disable the other drives from being bootable if you can.\nBoot loaders\nIt is highly important to protect your\nboot loader\n. An unprotected boot loader can bypass any login restrictions, e.g. by setting the\ninit=/bin/sh\nkernel parameter\nto boot directly to a shell.\nSyslinux\nSyslinux\nsupports\npassword-protecting your boot loader\n. It allows you to set either a per-menu-item password or a global boot loader password.\nGRUB\nGRUB\nsupports boot loader passwords as well. See\nGRUB/Tips and tricks#Password protection of GRUB menu\nfor details. It also has support for\nencrypted /boot\n, which only leaves some parts of the boot loader code unencrypted. GRUB's configuration,\nkernel\nand\ninitramfs\nare encrypted.\nsystemd-boot\nsystemd-boot\ndisables editing of kernel parameters when\n#Secure Boot\nis enabled. Alternatively, see\nsystemd-boot#Kernel parameters editor with password protection\nfor a more traditional password-based option.\nSecure Boot\nSecure Boot\nis a feature of\nUEFI\nthat allows authentication of the files your computer boots. This helps preventing some\nevil maid attacks\nsuch as replacing files inside the boot partition. Normally computers come with keys that are enrolled by vendors (OEM). However these can be removed and allow the computer to enter\nSetup Mode\nwhich allows the user to enroll and manage their own keys.\nThe secure boot page guides you through how to set secure boot up by\nusing your own keys\n.\nTrusted Platform Module (TPM)\nTPMs\nare hardware microprocessors which have cryptographic keys embedded. This forms the fundamental root of trust of most modern computers and allows end-to-end verification of the boot chain. They can be used as internal smartcards, attest the firmware running on the computer and allow users to insert secrets into a tamper-proof and brute-force resistant store.\nBoot partition on removable flash drive\nOne popular idea is to place the boot partition on a flash drive in order to render the system unbootable without it. Proponents of this idea often use\nfull-disk encryption\nalongside, and some also use\ndetached encryption headers\nplaced on the boot partition.\nThis method can also be merged with\nencrypting /boot\n.\nAutomatic logout\nIf you are using\nBash\nor\nZsh\n, you can set\nTMOUT\nfor an automatic logout from shells after a timeout.\nFor example, the following will automatically log out from virtual consoles (but not terminal emulators in X11):\n/etc/profile.d/shell-timeout.sh\nTMOUT=\"$(( 60*10 ))\";\n[ -z \"$DISPLAY\" ] && export TMOUT;\ncase $( /usr/bin/tty ) in\n/dev/tty[0-9]*) export TMOUT;;\nesac\nIf you really want EVERY Bash/Zsh prompt (even within X) to timeout, use:\n$ export TMOUT=\"$(( 60*10 ))\";\nNote that this will not work if there is some command running in the shell (eg.: an SSH session or other shell without\nTMOUT\nsupport). But if you are using VC mostly for restarting frozen GDM/Xorg as root, then this is very useful.\nProtect against rogue USB devices\nThe kernel has\nsettings to deactivate\nUSB ports to protect your computer against rogue USB devices (a.k.a.\nBadUSB\n,\nPoisonTap\nor\nLanTurtle\n). They can be set at runtime and automated via\nsysctl\n.\nFor more control install\nUSBGuard\n, which is a software framework implementing basic whitelisting and blacklisting capabilities based on device attributes.\nVolatile data collection\nA computer that is powered on may be vulnerable to\nvolatile data collection\n. It is a best practice to turn a computer completely off at times it is not necessary for it to be on, or if the computer's physical security is temporarily compromised (e.g. when passing through a security checkpoint).\nPackages\nAuthentication\nAttacks on package managers\nare possible without proper use of package signing, and can affect even package managers with\nproper signature systems\n. Arch uses package signing by default and relies on a web of trust from 5 trusted master keys. See\nPacman-key\nfor details.\nUpgrades\nIt is important to regularly\nupgrade the system\n.\nFollow vulnerability alerts\nSubscribe to the Common Vulnerabilities and Exposure (CVE) Security Alert updates, made available by National Vulnerability Database, and found on the\nNVD Download webpage\n. The\nArch Linux Security Tracker\nserves as a particularly useful resource in that it combines Arch Linux Security Advisory (ASA), Arch Linux Vulnerability Group (AVG) and CVE data sets in tabular format. The tool\narch-audit\ncan be used to check for vulnerabilities affecting the running system. A graphical system tray,\narch-audit-gtk\n, can also be used. See also\nArch Security Team\n.\nYou should also consider subscribing to the release notifications for software you use, especially if you install software through means other than the main repositories or AUR. Some software have mailing lists you can subscribe to for security notifications. Source code hosting sites often offer RSS feeds for new releases.\nRebuilding packages\nPackages can be rebuilt and stripped of undesired functions and features as a means to reduce attack surface. For example,\nbzip2\ncan be rebuilt without\nbzip2recover\nin an attempt to circumvent\nCVE-2016-3189\n. Custom hardening flags can also be applied either manually or via a wrapper.\nThis article or section is a candidate for merging with\nArch package guidelines/Security\n.\nNotes:\nSecurity related build flags have their own article. (Discuss in\nTalk:Security\n)\nThe factual accuracy of this article or section is disputed.\nReason:\nCopy-pasted from a 3 years old blog post. The compiler flags are specific to\nGCC\n, some are hardly security related. (Discuss in\nTalk:Security\n)\nFlag\nPurpose\n-D_FORTIFY_SOURCE=2\nRun-time buffer overflow detection\n-D_GLIBCXX_ASSERTIONS\nRun-time bounds checking for C++ strings and containers\n-fasynchronous-unwind-tables\nIncreased reliability of backtraces\n-fexceptions\nEnable table-based thread cancellation\n-fpie -Wl,-pie\nFull ASLR for executables\n-fpic -shared\nNo text relocations for shared libraries\n-fplugin=annobin\nGenerate data for hardening quality control\n-fstack-clash-protection\nIncreased reliability of stack overflow detection\n-fstack-protector, -fstack-protector-all or -fstack-protector-strong\nStack smashing protector\n-grecord-gcc-switches\nStore compiler flags in debugging information\n-mcet -fcf-protection\nControl flow integrity protection\n-Werror=format-security\nReject potentially unsafe format string arguments\n-Werror=implicit-function-declaration\nReject missing function prototypes\n-Wl,-z,defs\nDetect and reject underlinking\n-Wl,-z,now\nDisable lazy binding\n-Wl,-z,relro\nRead-only segments after relocation\nFlags and info source\nSee also\nArch Linux Security Tracker\nCentOS Wiki: OS Protection\nHardening the Linux desktop\nHardening the Linux server\nLinux Foundation: Linux workstation security checklist\nprivacyguides.org Privacy Resources\nRed Hat Enterprise Linux 7 Security Guide\nSecuring Debian Manual\nThe paranoid #! Security Guide\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Security&oldid=853300\n\"\nCategories\n:\nSecurity\nFile systems\nNetworking\nHidden categories:\nPages or sections flagged with Template:Accuracy\nPages or sections flagged with Template:Merge\nPages or sections flagged with Template:Expansion\nPages with dead links\nPages or sections flagged with Template:Style\nSearch\nSearch\nSecurity\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Security"}}
{"text": "cron - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\ncron\n5 languages\nDeutsch\nFrançais\n日本語\n中文（简体）\n中文（繁體）\nFrom ArchWiki\nRelated articles\nsystemd/Timers\nFrom\nWikipedia\n:\ncron\nis the time-based job scheduler in Unix-like computer operating systems. cron enables users to schedule jobs (commands or shell scripts) to run periodically at certain times, dates or intervals. It is commonly used to automate system maintenance or administration.\nInstallation\nThere are many cron implementations, but none of them are installed by default as the base system uses\nsystemd/Timers\ninstead. See the Gentoo wiki's\ncron guide\n, which offers comparisons.\nPackages available:\ncronie\nfcron\ndcron\nAUR\nvixie-cron\nAUR\nscron-git\nAUR\nConfiguration\nActivation and autostart\nAfter installation, the daemon will not be enabled by default. The installed package likely provides a service, which can be controlled by\nsystemctl\n. For example,\ncronie\nuses\ncronie.service\n.\nCheck\n/etc/cron.daily/\nand similar directories to see which jobs are present. Activating cron service will trigger all of them.\nNote\ncronie\nprovides the\n0anacron\nhourly\njob, which allows for\ndelayed runs of other jobs\ne.g. if the computer was switched off at the moment of standard execution.\nHandling errors of jobs\ncron registers the output from\nstdout\nand\nstderr\nand attempts to send it as email to the user's spools via the\nsendmail\ncommand. Cronie disables mail output if\n/usr/bin/sendmail\nis not found. In order for mail to be written to a user's spool, there must be an smtp daemon running on the system, e.g.\nopensmtpd\n. Otherwise, you can install a package that provides the sendmail command, and configure it to send mail to a remote mail exchanger. You can also log the messages by using the\n-m\noption and writing a custom script.\nTip\nOne can send the output to local system users using\nPostfix#Local mail\n.\nEdit\nthe\ncronie.service\nunit.\nInstall\nesmtp\nAUR\n,\nmsmtp\n,\nopensmtpd\n,\nsSMTP\n, or write a custom script.\nExample with sSMTP\nsSMTP is a send-only sendmail emulator which delivers email from a local computer to an smtp server.  While there are currently no active maintainers, it is still by far the simplest way to transfer mail to a configured mailhub.  There are no daemons to run, and configuration can be as simple as editing 3 lines in a single configuration file (if your host is trusted to relay unauthenticated email through your mailhub).  sSMTP does not receive mail, expand aliases, or manage a queue.\nInstall\nssmtp\nAUR\n, which creates a symbolic link from\n/usr/bin/sendmail\nto\n/usr/bin/ssmtp\n. You must then edit\n/etc/ssmtp/ssmtp.conf\n.  See\nsSMTP\nfor details.  Creating a symbolic link to\n/usr/bin/sendmail\ninsures that programs like\nS-nail\n(or any package which provides\n/usr/bin/mail\n) will just work without modification.\nRestart\ncronie.service\nto insure that it detects that you now have a\n/usr/bin/sendmail\ninstalled.\nExample with msmtp\nInstall\nmsmtp-mta\n, which creates a symbolic link from\n/usr/bin/sendmail\nto\n/usr/bin/msmtp\n.\nRestart\ncronie.service\nto make sure it detects the new\nsendmail\ncommand. You must then provide a way for\nmsmtp\nto convert your username into an email address.\nThen either add\nMAILTO\nline to your crontab, like so:\nMAILTO=your@email.com\nor\ncreate\n/etc/msmtprc\nand append this line:\naliases /etc/aliases\nand create\n/etc/aliases\n:\nyour_username: your@email.com\n# Optional:\ndefault: your@email.com\nThen\nmodify the configuration\nof\ncronie\ndaemon by replacing the\nExecStart\ncommand with:\nExecStart=/usr/bin/crond -n -m '/usr/bin/msmtp -t'\nExample with esmtp\nInstall\nesmtp\nAUR\nand\nprocmail\nAUR\n.\nAfter installation configure the routing:\n/etc/esmtprc\nidentity\nmyself\n@myisp.com\nhostname mail.myisp.com:25\nusername\n\"myself\"\npassword\n\"secret\"\nstarttls enabled\ndefault\nmda \"/usr/bin/procmail -d %T\"\nProcmail needs root privileges to work in delivery mode but it is not an issue if you are running the cronjobs as root anyway.\nTo test that everything works correctly, create a file\nmessage.txt\nwith\n\"test message\"\nin it.\nFrom the same directory run:\n$ sendmail\nuser_name\n< message.txt\nthen:\n$ cat /var/spool/mail/\nuser_name\nYou should now see the test message and the time and date it was sent.\nThe error output of all jobs will now be redirected to\n/var/spool/mail/\nuser_name\n.\nDue to the privileged issue, it is hard to create and send emails to root (e.g.\nsu -c \"\"\n). You can ask\nesmtp\nto forward all root's email to an ordinary user with:\n/etc/esmtprc\nforce_mda=\"\nuser-name\n\"\nNote\nIf the above test did not work, you may try creating a local configuration in\n~/.esmtprc\nwith the same content.\nRun the following command to make sure it has the correct permission:\n$ chmod 710 ~/.esmtprc\nThen repeat the test with\nmessage.txt\nexactly as before.\nExample with opensmtpd\nInstall\nopensmtpd\n.\nEdit\n/etc/smtpd/smtpd.conf\n. The following configuration allows for local delivery:\nlisten on localhost\naction \"local\" mbox alias <aliases>\nmatch for local action \"local\"\nYou can proceed to test it. First\nstart\nsmtpd.service\n. Then do:\n$ echo test | sendmail user\nuser\ncan check their mail in with any\nreader\nable to handle mbox format, or just have a look at the file\n/var/spool/mail/\nuser\n. If everything goes as expected, you can\nenable\nopensmtpd for future boots.\nThis approach has the advantage of not sending local cron notifications to a remote server. On the downside, you need a new daemon running.\nNote\nAt the moment of writing the Arch opensmtpd package does not create all needed directories under\n/var/spool/smtpd\n, but the daemon will warn about that specifying the required ownerships and permissions. Just create them as suggested.\nEven though the suggested configuration does not accept remote connections, it is a healthy precaution to add an additional layer of security blocking port 25 with\niptables\nor similar.\nLong cron job\nSuppose this program is invoked by cron :\n#!/bin/sh\necho \"I had a recoverable error!\"\nsleep 1h\nWhat happens is this:\ncron runs the script\nas soon as cron sees some output, it runs your MTA, and provides it with the headers. It leaves the pipe open, because the job has not finished and there might be more output.\nthe MTA opens the connection to postfix and leaves that connection open while it waits for the rest of the body.\npostfix closes the idle connection after less than an hour and you get an error like this :\nsmtpmsg='421 … Error: timeout exceeded' errormsg='the server did not accept the mail'\nTo solve this problem you can use the command chronic or sponge from\nmoreutils\n.\nFrom their respective man page:\nchronic(1)\nchronic runs a command, and arranges for its standard out and standard error to only be displayed if the command fails (exits nonzero or crashes). If the command succeeds, any extraneous output will be hidden.\nsponge(1)\nsponge reads standard input and writes it out to the specified file. Unlike a shell redirect, sponge soaks up all its input before opening the output file… If no output file is specified, sponge outputs to stdout.\nChronic too buffers the command output before opening its standard output.\nCrontab format\nThe basic format for a crontab is:\nminute\nhour\nday_of_month\nmonth\nday_of_week\ncommand\nminute\nvalues can be from 0 to 59.\nhour\nvalues can be from 0 to 23.\nday_of_month\nvalues can be from 1 to 31.\nmonth\nvalues can be from 1 to 12.\nday_of_week\nvalues can be from 0 to 6, with 0 denoting Sunday.\nSpaces are used to separate fields. To fine-tune your schedule you may also use one of the following symbols:\nSymbol\nDescription\n*\nWildcard, specifies every possible time interval\n,\nList multiple values separated by a comma.\n-\nSpecify a range between two numbers, separated by a hyphen\n/\nSpecify a periodicity/frequency using a slash\nFor example, the line:\n*/5 9-16 * 1-5,9-12 1-5 ~/bin/i_love_cron.sh\nwill execute the script\ni_love_cron.sh\nat five minute intervals from 9 AM to 4:55 PM on weekdays except during the months of June, July, and August.\nIn addition, crontab has some special keywords:\nKeyword\nDescription\n@reboot\nat startup\n@yearly\nonce a year\n@annually\nidentical to @yearly\n@monthly\nonce a month\n@weekly\nonce a week\n@daily\nonce a day\n@midnight\nidentical to @daily\n@hourly\nonce an hour\nFor example:\n@reboot ~/bin/i_love_cron.sh\nwill execute the script\ni_love_cron.sh\nat startup.\nSee more at:\nhttps://www.adminschoice.com/crontab-quick-reference\nMore examples and advanced configuration techniques can be found below.\nBasic commands\nCrontabs should never be edited directly; instead, you should use the\ncrontab\nprogram to work with your crontabs.\nTo view your crontabs:\n$ crontab -l\nTo edit your crontabs:\n$ crontab -e\nTo remove\nall\nof your crontabs:\n$ crontab -r\nIf you have a saved crontab and would like to completely overwrite your old crontab:\n$ crontab\nsaved_crontab_filename\nTo overwrite a crontab from the command line (\nWikipedia:stdin\n):\n$ crontab -\nTo edit somebody else's crontab:\n# crontab -u\nusername\n-e\nThis same format (appending\n-u\nusername\nto a command) works for listing and deleting crontabs as well.\nExamples\nThe entry:\n01 * * * * /bin/echo Hello, world!\nruns the command\n/bin/echo Hello, world!\non the first minute of every hour of every day of every month (i.e. at 12:01, 1:01, 2:01, etc.).\nSimilarly:\n*/5 * * jan mon-fri /bin/echo Hello, world!\nruns the same job every five minutes on weekdays during the month of January (i.e. at 12:00, 12:05, 12:10, etc.).\nThe line (as noted in\ncrontab(5)\n):\n*/5 9-16 * 1-5,9-12 1-5 /home/user/bin/i_love_cron.sh\nwill execute the script\ni_love_cron.sh\nat five minute intervals from 9 AM to 5 PM (excluding 5 PM itself) every weekday (Mon-Fri) of every month except during the summer (June, July, and August).\nPeriodical settings can also be entered as in this crontab template:\n# Chronological table of program loadings\n# Edit with \"crontab\" for proper functionality, \"man 5 crontab\" for formatting\n# User: johndoe\n# mm  hh  DD  MM  W /path/progam [--option]...  ( W = weekday: 0-6 [Sun=0] )\n21  01  *   *   * /usr/bin/systemctl hibernate\n@weekly           $HOME/.local/bin/trash-empty\nHere are some self-explanatory crontab syntax examples:\n30 4 echo \"It is now 4:30 am.\"\n0 22 echo \"It is now 10 pm.\"\n30 15 25 12 echo \"It is 3:30pm on Christmas Day.\"\n30 3 * * * echo \"Remind me that it's 3:30am every day.\"\n0 * * * * echo \"It is the start of a new hour.\"\n0 6 1,15 * * echo \"At 6am on the 1st and 15th of every month.\"\n0 6 * * 2,3,5 echo \"At 6am on Tuesday, Wednesday and Thursdays.\"\n59 23 * * 1-5 echo \"Just before midnight on weekdays.\"\n0 */2 * * * echo \"Every two hours.\"\n0 20 * * 4 echo \"8pm on a Thursday.\"\n0 20 * * Thu echo \"8pm on a Thursday.\"\n*/15 9-17 * * 2-5 echo \"Every 15 minutes from 9am-5pm on weekdays.\"\n@yearly echo \"Happy New Year!\"\nDefault editor\nTo use an alternate default editor, define the\nEDITOR\nenvironment variable in a shell initialization script as described in\nEnvironment variables\n.\nAs a regular user,\nsu\nwill need to be used instead of\nsudo\nfor the environment variable to be pulled correctly:\n$ su -c \"crontab -e\"\nTo have an alias to this\nprintf\nis required to carry the arbitrary string because\nsu\nlaunches in a new shell:\nalias scron=\"su -c $(printf \"%q \" \"crontab -e\")\"\nRunning X.org server-based applications\nCron does not run under the\nX.org\nserver therefore it cannot know the environmental variable necessary to be able to start an X.org server application so they will have to be defined. One can use a program like\nxuserrun-git\nAUR\nto do it:\n17 02 * ... /usr/bin/xuserrun /usr/bin/xclock\nThis article or section is out of date.\nReason:\nDoes it still work? (Discuss in\nTalk:Cron#cron x.org aplications\n)\nOr they can be defined manually (\necho $DISPLAY\nwill give the current DISPLAY value):\n17 02 * ... env DISPLAY=:0 /usr/bin/xclock\nIf running notify-send for desktop notifications in cron, notify-send is sending values to dbus. So it needs to tell dbus to connect to the right bus.\nThe address can be found by examining DBUS_SESSION_BUS_ADDRESS environment variable and setting it to the same value. Therefore:\n17 02 * ... env DBUS_SESSION_BUS_ADDRESS=your-address notify-send 'Foo bar'\nIf done through say SSH, permission will need be given:\n# xhost +si:localuser:$(whoami)\nAsynchronous job processing\nIf you regularly turn off your computer but do not want to miss jobs, there are some solutions available (easiest to hardest):\nCronie\ncronie\ncomes with anacron included. The project homepage says:\nCronie contains the standard UNIX daemon crond that runs specified programs at scheduled times and related tools.\nIt is based on the original cron and has security and configuration enhancements like the ability to use pam and SELinux.\nDcron\nVanilla\ndcron\nAUR\nsupports asynchronous job processing. Just put it with @hourly, @daily, @weekly or @monthly with a jobname, like this:\n@hourly         ID=greatest_ever_job      echo This job is very useful.\nCronwhip\ncronwhip\nAUR\nis a script to automatically run missed cron jobs; it works with the former default cron implementation,\ndcron\n.\nSee also the\nforum thread\n.\nAnacron\nAnacron is a full replacement for\ndcron\nwhich processes jobs asynchronously.\nIt is provided by\ncronie\n. The configuration file is\n/etc/anacrontab\n. Information on the format can be found in the\nanacrontab(5)\n. Running\nanacron -T\nwill test\n/etc/anacrontab\nfor validity.\nFcron\nLike\nanacron\n,\nfcron\nassumes the computer is not always running and, unlike\nanacron\n, it can schedule events at intervals shorter than a single day which may be useful for systems which suspend/hibernate regularly (such as a laptop). Like cronwhip, fcron can run jobs that should have been run during the computer's downtime.\nWhen replacing\ncronie\nwith fcron be aware the spool directory is\n/var/spool/fcron\nand the\nfcrontab\ncommand is used instead of\ncrontab\nto edit the user crontabs. These crontabs are stored in a binary format with the text version next to them as\nfoo\n.orig in the spool directory. Any scripts which manually edit user crontabs may need to be adjusted due to this difference in behavior.\nA quick scriptlet which may aide in converting traditional user crontabs to fcron format:\ncd /var/spool/cron && (\nfor ctab in *; do\nfcrontab ${ctab} -u ${ctab}\ndone\n)\nSee also the\nforum thread\n.\nEnsuring exclusivity\nIf you run potentially long-running jobs (e.g., a backup might all of a sudden run for a long time, because of many changes or a particular slow network connection), then\nflock\n(\nutil-linux\n) can ensure that the cron job will not start a second time.\n5,35 * * * * /usr/bin/flock -n /tmp/lock.backup /root/make-backup.sh\nCronie\nThe relevant file hierarchy for cronie is the following:\n/etc/\n|----- cron.d/\n| ----- 0hourly\n|----- cron.minutely/\n|----- cron.hourly/\n| ----- 0anacron\n|----- anacrontab\n|----- cron.daily/\n|----- cron.monthly/\n|----- cron.weekly/\n|----- crontab\n|----- cron.deny\nCronie provides both\ncron\nand\nanacron\nfunctionalities:\ncron\nruns jobs at regular time intervals (down to a granularity of one minute) as long as the system is available at the specified time, while\nanacron\nexecutes commands at\nintervals specified in days.  Unlike cron, it does not assume that the system is running continuously. Whenever the system is up,\nanacron\nchecks if there are any jobs that should have been run and handles them accordingly.\nA\ncron\njob can be defined in a crontab-like file in the\n/etc/cron.d\ndirectory or added within the\n/etc/crontab\nfile. Note the latter is not present by default but is used if it exists. As instructed by\n/etc/cron.d/0hourly\n, any executable file in\n/etc/cron.hourly\nwill be run every hour (by default at minute 1 of the hour). Files in\n/etc/cron.minutely\nare executed every minute if instructed accordingly in\n/etc/cron.d/0minutely\n. The executables are typically shell scripts, symlinks to executable files can also be used.\nThe\n/etc/cron.deny\nfile includes the list of users not allowed to use crontab, without this file, only users listed in\n/etc/cron.allow\ncan use it.\nAnacron\nworks similarly, by executing the files in the\n/etc/cron.daily\n,\n/etc/cron.weekly\nand\n/etc/cron.monthly\ndirectories, placed there depending on the desired job frequency. The cron job\n/etc/cron.hourly/0anacron\nmakes sure that\nanacron\nis run once daily to perform its pending tasks.\nNote\nCronie uses\nrun-parts\nto carry out scripts in the different directories. The filenames should not include any dot (.) since\nrun-parts\nin its default mode will silently ignore them (see\nrun-parts(8)\n). The names must consist only of upper and lower-case letters, digits, underscores and minus-hyphens.\nThe output of\nsystemctl status cronie\nmight show a message such as\nCAN'T OPEN (/etc/crontab): No such file or directory\n. However, this can be ignored since cronie does not require one.\nCronie is particular about the permissions for\n/etc/cron.d/0hourly\n. None of the tasks in\n/etc/cron.d/{hourly,weekly,daily} ... etc\nwill be run (including the anacron launcher) if\n/etc/cron.d/0hourly\nis damaged or has improper permissions.\npacman -Qkk cronie\ncan show if you have any such issues.\nTip\nTo prevent the sending of output and stop email alert, add\n>/dev/null 2>&1\nat the end of the line for each cron job to redirect output to /dev/null.\n0 1 5 10 * /path/to/script.sh >/dev/null 2>&1\nYou can also set\nMAILTO=””\nvariable in your crontab file to  disable email alerts.\nDcron\nThe cron daemon parses a configuration file known as\ncrontab\n. Each user on the system can maintain a separate crontab file to schedule commands individually. The root user's crontab is used to schedule system-wide tasks (though users may opt to use\n/etc/crontab\nor the\n/etc/cron.d\ndirectory, depending on which cron implementation they choose).\n/var/spool/cron/root\n# Run command at a scheduled time\n# Edit this 'crontab -e' for error checking, man 1 crontab for acceptable format\n# <@freq>                       <tags and command>\n@hourly         ID=sys-hourly   /usr/sbin/run-cron /etc/cron.hourly\n@daily          ID=sys-daily    /usr/sbin/run-cron /etc/cron.daily\n@weekly         ID=sys-weekly   /usr/sbin/run-cron /etc/cron.weekly\n@monthly        ID=sys-monthly  /usr/sbin/run-cron /etc/cron.monthly\n# mm  hh  DD  MM  W /path/command (or tags) # W = week: 0-6, Sun=0\n21  01  *   *   * /usr/bin/systemctl suspend\nThese lines exemplify one of the formats that crontab entries can have, namely whitespace-separated fields specifying:\n@period\nID=jobname (this tag is specific to dcron)\ncommand\nThe other standard format for crontab entries is:\nminute\nhour\nday\nmonth\nday of week\ncommand\nThe crontab files themselves are usually stored as\n/var/spool/cron/username\n. For example, root's crontab is found at\n/var/spool/cron/root\nSee the crontab\nman page\nfor further information and configuration examples.\nSee also\nGentoo Linux Cron Guide\ncrontab.guru\n- online editor for cronjob expressions\ncron-notify\nAUR\nis a FreeDesktop.org-compatible notification service to periodically ask for acknowledgement before executing a command. Commands are configured in a custom configuration file.\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Cron&oldid=846604\n\"\nCategory\n:\nSystem administration\nHidden category:\nPages or sections flagged with Template:Out of date\nSearch\nSearch\ncron\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Cron"}}
{"text": "systemd/Timers - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nsystemd/Timers\n8 languages\nDeutsch\nEspañol\nFrançais\nMagyar\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\n<\nSystemd\nRelated articles\nsystemd\nsystemd/User\nsystemd FAQ\ncron\nTimers are\nsystemd\nunit files whose name ends in\n.timer\nthat control\n.service\nfiles or events. Timers can be used as an alternative to\ncron\n(read\n#As a cron replacement\n). Timers have built-in support for calendar time events, monotonic time events, and can be run asynchronously.\nTimer units\nTimers are\nsystemd\nunit files with a suffix of\n.timer\n. Timers are like other\nunit configuration files\nand are loaded from the same paths but include a\n[Timer]\nsection which defines when and how the timer activates. Timers are defined as one of two types:\nRealtime timers\n(a.k.a. wallclock timers) activate on a calendar event, the same way that cronjobs do. The option\nOnCalendar=\nis used to define them.\nMonotonic timers\nactivate after a time span relative to a varying starting point. They stop if the computer is temporarily suspended or shut down. There are number of different monotonic timers but all have the form:\nOn\nType\nSec=\n. Common monotonic timers include\nOnBootSec\nand\nOnUnitActiveSec\n.\nFor a full explanation of timer options, see the\nsystemd.timer(5)\n. The argument syntax for calendar events and time spans is defined in\nsystemd.time(7)\n.\nNote\nsystemd\noffers the target\ntimers.target\nwhich sets up all timers that should be active after boot (see\nsystemd.special(7)\nfor details). To use it, add\nWantedBy=timers.target\nto the\n[Install]\nsection of your timer and\nenable\nthe timer unit.\nService units\nFor each\n.timer\nfile, a matching\n.service\nfile exists (e.g.\nfoo.timer\nand\nfoo.service\n). The\n.timer\nfile activates and controls the\n.service\nfile. The\n.service\ndoes not require an\n[Install]\nsection as it is the\ntimer\nunits that are enabled. If necessary, it is possible to control a differently-named unit using the\nUnit=\noption in the timer's\n[Timer]\nsection.\nManagement\nTo use a\ntimer\nunit\nenable\nand\nstart\nit like any other unit (remember to add the\n.timer\nsuffix). To view all started timers, run:\n$ systemctl list-timers\nNEXT                          LEFT        LAST                          PASSED     UNIT                         ACTIVATES\nThu 2014-07-10 19:37:03 CEST  11h left    Wed 2014-07-09 19:37:03 CEST  12h ago    systemd-tmpfiles-clean.timer systemd-tmpfiles-clean.service\nFri 2014-07-11 00:00:00 CEST  15h left    Thu 2014-07-10 00:00:13 CEST  8h ago     logrotate.timer              logrotate.service\nNote\nTo list all timers (including inactive), use\nsystemctl list-timers --all\n.\nThe status of a service started by a timer will likely be inactive unless it is currently being triggered.\nIf a timer gets out of sync, it may help to delete its\nstamp-*\nfile in\n/var/lib/systemd/timers\n(or\n~/.local/share/systemd/\nin case of user timers). These are zero length files which mark the last time each timer was run. If deleted, they will be reconstructed on the next start of their timer.\nExamples\nA service unit file can be scheduled with a timer out-of-the-box. The following examples schedule\nfoo.service\nto be run with a corresponding timer called\nfoo.timer\n.\nMonotonic timer\nA timer which will start 15 minutes after boot and again every week while the system is running.\n/etc/systemd/system/foo.timer\n[Unit]\nDescription=Run foo weekly and on boot\n[Timer]\nOnBootSec=15min\nOnUnitActiveSec=1w\n[Install]\nWantedBy=timers.target\nRealtime timer\nA timer which starts once a week (at 12:00am on Monday). When activated, it triggers the service immediately if it missed the last start time (option\nPersistent=true\n), for example due to the system being powered off:\n/etc/systemd/system/foo.timer\n[Unit]\nDescription=Run foo weekly\n[Timer]\nOnCalendar=weekly\nPersistent=true\n[Install]\nWantedBy=timers.target\nWhen more specific dates and times are required,\nOnCalendar\nevents uses the following format:\nDayOfWeek Year-Month-Day Hour:Minute:Second\nAn asterisk may be used to specify any value and commas may be used to list possible values. Two values separated by\n..\nindicate a contiguous range.\nIn the below example the service is run the first four days of each month at 12:00 PM, but\nonly\nif that day is a Monday or a Tuesday.\nOnCalendar=Mon,Tue *-*-01..04 12:00:00\nTo run a service on the first Saturday of every month, use:\nOnCalendar=Sat *-*-1..7 18:00:00\nWhen using the\nDayOfWeek\npart, at least one weekday has to be specified. If you want something to run every day at 4am, use:\nOnCalendar=*-*-* 4:00:00\nTo run a service at different times,\nOnCalendar\nmay be specified more than once. In the example below, the service runs at 22:30 on weekdays and at 20:00 on weekends.\nOnCalendar=Mon..Fri 22:30\nOnCalendar=Sat,Sun 20:00\nYou can also specify a timezone at the end of the directive (use\ntimedatectl list-timezones\nto list accepted values)\nOnCalendar=*-*-* 02:00:00 Europe/Paris\nMore information is available in\nsystemd.time(7)\n.\nTip\nOnCalendar\ntime specifications can be tested in order to verify their validity and to calculate the next time the condition would elapse when used on a timer unit file with the\ncalendar\noption of the\nsystemd-analyze\nutility. For example, one can use\nsystemd-analyze calendar weekly\nor\nsystemd-analyze calendar \"Mon,Tue *-*-01..04 12:00:00\"\n. Add\n--iterations=N\nto ask for more iterations to be printed.\nThe\nfaketime\ncommand is especially useful to test various scenarios with the above command; it comes with the\nlibfaketime\npackage.\nSpecial event expressions like\ndaily\nand\nweekly\nrefer to\nspecific start times\nand thus any timers sharing such calendar events will start simultaneously. Timers sharing start events can cause poor system performance if the timers' services compete for system resources. The\nRandomizedDelaySec\noption in the\n[Timer]\nsection avoids this problem by randomly staggering the start time of each timer. See\nsystemd.timer(5)\n.\nAdd the option\nAccuracySec=1us\nto the\n[Timer]\nsection, to avoid the inaccuracy of the\n1m\ndefault value of\nAccuracySec\n. Also see\nsystemd.timer(5)\n.\nSome options (\nWakeSystem\n) may require specific system capabilities and prevent a timer from starting, resulting in the following error messages: \"Failed to enter waiting state: Operation not supported\" and \"Failed with result 'resources'.\".\nTransient timer units\nOne can use\nsystemd-run\nto create transient\n.timer\nunits. That is, one can set a command to run at a specified time without having a service file. For example the following command touches a file after 30 seconds:\n# systemd-run --on-active=30 /bin/touch /tmp/foo\nOne can also specify a pre-existing service file that does not have a timer file. For example, the following starts the systemd unit named\nsomeunit\n.service\nafter 12.5 hours have elapsed:\n# systemd-run --on-active=\"12h 30m\" --unit\nsomeunit\n.service\nSee\nsystemd-run(1)\nfor more information and examples.\nAs a cron replacement\nAlthough\ncron\nis arguably the most well-known job scheduler,\nsystemd\ntimers can be an alternative.\nBenefits\nThe main benefits of using timers come from each job having its own\nsystemd\nservice. Some of these benefits are:\nJobs can be easily started independently of their timers. This simplifies debugging.\nEach job can be configured to run in a specific environment (see\nsystemd.exec(5)\n).\nJobs can be attached to\ncgroups\n.\nJobs can be set up to depend on other\nsystemd\nunits.\nJobs are logged in the\nsystemd\njournal for easy debugging.\nCaveats\nSome things that are easy to do with cron are difficult to do with timer units alone:\nCreation: to set up a timed job with\nsystemd\nyou need to create two files and run\nsystemctl\ncommands, compared to adding a single line to a crontab.\nEmails: there is no built-in equivalent to cron's\nMAILTO\nfor sending emails on job failure. See\nsystemd#Notifying with e-mail\nfor an example of setting up a similar functionality using\nOnFailure=\n.\nAlso note that\nuser\ntimer units will only run during an active user login session by default. However,\nlingering\ncan enable services to run at boot even when the user has no active login session.\nUsing a crontab\nSeveral of the caveats can be worked around by installing a package that parses a traditional crontab to configure the timers.\nsystemd-cron-next-git\nAUR\nand\nsystemd-cron\nAUR\nare two such packages. These can provide the missing\nMAILTO\nfeature.\nAlso, like with crontabs, a unified view of all scheduled jobs can be obtained with\nsystemctl\n. See\n#Management\n.\nManually\nOutside of migrating from an existing crontab, using the same periodicity as cron can be desired. To avoid the tedious task of creating a timer for each service to start periodically, use a\ntemplate unit\n, for example:\n/etc/systemd/system/monthly@.timer\n[Unit]\nDescription=Monthly Timer for %i service\n[Timer]\nOnCalendar=*-*-1 02:00:00\nAccuracySec=6h\nRandomizedDelaySec=1h\nPersistent=true\nUnit=%i.service\n[Install]\nWantedBy=default.target\nNote\nSee\nsystemd.timer(5) § OPTIONS\nfor the importance of using\nRandomizedDelaySec\nand not only\nAccuracySec\nto avoid all units started by the timer firing at once.\nThen one only needs to\nenable/start\nmonthly@\nunit_name\n.timer\n.\nTip\nThe template units can be nested, e.g. one could\nenable/start\nmonthly@btrfs-scrub@mnt-$(systemd-escape bbb76c63-e4ac-4e39-8897-a120c5d30686).timer\n.\nTips and tricks\nHandling \"time to live\"\nSome software will track the time elapsed since they last ran, for example blocking the update of a database if the last download ended less than 24 hours ago.\nBy default, timers do not track when the task they launched has ended. To work around this, we can use\nOnUnitInactiveSeconds\n:\n/etc/systemd/system/daily-inactive@.timer\n[Unit]\nDescription=Launch %i service 24hours after it deactivated\n[Timer]\nOnUnitInactiveSec=1day1sec\nUnit=%i.service\nPersistent=true\n[Install]\nWantedBy=default.target\nTip\nWith\nRestart=on-failure\nalong with\nRestartSec\n, it is possible to have a unit rerun after failure and success according to different schedules, see\nsystemd.service(5) § OPTIONS\n.\nDesktop notifications\nThe\nsystemd-timer-notify\nAUR\nprovides an automatic desktop notification that helps you notice when a systemd service is triggered by a timer and is running. The notification will automatically close when the service finishes.\nThis can be helpful for understanding why CPU usage is high or for preventing a shutdown when a backup service hasn't finished.\nFor more details and configuration options, visit\nhttps://gitlab.com/Zesko/systemd-timer-notify\nSee also\nsystemd.timer(5)\nFedora:Features/SystemdCalendarTimers\nGentoo:Systemd#Timer services\nsystemd-cron\n— provides systemd units to run cron scripts; using\nsystemd-crontab-generator\nto convert crontabs\nhttps://github.com/systemd-cron/systemd-cron\n||\nsystemd-cron\nAUR\nsystemd-cron-next\n— tool to generate timers/services from crontab and anacrontab files\nhttps://github.com/systemd-cron/systemd-cron-next\n||\nsystemd-cron-next-git\nAUR\nSystemd Timers for Scheduling Tasks\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Systemd/Timers&oldid=848943\n\"\nCategory\n:\nSystem administration\nSearch\nSearch\nsystemd/Timers\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Systemd/Timers"}}
{"text": "iptables - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\niptables\n7 languages\nDeutsch\nEspañol\nFrançais\nMagyar\n日本語\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nnftables\nFail2ban\nsshguard\nSimple stateful firewall\nSysctl#TCP/IP stack hardening\nUncomplicated Firewall\niptables\nis a command line utility for configuring Linux kernel\nfirewall\nimplemented within the\nNetfilter\nproject. The term\niptables\nis also commonly used to refer to this kernel-level firewall. It can be configured directly with iptables, or by using one of the many\nconsole\nand\ngraphical\nfront-ends.\niptables\nis used for\nIPv4\nand\nip6tables\nis used for\nIPv6\n. Both\niptables\nand\nip6tables\nhave the same syntax, but some options are specific to either IPv4 or IPv6.\nNote\niptables\nis a legacy framework,\nnftables\naims to provide a modern replacement including a compatibility layer.\nInstallation\nThe stock Arch Linux kernel is compiled with iptables support. You will only need to\ninstall\nthe userland utilities, which are provided by the package\niptables\n. The\niptables\npackage is an indirect dependency of the\nbase\nmeta package\n, so it should be installed on your system by default.\nFront-ends\nConsole\nArno's firewall\n— Secure firewall for both single and multi-homed machines. Very easy to configure, handy to manage and highly customizable. Supports: NAT and SNAT, port forwarding, ADSL ethernet modems with both static and dynamically assigned IPs, MAC address filtering, stealth port scan detection, DMZ and DMZ-2-LAN forwarding, protection against SYN/ICMP flooding, extensive user definable logging with rate limiting to prevent log flooding, all IP protocols and VPNs such as IPsec, plugin support to add extra features.\nhttps://rocky.eld.leidenuniv.nl/\n||\narno-iptables-firewall\nAUR\nferm\n— Tool to maintain complex firewalls, without having the trouble to rewrite the complex rules over and over again. It allows the entire firewall rule set to be stored in a separate file, and to be loaded with one command. The firewall configuration resembles structured programming-like language, which can contain levels and lists.\nhttp://ferm.foo-projects.org/\n||\nferm\nFireHOL\n— Language to express firewalling rules, not just a script that produces some kind of a firewall. It makes building even sophisticated firewalls easy - the way you want it.\nhttps://firehol.sourceforge.net/\n||\nfirehol\nAUR\nFiretable\n— Tool to maintain an IPtables firewall. Each interface can be configured separately via its own configuration file, which holds an easy and human readable syntax.\nhttps://gitlab.com/hsleisink/firetable\n||\nfiretable\nAUR\nfirewalld\n(firewall-cmd)\n— Daemon and console interface for configuring network and firewall zones as well as setting up and configuring firewall rules.\nhttps://firewalld.org/\n||\nfirewalld\nShorewall\n— High-level tool for configuring Netfilter. You describe your firewall/gateway requirements using entries in a set of configuration files.\nhttp://www.shorewall.net/\n||\nshorewall\nAUR\nUncomplicated Firewall\n— Simple front-end for iptables.\nhttps://launchpad.net/ufw\n||\nufw\nPeerGuardian\n(pglcmd)\n— Privacy oriented firewall application. It blocks connections to and from hosts specified in huge block lists (thousands or millions of IP ranges).\nhttps://sourceforge.net/projects/peerguardian/\n||\npgl\nAUR\nVuurmuur\n— Powerful firewall manager. It has a simple and easy to learn configuration that allows both simple and complex configurations. The configuration can be fully configured through an\nncurses\nGUI, which allows secure remote administration through SSH or on the console. Vuurmuur supports traffic shaping, has powerful monitoring features, which allow the administrator to look at the logs, connections and bandwidth usage in realtime.\nhttps://www.vuurmuur.org/\n||\nvuurmuur\nAUR\nGraphical\nFirewall Builder\n— GUI firewall configuration and management tool that supports iptables (netfilter), ipfilter, pf, ipfw, Cisco PIX (FWSM, ASA) and Cisco routers extended access lists. The program runs on Linux, FreeBSD, OpenBSD, Windows and macOS and can manage both local and remote firewalls.\nhttps://fwbuilder.sourceforge.net/\n||\nfwbuilder\nfirewalld\n(firewall-config)\n— Daemon and graphical interface for configuring network and firewall zones as well as setting up and configuring firewall rules.\nhttps://firewalld.org/\n||\nfirewalld\nGufw\n— GTK-based front-end to\nufw\nwhich happens to be a CLI front-end to iptables (gufw->ufw->iptables). It is super easy and super simple to use.\nhttps://gufw.org/\n||\ngufw\nPeerGuardian\nGUI (pglgui)\n— Privacy oriented firewall application. It blocks connections to and from hosts specified in huge block lists (thousands or millions of IP ranges).\nhttps://sourceforge.net/projects/peerguardian/\n||\npgl\nAUR\nPortmaster\n— Portmaster is a free and open-source application firewall with defaults to improve your privacy.\nhttps://safing.io/\n||\nportmaster-bin\nAUR\nBasic concepts\niptables is used to inspect, modify, forward, redirect, and/or drop IP packets.  The code for filtering IP packets is already built into the kernel and is organized into a collection of\ntables\n, each with a specific purpose.  The tables are made up of a set of predefined\nchains\n, and the chains contain rules which are traversed in order. Each rule consists of a predicate of potential matches and a corresponding action (called a\ntarget\n) which is executed if the predicate is true; i.e. the conditions are matched.  If the IP packet reaches the end of a built-in chain, including an empty chain, then the chain's\npolicy\ntarget determines the final destination of the IP packet.  iptables is the user utility which allows you to work with these chains/rules.  Most new users find the complexities of linux IP routing quite daunting, but, in practice, the most common use cases (NAT and/or basic Internet firewall) are considerably less complex.\nThe key to understanding how iptables works is\nthis chart\n.  The lowercase word on top is the table and the uppercase word below is the chain.  Every IP packet that comes in\non any network interface\npasses through this flow chart from top to bottom.  A common misconception is that packets entering from, say, an internal interface are handled differently than packets from an Internet-facing interface.  All interfaces are handled the same way; it is up to you to define rules that treat them differently. Of course, some packets are intended for local processes, hence they come in from the top of the chart and stop at <Local Process>, while other packets are generated by local processes; hence they start at <Local Process> and proceed downward through the flowchart.  A detailed explanation of how this flow chart works can be found\nhere\n.\nIn the vast majority of use cases, you will not need to use the\nraw\n,\nmangle\n, or\nsecurity\ntables at all. Consequently, the following chart depicts a simplified network packet flow through\niptables\n:\nXXXXXXXXXXXXXXXXXX\nXXX     Network    XXX\nXXXXXXXXXXXXXXXXXX\n+\n|\nv\n+-------------+              +------------------+\n|table: filter| <---+        | table: nat       |\n|chain: INPUT |     |        | chain: PREROUTING|\n+-----+-------+     |        +--------+---------+\n|             |                 |\nv             |                 v\n[local process]     |           ****************          +--------------+\n|             +---------+ Routing decision +------> |table: filter |\nv                         ****************          |chain: FORWARD|\n****************                                           +------+-------+\nRouting decision                                                  |\n****************                                                  |\n|                                                          |\nv                        ****************                  |\n+-------------+       +------>  Routing decision  <---------------+\n|table: nat   |       |         ****************\n|chain: OUTPUT|       |               +\n+-----+-------+       |               |\n|               |               v\nv               |      +-------------------+\n+--------------+      |      | table: nat        |\n|table: filter | +----+      | chain: POSTROUTING|\n|chain: OUTPUT |             +--------+----------+\n+--------------+                      |\nv\nXXXXXXXXXXXXXXXXXX\nXXX    Network     XXX\nXXXXXXXXXXXXXXXXXX\nTables\niptables contains five tables:\nraw\nis used only for configuring packets so that they are exempt from connection tracking.\nfilter\nis the default table, and is where all the actions typically associated with a firewall take place.\nnat\nis used for\nnetwork address translation\n(e.g. port forwarding).\nmangle\nis used for specialized packet alterations.\nsecurity\nis used for\nMandatory Access Control\nnetworking rules (e.g. SELinux -- see\nthis article\nfor more details).\nIn most common use cases, you will only use two of these:\nfilter\nand\nnat\n.  The other tables are aimed at complex configurations involving multiple routers and routing decisions and are in any case beyond the scope of these introductory remarks.\nChains\nTables consist of\nchains\n, which are lists of rules which are followed in order. The default table,\nfilter\n, contains three built-in chains:\nINPUT\n,\nOUTPUT\nand\nFORWARD\nwhich are activated at different points of the packet filtering process, as illustrated in the\nflow chart\n. The nat table includes\nPREROUTING\n,\nPOSTROUTING\n, and\nOUTPUT\nchains.\nSee\niptables(8)\nfor a description of built-in chains in other tables.\nBy default, none of the chains contain any rules.  It is up to you to append rules to the chains that you want to use.  Chains\ndo\nhave a default policy, which is generally set to\nACCEPT\n, but can be reset to\nDROP\n, if you want to be sure that nothing slips through your ruleset. The default policy always applies at the end of a chain only. Hence, the packet has to pass through all existing rules in the chain before the default policy is applied.\nUser-defined chains can be added to make rulesets more efficient or more easily modifiable.  See\nSimple stateful firewall\nfor an example of how user-defined chains are used.\nRules\nPacket filtering is based on\nrules\n, which are specified by multiple\nmatches\n(conditions the packet must satisfy so that the rule can be applied), and one\ntarget\n(action taken when the packet matches all conditions).  The typical things a rule might match on are what interface the packet came in on (e.g eth0 or eth1), what type of packet it is (ICMP, TCP, or UDP), or the destination port of the packet.\nTargets are specified using the\n-j\nor\n--jump\noption. Targets can be either user-defined chains (i.e. if these conditions are matched, jump to the following user-defined chain and continue processing there), one of the special built-in targets, or a target extension. Built-in targets are\nACCEPT\n,\nDROP\n,\nQUEUE\nand\nRETURN\n, target extensions are, for example,\nREJECT\nand\nLOG\n. If the target is a built-in target, the fate of the packet is decided immediately and processing of the packet in current table is stopped. If the target is a user-defined chain and the fate of the packet is not decided by this second chain, it will be filtered against the remaining rules of the original chain. Target extensions can be either\nterminating\n(as built-in targets) or\nnon-terminating\n(as user-defined chains), see\niptables-extensions(8)\nfor details.\nTraversing Chains\nA network packet received on any interface traverses the traffic control chains of tables in the order shown in the\nflow chart\n. The first routing decision involves deciding if the final destination of the packet is the local machine (in which case the packet traverses through the\nINPUT\nchains) or elsewhere (in which case the packet traverses through the\nFORWARD\nchains). Subsequent routing decisions involve deciding what interface to assign to an outgoing packet. At each chain in the path, every rule in that chain is evaluated in order and whenever a rule matches, the corresponding target/jump action is executed.  The 3 most commonly used targets are\nACCEPT\n,\nDROP\n, and jump to a user-defined chain.  While built-in chains can have default policies, user-defined chains can not.  If every rule in a chain that you jumped fails to provide a complete match, the packet is dropped back into the calling chain; see the following\nillustration\n. If at any time a complete match is achieved for a rule with a\nDROP\ntarget, the packet is dropped and no further processing is done. If a packet reaches a jump to the ACCEPT target, it will not traverse any further rules of the chain and subsequent chains of the table. Its processing will jump to the first chain of the next table in order. See also\nTraversing tables and chains\nand\nAccept Target\nof the frozentux tutorial.\nModules\nThere are many modules which can be used to extend iptables such as connlimit, conntrack, limit and recent. These modules add extra functionality to allow complex filtering rules.\nConfiguration and usage\nBy default,\niptables\nprovides an empty set of rules in\n/etc/iptables/iptables.rules\n. To be able to load iptables rules automatically on boot, you can\nenable\nthe\niptables.service\nunit provided by iptables or\nstart\nthe\nsystemd\nservice unit to load iptables rules at once.\nSimilarly, iptables rules for IPv6 are, by default, stored in\n/etc/iptables/ip6tables.rules\n, which is read by\nip6tables.service\n. You can start it the same way as above.\nAfter adding rules via command-line as shown in the following sections, the configuration file is not changed automatically — you have to save it manually:\n# iptables-save -f /etc/iptables/iptables.rules\nIf you edit the configuration file manually, you have to\nreload\niptables.\nOr you can load it directly through iptables:\n# iptables-restore /etc/iptables/iptables.rules\nFrom the command line\nShowing the current rules\nThe basic command to list current rules is\n--list-rules\n(\n-S\n), which is similar in output format to the\niptables-save\nutility. The main difference of the two is that the latter outputs the rules of all tables per default, while all\niptables\ncommands default to the\nfilter\ntable only.\nWhen working with iptables on the command line, the\n--list\n(\n-L\n) command accepts more modifiers and shows more information. For example, you can check the current ruleset and the number of hits per rule by using the command:\n# iptables -nvL\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\npkts bytes target     prot opt in     out     source               destination\nChain FORWARD (policy ACCEPT 0 packets, 0 bytes)\npkts bytes target     prot opt in     out     source               destination\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\npkts bytes target     prot opt in     out     source               destination\nIf the output looks like the above, then there are no rules (i.e. nothing is blocked) in the default\nfilter\ntable. Other tables can be specified with the\n-t\noption.\nTo show the line numbers when listing rules, append\n--line-numbers\nto that input. The line numbers are a useful shorthand when\n#Editing rules\non the command line.\nResetting rules\nYou can flush and reset iptables to default using these commands:\n# iptables -F\n# iptables -X\n# iptables -t nat -F\n# iptables -t nat -X\n# iptables -t mangle -F\n# iptables -t mangle -X\n# iptables -t raw -F\n# iptables -t raw -X\n# iptables -t security -F\n# iptables -t security -X\n# iptables -P INPUT ACCEPT\n# iptables -P FORWARD ACCEPT\n# iptables -P OUTPUT ACCEPT\nThe\n-F\ncommand with no arguments flushes all the chains in its current table. Similarly,\n-X\ndeletes all empty non-default chains in a table.\nIndividual chains may be flushed or deleted by following\n-F\nand\n-X\nwith a\n[chain]\nargument.\nEditing rules\nRules can be edited by appending\n-A\na rule to a chain, inserting\n-I\nit at a specific position on the chain, replacing\n-R\nan existing rule, or deleting\n-D\nit. The first three commands are exemplified in the following.\nFirst of all, our computer is not a router (unless, of course, it\nis a router\n). We want to change the default policy on the\nFORWARD\nchain from\nACCEPT\nto\nDROP\n.\n# iptables -P FORWARD DROP\nWarning\nThe rest of this section is meant to teach the syntax and concepts behind iptables rules. It is not intended as a means for securing servers. For improving the security of your system, see\nSimple stateful firewall\nfor a minimally secure iptables configuration and\nSecurity\nfor hardening Arch Linux in general.\nThe\nDropbox\nLAN sync feature\nbroadcasts packets every 30 seconds\nto all computers it can see. If we happen to be on a LAN with Dropbox clients and do not use this feature, then we might wish to reject those packets.\n# iptables -A INPUT -p tcp --dport 17500 -j REJECT --reject-with icmp-port-unreachable\n# iptables -nvL --line-numbers\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\n1        0     0 REJECT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:17500 reject-with icmp-port-unreachable\nChain FORWARD (policy DROP 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nNote\nWe use\nREJECT\nrather than\nDROP\nhere, because\nRFC 1122\nrequires hosts return ICMP errors whenever possible, instead of dropping packets.\nThis page\nexplains why it is almost always better to REJECT rather than DROP packets.\nNow, say we change our mind about Dropbox and decide to install it on our computer. We also want to LAN sync, but only with one particular IP on our network. So we should use\n-R\nto replace our old rule. Where\n10.0.0.85\nis our other IP:\n# iptables -R INPUT 1 -p tcp --dport 17500 ! -s 10.0.0.85 -j REJECT --reject-with icmp-port-unreachable\n# iptables -nvL --line-numbers\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\n1        0     0 REJECT     tcp  --  *      *      !10.0.0.85            0.0.0.0/0            tcp dpt:17500 reject-with icmp-port-unreachable\nChain FORWARD (policy DROP 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nWe have now replaced our original rule with one that allows\n10.0.0.85\nto access port\n17500\non our computer. But now we realize that this is not scalable. If our friendly Dropbox user is attempting to access port\n17500\non our device, we should allow them immediately, not test them against any firewall rules that might come afterwards!\nSo we write a new rule to allow our trusted user immediately. Using\n-I\nto insert the new rule before our old one:\n# iptables -I INPUT -p tcp --dport 17500 -s 10.0.0.85 -j ACCEPT -m comment --comment \"Friendly Dropbox\"\n# iptables -nvL --line-numbers\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\n1        0     0 ACCEPT     tcp  --  *      *       10.0.0.85            0.0.0.0/0            tcp dpt:17500 /* Friendly Dropbox */\n2        0     0 REJECT     tcp  --  *      *      !10.0.0.85            0.0.0.0/0            tcp dpt:17500 reject-with icmp-port-unreachable\nChain FORWARD (policy DROP 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nAnd replace our second rule with one that rejects everything on port\n17500\n:\n# iptables -R INPUT 2 -p tcp --dport 17500 -j REJECT --reject-with icmp-port-unreachable\nOur final rule list now looks like this:\n# iptables -nvL --line-numbers\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\n1        0     0 ACCEPT     tcp  --  *      *       10.0.0.85            0.0.0.0/0            tcp dpt:17500 /* Friendly Dropbox */\n2        0     0 REJECT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:17500 reject-with icmp-port-unreachable\nChain FORWARD (policy DROP 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination\nAllowing multicast traffic\nProtocols that use multicast identification (e.g.\nSANE\nsearching for network scanners) will send traffic to the network's broadcast IP and responses will come back from a specific client's IP. Since these IP addresses are different, iptables will not recognize the response as\nRELATED\nor\nESTABLISHED\n, and it will block the response. See\n[1]\nfor how to accept multicast traffic without creating an overly-permissive firewall.\nFirst, create an\nipset\nhash container. The timeout is the window of time to accept client responses.\n# ipset create upnp hash:ip,port timeout 3\nSecond, create a rule to add outgoing multicast traffic to the ipset hash.\n# iptables -A OUTPUT -d 239.255.255.250/32 -p udp -m udp -j SET --add-set upnp src,src --exist\nThird, create a rule to allow incoming traffic that matches against the ipset hash.\n# iptables -A INPUT -p udp -m set --match-set upnp dst,dst -j ACCEPT\nFinally, remember to save the new rules (see\n#Configuration and usage\nand\nipset#Making ipset persistent\n), and ensure\niptables.service\nand\nipset.service\nare\nenabled\nso the rules load upon system start.\nGuides\nSimple stateful firewall\nRouter\nLogging\nThe\nLOG\ntarget can be used to log packets that hit a rule. Unlike other targets like\nACCEPT\nor\nDROP\n, the packet will continue moving through the chain after hitting a\nLOG\ntarget. This means that in order to enable logging for all dropped packets, you would have to add a duplicate\nLOG\nrule before each\nDROP\nrule. Since this reduces efficiency and makes things less simple, a\nlogdrop\nchain can be created instead.\nCreate the chain with:\n# iptables -N logdrop\nAnd add the following rules to the newly created chain:\n# iptables -A logdrop -m limit --limit 5/m --limit-burst 10 -j LOG\n# iptables -A logdrop -j DROP\nExplanation for\nlimit\nand\nlimit-burst\noptions is given\nbelow\n.\nNow whenever we want to drop a packet and log this event, we just jump to the\nlogdrop\nchain, for example:\n# iptables -A INPUT -m conntrack --ctstate INVALID -j logdrop\nLimiting log rate\nThe above\nlogdrop\nchain uses the limit module to prevent the\niptables\nlog from growing too large or causing needless hard drive writes. Without limiting an erroneously configured service trying to connect, or an attacker, could fill the drive (or at least the\n/var\npartition) by causing writes to the iptables log.\nThe limit module is called with\n-m limit\n. You can then use\n--limit\nto set an average rate and\n--limit-burst\nto set an initial burst rate. In the\nlogdrop\nexample above:\niptables -A logdrop -m limit --limit 5/m --limit-burst 10 -j LOG\nappends a rule which will log all packets that pass through it. The first 10 consecutive packets will be logged, and from then on only 5 packets per minute will be logged. The \"limit burst\" count is reset every time the \"limit rate\" is not broken, i.e. logging activity returns to normal automatically.\nViewing logged packets\nLogged packets are visible as kernel messages in the\nsystemd journal\n.\nTo view all packets that were logged since the machine was last booted:\n# journalctl -k --grep=\"IN=.*OUT=.*\"\nsyslog-ng\nAssuming you are using\nsyslog-ng\n, you can control where iptables' log output goes in\nsyslog-ng.conf\n. Replace:\nfilter f_everything { level(debug..emerg) and not facility(auth, authpriv); };\nto\nfilter f_everything { level(debug..emerg) and not facility(auth, authpriv) and not filter(f_iptables); };\nThis will stop logging iptables output to\n/var/log/everything.log\n.\nIf you also want iptables to log to a different file than\n/var/log/iptables.log\n, you can simply change the file value of destination\nd_iptables\nhere (still in\nsyslog-ng.conf\n):\ndestination d_iptables { file(\"/var/log/iptables.log\"); };\nulogd\nulogd\nis a specialized userspace packet logging daemon for netfilter that can replace the default\nLOG\ntarget.\nSee also\nWikipedia article\nPort knocking\nOfficial iptables web site\niptables Tutorial 1.2.2\nby Oskar Andreasson\nDebian Wiki - iptables\nSecure use of connection tracking helpers\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Iptables&oldid=849975\n\"\nCategory\n:\nFirewalls\nSearch\nSearch\niptables\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/iptables"}}
{"text": "nftables - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nnftables\n6 languages\nDeutsch\nEspañol\nMagyar\n日本語\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\niptables\nFirewalld\nnftables\nis a netfilter project that aims to replace the existing {ip,ip6,arp,eb}tables framework. It provides a new packet filtering framework, a new user-space utility (nft), and a compatibility layer for {ip,ip6}tables. It uses the existing hooks, connection tracking system, user-space queueing component, and logging subsystem of netfilter.\nIt consists of three main components: a kernel implementation, the libnl\nnetlink\ncommunication and the nftables user-space front-end.\nThe kernel provides a netlink configuration interface, as well as run-time rule-set evaluation, libnl contains the low-level functions for communicating with the kernel, and the nftables front-end is what the user interacts with via nft.\nYou can also visit the\nofficial nftables wiki page\nfor more information.\nInstallation\nInstall\nthe userspace utilities package\nnftables\n.\nAlternatively,\ninstalling\niptables-nft\n, which includes\nnftables\nas a dependency, will automatically uninstall\niptables\n(an indirect dependency of the\nbase\nmeta package\n) and prevent conflicts between\niptables\nand\nnftables\nwhen used together. See\n#Using iptables-nft\nfor details.\nNote\niptables-nft\nworks by providing implementations of the\niptables\ncommands that actually create and act on the\nnftables\nrules. However, rules created using the old\niptables-legacy\ntools are separate objects, and\niptables-nft\nwill warn you if they are present.\nFront-ends\nTip\nMost\niptables front-ends\nfeature no direct or indirect support of nftables, but may introduce it.\n[1]\nOne graphical front-end that supports both, nftables and iptables, is\nfirewalld\n.\n[2]\n.\nufw\nis supported via a compatibility layer\niptables-nft\n.\nfirewalld\n(firewall-cmd)\n— Daemon and console interface for configuring network and firewall zones as well as setting up and configuring firewall rules.\nhttps://firewalld.org/\n||\nfirewalld\nnft-blackhole\n— Script / daemon to blocking IP in nftables by country and black lists.\nhttps://github.com/tomasz-c/nft-blackhole\n||\nnft-blackhole\nAUR\nufw\n— Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall.\nhttps://help.ubuntu.com/community/UFW\n||\nufw\nreaction\n— A daemon that scans program outputs for repeated patterns, and takes action. A lightweight alternative to fail2ban.\nhttps://framagit.org/ppom/reaction\n||\nreaction\nAUR\nUsage\nTip\nIf you already have an iptables rule, you can convert the iptables rule to an nftables rule, see\n[3]\n.\nnftables\nmakes\nno\ndistinction between temporary rules made in the command line and permanent ones loaded from or saved to a file.\nAll rules have to be created or loaded using\nnft\ncommand line utility.\nRefer to\n#Configuration\nsection on how to use.\nCurrent ruleset can be printed with:\n# nft list ruleset\nRemove all ruleset leaving the system with no firewall:\n# nft flush ruleset\nRead ruleset from\n/etc/nftables.conf\nby\nrestarting\nnftables.service\n.\nSimple firewall\nnftables\ncomes with a simple and secure firewall configuration stored in the\n/etc/nftables.conf\nfile.\nThe\nnftables.service\nwill load rules from that file when\nstarted or enabled\n.\nConfiguration\nnftables user-space utility\nnft\nperforms most of the rule-set evaluation before handing rule-sets to the kernel. Rules are stored in chains, which in turn are stored in tables. The following sections indicate how to create and modify these constructs.\nTo read input from a file use the\n-f\n/\n--file\noption:\n# nft --file\nfilename\nNote that any rules already loaded are\nnot\nautomatically flushed.\nSee\nnft(8)\nfor a complete list of all commands.\nTables\nThis article or section needs expansion.\nReason:\nClarify the difference between tables in iptables and nftables: in the latter they have a \"namespacing\" nature and can contain different chain types.\n[4]\n(Discuss in\nTalk:Nftables\n)\nTables hold\n#Chains\n. Unlike tables in iptables, there are no built-in tables in nftables. The number of tables and their names is up to the user. However, each table only has one address family and only applies to packets of this family. Tables can have one of five families specified:\nnftables family\niptables utility\nip\niptables\nip6\nip6tables\ninet\niptables and ip6tables\narp\narptables\nbridge\nebtables\nip\n(i.e. IPv4) is the default family and will be used if family is not specified.\nTo create one rule that applies to both IPv4 and IPv6, use\ninet\n.\ninet\nallows for the unification of the\nip\nand\nip6\nfamilies to make defining rules for both easier.\nSee\nnft(8) § ADDRESS FAMILIES\nfor a complete description of address families.\nIn all of the following,\nfamily_type\nis optional, and if not specified is set to\nip\n.\nCreate table\nThe following adds a new table:\n# nft add table\nfamily_type\ntable_name\nList tables\nTo list all tables:\n# nft list tables\nList chains and rules in a table\nTo list all chains and rules of a specified table:\n# nft list table\nfamily_type\ntable_name\nFor example, to list all the rules of the\nmy_table\ntable of the\ninet\nfamily:\n# nft list table inet my_table\nDelete table\nTo delete a table:\n# nft delete table\nfamily_type\ntable_name\nThis will destroy all chains in the table.\nFlush table\nTo flush/clear all rules from a table:\n# nft flush table\nfamily_type\ntable_name\nChains\nThe purpose of chains is to hold\n#Rules\n. Unlike chains in iptables, there are no built-in chains in nftables. This means that if no chain uses any types or hooks in the netfilter framework, packets that would flow through those chains will not be touched by nftables, unlike iptables.\nChains have two types. A\nbase\nchain is an entry point for packets from the networking stack, where a hook value is specified. A\nregular\nchain may be used as a jump target for better organization.\nSee the\ntraffic flow diagram\nshowing the ordering between individual hooks. Within a given hook, netfilter performs operations in order of increasing numerical priority.\nIn all of the following\nfamily_type\nis optional, and if not specified is set to\nip\n.\nCreate chain\nBase chain\nTo add a base chain it is mandatory to specify type, hook and priority values:\n# nft add chain\nfamily_type\ntable_name\nchain_name\n'{ type\nchain_type\nhook\nhook_type\npriority\npriority_value\n; policy\npolicy\n;}'\nchain_type\ncan be\nfilter\n,\nroute\n, or\nnat\n.\nFor IPv4/IPv6/Inet address families\nhook_type\ncan be\nprerouting\n,\ninput\n,\nforward\n,\noutput\n, or\npostrouting\n. See\nnft(8) § CHAINS\nfor a list of supported\nfamily_type\n,\nchain_type\nand\nhook_type\ncombinations.\npriority_value\ntakes either a priority name or an integer value. See\nnft(8) § CHAINS\nfor a list of standard priority names and values. Chains with lower numbers are processed first and can be negative.\n[5]\nOptionally base chains can have a\npolicy\n(\ndrop\nor the default\naccept\n), to define what happens to packets not explicitly accepted or refused in contained rules.\nFor example, to add a base chain that filters input packets:\n# nft add chain inet my_table my_chain '{ type filter hook input priority 0; }'\nReplace\nadd\nwith\ncreate\nin any of the above to add a new chain but return an error if the chain already exists.\nRegular chain\nThe following adds a regular chain named\nchain_name\nto the table named\ntable_name\n:\n# nft add chain\nfamily_type\ntable_name\nchain_name\nFor example, to add a regular chain named\nmy_tcp_chain\nto the\nmy_table\ntable of the\ninet\naddress family:\n# nft add chain inet my_table my_tcp_chain\nList chains\nThe following lists all chains without rules (see\n#List rules\n) of a\nfamily_type\n:\n# nft list chains\nfamily_type\nFor example, the following lists the chains of ipv6:\n# nft list chains ip6\nif you omit the family_type all chains are printed.\nEdit a chain\nTo edit a chain, simply call it by its name and define the rules you want to change.\n# nft chain\nfamily_type table_name chain_name\n'{ [ type\nchain_type\nhook\nhook_type\ndevice\ndevice_name\npriority\npriority_value\n; policy\npolicy_type\n; ] }'\nFor example, to change the\nmy_input\nchain policy of the default table from\naccept\nto\ndrop\n# nft chain inet my_table my_input '{ policy drop ; }'\nDelete a chain\nTo delete a chain:\n# nft delete chain\nfamily_type\ntable_name\nchain_name\nThe chain must not contain any rules or be a jump target.\nFlush rules from a chain\nTo flush rules from a chain:\n# nft flush chain\nfamily_type\ntable_name\nchain_name\nRules\nRules are either constructed from expressions or statements and are contained within chains.\nAdd rule\nTo add a rule to a chain:\n# nft add rule\nfamily_type\ntable_name\nchain_name\nhandle\nhandle_value\nstatement\nThe rule is appended at\nhandle_value\n, which is optional. If not specified, the rule is appended to the end of the chain.\nThe\n--handle\nswitch, which can be added to any valid list command, must be used to determine a rule handle. This switch tells\nnft\nto list the handles in its output. The\n--numeric\nargument is useful for viewing some numeric output, like unresolved IP addresses.\n# nft --handle --numeric list chain inet my_table my_input\ntable inet my_table {\nchain input {\ntype filter hook input priority 0;\nip saddr 127.0.0.1 accept # handle 10\n}\n}\nTo prepend the rule to the position:\n# nft insert rule\nfamily_type\ntable_name\nchain_name\nhandle\nhandle_value\nstatement\nIf\nhandle_value\nis not specified, the rule is prepended to the chain.\nExpressions\nTypically a\nstatement\nincludes some expression to be matched and then a verdict statement. Verdict statements include\naccept\n,\ndrop\n,\nqueue\n,\ncontinue\n,\nreturn\n,\njump\nchain_name\n, and\ngoto\nchain_name\n. Other statements than verdict statements are possible. See\nnft(8)\nfor more information.\nThere are various expressions available in nftables and, for the most part, coincide with their iptables counterparts. The most noticeable difference is that there are no generic or implicit matches. A generic match was one that was always available, such as\n--protocol\nor\n--source\n. Implicit matches were protocol-specific, such as\n--sport\nwhen a packet was determined to be TCP.\nThe following is an incomplete list of the matches available:\nmeta    (meta properties, e.g. interfaces)\nicmp    (ICMP protocol)\nicmpv6  (ICMPv6 protocol)\nip      (IP protocol)\nip6     (IPv6 protocol)\ntcp     (TCP protocol)\nudp     (UDP protocol)\nsctp    (SCTP protocol)\nct      (connection tracking)\nThe following is an incomplete list of match arguments (for a more complete list, see\nnft(8)\n):\nmeta:\noif <output interface INDEX>\niif <input interface INDEX>\noifname <output interface NAME>\niifname <input interface NAME>\n(oif and iif accept string arguments and are converted to interface indexes)\n(oifname and iifname are more dynamic, but slower because of string matching)\nicmp:\ntype <icmp type>\nicmpv6:\ntype <icmpv6 type>\nip:\nprotocol <protocol>\ndaddr <destination address>\nsaddr <source address>\nip6:\ndaddr <destination address>\nsaddr <source address>\ntcp:\ndport <destination port>\nsport <source port>\nudp:\ndport <destination port>\nsport <source port>\nsctp:\ndport <destination port>\nsport <source port>\nct:\nstate <new | established | related | invalid>\nList rules\nThe following lists all rules of a chain:\n# nft list chain\nfamily_type\ntable_name\nchain_name\nFor example, the following lists the rules of the chain named\nmy_output\nin the\ninet\ntable named\nmy_table\n:\n# nft list chain inet my_table my_output\nDeletion\nIndividual rules can only be deleted by their handles. Obtaining the handles was shown at\n#Add rule\n. Assuming\n# nft --handle --numeric list chain inet my_table my_input\ntable inet my_table {\nchain input {\ntype filter hook input priority 0;\nip saddr 127.0.0.1 accept # handle 10\n}\n}\n# nft delete rule inet my_table my_input handle 10\ndeletes it.\nAll the chains in a table can be flushed with the\nnft flush table\ncommand. Individual chains can be flushed using either the\nnft flush chain\nor\nnft delete rule\ncommands.\n# nft flush table\ntable_name\n# nft flush chain\nfamily_type\ntable_name\nchain_name\n# nft delete rule\nfamily_type\ntable_name\nchain_name\nThe first command flushes all of the chains in the ip\ntable_name\ntable. The second flushes the\nchain_name\nchain in the\nfamily_type\ntable_name\ntable. The third deletes all of the rules in\nchain_name\nchain in the\nfamily_type\ntable_name\ntable.\nSets\nSets are named or anonymous\n, and consist of one or more elements, separated by commas, enclosed by curly braces. Anonymous sets are embedded in rules and cannot be updated, you must delete and re-add the rule. E.g., you cannot just remove \"http\" from the dports set in the following:\n# nft add rule ip6 filter input tcp dport {telnet, http, https} accept\nNamed sets can be updated, and can be typed and flagged.\nsshguard\nuses named sets for the IP addresses of blocked hosts.\ntable ip sshguard {\nset attackers {\ntype ipv4_addr\nflags interval\nelements = { 1.2.3.4 }\n}\nTo\nadd\nor\ndelete\nelements from the set, use:\n# nft add element ip sshguard attackers { 5.6.7.8/32 }\n# nft delete element ip sshguard attackers { 1.2.3.4/32 }\nNote the type\nipv4_addr\ncan include a CIDR netmask (the\n/32\nhere is not necessary, but is included for completeness' sake). Note also, the set defined here by\nTABLE ip sshguard { SET attackers }\nis addressed as\nip sshguard attackers\n.\nTip\nsystemd-networkd\nconnections can be configured to populate predefined named sets with host IP addresses, network prefixes and interface indexes. See the description of\nNFTSet=\nin\nsystemd.network(5) § [ADDRESS] SECTION OPTIONS\nfor details and\n#Dynamic named sets using systemd-networkd\nfor an example.\nAtomic reloading\nFlush the current ruleset:\n# echo \"flush ruleset\" > /tmp/nftables\nDump the current ruleset:\n# nft -s list ruleset >> /tmp/nftables\nNow you can edit\n/tmp/nftables\nand apply your changes with:\n# nft -f /tmp/nftables\nExamples\nWorkstation\n/etc/nftables.conf\nflush ruleset\ntable inet my_table {\nset LANv4 {\ntype ipv4_addr\nflags interval\nelements = { 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16, 169.254.0.0/16 }\n}\nset LANv6 {\ntype ipv6_addr\nflags interval\nelements = { fd00::/8, fe80::/10 }\n}\nchain my_input_lan {\nudp sport 1900 udp dport >= 1024 meta pkttype unicast limit rate 4/second burst 20 packets accept comment \"Accept UPnP IGD port mapping reply\"\nudp sport netbios-ns udp dport >= 1024 meta pkttype unicast accept comment \"Accept Samba Workgroup browsing replies\"\n}\nchain my_input {\ntype filter hook input priority filter; policy drop;\niif lo accept comment \"Accept any localhost traffic\"\nct state invalid drop comment \"Drop invalid connections\"\nfib daddr . iif type != { local, broadcast, multicast } drop comment \"Drop packets if the destination IP address is not configured on the incoming interface (strong host model)\"\nct state { established, related } accept comment \"Accept traffic originated from us\"\nmeta l4proto { icmp, ipv6-icmp } accept comment \"Accept ICMP\"\nip protocol igmp accept comment \"Accept IGMP\"\nudp dport mdns ip6 daddr ff02::fb accept comment \"Accept mDNS\"\nudp dport mdns ip daddr 224.0.0.251 accept comment \"Accept mDNS\"\nip6 saddr @LANv6 jump my_input_lan comment \"Connections from private IP address ranges\"\nip saddr @LANv4 jump my_input_lan comment \"Connections from private IP address ranges\"\ncounter comment \"Count any other traffic\"\n}\nchain my_forward {\ntype filter hook forward priority filter; policy drop;\n# Drop everything forwarded to us. We do not forward. That is routers job.\n}\nchain my_output {\ntype filter hook output priority filter; policy accept;\n# Accept every outbound connection\n}\n}\nTip\nWhen using\nsystemd-networkd\nand connected to a local network, you can avoid hardcoding the network subnets by using the\nsystemd.network(5)\noption\nNFTSet=\nto get the network prefixes of a connection. See\n#Dynamic named sets using systemd-networkd\n.\nServer\n/etc/nftables.conf\nflush ruleset\ntable inet my_table {\nset LANv4 {\ntype ipv4_addr\nflags interval\nelements = { 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16, 169.254.0.0/16 }\n}\nset LANv6 {\ntype ipv6_addr\nflags interval\nelements = { fd00::/8, fe80::/10 }\n}\nchain my_input_lan {\nmeta l4proto { tcp, udp } th dport 2049 accept comment \"Accept NFS\"\nudp dport netbios-ns accept comment \"Accept NetBIOS Name Service (nmbd)\"\nudp dport netbios-dgm accept comment \"Accept NetBIOS Datagram Service (nmbd)\"\ntcp dport netbios-ssn accept comment \"Accept NetBIOS Session Service (smbd)\"\ntcp dport microsoft-ds accept comment \"Accept Microsoft Directory Service (smbd)\"\nudp sport { bootpc, 4011 } udp dport { bootps, 4011 } accept comment \"Accept PXE\"\nudp dport tftp accept comment \"Accept TFTP\"\n}\nchain my_input {\ntype filter hook input priority filter; policy drop;\niif lo accept comment \"Accept any localhost traffic\"\nct state invalid drop comment \"Drop invalid connections\"\nfib daddr . iif type != { local, broadcast, multicast } drop comment \"Drop packets if the destination IP address is not configured on the incoming interface (strong host model)\"\nct state { established, related } accept comment \"Accept traffic originated from us\"\nmeta l4proto { icmp, ipv6-icmp } accept comment \"Accept ICMP\"\nip protocol igmp accept comment \"Accept IGMP\"\nudp dport mdns ip6 daddr ff02::fb accept comment \"Accept mDNS\"\nudp dport mdns ip daddr 224.0.0.251 accept comment \"Accept mDNS\"\nip6 saddr @LANv6 jump my_input_lan comment \"Connections from private IP address ranges\"\nip saddr @LANv4 jump my_input_lan comment \"Connections from private IP address ranges\"\ntcp dport ssh accept comment \"Accept SSH on port 22\"\ntcp dport ipp accept comment \"Accept IPP/IPPS on port 631\"\nmeta l4proto { tcp, udp } th dport { http, https, 8008, 8080 } accept comment \"Accept HTTP (ports 80, 443, 8008, 8080)\"\nudp sport bootpc udp dport bootps ip saddr 0.0.0.0 ip daddr 255.255.255.255 accept comment \"Accept DHCPDISCOVER (for DHCP-Proxy)\"\n}\nchain my_forward {\ntype filter hook forward priority filter; policy drop;\n# Drop everything forwarded to us. We do not forward. That is routers job.\n}\nchain my_output {\ntype filter hook output priority filter; policy accept;\n# Accept every outbound connection\n}\n}\nLimit rate\ntable inet my_table {\nchain my_input {\ntype filter hook input priority filter; policy drop;\niif lo accept comment \"Accept any localhost traffic\"\nct state invalid drop comment \"Drop invalid connections\"\nfib daddr . iif type != { local, broadcast, multicast } drop comment \"Drop packets if the destination IP address is not configured on the incoming interface (strong host model)\"\nmeta l4proto icmp icmp type echo-request limit rate over 10/second burst 4 packets drop comment \"No ping floods\"\nmeta l4proto ipv6-icmp icmpv6 type echo-request limit rate over 10/second burst 4 packets drop comment \"No ping floods\"\nct state { established, related } accept comment \"Accept traffic originated from us\"\nmeta l4proto { icmp, ipv6-icmp } accept comment \"Accept ICMP\"\nip protocol igmp accept comment \"Accept IGMP\"\ntcp dport ssh ct state new limit rate 15/minute accept comment \"Avoid brute force on SSH\"\n}\n}\nJump\nWhen using jumps in configuration file, it is necessary to define the target chain first. Otherwise one could end up with\nError: Could not process rule: No such file or directory\n.\ntable inet my_table {\nchain web {\ntcp dport http accept\ntcp dport 8080 accept\n}\nchain my_input {\ntype filter hook input priority filter;\nip saddr 10.0.2.0/24 jump web\ndrop\n}\n}\nDifferent rules for different interfaces\nIf your box has more than one network interface, and you would like to use different rules for different interfaces, you may want to use a \"dispatching\" filter chain, and then interface-specific filter chains. For example, let us assume your box acts as a home router, you want to run a web server accessible over the LAN (interface\nenp3s0\n), but not from the public internet (interface\nenp2s0\n), you may want to consider a structure like this:\ntable inet my_table {\nchain my_input { # this chain serves as a dispatcher\ntype filter hook input priority filter; policy drop;\niif lo accept comment \"always accept loopback\"\niifname enp2s0 jump my_input_public\niifname enp3s0 jump my_input_private\n}\nchain my_input_public { # rules applicable to public interface interface\nct state {established,related} accept\nct state invalid drop\nudp dport bootpc accept\ntcp dport bootpc accept\n}\nchain my_input_private {\nct state {established,related} accept\nct state invalid drop\nudp dport bootpc accept\ntcp dport bootpc accept\ntcp port http accept\ntcp port https accept\nreject with icmpx port-unreachable comment \"all other traffic\"\n}\nchain my_output { # we let everything out\ntype filter hook output priority filter;\naccept\n}\n}\nAlternatively you could choose only one\niifname\nstatement, such as for the single upstream interface, and put the default rules for all other interfaces in one place, instead of dispatching for each interface.\nMasquerading\nnftables has a special keyword\nmasquerade\n\"where the source address is automagically set to the address of the output interface\" (\nsource\n). This is particularly useful for situations in which the IP address of the interface is unpredictable or unstable, such as the upstream interface of routers connecting to many ISPs. Without it, the Network Address Translation rules would have to be updated every time the IP address of the interface changed.\nTo use it:\nmake sure masquerading is enabled in the kernel (true if you use the default kernel), otherwise during kernel configuration, set\nCONFIG_NFT_MASQ=m\n.\nthe\nmasquerade\nkeyword can only be used in chains of type\nnat\n.\nmasquerading is a kind of source NAT, so only works in the output path.\nExample for a machine with two interfaces: LAN connected to\nenp3s0\n, and public internet connected to\nenp2s0\n:\ntable inet my_nat {\nchain my_masquerade {\ntype nat hook postrouting priority srcnat;\noifname \"enp2s0\" masquerade\n}\n}\nSince the table type is\ninet\nboth IPv4 and IPv6 packets will be masqueraded. If you want only ipv4 packets to be masqueraded (since extra adress space of IPv6 makes NAT not required)\nmeta nfproto ipv4\nexpression can be used infront of\noifname \"enp2s0\"\nor the table type can be changed to\nip\n.\nNAT with port forwarding\nThis example will masquerade traffic exiting through a WAN interface called eth0 and forward ports 22 and 80 to\n10.0.0.2\n. You will need to set\nnet.ipv4.ip_forward\nto\n1\nvia\nsysctl\n.\ntable nat {\nchain prerouting {\ntype nat hook prerouting priority dstnat;\niif eth0 tcp dport {22, 80} dnat to 10.0.0.2\n}\nchain postrouting {\ntype nat hook postrouting priority srcnat;\noif eth0 masquerade\n}\n}\nCount new connections per IP\nUse this snippet to count HTTPS connections:\n/etc/nftables.conf\ntable inet filter {\nset https {\ntype ipv4_addr;\nflags dynamic;\nsize 65536;\ntimeout 60m;\n}\nchain input {\ntype filter hook input priority filter;\nct state new meta l4proto { tcp, udp } th dport 443 update @https { ip saddr counter }\n}\n}\nTo print the counters, run\nnft list set inet filter https\n.\nDynamic blackhole\nUse this snippet to drop all HTTPS connections for 1 minute from a source IP (or /64 IPv6 range) that exceeds the limit of 10/second.\n/etc/nftables.conf\ntable inet dev {\nset blackhole_ipv4 {\ntype ipv4_addr;\nflags dynamic, timeout;\nsize 65536;\n}\nset blackhole_ipv6 {\ntype ipv6_addr;\nflags dynamic, timeout;\nsize 65536;\n}\nchain input {\ntype filter hook input priority filter; policy accept;\nct state new meta l4proto { tcp, udp } th dport 443 \\\nmeter flood_ipv4 size 128000 { ip saddr timeout 10s limit rate over 10/second } \\\nadd @blackhole_ipv4 { ip saddr timeout 1m }\nct state new meta l4proto { tcp, udp } th dport 443 \\\nmeter flood_ipv6 size 128000 { ip6 saddr and ffff:ffff:ffff:ffff:: timeout 10s limit rate over 10/second } \\\nadd @blackhole_ipv6 { ip6 saddr and ffff:ffff:ffff:ffff:: timeout 1m }\nip saddr @blackhole_ipv4 counter drop\nip6 saddr and ffff:ffff:ffff:ffff:: @blackhole_ipv6 counter drop\n}\n}\nTo print the blackholed IPs, run\nnft list set inet dev blackhole_ipv\nX\n.\nTips and tricks\nSaving current rule set\nThe output of\nnft list ruleset\ncommand is a valid input file for it as well. Current rule set can be saved to file and later loaded back in.\n# nft -s list ruleset | tee\nfilename\nNote\nnft list\ndoes not output variable definitions, if you had any in your original file they will be lost. Any variables used in rules will be replaced by their value.\nSimple stateful firewall\nSee\nSimple stateful firewall\nfor more information.\nSingle machine\nFlush the current ruleset:\n# nft flush ruleset\nAdd a table:\n# nft add table inet my_table\nAdd the input, forward, and output base chains. The policy for input and forward will be to drop. The policy for output will be to accept.\n# nft add chain inet my_table my_input '{ type filter hook input priority 0 ; policy drop ; }'\n# nft add chain inet my_table my_forward '{ type filter hook forward priority 0 ; policy drop ; }'\n# nft add chain inet my_table my_output '{ type filter hook output priority 0 ; policy accept ; }'\nAdd two regular chains that will be associated with tcp and udp:\n# nft add chain inet my_table my_tcp_chain\n# nft add chain inet my_table my_udp_chain\nRelated and established traffic will be accepted:\n# nft add rule inet my_table my_input ct state '{ related, established }' accept\nAll loopback interface traffic will be accepted:\n# nft add rule inet my_table my_input iif lo accept\nDrop any invalid traffic:\n# nft add rule inet my_table my_input ct state invalid drop\nAccept ICMP and IGMP:\n# nft add rule inet my_table my_input meta l4proto '{ icmp, ipv6-icmp }' accept\n# nft add rule inet my_table my_input ip protocol igmp accept\nNew udp traffic will jump to the UDP chain:\n# nft add rule inet my_table my_input meta l4proto udp ct state new jump my_udp_chain\nNew tcp traffic will jump to the TCP chain:\n# nft add rule inet my_table my_input 'meta l4proto tcp tcp flags & (fin|syn|rst|ack) == syn ct state new jump my_tcp_chain'\nAt this point you should decide what ports you want to open to incoming connections, which are handled by the TCP and UDP chains. For example to open connections for a web server add:\n# nft add rule inet my_table my_tcp_chain tcp dport 80 accept\nTo accept HTTPS connections for a webserver on port 443:\n# nft add rule inet my_table my_tcp_chain tcp dport 443 accept\n# nft add rule inet my_table my_udp_chain udp dport 443 accept\nTo accept SSH traffic on port 22:\n# nft add rule inet my_table my_tcp_chain tcp dport 22 accept\nTo accept incoming DNS requests:\n# nft add rule inet my_table my_tcp_chain tcp dport 53 accept\n# nft add rule inet my_table my_udp_chain udp dport 53 accept\nBe sure to make your changes permanent when satisfied.\nPrevent brute-force attacks\nSshguard\nis program that can detect brute-force attacks and modify firewalls based on IP addresses it temporarily blacklists. See\nSshguard#nftables\non how to set up nftables to be used with it.\nLogging traffic\nYou can log packets using the\nlog\naction. The most simple rule to log all incoming traffic is:\n# nft add rule inet filter input log\nSee\nnftables wiki\nfor details.\nMonitor\nListen to all events, report in native nft format.\n# nft monitor\nSee\nnft(8) § MONITOR\nRuleset debugging trace temporary\nmeta nftrace set 1\nruleset packet tracing on/off. Use\nmonitor trace\ncommand to watch traces.\nIn another shell \"include\" the file inside the interactive shell:\n# nft -i\nnft> include \"/root/nftables.trace\"\nExample, adjust to your needs:\n/root/nftables.trace\nadd table ip temp-trace {comment \"Temporary table!!\"; flags owner;}\nadd chain ip temp-trace icmp-prerouting { type filter hook prerouting priority raw - 1 ; }\nadd rule ip temp-trace icmp-prerouting\nip protocol icmp\nmeta nftrace set 1\nThis file adds a temporary table (\nflags owner\n) so that it gets automatically removed, if the calling (process) interactive nft is closed. The Base Chain needs to be adjusted for your use case. You can create multiple chains and multiple rules with \"meta nftrace set 1\"  \"ip protocol icmp\" is used just as an example and is not necessary. There are many ways to achieve a similar effect, the advantage is that by closing the interactive shell the previous state is automatically restored, and if an error is inside the file nothing gets executed.\nSee\nnftables wiki\nand a\npython tool automating\nthe process and coloring.\nUsing iptables-nft\nThe factual accuracy of this article or section is disputed.\nReason:\nnftables warns if there are legacy iptables objects loaded, so it is not \"perfectly workable to use legacy iptables\nand\nnftables at the same time\". (Discuss in\nTalk:Nftables\n)\nThe older iptables language remains quite dominant in Linux documentation, and quite a few things still depend on iptables to run (such as Docker's networking). Although it's also perfectly workable to use legacy iptables\nand\nnftables at the same time, using iptables-nft's translation is preferred because:\nIt puts everything in the same place, using the newer, more efficient, non-locking framework.\nIt checks for conflicts.\nThere are two ways to use the old iptables language with nftables:\niptables-translate\nand\niptables-restore-translate\n(idem for\nip6tables\n,\nebtables\n, etc.) take iptable language and output nft language. They do\nnot\nchange running nft settings. See\nxtables-translate(8)\n.\nFor configuration you want to maintain later on, it's a good idea to use the\n-translate\ntool and integrate the result code into your existing rules. For example, if you find something useful in\nsimple stateful firewall\nor the wider Internet, you can translate them to put into your nft config.\niptables\nand\niptables-restore\n(again idem for\nip6tables\netc.) uses the above translation\nand\nput them into the running nft settings. It also offers statistics like regular iptables does. See\nxtables-nft(8)\n.\nThose commands work reasonably well given what they have to work with. They should \"just work\" with simple usage, but occasionally you will need to step in and debug.\nNote\nThe translator covers a large portion, but not all, of the iptables language. Some iptables rules work in conjunction and the translator needs context to properly translate, so do not panic if some lines translate into nothing.\nDynamic named sets using systemd-networkd\nsystemd-networkd\n's connections can use the\nNFTSet=\noption to populate predefined named sets with host IP addresses, network prefixes and interface indexes. This allows to avoid hardcoding them in\n/etc/nftables.conf\n. The\nNFTSet=\noption is supported in\n[Address]\n,\n[DHCPv4]\n,\n[DHCPv6]\nand\n[IPv6AcceptRA]\nsections. See\nsystemd.network(5) § [ADDRESS] SECTION OPTIONS\n.\nFor example, to process connections from a local network (where IP addresses are assigned via DHCP or SLAAC) in a separate\nmy_input_lan\nchain:\n/etc/nftables.conf\n...\ntable inet my_table {\nset eth_ipv4_prefix {\ntype ipv4_addr\nflags interval\ncomment \"Populated by systemd-networkd\"\n}\nset eth_ipv6_prefix {\ntype ipv6_addr\nflags interval\ncomment \"Populated by systemd-networkd\"\nelements = { fe80::/10 }\n}\nset eth_ifindex {\ntype iface_index\ncomment \"Populated by systemd-networkd\"\n}\n...\nchain my_input {\ntype filter hook input priority filter; policy drop;\niif @eth_ifindex ip6 saddr @eth_ipv6_prefix jump my_input_lan comment \"Connections from LAN\"\niif @eth_ifindex ip saddr @eth_ipv4_prefix jump my_input_lan comment \"Connections from LAN\"\n}\n...\n}\n/etc/systemd/network/my-network.network\n...\n[DHCPv4]\nNFTSet=prefix:inet:my_table:eth_ipv4_prefix\nNFTSet=ifindex:inet:my_table:eth_ifindex\n[DHCPv6]\nNFTSet=prefix:inet:my_table:eth_ipv6_prefix\nNFTSet=ifindex:inet:my_table:eth_ifindex\n[IPv6AcceptRA]\nNFTSet=prefix:inet:my_table:eth_ipv6_prefix\nNFTSet=ifindex:inet:my_table:eth_ifindex\n...\nTroubleshooting\nWorking with Docker\nNote\nWith the following setup, you will not be able to use protocols like\nAF_BLUETOOTH\ninside containers even with\n--net host --privileged\n.\nRootless Docker containers already run in a separate network namespace. You may not need to do anything.\nUsing nftables can interfere with\nDocker\nnetworking (and probably other container runtimes as well). You can find various workarounds on the internet which either involve patching iptables rules and ensuring a defined service start order or disabling dockers iptables management completely which makes using docker very restrictive (think port forwarding or docker-compose).\nA reliable method is letting docker run in a separate network namespace where it can do whatever it wants. It is probably best to\nnot\nuse\niptables-nft\nto prevent docker from mixing nftables and iptables rules.\nUse the following docker service\ndrop-in file\n:\n/etc/systemd/system/docker.service.d/netns.conf\n[Service]\nPrivateNetwork=yes\nPrivateMounts=No\n# cleanup\nExecStartPre=-nsenter -t 1 -n -- ip link delete docker0\n# add veth\nExecStartPre=nsenter -t 1 -n -- ip link add docker0 type veth peer name docker0_ns\nExecStartPre=sh -c 'nsenter -t 1 -n -- ip link set docker0_ns netns \"$$BASHPID\" && true'\nExecStartPre=ip link set docker0_ns name eth0\n# bring host online\nExecStartPre=nsenter -t 1 -n -- ip addr add 10.0.0.1/24 dev docker0\nExecStartPre=nsenter -t 1 -n -- ip link set docker0 up\n# bring ns online\nExecStartPre=ip addr add 10.0.0.100/24 dev eth0\nExecStartPre=ip link set eth0 up\nExecStartPre=ip route add default via 10.0.0.1 dev eth0\nAdjust the\n10.0.0.*\nIP addresses if they are not appropriate for your setup.\nEnable IP forwarding and set-up NAT for docker0 with the following postrouting rule:\niifname docker0 oifname eth0 masquerade\nThen, ensure that\nkernel IP forwarding\nis enabled.\nNow you can setup a firewall and port forwarding for the\ndocker0\ninterface using nftables without any interference.\nSee also\nnetfilter nftables wiki\ndebian:nftables\ngentoo:nftables\nFirst release of nftables\nnftables quick howto\nThe return of nftables\nWhat comes after ‘iptables’? Its successor, of course: `nftables`\nGene's Tech Blog\n– additional nftables samples for workstation and firewall\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Nftables&oldid=853942\n\"\nCategory\n:\nFirewalls\nHidden categories:\nPages or sections flagged with Template:Expansion\nPages or sections flagged with Template:Accuracy\nSearch\nSearch\nnftables\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Nftables"}}
{"text": "Bash - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nBash\n8 languages\nDeutsch\nEspañol\nFrançais\nMagyar\n日本語\nРусский\nУкраїнська\n中文（简体）\nFrom ArchWiki\nRelated articles\n/Functions\n/Prompt customization\nCommand-line shell\nEnvironment variables\nFortune\nPkgfile\nReadline\nBash\n(\nB\nourne-\nA\ngain\nSH\nell) is a\ncommand-line shell\n/programming language by the\nGNU Project\n. Its name alludes to its predecessor, the long-deprecated\nBourne shell\n. Bash can be run on most\nUnix-like\noperating systems, including\nGNU/Linux\n.\nBash\nis the default command-line shell on\nArch Linux\n.\nInvocation\nBash behaviour can be altered depending on how it is invoked. Some descriptions of different modes follow.\nIf Bash is spawned by\nlogin\nin a TTY, by an\nSSH\ndaemon, or similar means, it is considered a\nlogin shell\n. This mode can also be engaged using the\n-l\n/\n--login\ncommand line option.\nBash is considered an\ninteractive shell\nwhen its standard input, output and error are connected to a terminal (for example, when run in a terminal emulator), and it is not started with the\n-c\noption or\nnon-option\narguments (for example,\nbash\nscript\n). All interactive shells source\n/etc/bash.bashrc\nand\n~/.bashrc\n, while interactive\nlogin\nshells also source\n/etc/profile\nand\n~/.bash_profile\n.\nNote\nIn Arch\n/bin/sh\n(which used to be the Bourne shell executable) is symlinked to\nbash\n. If Bash is invoked with the name\nsh\n, it tries to mimic the startup behavior of historical versions of\nsh\n, including POSIX compatibility.\nConfiguration files\nBash will attempt to execute a set of startup files depending on how it was invoked. See the\nBash Startup Files\nsection of the GNU Bash manual for a complete description.\nFile\nDescription\nLogin shells\n(see note)\nInteractive,\nnon-login\nshells\n/etc/profile\nSources\napplication settings in\n/etc/profile.d/*.sh\nand\n/etc/bash.bashrc\n.\nYes\nNo\n~/.bash_profile\nPer-user, after\n/etc/profile\n. If this file does not exist,\n~/.bash_login\nand\n~/.profile\nare checked in that order. The skeleton file\n/etc/skel/.bash_profile\nalso sources\n~/.bashrc\n.\nYes\nNo\n~/.bash_logout\nPer-user, after exit of a login shell.\nYes\nNo\n/etc/bash.bash_logout\nDepends on the\n-DSYS_BASH_LOGOUT=\"/etc/bash.bash_logout\"\ncompilation flag. After exit of a login shell.\nYes\nNo\n/etc/bash.bashrc\nDepends on the\n-DSYS_BASHRC=\"/etc/bash.bashrc\"\ncompilation flag. Sources\n/usr/share/bash-completion/bash_completion\n.\nNo\nYes\n~/.bashrc\nPer-user, after\n/etc/bash.bashrc\n.\nNo\nYes\nNote\nLogin shells can be non-interactive when called with the\n--login\nargument.\nWhile interactive,\nnon-login\nshells do\nnot\nsource\n~/.bash_profile\n, they still inherit the environment from their parent process (which may be a login shell). See\nGregsWiki:ProcessManagement#On processes, environments and inheritance\nfor details.\nShell and environment variables\nThe behavior of Bash and programs run by it can be influenced by a number of environment variables.\nEnvironment variables\nare used to store useful values such as command search directories, or which browser to use. When a new shell or script is launched it inherits its parent's variables, thus starting with an internal set of shell variables\n[1]\n.\nThese shell variables in Bash can be exported in order to become environment variables:\nVARIABLE=content\nexport VARIABLE\nor with a shortcut\nexport VARIABLE=content\nEnvironment variables are conventionally placed in\n~/.profile\nor\n/etc/profile\nso that other Bourne-compatible shells can use them.\nSee\nEnvironment variables\nfor more general information.\nCommand line\nBash command line is managed by the separate library called\nReadline\n. Readline provides\nemacs\nand\nvi\nstyles of shortcuts for interacting with the command line, i.e. moving back and forth on the word basis, deleting words etc. It is also Readline's responsibility to manage\nhistory\nof input commands. Last, but not least, it allows you to create\nmacros\n.\nTab completion\nTab completion\nis the option to auto-complete typed commands by pressing\nTab\n(enabled by default).\nSingle-tab\nIt may require up to three tab-presses to show all possible completions for a command. To reduce the needed number of tab-presses, see\nReadline#Faster completion\n.\nCommon programs and options\nBy default, Bash only tab-completes commands, filenames, and variables.  The package\nbash-completion\nextends this by adding more specialized tab completions for common commands and their options, which can be enabled by sourcing\n/usr/share/bash-completion/bash_completion\n(which has been already sourced in Arch's\n/etc/bash.bashrc\n). With\nbash-completion\n, normal completions (such as\nls file.*\nTab\nTab\n) will behave differently; however, they can be re-enabled with\ncompopt -o bashdefault\nprogram\n(see\n[2]\nand\n[3]\nfor more detail).\nCustomize per-command\nNote\nUsing the\ncomplete\nbuiltin may cause conflicts with\nbash-completion\n.\nBy default, Bash only tab-completes file names following a command. You can change it to complete command names using\ncomplete -c\n:\n~/.bashrc\ncomplete -c man which\nor complete command names and file names with\n-cf\n:\ncomplete -cf sudo\nSee\nbash(1) § Programmable Completion\nfor more completion options.\nHistory\nHistory completion\nYou can bind the up and down arrow keys to search through Bash's history (see:\nReadline#History\nand\nReadline Init File Syntax\n):\n~/.bashrc\nbind '\"\\e[A\": history-search-backward'\nbind '\"\\e[B\": history-search-forward'\nor to affect all readline programs:\n~/.inputrc\n\"\\e[A\": history-search-backward\n\"\\e[B\": history-search-forward\nHistory customization\nThe\nHISTCONTROL\nvariable can prevent certain commands from being logged to the history.\nTo stop logging of consecutive identical commands:\n~/.bashrc\nexport HISTCONTROL=ignoredups\nTo remove all but the last identical command:\n~/.bashrc\nexport HISTCONTROL=erasedups\nTo avoid saving commands that start with a space:\n~/.bashrc\nexport HISTCONTROL=ignorespace\nTo avoid saving consecutive identical commands, and commands that start with a space:\n~/.bashrc\nexport HISTCONTROL=ignoreboth\nTo remove all but the last identical command, and commands that start with a space:\n~/.bashrc\nexport HISTCONTROL=\"erasedups:ignorespace\"\nSee\nbash(1) § HISTCONTROL\nfor details.\nDisable history\nTo disable the bash history only temporarily:\n$ set +o history\nThe commands entered now are not logged to the\n$HISTFILE\n.\nFor example, now you can hash passwords with\nprintf secret | sha256sum\n, or hide GPG usage like\ngpg -eaF secret-pubkey.asc\nand your secret is not written to disk.\nTo enable history:\n$ set -o history\nTo disable all bash history:\n~/.bashrc or /etc/profile\nexport HISTSIZE=0\n... and just to make sure, destroy your old histfile forever:\n$ wipe -i -l2 -x4 -p4 \"$HISTFILE\"\n$ ln -sv /dev/null \"$HISTFILE\"\nMimic Zsh run-help ability\nZsh\ncan invoke the manual for the command preceding the cursor by pressing\nAlt+h\n.\nA similar behaviour is obtained in Bash using this\nReadline\nbind:\n~/.bashrc\nrun-help() { help \"$READLINE_LINE\" 2>/dev/null || man \"$READLINE_LINE\"; }\nbind -m vi-insert -x '\"\\eh\": run-help'\nbind -m emacs -x     '\"\\eh\": run-help'\nThis assumes are you using the (default) Emacs\nediting mode\n.\nShare bash history across machines\natuin\nreplaces your existing shell history with an SQLite database, and records additional context for your commands. Additionally, it provides optional and fully encrypted synchronization of your history between machines, via an Atuin server.\nEnable bash history timestamps (\nexport HISTTIMEFORMAT=\"%F %T \"\n) before syncing.\nAtuin\nworks well with tools like\nblesh-git\nAUR\nand\ncmd-wrapped\nto provide an enhanced terminal experience across machines.\nAliases\nalias\nis a command, which enables a replacement of a word with another string. It is often used for abbreviating a system command, or for adding default arguments to a regularly used command.\nPersonal aliases can be stored in\n~/.bashrc\nor any separate file\nsourced\nfrom\n~/.bashrc\n. System-wide aliases (which affect all users) belong in\n/etc/bash.bashrc\n. See\n[4]\nfor example aliases.\nFor functions, see\nBash/Functions\n.\nTips and tricks\nPrompt customization\nSee\nBash/Prompt customization\n.\nSyntax highlighting and autosuggestions\nble.sh\n(Bash Line Editor), packed as\nblesh-git\nAUR\n, is a command line editor written in pure Bash, which is an alternative to GNU Readline. It has many enhanced features like syntax highlighting, autosuggestions, menu-completion, abbreviations,\nVim\nediting mode, and hook functions. Other interesting features include status line, history share, right prompt, transient prompt, and xterm title.\nAfter installing it,\nsource\nit in an interactive session.\n~/.bashrc\nsource /usr/share/blesh/ble.sh\nConfigurations are explained in depth in the\n~/.blerc\nfile and at the\nwiki\n. The stable\nblesh\nAUR\npackage is also available.\nCommand not found\npkgfile\nincludes a \"command not found\" hook that will automatically search the official repositories, when entering an unrecognized command.\nYou need to\nsource\nthe hook to enable it, for example:\n~/.bashrc\nsource /usr/share/doc/pkgfile/command-not-found.bash\nThen attempting to run an unavailable command will show the following info:\n$ abiword\nabiword may be found in the following packages:\nextra/abiword 3.0.1-2\t/usr/bin/abiword\nNote\nThe pkgfile database may need to be updated before this will work.  See\npkgfile#Installation\nfor details.\nDisable Ctrl+z in terminal\nYou can disable the\nCtrl+z\nfeature (pauses/closes your application) by wrapping your command like this:\n#!/bin/bash\ntrap \"\" 20\nadom\nNow, when you accidentally press\nCtrl+z\nin\nadom\nAUR\ninstead of\nShift+z\n, nothing will happen because\nCtrl+z\nwill be ignored.\nClear the screen after logging out\nTo clear the screen after logging out on a virtual terminal:\n~/.bash_logout\nclear\nreset\nAuto \"cd\" when entering just a path\nBash can automatically prepend\ncd\nwhen entering just a path in the shell. For example:\n$ /etc\nbash: /etc: Is a directory\nBut after adding one line into\n.bashrc\nfile:\n~/.bashrc\n...\nshopt -s autocd\n...\nYou get:\n[user@host ~]$ /etc\ncd /etc\n[user@host etc]$\nAutojump\nautojump-git\nAUR\nis a python script which allows navigating the file system by searching for strings in a database with the user's most-visited paths.\nzoxide\nis an alternative which has additional features and performance improvements compared to the original\nautojump\nand can serve as a drop-in replacement for autojump.\nPrevent overwrite of files\nFor the current session, to disallow existing regular files to be overwritten by redirection of shell output:\n$ set -o noclobber\nThis is identical to\nset -C\n.\nTo make the changes persistent for your user:\n~/.bashrc\n...\nset -o noclobber\nTo manually overwrite a file while\nnoclobber\nis set:\n$ echo \"output\" >| file.txt\nUse directory stack to navigate\npushd\nand\npopd\ncan be used to push or pop directories to a stack while switching to them. This can be useful for \"replaying\" your navigation history.\n[user@host ~] pushd /tmp/dir1\n[user@host /tmp/dir1] pushd /var/lib\n[user@host /var/lib] popd\n[user@host /tmp/dir1] popd\n[user@host ~]\nSee\nbash(1) § DIRSTACK\n.\nTroubleshooting\nLine wrap on window resize\nWhen resizing a\nterminal emulator\n, Bash may not receive the resize signal. This will cause typed text to not wrap correctly and overlap the prompt. The\ncheckwinsize\nshell option checks the window size after each command and, if necessary, updates the values of\nLINES\nand\nCOLUMNS\n.\n~/.bashrc\nshopt -s checkwinsize\nShell exits even if ignoreeof set\nIf you have set the\nignoreeof\noption and you find that repeatedly hitting\nctrl-d\ncauses the shell to exit, it is because this option only allows 10 consecutive invocations of this keybinding (or 10 consecutive EOF characters, to be precise), before exiting the shell.\nTo allow higher values, you have to use the IGNOREEOF variable.\nFor example:\nexport IGNOREEOF=100\nChecking errors by analyzing scripts\nThe package\nshellcheck\nanalyzes bash (and other shell) scripts, prints possible errors, and suggests better coding.\nThere is also the web site\nshellcheck.net\nof the same purpose, based on this program.\nSee also\nBash Reference Manual\n, or\n/usr/share/doc/bash/bashref.html\nReadline Init File Syntax\nThe Bourne-Again Shell\n- The third chapter of\nThe Architecture of Open Source Applications\nPS1 generator\n- generate your .bashrc/PS1 bash prompt using an intuitive UI\nEven more useful .bashrc commands\nTutorials\nGreg's Wiki\nGregsWiki:BashGuide\nGregsWiki:BashFAQ\nQuote Tutorial\nCommunity\nAn active and friendly IRC channel for Bash\nExamples\nHow to change the title of an xterm\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Bash&oldid=849347\n\"\nCategories\n:\nCommand-line shells\nGNU\nSearch\nSearch\nBash\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Bash"}}
{"text": "Environment variables - ArchWiki\nHome\nPackages\nForums\nWiki\nGitLab\nSecurity\nAUR\nDownload\nJump to content\nArchWiki\nSearch\nSearch\nEnvironment variables\n7 languages\nDeutsch\nEspañol\nMagyar\n日本語\nPortuguês\nРусский\n中文（简体）\nFrom ArchWiki\nRelated articles\nDefault applications\nsystemd/User#Environment variables\nAn environment variable is a named object that contains data used by one or more applications. In simple terms, it is a variable with a name and a value. The value of an environmental variable can for example be the location of all executable files in the file system, the default editor that should be used, or the system locale settings. Users new to Linux may often find this way of managing settings a bit unmanageable. However, environment variables provide a simple way to share configuration settings between multiple applications and processes in Linux.\nUtilities\nThe\ncoreutils\npackage contains the programs\nprintenv\nand\nenv\n. To list the current environmental variables with values:\n$ printenv\nNote\nSome environment variables are user-specific. Check by comparing the outputs of\nprintenv\nas an unprivileged user and as\nroot\n.\nThe\nenv\nutility can be used to run a command under a modified environment. The following example will launch\nxterm\nwith the environment variable\nEDITOR\nset to\nvim\n. This will not affect the global environment variable\nEDITOR\n.\n$ env EDITOR=vim xterm\nThe\nshell\nbuiltin\nset(1p)\nallows you to change the values of shell options, set the positional parameters and to display the names and values of shell variables.\nEach process stores their environment in the\n/proc/$PID/environ\nfile. This file contains each key value pair delimited by a nul character (\n\\x0\n). A more human readable format can be obtained with\nsed\n, e.g.\nsed 's:\\x0:\\n:g' /proc/$PID/environ\n.\nDefining variables\nTo avoid needlessly polluting the environment, you should seek to restrict the scope of variables. In fact, graphical sessions and systemd services require you to set variables in certain locations for them to take effect. The scopes of environment variables are broken down into the contexts they affect:\nGlobal\n: All programs that any user runs, not including systemd services.\nBy user\n: All programs that a particular user runs, not including user systemd services (see\nsystemd/User#Environment variables\n) or graphical applications (see\n#Graphical environment\n).\nGlobally\nUsing shell initialization files\nMost Linux distributions tell you to change or add environment variable definitions in\n/etc/profile\nor other locations. Keep in mind that there are also package-specific configuration files containing variable settings such as\n/etc/locale.conf\n. Be sure to maintain and manage the environment variables and pay attention to the numerous files that can contain environment variables. In principle, any shell script can be used for initializing environmental variables, but following traditional UNIX conventions, these statements should only be present in some particular files.\nThe following files can be used for defining global environment variables on your system, each with different limitations:\n/etc/environment\nis used by the\npam_env module\nand is shell agnostic so scripting or glob expansion cannot be used. The file only accepts\nvariable=value\npairs.\n/etc/profile\ninitializes variables for login shells\nonly\n. It does, however, run scripts (e.g. those in\n/etc/profile.d/\n) and can be used by all\nBourne shell\ncompatible shells.\nShell specific configuration files - Global configuration files of your\nshell\n, initializes variables and runs scripts. For example\nBash#Configuration files\n(e.g.\n~/.bashrc\n) or\nZsh#Startup/Shutdown files\n(e.g.\n~/.zshrc\n).\nThe following Bash helper function can be used to append a number of directories to the\nPATH\nenvironment variable. Add the function at the top of the file where you define your environment (e.g.\n~/.bashrc\n). The function will only add directories that actually exist on the filesystem, and it will avoid creating duplicate entries.\nadd_paths() {\nfor d in \"$@\"; do\n[[ -d \"$d\" && ! \"$PATH\" =~ (^|:)$d(:|$) ]] && PATH=\"$PATH:$d\"\ndone\n}\nadd_paths ~/bin ~/scripts\nMost shells (including Bash, Zsh, and\nfish\n) allow adding variables to the environment using the\nexport\ncommand. This allows defining environment variables in a common file such as\n~/my-environment.sh\n:\n~/my-environment.sh\nexport EDITOR=vim\nexport XDG_CACHE_HOME=\"$HOME/.cache\"\nexport XDG_CONFIG_HOME=\"$HOME/.config\"\nexport XDG_DATA_HOME=\"$HOME/.local/share\"\nexport XDG_STATE_HOME=\"$HOME/.local/state\"\nThis file can then be sourced from shell startup files:\n~/.bashrc\nsource ~/my-environment.sh\n~/.config/fish/config.fish\nsource ~/my-environment.sh\nUsing pam_env\nThe\nPAM\nmodule\npam_env(8)\nloads the variables to be set in the environment from the following files in order:\n/etc/security/pam_env.conf\nand\n/etc/environment\n.\nNote\nThese files are read before other files, in particular before\n~/.profile\n,\n~/.bash_profile\nand\n~/.zshenv\n.\nThe deprecated\n~/.pam_environment\nis not read anymore. See\nFS#68945\n.\n/etc/environment\nmust consist of simple\nVARIABLE\n=\nvalue\npairs on separate lines, for example:\n/etc/environment\nEDITOR=nano\n/etc/security/pam_env.conf\nhas the following format:\n/etc/security/pam_env.conf\nVARIABLE [DEFAULT=\nvalue\n] [OVERRIDE=\nvalue\n]\n@{HOME}\nand\n@{SHELL}\nare special variables that expand to what is defined in\n/etc/passwd\n. The following example illustrates how to expand the\nHOME\nenvironment variable into another variable:\n/etc/security/pam_env.conf\nXDG_CONFIG_HOME   DEFAULT=@{HOME}/.config\nNote\nThe variables\n${HOME}\nand\n${SHELL}\nare not linked to the\nHOME\nand\nSHELL\nenvironment variables, they are not set by default.\nThe format also allows to expand already defined variables in the values of other variables using\n${\nVARIABLE\n}\n, like this:\n/etc/security/pam_env.conf\nGOPATH DEFAULT=${XDG_DATA_HOME}/go\nVARIABLE\n=\nvalue\npairs are also allowed, but variable expansion is not supported in those pairs. See\npam_env.conf(5)\nfor more information.\nPer user\nYou do not always want to define an environment variable globally. For instance, you might want to add\n/home/my_user/bin\nto the\nPATH\nvariable but do not want all other users on your system to have that in their\nPATH\ntoo. Local environment variables can be defined in many different files:\nUser configuration files of your\nshell\n, for example\nBash#Configuration files\nor\nZsh#Startup/Shutdown files\n.\nUnless you are restricting the scope of the variables to terminals you open (e.g. command-line applications only), you are looking to modify the login shell.\nsystemd user environment variables\nare read from\n~/.config/environment.d/*.conf\n.\nTo add a directory to the\nPATH\nfor local usage, put following in\n~/.bash_profile\n:\nexport PATH=\"${PATH}:/home/my_user/bin\"\nTo update the variable, re-login or\nsource\nthe file:\n$ source ~/.bash_profile\n.\nNote\nThe dbus daemon and the user instance of systemd do not inherit any of the environment variables set in places like\n~/.bashrc\netc. This means that, for example, dbus activated programs like\nGNOME Files\nwill not use them by default. See\nsystemd/User#Environment variables\n.\nTip\nYou can issue\nexport -p\nto review the global and local environment variables declared for the user session.\nGraphical environment\nIf an environment variable only affects graphical applications, you may want to restrict the scope of it by only setting it within the graphical session. In order of decreasing scope:\n#Per Xorg session\nand\n#Per Wayland session\naffect the whole graphical session, certainly including the DE.\n#Per desktop environment session\naffects the applications spawned within graphical session, potentially including the DE itself.\n#Per application\naffects just a particular graphical application.\nPer desktop environment session\nSome graphical environments, (e.g.\nKDE Plasma\n) support executing shell scripts at login: they can be used to set environment variables. See\nKDE#Autostart\nfor example.\nPer Xorg session\nThe procedure for modifying the environment of the Xorg session depends on how it is started:\nMost\ndisplay managers\nsource\nxprofile\n.\nstartx\nand\nSLiM\nexecute\nxinitrc\n.\nXDM\nexecutes\n~/.xsession\n; see\nXDM#Defining the session\n.\nLightDM\n[1]\nand\nSDDM\n[2]\nadditionally source startup scripts for login shells, like\n~/.bash_profile\nfor\nbash\nor\n~/.zprofile\nand\n~/.zlogin\nfor\nzsh\n.\nThough the end of the script depends on which file it is, and any advanced syntax depends on the shell used, the basic usage is universal:\n~/.xprofile, ~/.xinitrc, or ~/.xsession\n...\nexport\nGUI_VAR\n=\nvalue\n...\nPer Wayland session\nSince\nWayland\ndoes not initiate any Xorg related files,\nGDM\nand\nKDE Plasma\nsource\nsystemd user environment variables\ninstead.\n~/.config/environment.d/envvars.conf\nGUI_VAR\n=\nvalue\nNo other display managers supporting Wayland sessions (e.g.\nSDDM\n) provide direct support for this yet. However,\nLightDM\nand\nSDDM\nsource startup scripts for login shells on Wayland sessions too.\ngreetd\nalso sources\n/etc/profile\nand\n~/.profile\n- this behavior is controlled by its\nsource_profile\nsetting, enabled by default.\nIf your display manager sources startup scripts like\n~/.bash_profile\nand you want to use\nenvironment.d\n, you can source it like so:\n~/.bash_profile\n# use systemd-environment-d-generator(8) to generate environment, and export those variables\nset -o allexport\nsource <(/usr/lib/systemd/user-environment-generators/30-systemd-environment-d-generator)\nset +o allexport\nNote\nOther generators in\n/usr/lib/systemd/user-environment-generators\nlike\n60-flatpak\nmay not quote the values of environment variables. In this case the output should be sourced with\nexport -- \"$(/usr/lib/systemd/user-environment-generators/60-flatpak)\"\nPer application\nTo set environment variables only for a specific application instead of the whole session, edit the application's\n.desktop\nfile. See\nDesktop entries#Modify environment variables\nfor instructions.\nFor\nSteam\ngames, you can configure a program's environment by editing its launch options; see\nSteam#Launch options\n.\nPer session or shell\nSometimes only temporary variables are required. One might wish to temporarily run executables from a specific directory without typing the absolute\nPATH\neach time, or use the\nPATH\nin a short temporary shell script.\nFor example, to add a session-specific directory to\nPATH\n, use:\n$ export PATH=\"${PATH}:/home/my_user/tmp/usr/bin\"\nTo add only a shell-specific directory to\nPATH\n, use:\n$ PATH=\"${PATH}:/home/my_user/tmp/usr/bin\"\nIn Bash, PATH is already exported by default, so both of the above will remain visible to subprocesses unless overwritten. To better illustrate the difference between exported and non-exported variables, consider the following:\n$ MYVAR=\"shell-only\"\n$ bash -c 'echo $MYVAR'  # prints nothing\n$ export MYVAR=\"session-wide\"\n$ bash -c 'echo $MYVAR'  # prints: session-wide\nExamples\nThe following section lists a number of common environment variables used by a Linux system and describes their values.\nXDG_CURRENT_DESKTOP\nis a\nfreedesktop.org\nvariable containing a colon separated list of strings that the current\ndesktop environment\nidentifies as\n[3]\n. Standardized values for actively developed environments are\nGNOME\n,\nGNOME-Flashback\n,\nKDE\n,\nLXDE\n,\nLXQt\n,\nMATE\n,\nTDE\n,\nUnity\n,\nXFCE\n,\nEDE\n,\nCinnamon\n,\nPantheon\n, and\nDDE\n[4]\n.\nCinnamon was registered\nlater\nthan the rest of the desktop environments. As a result, some software may still be expecting its pre-registration value\nX-CINNAMON\n, such as\nQt\n[5]\n.\nHyprland\nis informally recognized for\nHyprland\n.\nXDG_SESSION_DESKTOP\nis similar to\nXDG_CURRENT_DESKTOP\n, but only permits a single string. Despite its name,\nit is not standardized by freedesktop.org\n.\nDE\nis a legacy variable indicating the\nd\nesktop\ne\nnvironment being used. There is no central documentation for what possible values are, but\nxdg-utils\nprovides a reference for many desktop environments.\nDESKTOP_SESSION\nis another legacy variable, similar to\nDE\nbut less common. It may be a path to the session's\ndesktop entry\n, in\n/usr/share/xsessions/\n[6]\n.\nWINDOW_MANAGER\nis a variable sometimes used to\nchoose\nthe\nwindow manager\nto be used in a desktop environment, as opposed to the other variables here which are set by the already chosen display manager or desktop environment, for other programs to read.\nPATH\ncontains a colon-separated list of directories in which your system looks for executable files. When a regular command (e.g.\nls\n,\nsystemctl\nor\npacman\n) is interpreted by the shell (e.g.\nbash\nor\nzsh\n), the shell looks for an executable file with the same name as your command in the listed directories, and executes it. To run executables that are not listed in\nPATH\n, a relative or absolute path to the executable must be given, e.g.\n./a.out\nor\n/bin/ls\n.\nNote\nIt is advised not to include the current working directory (\n.\n) into your\nPATH\nfor security reasons, as it may trick the user to execute malicious commands.\nHOME\ncontains the path to the home directory of the current user. This variable can be used by applications to associate configuration files and such like with the user running it.\nPWD\ncontains the\npath to the working directory\n.\nOLDPWD\ncontains the path to the previous working directory, that is, the value of\nPWD\nbefore last\ncd\nwas executed.\nTERM\ncontains the type of the running\nterm\ninal, e.g.\nxterm-256color\n. It is used by programs running in the terminal that wish to use terminal-specific capabilities.\nMAIL\ncontains the location of incoming email. The traditional setting is\n/var/spool/mail/$LOGNAME\n.\nftp_proxy\nand\nhttp_proxy\ncontains FTP and HTTP proxy server, respectively:\nftp_proxy=\"ftp://192.168.0.1:21\"\nhttp_proxy=\"http://192.168.0.1:80\"\nMANPATH\ncontains a colon-separated list of directories in which\nman\nsearches for the man pages.\nNote\nIn\n/etc/profile\n, there is a comment that states \"Man is much better than us at figuring this out\", so this variable should generally be left unset. See\nmanpath(5)\n.\nINFODIR\ncontains a colon-separated list of directories in which the\ninfo\ncommand searches for the info pages, e.g.,\n/usr/share/info:/usr/local/share/info\nTZ\ncan be used to to set a time zone different to the system zone for a user. The zones listed in\n/usr/share/zoneinfo/\ncan be used as reference, for example\nTZ=\":/usr/share/zoneinfo/Pacific/Fiji\"\n. When pointing the\nTZ\nvariable to a zoneinfo file, it should start with a colon per\nthe GNU manual\n.\nDefault programs\nSHELL\ncontains the path to the user's\npreferred shell\n. Note that this is not necessarily the shell that is currently running. In the event that it has no value,\nBash\nwill automatically set this variable to the user's login shell as defined in\n/etc/passwd\nor to\n/bin/sh\nif this cannot be determined.\nPAGER\ncontains command to run the program used to list the contents of files, e.g.,\n/bin/less\n.\nEDITOR\ncontains the command to run the lightweight program used for editing files, e.g.,\n/usr/bin/nano\n. For example, you can write an interactive switch between\ngedit\nunder\nX\nor\nnano\n, in this example:\n[ -n \"$DISPLAY\" ] && export EDITOR=gedit || export EDITOR=nano\nVISUAL\ncontains command to run the full-fledged editor that is used for more demanding tasks, such as editing mail (e.g.,\nvi\n,\nvim\n,\nemacs\netc).\nBROWSER\ncontains the path to the web browser. Helpful to set in an interactive shell configuration file so that it may be dynamically altered depending on the availability of a graphic environment, such as\nX\n:\n[ -n \"$DISPLAY\" ] && export BROWSER=firefox || export BROWSER=links\nTip\nThese default programs can also be set conditionally if a\nWayland compositor\nis running by using the\nWAYLAND_DISPLAY\nenvironment variable.\nSee also\nGentoo:Handbook:X86/Working/EnvVar\nUbuntu Community Wiki - Environment Variables\nRetrieved from \"\nhttps://wiki.archlinux.org/index.php?title=Environment_variables&oldid=845824\n\"\nCategory\n:\nSystem administration\nSearch\nSearch\nEnvironment variables\nAdd topic", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://wiki.archlinux.org/title/Environment_variables"}}
{"text": "apt(8) — apt — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\napt\n/ apt(8)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nSCRIPT USAGE AND DIFFERENCES FROM OTHER APT TOOLS\nOPTIONS\nSEE ALSO\nDIAGNOSTICS\nBUGS\nAUTHOR\nNOTES\nother versions\ntrixie\n3.0.3\ntesting\n3.1.11\nunstable\n3.1.12\nother languages\nDeutsch\nEnglish\nfrançais\nNederlands\nportuguês (pt)\nScroll to navigation\nAPT(8)\nAPT\nAPT(8)\nNAME\n¶\napt - command-line interface\nSYNOPSIS\n¶\napt\n[\n-h\n] [\n-o=\nconfig_string\n]\n[\n-c=\nconfig_file\n]\n[\n-t=\ntarget_release\n]\n[\n-a=\narchitecture\n] {list | search | show | update |\ninstall\npkg\n[{=\npkg_version_number\n| /\ntarget_release\n}]...\n| remove\npkg\n... | upgrade | full-upgrade | edit-sources |\n{-v | --version} | {-h | --help}}\nDESCRIPTION\n¶\napt\nprovides a high-level commandline interface for the\npackage management system. It is intended as an end user interface and\nenables some options better suited for interactive usage by default compared\nto more specialized APT tools like\napt-get(8)\nand\napt-cache(8)\n.\nMuch like\napt\nitself, its manpage is intended as an end\nuser interface and as such only mentions the most used commands and options\npartly to not duplicate information in multiple places and partly to avoid\noverwhelming readers with a cornucopia of options and details.\nupdate\n(\napt-get(8)\n)\nupdate\nis used to download package information\nfrom all configured sources. Other commands operate on this data to e.g.\nperform package upgrades or search in and display details about all packages\navailable for installation.\nupgrade\n(\napt-get(8)\n)\nupgrade\nis used to install available upgrades of\nall packages currently installed on the system from the sources configured via\nsources.list(5)\n. New packages will be installed if required to satisfy\ndependencies, but existing packages will never be removed. If an upgrade for a\npackage requires the removal of an installed package the upgrade for this\npackage isn't performed.\nWhen a package is supplied as an argument, the package will be\ninstalled prior to the upgrade action.\nfull-upgrade\n(\napt-get(8)\n)\nfull-upgrade performs the function of upgrade but will\nremove currently installed packages if this is needed to upgrade the system as\na whole.\nWhen a package is supplied as an argument, the package will be\ninstalled prior to the upgrade action.\ninstall\n,\nreinstall\n,\nremove\n,\npurge\n(\napt-get(8)\n)\nPerforms the requested action on one or more packages\nspecified via\nregex(7)\n,\nglob(7)\nor exact match. The requested\naction can be overridden for specific packages by appending a plus (+) to the\npackage name to install this package or a minus (-) to remove it.\nA specific version of a package can be selected for installation\nby following the package name with an equals (=) and the version of the\npackage to select. Alternatively the version from a specific release can be\nselected by following the package name with a forward slash (/) and codename\n(trixie, forky, sid ...) or suite name (stable, testing, unstable). This\nwill also select versions from this release for dependencies of this package\nif needed to satisfy the request.\nRemoving a package removes all packaged data, but leaves usually\nsmall (modified) user configuration files behind, in case the remove was an\naccident. Just issuing an installation request for the accidentally removed\npackage will restore its function as before in that case. On the other hand\nyou can get rid of these leftovers by calling\npurge\neven on already\nremoved packages. Note that this does not affect any data or configuration\nstored in your home directory.\nautoremove\n(\napt-get(8)\n)\nautoremove is used to remove packages that were\nautomatically installed to satisfy dependencies for other packages and are now\nno longer needed as dependencies changed or the package(s) needing them were\nremoved in the meantime.\nYou should check that the list does not include applications you\nhave grown to like even though they were once installed just as a dependency\nof another package. You can mark such a package as manually installed by\nusing\napt-mark(8)\n. Packages which you have installed explicitly via\ninstall\nare also never proposed for automatic removal.\nsatisfy\n(\napt-get(8)\n)\nsatisfy\nsatisfies dependency strings, as used in\nBuild-Depends. It also handles conflicts, by prefixing an argument with\n\"Conflicts: \".\nExample: apt satisfy \"foo, bar (>= 1.0)\"\n\"Conflicts: baz, fuzz\"\nwhy, why-not\nThese commands print the reasoning path from the solver.\nThey are similar to the equivalent aptitude commands for many use cases, but\nare different in that they print the actual reason the solver picked rather\nthan the potential strongest path.\nThe\nwhy\ncommand determines why an installed package is\ninstalled. This provides reasonable feedback as to why an automatically\ninstalled package is installed; for a manually installed package no other\nreason is given. If the package is not installed, no reason can be\ndetermined.\nThe\nwhy-not\ncommand determines why a package was determined\nto not be installable. This may not always yield a result, even if a package\nis uninstallable.\nBoth commands take a single argument, the name of a package.\nsearch\n(\napt-cache(8)\n)\nsearch\ncan be used to search for the given\nregex(7)\nterm(s) in the list of available packages and display matches.\nThis can e.g. be useful if you are looking for packages having a specific\nfeature. If you are looking for a package including a specific file try\napt-file(1)\n.\nshow\n(\napt-cache(8)\n)\nShow information about the given package(s) including its\ndependencies, installation and download size, sources the package is available\nfrom, the description of the packages content and much more. It can e.g. be\nhelpful to look at this information before allowing\napt(8)\nto remove a\npackage or while searching for new packages to install.\nlist\nlist\nis somewhat similar to\ndpkg-query\n--list\nin that it can display a list of packages satisfying certain\ncriteria. It supports\nglob(7)\npatterns for matching package names,\napt-patterns(7)\n, as well as options to list installed\n(\n--installed\n), upgradeable (\n--upgradeable\n) or all available\n(\n--all-versions\n) versions.\nedit-sources\n(work-in-progress)\nedit-sources lets you edit your\nsources.list(5)\nfiles in your preferred text editor while also providing basic sanity\nchecks.\nshowsrc, depends, rdepends, policy\n(summarised in\napt-cache(8)\n)\nsource, build-dep, download, changelog, clean, distclean,\nautoclean\n(summarised in\napt-get(8)\n)\nSCRIPT USAGE AND DIFFERENCES FROM OTHER APT TOOLS\n¶\nThe\napt(8)\ncommandline is designed as an end-user tool and\nit may change behavior between versions. While it tries not to break\nbackward compatibility this is not guaranteed either if a change seems\nbeneficial for interactive use.\nAll features of\napt(8)\nare available in dedicated APT tools\nlike\napt-get(8)\nand\napt-cache(8)\nas well.\napt(8)\njust\nchanges the default value of some options (see\napt.conf(5)\nand\nspecifically the Binary scope). So you should prefer using these commands\n(potentially with some additional options enabled) in your scripts as they\nkeep backward compatibility as much as possible.\nOPTIONS\n¶\nAll command line options may be set using the configuration file,\nthe descriptions indicate the configuration option to set. For boolean\noptions you can override the config file by using something like\n-f-\n,\n--no-f\n,\n-f=no\nor several other variations.\n-h\n,\n--help\nShow a short usage summary.\n-v\n,\n--version\nShow the program version.\n--audit\nShow audit (and notice) messages. This overrides the\nquiet option, but only for notice messages, not progress ones.\n-c\n,\n--config-file\nConfiguration File; Specify a configuration file to use.\nThe program will read the default configuration file and then this\nconfiguration file. If configuration settings need to be set before the\ndefault configuration files are parsed specify a file with the\nAPT_CONFIG\nenvironment variable. See\napt.conf(5)\nfor syntax\ninformation.\n-o\n,\n--option\nSet a Configuration Option; This will set an arbitrary\nconfiguration option. The syntax is\n-o Foo::Bar=bar\n.\n-o\nand\n--option\ncan be used multiple times to set different options.\n--cli-version\nRequests a specific CLI version. This is a pattern that\ntakes a MAJOR.MINOR version. You may omit the MINOR version, in which case the\nlatest supported minor level will be used.\nVersion tracks are presented as follows: The version 3.2 has\nequivalent versions 0.32, 1.22, and 2.12, implementing new features for\ntheir specified major versions.\nA special case is the X.9 version pattern: A version like 2.9 is\nfollowed by 3.0, but 2.10 follows directly on 2.8; given that we use odd\nversion numbers as development series (2.9 is the 3.0 development\nseries).\nThis feature has been introduced in APT 3.1.10, and replaces the\nbinary-specific configuration. You may use the\nAPT::Version\nto\nsimilar effect on older binaries, for example, use\n-o APT::Version=2\nto make\napt(8)\nbehave like the 2.x series.\nThe default value is the current APT version for\napt(8)\nand\n0.(10 * major + minor) for the classic commands. The 0.X series is\nsoft-deprecated and the other commands will roll over to the 2.x series in\nthe future.\n--no-color\n,\n--color\nTurn colors on or off. Colors are on by default on\nsupported terminals for\napt(8)\nand can also be disabled using the\nNO_COLOR\nor\nAPT_NO_COLOR\nenvironment variables, or further\nconfigured by the\nAPT::Color\nconfiguration option and scope, see\napt.conf(5)\nfor information on that.\nSEE ALSO\n¶\napt-get(8)\n,\napt-cache(8)\n,\nsources.list(5)\n,\napt.conf(5)\n,\napt-config(8)\n,\napt-patterns(7)\n, The APT\nUser's guide in /usr/share/doc/apt-doc/,\napt_preferences(5)\n, the APT\nHowto.\nDIAGNOSTICS\n¶\napt\nreturns zero on normal operation, decimal 100 on\nerror.\nBUGS\n¶\nAPT bug page\n[1]. If you wish to report a bug in APT, please\nsee /usr/share/doc/debian/bug-reporting.txt or the\nreportbug(1)\ncommand.\nAUTHOR\n¶\nAPT team\nNOTES\n¶\n1.\nAPT bug page\nhttps://bugs.debian.org/src:apt\n07 November 2025\nAPT 3.1.12\nSource file:\napt.8.en.gz (from\napt 3.1.12\n)\nSource last updated:\n2025-11-10T10:35:04Z\nConverted to HTML:\n2025-11-10T15:04:07Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/apt/apt.8.en.html"}}
{"text": "Ubuntu Manpage:\nnetplan - YAML network configuration abstraction for various backends\nMenu\nClose menu\nProvided by:\nnetplan.io_0.106.1-7ubuntu0.22.04.4_amd64\nNAME\nnetplan - YAML network configuration abstraction for various backends\nSYNOPSIS\nnetplan\n[\nCOMMAND\n| help ]\nCOMMANDS\nSee\nnetplan\nhelp\nfor a list of available commands on this system.\nDESCRIPTION\nIntroduction\nDistribution  installers,  cloud  instantiation, image builds for particular devices, or any other way to\ndeploy an operating system put its desired network configuration into YAML configuration file(s).  During\nearly boot, the netplan \"network renderer\" runs which reads /{lib,etc,run}/netplan/*.yaml and writes conâ\nfiguration to\n/run\nto hand off control of devices to the specified networking daemon.\nâ¢ Configured devices get handled by systemd-networkd by default, unless explicitly marked as managed by a\nspecific renderer (NetworkManager)\nâ¢ Devices not covered by the network config do not get touched at all.\nâ¢ Usable in initramfs (few dependencies and fast)\nâ¢ No persistent generated config, only original YAML config\nâ¢ Parser supports multiple config files to allow applications like libvirt or lxd to package up  expected\nnetwork  config  (virbr0,  lxdbr0),  or  to  change the global default policy to use NetworkManager for\neverything.\nâ¢ Retains the flexibility to change backends/policy later or adjust to removing NetworkManager, as generâ\nated configuration is ephemeral.\nGeneral\nstructure\nnetplan's  configuration  files  use  the  YAML  (\nhttp://yaml.org/spec/1.1/current.html\n)   format.    All\n/{lib,etc,run}/netplan/*.yaml  are considered.  Lexicographically later files (regardless of in which diâ\nrectory they are) amend (new mapping keys) or override (same mapping keys)  previous  ones.   A  file  in\n/run/netplan  completely shadows a file with same name in\n/etc/netplan\n, and a file in either of those diâ\nrectories shadows a file with the same name in /lib/netplan.\nThe top-level node in a netplan configuration file is a network: mapping that contains  version:  2  (the\nYAML  currently  being  used by curtin, MaaS, etc.  is version 1), and then device definitions grouped by\ntheir type, such as ethernets:, modems:, wifis:, or bridges:.  These are the types that our renderer  can\nunderstand and are supported by our backends.\nEach  type block contains device definitions as a map where the keys (called \"configuration IDs\") are deâ\nfined as below.\nDevice\nconfiguration\nIDs\nThe key names below the per-device-type definition maps (like ethernets:) are called \"ID\"s.  They must be\nunique throughout the entire set of configuration files.  Their primary purpose is  to  serve  as  anchor\nnames for composite devices, for example to enumerate the members of a bridge that is currently being deâ\nfined.\n(Since  0.97) If an interface is defined with an ID in a configuration file; it will be brought up by the\napplicable renderer.  To not have netplan touch an interface at all, it should be completely omitted from\nthe netplan configuration files.\nThere are two physically/structurally different classes of device definitions, and the  ID  field  has  a\ndifferent interpretation for each:\nPhysical devices\n(Examples:  ethernet, modem, wifi) These can dynamically come and go between reboots and even durâ\ning runtime (hot plugging).  In the generic case, they can be selected by match: rules on  desired\nproperties,  such  as  name/name  pattern, MAC address, driver, or device paths.  In general these\nwill match any number of devices (unless they refer to properties which are  unique  such  as  the\nfull  path  or  MAC address), so without further knowledge about the hardware these will always be\nconsidered as a group.\nIt is valid to specify no match rules at all, in which case the ID field is simply  the  interface\nname  to  be matched.  This is mostly useful if you want to keep simple cases simple, and it's how\nnetwork device configuration has been done for a long time.\nIf there are match: rules, then the ID field is a purely opaque name which is only being used  for\nreferences from definitions of compound devices in the config.\nVirtual devices\n(Examples:  veth,  bridge,  bond, vrf) These are fully under the control of the config file(s) and\nthe network stack.  I.  e.  these devices are being created instead of matched.  Thus  match:  and\nset-name:  are  not  applicable for these, and the ID field is the name of the created virtual deâ\nvice.\nTop-level\nconfiguration\nstructure\nThe general structure of a Netplan YAML file is shown below.\nnetwork:\nversion: NUMBER\nrenderer: STRING\nbonds: MAPPING\nbridges: MAPPING\nethernets: MAPPING\nmodems: MAPPING\ntunnels: MAPPING\nvlans: MAPPING\nvrfs: MAPPING\nwifis: MAPPING\nnm-devices: MAPPING\nâ¢\nversion\n(number)\nDefines what version of the configuration format is used.  The only value supported is  2.   Deâ\nfaults to 2 if not defined.\nâ¢\nrenderer\n(scalar)\nDefines what network configuration tool will be used to set up your configuration.  Valid values\nare networkd and NetworkManager.  Defaults to networkd if not defined.\nâ¢\nbonds\n(mapping)\nCreates and configures link aggregation (bonding) devices.\nâ¢\nbridges\n(mapping)\nCreates and configures bridge devices.\nâ¢\nethernets\n(mapping)\nConfigures physical Ethernet interfaces.\nâ¢\nmodems\n(mapping)\nConfigures modems\nâ¢\ntunnels\n(mapping)\nCreates and configures different types of virtual tunnels.\nâ¢\nvlans\n(mapping)\nCreates and configures VLANs.\nâ¢\nvrfs\n(mapping)\nConfigures Virtual Routing and Forwarding (VRF) devices.\nâ¢\nwifis\n(mapping)\nConfigures physical Wifi interfaces as client, adhoc or access point.\nâ¢\nnm-devices\n(mapping)\nnm-devices  are  used  in situations where Netplan doesn't support the connection type.  The raw\nconfiguration expected by NetworkManager can be defined and will be passed as  is  (passthrough)\nto the .nmconnection file.  Users will not normally use this type of device.\nAll the properties for all the device types will be described in the next sections.\nProperties\nfor\nphysical\ndevice\ntypes\nThese properties are used with physical devices such as Ethernet and Wifi network interfaces.\nNote:\nSome options will not work reliably for devices matched by name only and rendered by networkd, due\nto interactions with device renaming in udev.  Match devices by MAC when setting options like:  wakeonlan\nor *-offload.\nâ¢\nmatch\n(mapping)\nThis selects a subset of available physical devices by various hardware properties.  The followâ\ning  configuration  will then apply to all matching devices, as soon as they appear.\nAll\nspeciâ\nfied properties must match.\nâ¢\nname\n(scalar)\nCurrent interface name.  Globs are supported, and the primary use case for matching on  names,\nas  selecting one fixed name can be more easily achieved with having no match: at all and just\nusing the ID (see above).  (NetworkManager: as of v1.14.0)\nâ¢\nmacaddress\n(scalar)\nDevice's 6-byte permanent MAC address in the form \"XX:XX:XX:XX:XX:XX\" or 20 bytes for  Infiniâ\nBand  devices  (IPoIB).   Globs are not allowed.  This doesn't match virtual MAC addresses for\nveth, bridge, bond, vlan, ...\nâ¢\ndriver\n(scalar or sequence of scalars) â sequence since\n0.104\nKernel driver name, corresponding to the DRIVER udev property.  A sequence of  globs  is  supâ\nported, any of which must match.  Matching on driver is\nonly\nsupported with networkd.\nExamples:\nâ¢ All cards on second PCI bus:\nnetwork:\nethernets:\nmyinterface:\nmatch:\nname: enp2*\nâ¢ Fixed MAC address:\nnetwork:\nethernets:\ninterface0:\nmatch:\nmacaddress: 11:22:33:AA:BB:FF\nâ¢ First card of driver ixgbe:\nnetwork:\nethernets:\nnic0:\nmatch:\ndriver: ixgbe\nname: en*s0\nâ¢ First card with a driver matching bcmgenet or smsc*:\nnetwork:\nethernets:\nnic0:\nmatch:\ndriver: [\"bcmgenet\", \"smsc*\"]\nname: en*\nâ¢\nset-name\n(scalar)\nWhen  matching  on unique properties such as path or MAC, or with additional assumptions such as\n\"there will only ever be one wifi device\", match rules can be written so that  they  only  match\none  device.  Then this property can be used to give that device a more specific/desirable/nicer\nname than the default from udev's ifnames.  Any additional device that satisfies the match rules\nwill then fail to get renamed and keep the original kernel name (and dmesg will show an error).\nâ¢\nwakeonlan\n(bool)\nEnable wake on LAN.  Off by default.\nâ¢\nemit-lldp\n(bool) â since\n0.99\n(networkd backend only) Whether to emit LLDP packets.  Off by default.\nâ¢\nreceive-checksum-offload\n(bool) â since\n0.104\n(networkd backend only) If set to true (false), the hardware offload for checksumming of ingress\nnetwork packets is enabled (disabled).  When unset, the kernel's default will be used.\nâ¢\ntransmit-checksum-offload\n(bool) â since\n0.104\n(networkd backend only) If set to true (false), the hardware offload for checksumming of  egress\nnetwork packets is enabled (disabled).  When unset, the kernel's default will be used.\nâ¢\ntcp-segmentation-offload\n(bool) â since\n0.104\n(networkd  backend  only)  If set to true (false), the TCP Segmentation Offload (TSO) is enabled\n(disabled).  When unset, the kernel's default will be used.\nâ¢\ntcp6-segmentation-offload\n(bool) â since\n0.104\n(networkd backend only) If set to true (false), the TCP6 Segmentation Offload (tx-tcp6-segmentaâ\ntion) is enabled (disabled).  When unset, the kernel's default will be used.\nâ¢\ngeneric-segmentation-offload\n(bool) â since\n0.104\n(networkd backend only) If set to true (false), the Generic Segmentation Offload  (GSO)  is  enâ\nabled (disabled).  When unset, the kernel's default will be used.\nâ¢\ngeneric-receive-offload\n(bool) â since\n0.104\n(networkd  backend  only)  If  set to true (false), the Generic Receive Offload (GRO) is enabled\n(disabled).  When unset, the kernel's default will be used.\nâ¢\nlarge-receive-offload\n(bool) â since\n0.104\n(networkd backend only) If set to true (false), the Large Receive Offload (LRO) is enabled (disâ\nabled).  When unset, the kernel's default will be used.\nâ¢\nopenvswitch\n(mapping) â since\n0.100\nThis provides additional configuration for the openvswitch network device.  If Open  vSwitch  is\nnot  available on the system, netplan treats the presence of openvswitch configuration as an erâ\nror.\nAny supported network device that is declared with the openvswitch mapping (or  any  bond/bridge\nthat includes an interface with an openvswitch configuration) will be created in openvswitch inâ\nstead  of the defined renderer.  In the case of a vlan definition declared the same way, netplan\nwill create a fake VLAN bridge in openvswitch with the requested vlan properties.\nâ¢\nexternal-ids\n(mapping) â since\n0.100\nPassed-through directly to Open vSwitch\nâ¢\nother-config\n(mapping) â since\n0.100\nPassed-through directly to Open vSwitch\nâ¢\nlacp\n(scalar) â since\n0.100\nValid for bond interfaces.  Accepts active, passive or off (the default).\nâ¢\nfail-mode\n(scalar) â since\n0.100\nValid for bridge interfaces.  Accepts secure or standalone (the default).\nâ¢\nmcast-snooping\n(bool) â since\n0.100\nValid for bridge interfaces.  False by default.\nâ¢\nprotocols\n(sequence of scalars) â since\n0.100\nValid for bridge interfaces or the network section.  List of protocols to be used when negotiâ\nating a connection with the controller.  Accepts  OpenFlow10,  OpenFlow11,  OpenFlow12,  Openâ\nFlow13, OpenFlow14, and OpenFlow15.\nâ¢\nrstp\n(bool) â since\n0.100\nValid for bridge interfaces.  False by default.\nâ¢\ncontroller\n(mapping) â since\n0.100\nValid for bridge interfaces.  Specify an external OpenFlow controller.\nâ¢\naddresses\n(sequence of scalars)\nSet  the list of addresses to use for the controller targets.  The syntax of these addresses\nis   as    defined    in\novs-vsctl\n(8).     Example:    addresses:    [tcp:127.0.0.1:6653,\n\"ssl:[fe80::1234%eth0]:6653\"]\nâ¢\nconnection-mode\n(scalar)\nSet  the connection mode for the controller.  Supported options are in-band and out-of-band.\nThe default is in-band.\nâ¢\nports\n(sequence of sequence of scalars) â since\n0.100\nOpen vSwitch patch ports.  Each port is declared as a pair of names which can be referenced as\ninterfaces in dependent virtual devices (bonds, bridges).\nExample:\nopenvswitch:\nports:\n- [patch0-1, patch1-0]\nâ¢\nssl\n(mapping) â since\n0.100\nValid for global openvswitch settings.  Options for configuring SSL server  endpoint  for  the\nswitch.\nâ¢\nca-cert\n(scalar)\nPath to a file containing the CA certificate to be used.\nâ¢\ncertificate\n(scalar)\nPath to a file containing the server certificate.\nâ¢\nprivate-key\n(scalar)\nPath to a file containing the private key for the server.\nProperties\nfor\nall\ndevice\ntypes\nâ¢\nrenderer\n(scalar)\nUse the given networking backend for this definition.  Currently supported are networkd and Netâ\nworkManager.   This property can be specified globally in network:, for a device type (in e.  g.\nethernets:) or for a particular device definition.  Default is networkd.\n(Since 0.99) The renderer property has one additional acceptable value for vlan objects (i.   e.\ndefined  in  vlans:): sriov.  If a vlan is defined with the sriov renderer for an SR-IOV Virtual\nFunction interface, this causes netplan to set up a hardware VLAN filter for it.  There  can  be\nonly one defined per VF.\nâ¢\ndhcp4\n(bool)\nEnable DHCP for IPv4.  Off by default.\nâ¢\ndhcp6\n(bool)\nEnable  DHCP for IPv6.  Off by default.  This covers both stateless DHCP - where the DHCP server\nsupplies information like DNS nameservers but not the IP address - and stateful DHCP, where  the\nserver provides both the address and the other information.\nIf  you are in an IPv6-only environment with completely stateless auto-configuration (SLAAC with\nRDNSS), this option can be set to cause the interface to  be  brought  up.   (Setting  accept-ra\nalone  is not sufficient.) Auto-configuration will still honor the contents of the router adverâ\ntisement and only use DHCP if requested in the RA.\nNote that\nrdnssd\n(8) is required to use RDNSS with networkd.  No extra software is  required  for\nNetworkManager.\nâ¢\nipv6-mtu\n(scalar) â since\n0.98\n> Set the IPv6 MTU (only supported with networkd backend).  Note > that\nneeding to set this is an unusual requirement.  > >\nRequires\nfeature:\nipv6-mtu\nâ¢\nipv6-privacy\n(bool)\nEnable IPv6 Privacy Extensions (RFC 4941) for the specified interface, and prefer temporary  adâ\ndresses.   Defaults  to false - no privacy extensions.  There is currently no way to have a priâ\nvate address but prefer the public address.\nâ¢\nlink-local\n(sequence of scalars)\nConfigure the link-local addresses to bring up.  Valid options are 'ipv4' and 'ipv6', which  reâ\nspectively  allow  enabling  IPv4 and IPv6 link local addressing.  If this field is not defined,\nthe default is to enable only IPv6 link-local addresses.  If the field is defined but configured\nas an empty set, IPv6 link-local addresses are disabled as well as IPv4 link- local addresses.\nThis feature enables or disables link-local addresses for a protocol, but the actual implementaâ\ntion differs per backend.  On networkd, this directly changes the behavior and may add an  extra\naddress  on an interface.  When using the NetworkManager backend, enabling link-local has no efâ\nfect if the interface also has DHCP enabled.\nExamples:\nâ¢ Enable only IPv4 link-local: link-local: [ ipv4 ]\nâ¢ Enable all link-local addresses: link-local: [ ipv4, ipv6 ]\nâ¢ Disable all link-local addresses: link-local: [ ]\nâ¢\nignore-carrier\n(bool) â since\n0.104\n(networkd backend only) Allow the specified interface to be configured even if it has no  carriâ\ner.\nâ¢\ncritical\n(bool)\nDesignate the connection as \"critical to the system\", meaning that special care will be taken by\nto not release the assigned IP when the daemon is restarted.  (not recognized by NetworkManager)\nâ¢\ndhcp-identifier\n(scalar)\n(networkd  backend  only) Sets the source of DHCPv4 client identifier.  If mac is specified, the\nMAC address of the link is used.  If this option is omitted, or if duid is  specified,  networkd\nwill  generate  an RFC4361-compliant client identifier for the interface by combining the link's\nIAID and DUID.\nâ¢\ndhcp4-overrides\n(mapping)\n(networkd backend only) Overrides default DHCP behavior; see the DHCP Overrides section below.\nâ¢\ndhcp6-overrides\n(mapping)\n(networkd backend only) Overrides default DHCP behavior; see the DHCP Overrides section below.\nâ¢\naccept-ra\n(bool)\nAccept Router Advertisement that would have the kernel configure IPv6 by itself.  When  enabled,\naccept Router Advertisements.  When disabled, do not respond to Router Advertisements.  If unset\nuse the host kernel default setting.\nâ¢\naddresses\n(sequence of scalars and mappings)\nAdd static addresses to the interface in addition to the ones received through DHCP or RA.  Each\nsequence entry is in CIDR notation, i.  e.  of the form addr/prefixlen.  addr is an IPv4 or IPv6\naddress as recognized by\ninet_pton\n(3) and prefixlen the number of bits of the subnet.\nFor  virtual  devices  (bridges, bonds, vlan) if there is no address configured and DHCP is disâ\nabled, the interface may still be brought online, but will not be addressable from the network.\nIn addition to the addresses themselves one can specify configuration  parameters  as  mappings.\nCurrent supported options are:\nâ¢\nlifetime\n(scalar) â since\n0.100\nDefault: forever.  This can be forever or 0 and corresponds to the PreferredLifetime option in\nsystemd-networkd's Address section.  Currently supported on the networkd backend only.\nâ¢\nlabel\n(scalar) â since\n0.100\nAn  IP  address label, equivalent to the ip address label command.  Currently supported on the\nnetworkd backend only.\nExamples:\nâ¢ Simple: addresses: [192.168.14.2/24, \"2001:1::1/64\"]\nâ¢ Advanced:\nnetwork:\nethernets:\neth0:\naddresses:\n- \"10.0.0.15/24\":\nlifetime: 0\nlabel: \"maas\"\n- \"2001:1::1/64\"\nâ¢\nipv6-address-generation\n(scalar) â since\n0.99\nConfigure method for creating the address for use with RFC4862 IPv6 Stateless Address  Auto-conâ\nfiguration  (only  supported with NetworkManager backend).  Possible values are eui64 or stable-\nprivacy.\nâ¢\nipv6-address-token\n(scalar) â since\n0.100\nDefine an IPv6 address token for creating a static interface identifier for IPv6  Stateless  Adâ\ndress Auto-configuration.  This is mutually exclusive with ipv6-address-generation.\nâ¢\ngateway4\n,\ngateway6\n(scalar)\nDeprecated,  see  Default routes.  Set default gateway for IPv4/6, for manual address configuraâ\ntion.  This requires setting addresses too.  Gateway IPs must be in a  form  recognized  by\ninâ\net_pton\n(3).  There should only be a single gateway per IP address family set in your global conâ\nfig,  to make it unambiguous.  If you need multiple default routes, please define them via routâ\ning-policy.\nExamples\nâ¢ IPv4: gateway4: 172.16.0.1\nâ¢ IPv6: gateway6: \"2001:4::1\"\nâ¢\nnameservers\n(mapping)\nSet DNS servers and search domains, for manual address configuration.  There are  two  supported\nfields:  addresses:  is  a  list of IPv4 or IPv6 addresses similar to gateway*, and search: is a\nlist of search domains.\nExample:\nnetwork:\nethernets:\nid0:\n[...]\nnameservers:\nsearch: [lab, home]\naddresses: [8.8.8.8, \"FEDC::1\"]\nâ¢\nmacaddress\n(scalar)\nSet the device's MAC address.  The MAC address must be in the form \"XX:XX:XX:XX:XX:XX\".\nNote:\nThis will not work reliably for devices matched by name only and rendered by networkd, due\nto interactions with device renaming in udev.  Match devices by MAC when setting MAC addresses.\nExample:\nnetwork:\nethernets:\nid0:\nmatch:\nmacaddress: 52:54:00:6b:3c:58\n[...]\nmacaddress: 52:54:00:6b:3c:59\nâ¢\nmtu\n(scalar)\nSet the Maximum Transmission Unit for the interface.  The default is 1500.  Valid values  depend\non your network interface.\nNote:\nThis will not work reliably for devices matched by name only and rendered by networkd, due\nto interactions with device renaming in udev.  Match devices by MAC when setting MTU.\nâ¢\noptional\n(bool)\nAn  optional device is not required for booting.  Normally, networkd will wait some time for deâ\nvice to become configured before proceeding with booting.  However, if a device is marked as opâ\ntional, networkd will not wait for it.  This is\nonly\nsupported by networkd, and the  default  is\nfalse.\nExample:\nnetwork:\nethernets:\neth7:\n# this is plugged into a test network that is often\n# down - don't wait for it to come up during boot.\ndhcp4: true\noptional: true\nâ¢\noptional-addresses\n(sequence of scalars)\nSpecify  types  of  addresses  that are not required for a device to be considered online.  This\nchanges the behavior of backends at boot time to avoid waiting for addresses that are marked opâ\ntional, and thus consider the interface as \"usable\" sooner.  This does  not  disable  these  adâ\ndresses, which will be brought up anyway.\nExample:\nnetwork:\nethernets:\neth7:\ndhcp4: true\ndhcp6: true\noptional-addresses: [ ipv4-ll, dhcp6 ]\nâ¢\nactivation-mode\n(scalar) â since\n0.103\nAllows  specifying  the management policy of the selected interface.  By default, netplan brings\nup any configured interface if possible.  Using the activation-mode setting users  can  override\nthat  behavior by either specifying manual, to hand over control over the interface state to the\nadministrator or (for networkd backend\nonly\n) off to force the link in a down state at all times.\nAny interface with activation-mode defined is implicitly considered optional.   Supported  offiâ\ncially as of networkd v248+.\nExample:\nnetwork:\nethernets:\neth1:\n# this interface will not be put into an UP state automatically\ndhcp4: true\nactivation-mode: manual\nâ¢\nroutes\n(sequence of mappings)\nConfigure static routing for the device; see the Routing section below.\nâ¢\nrouting-policy\n(sequence of mappings)\nConfigure policy routing for the device; see the Routing section below.\nâ¢\nneigh-suppress\n(scalar) â since\n0.105\nTakes  a  boolean.  Configures whether ARP and ND neighbor suppression is enabled for this port.\nWhen unset, the kernel's default will be used.\nDHCP\nOverrides\nSeveral DHCP behavior overrides are available.  Most currently only have any effect when using  the  netâ\nworkd backend, with the exception of use-routes and route-metric.\nOverrides only have an effect if the corresponding dhcp4 or dhcp6 is set to true.\nIf  both dhcp4 and dhcp6 are true, the networkd backend requires that dhcp4-overrides and dhcp6-overrides\ncontain the same keys and values.  If the values do not match, an error will be  shown  and  the  network\nconfiguration will not be applied.\nWhen  using  the  NetworkManager  backend,  different  values  may  be  specified for dhcp4-overrides and\ndhcp6-overrides, and will be applied to the DHCP client processes as specified in the netplan YAML.\nâ¢\ndhcp4-overrides\n,\ndhcp6-overrides\n(mapping)\nThe dhcp4-overrides and `dhcp6-override`` mappings override the default DHCP behavior.\nâ¢\nuse-dns\n(bool)\nDefault: true.  When true, the DNS servers received from the DHCP server will be used and take\nprecedence over any statically configured ones.  Currently only has an effect on the  networkd\nbackend.\nâ¢\nuse-ntp\n(bool)\nDefault:  true.  When true, the NTP servers received from the DHCP server will be used by sysâ\ntemd-timesyncd and take precedence over any statically configured ones.  Currently only has an\neffect on the networkd backend.\nâ¢\nsend-hostname\n(bool)\nDefault: true.  When true, the machine's hostname will be sent to the DHCP server.   Currently\nonly has an effect on the networkd backend.\nâ¢\nuse-hostname\n(bool)\nDefault: true.  When true, the hostname received from the DHCP server will be set as the tranâ\nsient hostname of the system.  Currently only has an effect on the networkd backend.\nâ¢\nuse-mtu\n(bool)\nDefault: true.  When true, the MTU received from the DHCP server will be set as the MTU of the\nnetwork  interface.   When false, the MTU advertised by the DHCP server will be ignored.  Curâ\nrently only has an effect on the networkd backend.\nâ¢\nhostname\n(scalar)\nUse this value for the hostname which is sent to the DHCP server, instead of  machine's  hostâ\nname.  Currently only has an effect on the networkd backend.\nâ¢\nuse-routes\n(bool)\nDefault:  true.   When true, the routes received from the DHCP server will be installed in the\nrouting table normally.  When set to false, routes from the DHCP server will  be  ignored:  in\nthis  case,  the user is responsible for adding static routes if necessary for correct network\noperation.  This allows users to avoid installing a default gateway for interfaces  configured\nvia DHCP.  Available for both the networkd and NetworkManager backends.\nâ¢\nroute-metric\n(scalar)\nUse  this  value  for  default  metric for automatically-added routes.  Use this to prioritize\nroutes for devices by setting a lower metric on a preferred interface.  Available for both the\nnetworkd and NetworkManager backends.\nâ¢\nuse-domains\n(scalar) â since\n0.98\nTakes a boolean, or the special value \"route\".  When true, the domain name received  from  the\nDHCP server will be used as DNS search domain over this link, similar to the effect of the Doâ\nmains= setting.  If set to \"route\", the domain name received from the DHCP server will be used\nfor  routing  DNS  queries  only, but not for searching, similar to the effect of the Domains=\nsetting when the argument is prefixed with \"~\".\nRequires\nfeature:\ndhcp-use-domains\nRouting\nComplex routing is possible with netplan.  Standard static routes as well as policy routing using routing\ntables are supported via the networkd backend.\nThese options are available for all types of interfaces.\nDefault\nroutes\nThe most common need for routing concerns the definition of default routes to reach the  wider  Internet.\nThose default routes can only defined once per IP family and routing table.  A typical example would look\nlike the following:\nnetwork:\nethernets:\neth0:\n[...]\nroutes:\n- to: default # could be 0.0.0.0/0 optionally\nvia: 10.0.0.1\nmetric: 100\non-link: true\n- to: default # could be ::/0 optionally\nvia: cf02:de:ad:be:ef::2\neth1:\n[...]\nroutes:\n- to: default\nvia: 172.134.67.1\nmetric: 100\non-link: true\n# Not on the main routing table,\n# does not conflict with the eth0 default route\ntable: 76\nâ¢\nroutes\n(mapping)\nThe  routes  block  defines standard static routes for an interface.  At least to must be speciâ\nfied.  If type is local or nat a default scope of host is assumed.  If type is  unicast  and  no\ngateway (via) is given or type is broadcast, multicast or anycast a default scope of link is asâ\nsumed.  Otherwise, a global scope is the default setting.\nFor  from, to, and via, both IPv4 and IPv6 addresses are recognized, and must be in the form adâ\ndr/prefixlen or addr.\nâ¢\nfrom\n(scalar)\nSet a source IP address for traffic going through the route.  (NetworkManager: as of v1.8.0)\nâ¢\nto\n(scalar)\nDestination address for the route.\nâ¢\nvia\n(scalar)\nAddress to the gateway to use for this route.\nâ¢\non-link\n(bool)\nWhen set to \"true\", specifies that the route is directly connected to  the  interface.   (Netâ\nworkManager: as of v1.12.0 for IPv4 and v1.18.0 for IPv6)\nâ¢\nmetric\n(scalar)\nThe relative priority of the route.  Must be a positive integer value.\nâ¢\ntype\n(scalar)\nThe  type  of  route.   Valid options are \"unicast\" (default), \"anycast\", \"blackhole\", \"broadâ\ncast\", \"local\", \"multicast\", \"nat\", \"prohibit\", \"throw\", \"unreachable\" or \"xresolve\".\nâ¢\nscope\n(scalar)\nThe route scope, how wide-ranging it is to the network.  Possible values are \"global\", \"link\",\nor \"host\".  Applies to IPv4 only.\nâ¢\ntable\n(scalar)\nThe table number to use for the route.  In some scenarios, it may be useful to set routes in a\nseparate routing table.  It may also be used to refer to routing policy rules which  also  acâ\ncept  a  table  parameter.  Allowed values are positive integers starting from 1.  Some values\nare already in use to refer to specific routing tables:  see  /etc/iproute2/rt_tables.   (Netâ\nworkManager: as of v1.10.0)\nâ¢\nmtu\n(scalar) â since\n0.101\nThe MTU to be used for the route, in bytes.  Must be a positive integer value.\nâ¢\ncongestion-window\n(scalar) â since\n0.102\nThe  congestion window to be used for the route, represented by number of segments.  Must be a\npositive integer value.\nâ¢\nadvertised-receive-window\n(scalar) â since\n0.102\nThe receive window to be advertised for the route, represented by number of segments.  Must be\na positive integer value.\nâ¢\nrouting-policy\n(mapping)\nThe routing-policy block defines extra routing policy for a network, where traffic may  be  hanâ\ndled specially based on the source IP, firewall marking, etc.\nFor  from,  to,  both  IPv4 and IPv6 addresses are recognized, and must be in the form addr/preâ\nfixlen or addr.\nâ¢\nfrom\n(scalar)\nSet a source IP address to match traffic for this policy rule.\nâ¢\nto\n(scalar)\nMatch on traffic going to the specified destination.\nâ¢\ntable\n(scalar)\nThe table number to match for the route.  In some scenarios, it may be useful to set routes in\na separate routing table.  It may also be used to refer to routes which also  accept  a  table\nparameter.   Allowed values are positive integers starting from 1.  Some values are already in\nuse to refer to specific routing tables: see /etc/iproute2/rt_tables.\nâ¢\npriority\n(scalar)\nSpecify a priority for the routing policy rule, to influence the order in which routing  rules\nare processed.  A higher number means lower priority: rules are processed in order by increasâ\ning priority number.\nâ¢\nmark\n(scalar)\nHave  this  routing policy rule match on traffic that has been marked by the iptables firewall\nwith this value.  Allowed values are positive integers starting from 1.\nâ¢\ntype-of-service\n(scalar)\nMatch this policy rule based on the type of service number applied to the traffic.\nAuthentication\nNetplan supports advanced authentication settings for ethernet and wifi interfaces, as well as individual\nwifi networks, by means of the auth block.\nâ¢\nauth\n(mapping)\nSpecifies authentication settings for a device of type ethernets:, or an access-points: entry on\na wifis: device.\nThe auth block supports the following properties:\nâ¢\nkey-management\n(scalar)\nThe supported key management modes are none (no key management); psk (WPA with pre-shared key,\ncommon for home wifi); eap (WPA with EAP, common for enterprise wifi); sae (used by WPA3); and\n802.1x (used primarily for wired Ethernet connections).\nâ¢\npassword\n(scalar)\nThe password string for EAP, or the pre-shared key for WPA-PSK.\nThe following properties can be used if key-management is eap or 802.1x:\nâ¢\nmethod\n(scalar)\nThe EAP method to use.  The supported EAP methods are tls (TLS),  peap  (Protected  EAP),  and\nttls (Tunneled TLS).\nâ¢\nidentity\n(scalar)\nThe identity to use for EAP.\nâ¢\nanonymous-identity\n(scalar)\nThe  identity to pass over the unencrypted channel if the chosen EAP method supports passing a\ndifferent tunnelled identity.\nâ¢\nca-certificate\n(scalar)\nPath to a file with one or more trusted certificate authority (CA) certificates.\nâ¢\nclient-certificate\n(scalar)\nPath to a file containing the certificate to be used by the client during authentication.\nâ¢\nclient-key\n(scalar)\nPath to a file containing the private key corresponding to client-certificate.\nâ¢\nclient-key-password\n(scalar)\nPassword to use to decrypt the private key specified in client-key if it is encrypted.\nâ¢\nphase2-auth\n(scalar) â since\n0.99\nPhase 2 authentication mechanism.\nProperties\nfor\ndevice\ntype\nethernets:\nStatus\n: Optional.\nPurpose\n: Use the ethernets key to configure Ethernet interfaces.\nStructure\n: The key consists of a mapping of Ethernet interface IDs.  Each ethernet has a number  of  conâ\nfiguration  options.  You don't need to define each interface by their name inside the ethernets mapping.\nYou can use any ID that describes the interface and match the actual network card using  the  match  key.\nThe general configuration structure for Ethernets is shown below.\nnetwork:\nethernets:\ndevice-id:\n...\ndevice-id  is the interface identifier.  If you use the interface name as the ID, Netplan will match that\ninterface.\nConsider the example below.  In this case, an interface called eth0 will be configured with DHCP.\nnetwork:\nethernets:\neth0:\ndhcp4: true\nThe device-id can be any descriptive name your find meaningful.  Although, if it doesn't match a real inâ\nterface name, you must use the property match to identify the device you want to configure.\nThe example below defines an Ethernet connection called isp-interface (supposedly an  external  interface\nconnected to the Internet Service Provider) and uses match to apply the configuration to the physical deâ\nvice with MAC address aa:bb:cc:00:11:22.\nnetwork:\nethernets:\nisp-interface:\nmatch:\nmacaddress: aa:bb:cc:00:11:22\ndhcp4: true\nEthernet  device definitions, beyond common ones described above, also support some additional properties\nthat can be used for SR-IOV devices.\nâ¢\nlink\n(scalar) â since\n0.99\n(SR-IOV devices only) The link property declares the device as a Virtual Function of the selectâ\ned Physical Function device, as identified by the given netplan id.\nExample:\nnetwork:\nethernets:\nenp1: {...}\nenp1s16f1:\nlink: enp1\nâ¢\nvirtual-function-count\n(scalar) â since\n0.99\n(SR-IOV devices only) In certain special cases VFs might need to be configured outside  of  netâ\nplan.   For such configurations virtual-function-count can be optionally used to set an explicit\nnumber of Virtual Functions for the given Physical Function.  If unset, the default is to create\nonly as many VFs as are defined in the netplan configuration.  This should be used  for  special\ncases only.\nRequires\nfeature:\nsriov\nâ¢\nembedded-switch-mode\n(scalar) â since\n0.104\n(SR-IOV devices only) Change the operational mode of the embedded switch of a supported SmartNIC\nPCI device (e.g.  Mellanox ConnectX-5).  Possible values are switchdev or legacy, if unspecified\nthe vendor's default configuration is used.\nRequires\nfeature:\neswitch-mode\nâ¢\ndelay-virtual-functions-rebind\n(bool) â since\n0.104\n(SR-IOV  devices  only) Delay rebinding of SR-IOV virtual functions to its driver after changing\nthe embedded-switch-mode setting to a later stage.  Can be enabled when  bonding/VF  LAG  is  in\nuse.  Defaults to false.\nRequires\nfeature:\neswitch-mode\nâ¢\ninfiniband-mode\n(scalar) â since\n0.105\n(InfiniBand  devices  only)  Change the operational mode of a IPoIB device.  Possible values are\ndatagram or connected.  If unspecified the kernel's default configuration is used.\nRequires\nfeature:\ninfiniband\nProperties\nfor\ndevice\ntype\nmodems:\nStatus\n: Optional.\nPurpose\n: Use the modems key to configure Modem interfaces.  GSM/CDMA modem configuration is only supportâ\ned for the NetworkManager backend.  systemd-networkd does not support modems.\nStructure\n: The key consists of a mapping of Modem IDs.  Each modem has a number of configuration options.\nThe general configuration structure for Modems is shown below.\nnetwork:\nversion: 2\nrenderer: NetworkManager\nmodems:\ncdc-wdm1:\nmtu: 1600\napn: ISP.CINGULAR\nusername:\nISP@CINGULARGPRS.COM\npassword: CINGULAR1\nnumber: \"*99#\"\nnetwork-id: 24005\ndevice-id: da812de91eec16620b06cd0ca5cbc7ea25245222\npin: 2345\nsim-id: 89148000000060671234\nsim-operator-id: 310260\nRequires\nfeature:\nmodems\nâ¢\napn\n(scalar) â since\n0.99\nSet the carrier APN (Access Point Name).  This can be omitted if auto-config is enabled.\nâ¢\nauto-config\n(bool) â since\n0.99\nSpecify whether to try and auto-configure the modem by doing a lookup of the carrier against the\nMobile Broadband Provider database.  This may not work for all carriers.\nâ¢\ndevice-id\n(scalar) â since\n0.99\nSpecify the device ID (as given by the WWAN management service) of the modem to match.  This can\nbe found using mmcli.\nâ¢\nnetwork-id\n(scalar) â since\n0.99\nSpecify the Network ID (GSM LAI format).  If this is specified, the device will  not  roam  netâ\nworks.\nâ¢\nnumber\n(scalar) â since\n0.99\nThe number to dial to establish the connection to the mobile broadband network.  (Deprecated for\nGSM)\nâ¢\npassword\n(scalar) â since\n0.99\nSpecify  the password used to authenticate with the carrier network.  This can be omitted if auâ\nto-config is enabled.\nâ¢\npin\n(scalar) â since\n0.99\nSpecify the SIM PIN to allow it to operate if a PIN is set.\nâ¢\nsim-id\n(scalar) â since\n0.99\nSpecify the SIM unique identifier (as given by the WWAN management service) which  this  connecâ\ntion  applies  to.   If given, the connection will apply to any device also allowed by device-id\nwhich contains a SIM card matching the given identifier.\nâ¢\nsim-operator-id\n(scalar) â since\n0.99\nSpecify the MCC/MNC string (such as \"310260\" or \"21601\") which identifies the carrier that  this\nconnection  should  apply to.  If given, the connection will apply to any device also allowed by\ndevice-id and sim-id which contains a SIM card provisioned by the given operator.\nâ¢\nusername\n(scalar) â since\n0.99\nSpecify the username used to authenticate with the carrier network.  This can be omitted if  auâ\nto-config is enabled.\nProperties\nfor\ndevice\ntype\nwifis:\nStatus\n: Optional.\nPurpose\n: Use the wifis key to configure WiFi access points.\nStructure\n:  The  key consists of a mapping of WiFi IDs.  Each wifi has a number of configuration options.\nThe general configuration structure for WiFis is shown below.\nnetwork:\nversion: 2\nwifis:\nwlp0s1:\naccess-points:\n\"network_ssid_name\":\npassword: \"**********\"\nNote that systemd-networkd does not natively support wifi, so you need wpasupplicant installed if you let\nthe networkd renderer handle wifi.\nâ¢\naccess-points\n(mapping)\nThis provides pre-configured connections to NetworkManager.  Note that users can of  course  seâ\nlect  other access points/SSIDs.  The keys of the mapping are the SSIDs, and the values are mapâ\npings with the following supported properties:\nâ¢\npassword\n(scalar)\nEnable WPA/WPA2 authentication and set the passphrase for it.  If neither  this  nor  an  auth\nblock are given, the network is assumed to be open.  The setting\npassword: \"S3kr1t\"\nis equivalent to\nauth:\nkey-management: psk\npassword: \"S3kr1t\"\nâ¢\nmode\n(scalar)\nPossible  access  point  modes are infrastructure (the default), ap (create an access point to\nwhich other devices can connect), and adhoc (peer to peer networks without  a  central  access\npoint).  ap is only supported with NetworkManager.\nâ¢\nbssid\n(scalar) â since\n0.99\nIf specified, directs the device to only associate with the given access point.\nâ¢\nband\n(scalar) â since\n0.99\nPossible bands are 5GHz (for 5GHz 802.11a) and 2.4GHz (for 2.4GHz 802.11), do not restrict the\n802.11 frequency band of the network if unset (the default).\nâ¢\nchannel\n(scalar) â since\n0.99\nWireless  channel  to  use  for the Wi-Fi connection.  Because channel numbers overlap between\nbands, this property takes effect only if the band property is also set.\nâ¢\nhidden\n(bool) â since\n0.100\nSet to true to change the SSID scan technique for connecting to hidden  WiFi  networks.   Note\nthis  may  have slower performance compared to false (the default) when connecting to publicly\nbroadcast SSIDs.\nâ¢\nwakeonwlan\n(sequence of scalars) â since\n0.99\nThis enables WakeOnWLan on supported devices.  Not all drivers support all options.  May be  any\ncombination  of  any, disconnect, magic_pkt, gtk_rekey_failure, eap_identity_req, four_way_handâ\nshake, rfkill_release or tcp (NetworkManager only).  Or the  exclusive  default  flag  (the  deâ\nfault).\nâ¢\nregulatory-domain\n(scalar) â since\n0.105\nThis  can  be used to define the radio's regulatory domain, to make use of additional WiFi chanâ\nnels outside the \"world domain\".  Takes an ISO / IEC 3166 country code (like GB) or 00 to  reset\nto   the   \"world   domain\".    See   wireless-regdb  (https://git.kernel.org/pub/scm/linux/kerâ\nnel/git/sforshee/wireless-regdb.git/tree/db.txt) for available values.\nRequires\ndependency:\niw\n, if it is to be used outside the networkd (wpa_supplicant) backend.\nProperties\nfor\ndevice\ntype\nbridges:\nStatus\n: Optional.\nPurpose\n: Use the bridges key to create Bridge interfaces.\nStructure\n: The key consists of a mapping of Bridge interface names.  Each bridge has an optional list  of\ninterfaces that will be bridged together.  The interfaces listed in the interfaces key (enp5s0 and enp5s1\nbelow)  must  also  be  defined  in  your Netplan configuration.  The general configuration structure for\nBridges is shown below.\nnetwork:\nbridges:\nbr0:\ninterfaces:\n- enp5s0\n- enp5s1\ndhcp4: true\n...\nWhen applied, a virtual interface of type bridge called br0 will be created in the system.\nThe specific settings for bridges are defined below.\nâ¢\ninterfaces\n(sequence of scalars)\nAll devices matching this ID list will be added to the bridge.  This may be an  empty  list,  in\nwhich case the bridge will be brought online with no member interfaces.\nExample:\nnetwork:\nethernets:\nswitchports:\nmatch: {name: \"enp2*\"}\n[...]\nbridges:\nbr0:\ninterfaces: [switchports]\nâ¢\nparameters\n(mapping)\nCustomization  parameters for special bridging options.  Time intervals may need to be expressed\nas a number of seconds or milliseconds: the default value type is specified  below.   If  necesâ\nsary,  time  intervals  can  be qualified using a time suffix (such as \"s\" for seconds, \"ms\" for\nmilliseconds) to allow for more control over its behavior.\nâ¢\nageing-time\n,\naging-time\n(scalar)\nSet the period of time to keep a MAC address in the forwarding database after a packet is  reâ\nceived.   This  maps to the AgeingTimeSec= property when the networkd renderer is used.  If no\ntime suffix is specified, the value will be interpreted as seconds.\nâ¢\npriority\n(scalar)\nSet the priority value for the bridge.  This value should be a number  between  0  and  65535.\nLower values mean higher priority.  The bridge with the higher priority will be elected as the\nroot bridge.\nâ¢\nport-priority\n(mapping)\nSet  the  port priority per interface.  The priority value is a number between 0 and 63.  This\nmetric is used in the designated port and root port selection algorithms.\nExample:\nnetwork:\nethernets:\neth0:\ndhcp4: false\neth1:\ndhcp4: false\nbridges:\nbr0:\ninterfaces: [eth0, eth1]\nparameters:\nport-priority:\neth0: 10\neth1: 20\nâ¢\nforward-delay\n(scalar)\nSpecify the period of time the bridge will remain in Listening and Learning states before getâ\nting to the Forwarding state.  This field maps to the ForwardDelaySec= property for  the  netâ\nworkd renderer.  If no time suffix is specified, the value will be interpreted as seconds.\nâ¢\nhello-time\n(scalar)\nSpecify  the  interval  between  two hello packets being sent out from the root and designated\nbridges.  Hello packets communicate information about the network topology.  When the networkd\nrenderer is used, this maps to the HelloTimeSec= property.  If no time  suffix  is  specified,\nthe value will be interpreted as seconds.\nâ¢\nmax-age\n(scalar)\nSet the maximum age of a hello packet.  If the last hello packet is older than that value, the\nbridge  will attempt to become the root bridge.  This maps to the MaxAgeSec= property when the\nnetworkd renderer is used.  If no time suffix is specified, the value will be  interpreted  as\nseconds.\nâ¢\npath-cost\n(mapping)\nSet  the  per-interface  cost  of a path on the bridge.  Faster interfaces should have a lower\ncost.  This allows a finer control on the network topology  so  that  the  fastest  paths  are\navailable whenever possible.\nExample:\nnetwork:\nethernets:\neth0:\ndhcp4: false\neth1:\ndhcp4: false\nbridges:\nbr0:\ninterfaces: [eth0, eth1]\nparameters:\npath-cost:\neth0: 100\neth1: 200\nâ¢\nstp\n(bool)\nDefine  whether  the  bridge  should use Spanning Tree Protocol.  The default value is \"true\",\nwhich means that Spanning Tree should be used.\nProperties\nfor\ndevice\ntype\nbonds:\nStatus\n: Optional.\nPurpose\n: Use the bonds key to create Bond (Link Aggregation) interfaces.\nStructure\n: The key consists of a mapping of Bond interface names.  Each bond has an optional list of  inâ\nterfaces  that will be part of the aggregation.  The interfaces listed in the interfaces key must also be\ndefined in your Netplan configuration.  The general configuration structure for Bonds is shown below.\nnetwork:\nbonds:\nbond0:\ninterfaces:\n- enp5s0\n- enp5s1\n- enp5s2\nmode: active-backup\n...\nWhen applied, a virtual interface of type bond called bond0 will be created in the system.\nThe specific settings for bonds are defined below.\nâ¢\ninterfaces\n(sequence of scalars)\nAll devices matching this ID list will be added to the bond.\nExample:\nnetwork:\nethernets:\nswitchports:\nmatch: {name: \"enp2*\"}\n[...]\nbonds:\nbond0:\ninterfaces: [switchports]\nâ¢\nparameters\n(mapping)\nCustomization parameters for special bonding options.  Time intervals may need to  be  expressed\nas  a  number  of seconds or milliseconds: the default value type is specified below.  If necesâ\nsary, time intervals can be qualified using a time suffix (such as \"s\"  for  seconds,  \"ms\"  for\nmilliseconds) to allow for more control over its behavior.\nâ¢\nmode\n(scalar)\nSet  the bonding mode used for the interfaces.  The default is balance-rr (round robin).  Posâ\nsible values are balance-rr, active-backup, balance-xor, broadcast, 802.3ad, balance-tlb,  and\nbalance-alb.  For Open vSwitch active-backup and the additional modes balance-tcp and balance-\nslb are supported.\nâ¢\nlacp-rate\n(scalar)\nSet the rate at which LACPDUs are transmitted.  This is only useful in 802.3ad mode.  Possible\nvalues are slow (30 seconds, default), and fast (every second).\nâ¢\nmii-monitor-interval\n(scalar)\nSpecifies the interval for MII monitoring (verifying if an interface of the bond has carrier).\nThe  default  is  0;  which disables MII monitoring.  This is equivalent to the MIIMonitorSec=\nfield for the networkd backend.  If no time suffix is specified, the value will be interpreted\nas milliseconds.\nâ¢\nmin-links\n(scalar)\nThe minimum number of links up in a bond to consider the bond interface to be up.\nâ¢\ntransmit-hash-policy\n(scalar)\nSpecifies the transmit hash policy for the selection of ports.  This is only  useful  in  balâ\nance-xor,  802.3ad and balance-tlb modes.  Possible values are layer2, layer3+4, layer2+3, enâ\ncap2+3, and encap3+4.\nâ¢\nad-select\n(scalar)\nSet the aggregation selection mode.  Possible values are stable, bandwidth, and  count.   This\noption is only used in 802.3ad mode.\nâ¢\nall-members-active\n(bool) â since\n0.106\nIf the bond should drop duplicate frames received on inactive ports, set this option to false.\nIf  they should be delivered, set this option to true.  The default value is false, and is the\ndesirable behavior in most situations.\nAlias:\nall-slaves-active\nâ¢\narp-interval\n(scalar)\nSet the interval value for how frequently ARP link monitoring should happen.  The default valâ\nue is 0, which disables ARP monitoring.  For the networkd backend, this maps to the  ARPInterâ\nvalSec=  property.  If no time suffix is specified, the value will be interpreted as millisecâ\nonds.\nâ¢\narp-ip-targets\n(sequence of scalars)\nIPs of other hosts on the link which should be sent ARP requests in order to validate  that  a\nport  is  up.   This option is only used when arp-interval is set to a value other than 0.  At\nleast one IP address must be given for ARP link monitoring to function.  Only  IPv4  addresses\nare supported.  You can specify up to 16 IP addresses.  The default value is an empty list.\nâ¢\narp-validate\n(scalar)\nConfigure how ARP replies are to be validated when using ARP link monitoring.  Possible values\nare none, active, backup, and all.\nâ¢\narp-all-targets\n(scalar)\nSpecify  whether  to  use any ARP IP target being up as sufficient for a port to be considered\nup; or if all the targets must be up.  This is only used for active-backup mode when arp-valiâ\ndate is enabled.  Possible values are any and all.\nâ¢\nup-delay\n(scalar)\nSpecify the delay before enabling a link once the link is physically up.  The default value is\n0.  This maps to the UpDelaySec= property for the networkd  renderer.   This  option  is  only\nvalid  for  the miimon link monitor.  If no time suffix is specified, the value will be interâ\npreted as milliseconds.\nâ¢\ndown-delay\n(scalar)\nSpecify the delay before disabling a link once the link has been lost.  The default  value  is\n0.   This  maps  to the DownDelaySec= property for the networkd renderer.  This option is only\nvalid for the miimon link monitor.  If no time suffix is specified, the value will  be  interâ\npreted as milliseconds.\nâ¢\nfail-over-mac-policy\n(scalar)\nSet whether to set all ports to the same MAC address when adding them to the bond, or how else\nthe system should handle MAC addresses.  The possible values are none, active, and follow.\nâ¢\ngratuitous-arp\n(scalar)\nSpecify how many ARP packets to send after failover.  Once a link is up on a new port, a notiâ\nfication  is  sent and possibly repeated if this value is set to a number greater than 1.  The\ndefault value is 1 and valid values are between 1 and 255.  This  only  affects  active-backup\nmode.\nFor  historical  reasons,  the  misspelling  gratuitious-arp is also accepted and has the same\nfunction.\nâ¢\npackets-per-member\n(scalar) â since\n0.106\nIn balance-rr mode, specifies the number of packets to transmit on a port before switching  to\nthe  next.  When this value is set to 0, ports are chosen at random.  Allowable values are beâ\ntween 0 and 65535.  The default value is 1.  This setting is only used in balance-rr mode.\nAlias:\npackets-per-slave\nâ¢\nprimary-reselect-policy\n(scalar)\nSet the reselection policy for the primary port.  On failure of the active  port,  the  system\nwill use this policy to decide how the new active port will be chosen and how recovery will be\nhandled.  The possible values are always, better, and failure.\nâ¢\nresend-igmp\n(scalar)\nIn  modes  balance-rr,  active-backup, balance-tlb and balance-alb, a failover can switch IGMP\ntraffic from one port to another.\nThis parameter specifies how many IGMP membership reports are  issued  on  a  failover  event.\nValues range from 0 to 255.  0 disables sending membership reports.  Otherwise, the first memâ\nbership report is sent on failover and subsequent reports are sent at 200ms intervals.\nâ¢\nlearn-packet-interval\n(scalar)\nSpecify  the  interval  between sending learning packets to each port.  The value range is beâ\ntween 1 and 0x7fffffff.  The default value is 1.  This option  only  affects  balance-tlb  and\nbalance-alb  modes.   Using  the  networkd  renderer, this field maps to the LearnPacketInterâ\nvalSec= property.  If no time suffix is specified, the value will be interpreted as seconds.\nâ¢\nprimary\n(scalar)\nSpecify a device to be used as a primary port, or preferred device to use as a  port  for  the\nbond  (i.e.   the preferred device to send data through), whenever it is available.  This only\naffects active-backup, balance-alb, and balance-tlb modes.\nProperties\nfor\ndevice\ntype\ntunnels:\nStatus\n: Optional.\nPurpose\n: Use the tunnels key to create virtual tunnel interfaces.\nStructure\n: The key consists of a mapping of tunnel interface names.  Each tunnel requires the identificaâ\ntion of the tunnel mode (see the section mode below for the list of supported modes).  The  general  conâ\nfiguration structure for Tunnels is shown below.\nnetwork:\ntunnels:\ntunnel0:\nmode: SCALAR\n...\nWhen  applied,  a  virtual interface called tunnel0 will be created in the system.  Its operation mode is\ndefined by the property mode.\nTunnels allow traffic to pass as if it was between systems on the same local  network,  although  systems\nmay be far from each other but reachable via the Internet.  They may be used to support IPv6 traffic on a\nnetwork  where  the ISP does not provide the service, or to extend and \"connect\" separate local networks.\nPlease see <https://en.wikipedia.org/wiki/Tunneling_protocol> for more general information about tunnels.\nThe specific settings for tunnels are defined below.\nâ¢\nmode\n(scalar)\nDefines the tunnel mode.  Valid options are sit, gre, ip6gre, ipip, ipip6,  ip6ip6,  vti,  vti6,\nwireguard,  vxlan, gretap and ip6gretap modes.  In addition, the NetworkManager backend supports\nisatap tunnels.\nâ¢\nlocal\n(scalar)\nDefines the address of the local endpoint of the tunnel.  (For VXLAN) This should match  one  of\nthe parent's IP addresses or make use of the networkd special values.\nâ¢\nremote\n(scalar)\nDefines  the  address  of  the  remote  endpoint of the tunnel or multicast group IP address for\nVXLAN.\nâ¢\nttl\n(scalar) â since\n0.103\nDefines the Time To Live (TTL) of the tunnel.  Takes a number in the range 1..255.\nâ¢\nkey\n(scalar or mapping)\nDefine keys to use for the tunnel.  The key can be a number or a dotted quad (an IPv4  address).\nFor  wireguard it can be a base64-encoded private key or (as of networkd v242+) an absolute path\nto a file, containing the private key (since 0.100).  It is used for identification of IP transâ\nforms.  This is only required for vti and vti6 when using the networkd backend.\nThis field may be used as a scalar (meaning that a single key is specified and to  be  used  for\ninput, output and private key), or as a mapping, where you can further specify input/output/priâ\nvate.\nâ¢\ninput\n(scalar)\nThe input key for the tunnel\nâ¢\noutput\n(scalar)\nThe output key for the tunnel\nâ¢\nprivate\n(scalar) â since\n0.100\nA  base64-encoded private key required for WireGuard tunnels.  When the systemd-networkd backâ\nend (v242+) is used, this can also be an absolute path to a file containing the private key.\nâ¢\nkeys\n(scalar or mapping)\nAlternate name for the key field.  See above.\nExamples:\nnetwork:\ntunnels:\ntun0:\nmode: gre\nlocal: ...\nremote: ...\nkeys:\ninput: 1234\noutput: 5678\nnetwork:\ntunnels:\ntun0:\nmode: vti6\nlocal: ...\nremote: ...\nkey: 59568549\nnetwork:\ntunnels:\nwg0:\nmode: wireguard\naddresses: [...]\npeers:\n- keys:\npublic: rlbInAj0qV69CysWPQY7KEBnKxpYCpaWqOs/dLevdWc=\nshared: /path/to/shared.key\n...\nkey: mNb7OIIXTdgW4khM7OFlzJ+UPs7lmcWHV7xjPgakMkQ=\nnetwork:\ntunnels:\nwg0:\nmode: wireguard\naddresses: [...]\npeers:\n- keys:\npublic: rlbInAj0qV69CysWPQY7KEBnKxpYCpaWqOs/dLevdWc=\n...\nkeys:\nprivate: /path/to/priv.key\nWireGuard specific keys:\nâ¢\nmark\n(scalar) â since\n0.100\nFirewall mark for outgoing WireGuard packets from this interface, optional.\nâ¢\nport\n(scalar) â since\n0.100\nUDP port to listen at or auto.  Optional, defaults to auto.\nâ¢\npeers\n(sequence of mappings) â since\n0.100\nA list of peers, each having keys documented below.\nExample:\nnetwork:\ntunnels:\nwg0:\nmode: wireguard\nkey: /path/to/private.key\nmark: 42\nport: 5182\npeers:\n- keys:\npublic: rlbInAj0qV69CysWPQY7KEBnKxpYCpaWqOs/dLevdWc=\nallowed-ips: [0.0.0.0/0, \"2001:fe:ad:de:ad:be:ef:1/24\"]\nkeepalive: 23\nendpoint: 1.2.3.4:5\n- keys:\npublic: M9nt4YujIOmNrRmpIRTmYSfMdrpvE7u6WkG8FY8WjG4=\nshared: /some/shared.key\nallowed-ips: [10.10.10.20/24]\nkeepalive: 22\nendpoint: 5.4.3.2:1\nâ¢\nendpoint\n(scalar) â since\n0.100\nRemote endpoint IPv4/IPv6 address or a hostname, followed by a colon and a port number.\nâ¢\nallowed-ips\n(sequence of scalars) â since\n0.100\nA list of IP (v4 or v6) addresses with CIDR masks from which this peer is allowed to send  inâ\ncoming  traffic  and  to  which  outgoing  traffic  for  this peer is directed.  The catch-all\n0.0.0.0/0 may be specified for matching all IPv4 addresses, and  ::/0  may  be  specified  for\nmatching all IPv6 addresses.\nâ¢\nkeepalive\n(scalar) â since\n0.100\nAn  interval  in seconds, between 1 and 65535 inclusive, of how often to send an authenticated\nempty packet to the peer for the purpose of keeping a stateful firewall or NAT  mapping  valid\npersistently.  Optional.\nâ¢\nkeys\n(mapping) â since\n0.100\nDefine keys to use for the WireGuard peers.\nThis field can be used as a mapping, where you can further specify the public and shared keys.\nâ¢\npublic\n(scalar) â since\n0.100\nA base64-encoded public key, required for WireGuard peers.\nâ¢\nshared\n(scalar) â since\n0.100\nA  base64-encoded  preshared  key.  Optional for WireGuard peers.  When the systemd-networkd\nbackend (v242+) is used, this can also be an absolute path to a  file  containing  the  preâ\nshared key.\nVXLAN specific keys:\nâ¢\nid\n(scalar) â since\n0.105\nThe  VXLAN  Network  Identifier  (VNI  or  VXLAN  Segment  ID).   Takes  a  number  in the range\n1..16777215.\nâ¢\nlink\n(scalar) â since\n0.105\nnetplan ID of the parent device definition to which this VXLAN gets connected.\nâ¢\ntype-of-service\n(scalar) â since\n0.105\nThe Type Of Service byte value for a vxlan interface.\nâ¢\nmac-learning\n(scalar) â since\n0.105\nTakes a boolean.  When true, enables dynamic MAC learning to discover remote MAC addresses.\nâ¢\nageing\n,\naging\n(scalar) â since\n0.105\nThe lifetime of Forwarding Database entry learned by the kernel, in seconds.\nâ¢\nlimit\n(scalar) â since\n0.105\nConfigures maximum number of FDB entries.\nâ¢\narp-proxy\n(scalar) â since\n0.105\nTakes a boolean.  When true, bridge-connected VXLAN tunnel endpoint answers  ARP  requests  from\nthe  local  bridge on behalf of remote Distributed Overlay Virtual Ethernet (DOVE) clients.  Deâ\nfaults to false.\nâ¢\nnotifications\n(sequence of scalars) â since\n0.105\nTakes the flags l2-miss and l3-miss to enable netlink LLADDR and/or netlink IP address miss  noâ\ntifications.\nâ¢\nshort-circuit\n(scalar) â since\n0.105\nTakes a boolean.  When true, route short circuiting is turned on.\nâ¢\nchecksums\n(sequence of scalars) â since\n0.105\nTakes  the flags udp, zero-udp6-tx, zero-udp6-rx, remote-tx and remote-rx to enable transmitting\nUDP checksums in VXLAN/IPv4, send/receive zero checksums in VXLAN/IPv6  and  enable  sending/reâ\nceiving checksum offloading in VXLAN.\nâ¢\nextensions\n(sequence of scalars) â since\n0.105\nTakes  the  flags group-policy and generic-protocol to enable the \"Group Policy\" and/or \"Generic\nProtocol\" VXLAN extensions.\nâ¢\nport\n(scalar) â since\n0.105\nConfigures the default destination UDP port.  If the destination port is not specified then Linâ\nux kernel default will be used.  Set to 4789 to get the IANA assigned value.\nâ¢\nport-range\n(sequence of scalars) â since\n0.105\nConfigures the source port range for the VXLAN.  The kernel assigns the source UDP port based on\nthe flow to help the receiver to do load balancing.  When this option is  not  set,  the  normal\nrange of local UDP ports is used.  Uses the form [LOWER, UPPER].\nâ¢\nflow-label\n(scalar) â since\n0.105\nSpecifies the flow label to use in outgoing packets.  The valid range is 0-1048575.\nâ¢\ndo-not-fragment\n(scalar) â since\n0.105\nAllows  setting  the  IPv4 Do not Fragment (DF) bit in outgoing packets.  Takes a boolean value.\nWhen unset, the kernel's default will be used.\nProperties\nfor\ndevice\ntype\nvlans:\nStatus\n: Optional.\nPurpose\n: Use the vlans key to create VLAN interfaces.\nStructure\n: The key consists of a mapping of VLAN interface names.  The interface used in the link  option\n(enp5s0  in the example below) must also be defined in the Netplan configuration.  The general configuraâ\ntion structure for Vlans is shown below.\nnetwork:\nvlans:\nvlan123:\nid: 123\nlink: enp5s0\ndhcp4: yes\nThe specific settings for VLANs are defined below.\nâ¢\nid\n(scalar)\nVLAN ID, a number between 0 and 4094.\nâ¢\nlink\n(scalar)\nnetplan ID of the underlying device definition on which this VLAN gets created.\nExample:\nnetwork:\nethernets:\neno1: {...}\nvlans:\nen-intra:\nid: 1\nlink: eno1\ndhcp4: yes\nen-vpn:\nid: 2\nlink: eno1\naddresses: [...]\nProperties\nfor\ndevice\ntype\nvrfs:\nStatus\n: Optional.\nPurpose\n: Use the vrfs key to create Virtual Routing and Forwarding (VRF) interfaces.\nStructure\n: The key consists of a mapping of VRF interface names.  The interface used in the  link  option\n(enp5s0  in the example below) must also be defined in the Netplan configuration.  The general configuraâ\ntion structure for VRFs is shown below.\nnetwork:\nrenderer: networkd\nvrfs:\nvrf1:\ntable: 1\ninterfaces:\n- enp5s0\nroutes:\n- to: default\nvia: 10.10.10.4\nrouting-policy:\n- from: 10.10.10.42\nâ¢\ntable\n(scalar) â since\n0.105\nThe numeric routing table identifier.  This setting is compulsory.\nâ¢\ninterfaces\n(sequence of scalars) â since\n0.105\nAll devices matching this ID list will be added to the VRF.  This may be an empty list, in which\ncase the VRF will be brought online with no member interfaces.\nâ¢\nroutes\n(sequence of mappings) â since\n0.105\nConfigure static routing for the device; see the Routing section.  The table value is implicitly\nset to the VRF's table.\nâ¢\nrouting-policy\n(sequence of mappings) â since\n0.105\nConfigure policy routing for the device; see the Routing section.  The table value is implicitly\nset to the VRF's table.\nExample:\nnetwork:\nvrfs:\nvrf20:\ntable: 20\ninterfaces: [ br0 ]\nroutes:\n- to: default\nvia: 10.10.10.3\nrouting-policy:\n- from: 10.10.10.42\n[...]\nbridges:\nbr0:\ninterfaces: []\nProperties\nfor\ndevice\ntype\nnm-devices:\nStatus\n: Optional.  Its use is not recommended.\nPurpose\n: Use the nm-devices key to configure device types that are not supported  by  Netplan.   This  is\nNetworkManager specific configuration.\nStructure\n:  The  key  consists of a mapping of NetworkManager connections.  The nm-devices device type is\nfor internal use only and should not be used in normal configuration files.  It enables a  fallback  mode\nfor unsupported settings, using the passthrough mapping.  The general configuration structure for NM conâ\nnections is shown below.\nnetwork:\nversion: 2\nnm-devices:\nNM-db5f0f67-1f4c-4d59-8ab8-3d278389cf87:\nrenderer: NetworkManager\nnetworkmanager:\nuuid: \"db5f0f67-1f4c-4d59-8ab8-3d278389cf87\"\nname: \"myvpnconnection\"\npassthrough:\nconnection.type: \"vpn\"\nvpn.ca: \"path to ca.crt\"\nvpn.cert: \"path to client.crt\"\nvpn.cipher: \"AES-256-GCM\"\nvpn.connection-type: \"tls\"\nvpn.dev: \"tun\"\nvpn.key: \"path to client.key\"\nvpn.remote: \"1.2.3.4:1194\"\nvpn.service-type: \"org.freedesktop.NetworkManager.openvpn\"\nBackend-specific\nconfiguration\nparameters\nIn  addition  to  the other fields available to configure interfaces, some backends may require to record\nsome of their own parameters in netplan, especially if the netplan definitions are generated automaticalâ\nly by the consumer of that backend.  Currently, this is only used with NetworkManager.\nâ¢\nnetworkmanager\n(mapping) â since\n0.99\nKeeps the NetworkManager-specific configuration parameters used by the daemon to recognize  conâ\nnections.\nâ¢\nname\n(scalar) â since\n0.99\nSet the display name for the connection.\nâ¢\nuuid\n(scalar) â since\n0.99\nDefines  the  UUID (unique identifier) for this connection, as generated by NetworkManager itâ\nself.\nâ¢\nstable-id\n(scalar) â since\n0.99\nDefines the stable ID (a different form of a connection name) used by NetworkManager  in  case\nthe  name  of  the connection might otherwise change, such as when sharing connections between\nusers.\nâ¢\ndevice\n(scalar) â since\n0.99\nDefines the interface name for which this connection applies.\nâ¢\npassthrough\n(mapping) â since\n0.102\nCan be used as a fallback mechanism to missing keyfile settings.\nSEE\nALSO\nnetplan-generate\n(8),\nnetplan-apply\n(8),\nnetplan-try\n(8),\nnetplan-get\n(8),\nnetplan-set\n(8),\nnetplan-info\n(8),\nnetplan-ip\n(8),\nnetplan-rebind\n(8),\nnetplan-status\n(8),\nnetplan-dbus\n(8),\nsystemd-networkd\n(8),\nNetworkManagâ\ner\n(8)\nAUTHORS\nMathieu Trudel-Lapierre (<\ncyphermox@ubuntu.com\n>); Martin Pitt (<\nmartin.pitt@ubuntu.com\n>);  Lukas  MÃ¤rdian\n(<\nslyon@ubuntu.com\n>).\nYAML\nconfiguration\n(5)", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.ubuntu.com/manpages/jammy/man5/netplan.5.html"}}
{"text": "ip(8) — iproute2 — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\niproute2\n/ ip(8)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nOPTIONS\nIP - COMMAND SYNTAX\nENVIRONMENT\nEXIT STATUS\nEXAMPLES\nHISTORY\nSEE ALSO\nREPORTING BUGS\nAUTHOR\nother versions\ntrixie\n6.15.0-1\ntesting\n6.17.0-1\nunstable\n6.17.0-1\nother languages\nEnglish\nfrançais\nromână\nрусский\nother sections\n4freebsd (\nfiles\n)\n7 (\nmisc\n)\n8 (\nsysadmin\n)\nScroll to navigation\nIP(8)\nLinux\nIP(8)\nNAME\n¶\nip - show / manipulate routing, network devices, interfaces and\ntunnels\nSYNOPSIS\n¶\nip\n[\nOPTIONS\n]\nOBJECT\n{\nCOMMAND\n|\nhelp\n}\nip\n[\n-force\n]\n-batch\nfilename\nOBJECT\n:= {\naddress\n|\naddrlabel\n|\nfou\n|\nhelp\n|\nila\n|\nioam\n|\nl2tp\n|\nlink\n|\nmacsec\n|\nmaddress\n|\nmonitor\n|\nmptcp\n|\nmroute\n|\nmrule\n|\nneighbor\n|\nneighbour\n|\nnetconf\n|\nnetns\n|\nnexthop\n|\nntable\n|\nntbl\n|\nroute\n|\nrule\n|\nsr\n|\ntap\n|\ntcpmetrics\n|\ntoken\n|\ntunnel\n|\ntuntap\n|\nvrf\n|\nxfrm\n}\nOPTIONS\n:= {\n-V\n[\nersion\n] |\n-h\n[\numan-readable\n] |\n-s\n[\ntatistics\n] |\n-d\n[\netails\n] |\n-r\n[\nesolve\n] |\n-iec\n|\n-f\n[\namily\n] {\ninet\n|\ninet6\n|\nlink\n} |\n-4\n|\n-6\n|\n-B\n|\n-0\n|\n-l\n[\noops\n] {\nmaximum-addr-flush-attempts\n} |\n-o\n[\nneline\n] |\n-rc\n[\nvbuf\n] [\nsize\n] |\n-t\n[\nimestamp\n] |\n-ts\n[\nhort\n] |\n-n\n[\netns\n] name |\n-N\n[\numeric\n] |\n-a\n[\nll\n] |\n-c\n[\nolor\n] |\n-br\n[\nief\n] |\n-j\n[son] |\n-p\n[retty] }\nOPTIONS\n¶\n-V\n,\n-Version\nPrint the version of the\nip\nutility and exit.\n-h\n,\n-human\n,\n-human-readable\noutput statistics with human readable values followed by suffix.\n-b\n,\n-batch\n<FILENAME>\nRead commands from provided file or standard input and invoke them. First\nfailure will cause termination of ip.\n-force\nDon't terminate ip on errors in batch mode. If there were any errors\nduring execution of the commands, the application return code will be non\nzero.\n-s\n,\n-stats\n,\n-statistics\nOutput more information. If the option appears twice or more, the amount\nof information increases. As a rule, the information is statistics or some\ntime values.\n-d\n,\n-details\nOutput more detailed information.\n-l\n,\n-loops\n<COUNT>\nSpecify maximum number of loops the 'ip address flush' logic will attempt\nbefore giving up. The default is 10. Zero (0) means loop until all\naddresses are removed.\n-f\n,\n-family\n<FAMILY>\nSpecifies the protocol family to use. The protocol family identifier can\nbe one of\ninet\n,\ninet6\n,\nbridge\n,\nmpls\nor\nlink\n. If this option is not present, the protocol family is guessed\nfrom other arguments. If the rest of the command line does not give enough\ninformation to guess the family,\nip\nfalls back to the default one,\nusually\ninet\nor\nany\n.\nlink\nis a special family\nidentifier meaning that no networking protocol is involved.\n-4\nshortcut for\n-family inet\n.\n-6\nshortcut for\n-family inet6\n.\n-B\nshortcut for\n-family bridge\n.\n-M\nshortcut for\n-family mpls\n.\n-0\nshortcut for\n-family link\n.\n-o\n,\n-oneline\noutput each record on a single line, replacing line feeds with the\n'\\'\ncharacter. This is convenient when you want to count records\nwith\nwc(1)\nor to\ngrep(1)\nthe output.\n-r\n,\n-resolve\nuse the system's name resolver to print DNS names instead of host\naddresses.\n-n\n,\n-netns\n<NETNS>\nswitches\nip\nto the specified network namespace\nNETNS\n.\nActually it just simplifies executing of:\nip netns exec\nNETNS\nip\n[\nOPTIONS\n]\nOBJECT\n{\nCOMMAND\n|\nhelp\n}\nto\nip\n-n[etns]\nNETNS\n[\nOPTIONS\n]\nOBJECT\n{\nCOMMAND\n|\nhelp\n}\n-N\n,\n-Numeric\nPrint the number of protocol, scope, dsfield, etc directly instead of\nconverting it to human readable name.\n-a\n,\n-all\nexecutes specified command over all objects, it depends if command\nsupports this option.\n-c\n[\ncolor\n][\n=\n{\nalways\n|\nauto\n|\nnever\n}\nConfigure color output. If parameter is omitted or\nalways\n, color\noutput is enabled regardless of stdout state. If parameter is\nauto\n,\nstdout is checked to be a terminal before enabling color output. If\nparameter is\nnever\n, color output is disabled. If specified multiple\ntimes, the last one takes precedence. This flag is ignored if\n-json\nis also given.\nUsed color palette can be influenced by\nCOLORFGBG\nenvironment variable (see\nENVIRONMENT\n).\n-t\n,\n-timestamp\ndisplay current time when using monitor option.\n-ts\n,\n-tshort\nLike\n-timestamp\n, but use shorter format.\n-rc\n,\n-rcvbuf\n<SIZE>\nSet the netlink socket receive buffer size, defaults to 1MB.\n-iec\nprint human readable rates in IEC units (e.g. 1Ki = 1024).\n-br\n,\n-brief\nPrint only basic information in a tabular format for better readability.\nThis option is currently only supported by\nip addr show\n,\nip\nlink show\n&\nip neigh show\ncommands.\n-j\n,\n-json\nOutput results in JavaScript Object Notation (JSON).\n-p\n,\n-pretty\nThe default JSON format is compact and more efficient to parse but hard\nfor most users to read. This flag adds indentation for readability.\n-echo\nRequest the kernel to send the applied configuration back.\nIP - COMMAND SYNTAX\n¶\nOBJECT\n¶\naddress\n- protocol (IP or IPv6) address on a device.\naddrlabel\n- label configuration for protocol address selection.\nfou\n- Foo-over-UDP receive port configuration.\nila\n- manage identifier locator addresses (ILA).\nioam\n- manage IOAM namespaces and IOAM schemas.\nl2tp\n- tunnel ethernet over IP (L2TPv3).\nlink\n- network device.\nmacsec\n- MACsec device configuration.\nmaddress\n- multicast address.\nmonitor\n- watch for netlink messages.\nmptcp\n- manage MPTCP path manager.\nmroute\n- multicast routing cache entry.\nmrule\n- rule in multicast routing policy database.\nneighbour\n- manage ARP or NDISC cache entries.\nnetconf\n- network configuration monitoring.\nnetns\n- manage network namespaces.\nnexthop\n- manage nexthop objects.\nntable\n- manage the neighbor cache's operation.\nroute\n- routing table entry.\nrule\n- rule in routing policy database.\nsr\n- manage IPv6 segment routing.\nstats\n- manage and show interface statistics.\ntcp_metrics/tcpmetrics\n- manage TCP Metrics.\ntoken\n- manage tokenized interface identifiers.\ntunnel\n- tunnel over IP.\ntuntap\n- manage TUN/TAP devices.\nvrf\n- manage virtual routing and forwarding devices.\nxfrm\n- manage IPSec policies.\nThe names of all objects may be written in full or abbreviated\nform, for example\naddress\ncan be abbreviated as\naddr\nor just\na.\nCOMMAND\n¶\nSpecifies the action to perform on the object. The set of possible\nactions depends on the object type. As a rule, it is possible to\nadd\n,\ndelete\nand\nshow\n(or\nlist\n) objects, but\nsome objects do not allow all of these operations or have some additional\ncommands. The\nhelp\ncommand is available for all objects. It prints\nout a list of available commands and argument syntax conventions.\nIf no command is given, some default command is assumed. Usually\nit is\nlist\nor, if the objects of this class cannot be listed,\nhelp\n.\nENVIRONMENT\n¶\nCOLORFGBG\nIf set, it's value is used for detection whether background is dark or\nlight and use contrast colors for it.\nCOLORFGBG environment variable usually contains either two or\nthree values separated by semicolons; we want the last value in either\ncase. If this value is 0-6 or 8, chose colors suitable for dark\nbackground:\nCOLORFGBG=\";0\" ip -c a\nEXIT STATUS\n¶\nExit status is 0 if command was successful, and 1 if there is a\nsyntax error. If an error was reported by the kernel exit status is 2.\nEXAMPLES\n¶\nip addr\nShows addresses assigned to all network interfaces.\nip neigh\nShows the current neighbour table in kernel.\nip link set x up\nBring up interface x.\nip link set x down\nBring down interface x.\nip route\nShow table routes.\nHISTORY\n¶\nip\nwas written by Alexey N. Kuznetsov and added in Linux\n2.2.\nSEE ALSO\n¶\nip-address(8)\n,\nip-addrlabel(8)\n,\nip-fou(8)\n,\nip-ioam(8)\n,\nip-l2tp(8)\n,\nip-link(8)\n,\nip-macsec(8)\n,\nip-maddress(8)\n,\nip-monitor(8)\n,\nip-mptcp(8)\n,\nip-mroute(8)\n,\nip-neighbour(8)\n,\nip-netconf(8)\n,\nip-netns(8)\n,\nip-nexthop(8)\n,\nip-ntable(8)\n,\nip-route(8)\n,\nip-rule(8)\n,\nip-sr(8)\n,\nip-stats(8)\n,\nip-tcp_metrics(8)\n,\nip-token(8)\n,\nip-tunnel(8)\n,\nip-vrf(8)\n,\nip-xfrm(8)\nIP Command reference\nip-cref.ps\nREPORTING BUGS\n¶\nReport any bugs to the Network Developers mailing list\n<netdev@vger.kernel.org>\nwhere the development and maintenance\nis primarily done. You do not have to be subscribed to the list to send a\nmessage there.\nAUTHOR\n¶\nOriginal Manpage by Michail Litvak\n<mci@owl.openwall.com>\n20 Dec 2011\niproute2\nSource file:\nip.8.en.gz (from\niproute2 6.17.0-1\n)\nSource last updated:\n2025-10-03T20:32:30Z\nConverted to HTML:\n2025-11-03T07:15:26Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/iproute2/ip.8.en.html"}}
{"text": "systemctl(1) — systemd — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\nsystemd\n/ systemctl(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nCOMMANDS\nOPTIONS\nEXIT STATUS\nENVIRONMENT\nSEE ALSO\nNOTES\nother versions\ntrixie\n257.9-1~deb13u1\ntesting\n259~rc1-1\nunstable\n259~rc2-1\nother languages\nDeutsch\nEnglish\nfrançais\nукраїнська\n中文 (zh-CN)\n繁體中文 (zh-TW)\nconflicting packages\nsystemctl\nsystemd\nScroll to navigation\nSYSTEMCTL(1)\nsystemctl\nSYSTEMCTL(1)\nNAME\n¶\nsystemctl - Control the systemd system and service manager\nSYNOPSIS\n¶\nsystemctl\n[OPTIONS...] COMMAND [UNIT...]\nDESCRIPTION\n¶\nsystemctl\nmay be used to introspect and control the state\nof the \"systemd\" system and service manager. Please refer to\nsystemd(1)\nfor an introduction into the basic concepts and\nfunctionality this tool manages.\nCOMMANDS\n¶\nThe following commands are understood:\nUnit Commands (Introspection and Modification)\n¶\nlist-units\n[\nPATTERN\n...]\nList units that\nsystemd\ncurrently has in memory.\nThis includes units that are either referenced directly or through a\ndependency, units that are pinned by applications programmatically, or units\nthat were active in the past and have failed. By default, only units which are\nactive, have pending jobs, or have failed are shown; this can be changed with\noption\n--all\n. If one or more\nPATTERN\ns are specified, only units\nmatching one of them are shown. The units that are shown are additionally\nfiltered by\n--type=\nand\n--state=\nif those options are specified.\nNote that this command does not show unit templates, but only\ninstances of unit templates. Units templates that are not instantiated are\nnot runnable, and will thus never show up in the output of this command.\nSpecifically this means that foo@.service will never be shown in this list\n— unless instantiated, e.g. as foo@bar.service. Use\nlist-unit-files\n(see below) for listing installed unit template\nfiles.\nProduces output similar to\nUNIT                         LOAD   ACTIVE SUB     DESCRIPTION\nsys-module-fuse.device       loaded active plugged /sys/module/fuse\n-.mount                      loaded active mounted Root Mount\nboot-efi.mount               loaded active mounted /boot/efi\nsystemd-journald.service     loaded active running Journal Service\nsystemd-logind.service       loaded active running Login Service\n● user@1000.service            loaded failed failed  User Manager for UID 1000\n...\nsystemd-tmpfiles-clean.timer loaded active waiting Daily Cleanup of Temporary Directories\nLOAD   = Reflects whether the unit definition was properly loaded.\nACTIVE = The high-level unit activation state, i.e. generalization of SUB.\nSUB    = The low-level unit activation state, values depend on unit type.\n123 loaded units listed. Pass --all to see loaded but inactive units, too.\nTo show all installed unit files use 'systemctl list-unit-files'.\nThe header and the last unit of a given type are underlined if the\nterminal supports that. A colored dot is shown next to services which were\nmasked, not found, or otherwise failed.\nThe LOAD column shows the load state, one of\nloaded\n,\nnot-found\n,\nbad-setting\n,\nerror\n,\nmasked\n. The\nACTIVE columns shows the general unit state, one of the following:\nTable 1. Unit ACTIVE states\nState\nDescription\nactive\nStarted, bound, plugged in, ..., depending on the unit type.\ninactive\nStopped, unbound, unplugged, ..., depending on the unit type.\nfailed\nSimilar to\ninactive\n, but the unit failed in some way (process\nreturned error code on exit, crashed, an operation timed out, or after too\nmany restarts).\nactivating\nChanging from\ninactive\nto\nactive\n.\ndeactivating\nChanging from\nactive\nto\ninactive\n.\nmaintenance\nUnit is\ninactive\nand a maintenance operation is in progress.\nreloading\nUnit is\nactive\nand it is reloading its configuration.\nrefreshing\nUnit is\nactive\nand a new mount is being activated in its\nnamespace.\nThe SUB column shows the unit-type-specific detailed state of the\nunit, possible values vary by unit type. The list of possible LOAD, ACTIVE,\nand SUB states is not constant and new systemd releases may both add and\nremove values.\nsystemctl --state=help\ncommand may be used to display the current set of possible\nvalues.\nThis is the default command.\nlist-automounts\n[\nPATTERN\n...]\nList automount units currently in memory, ordered by\nmount path. If one or more\nPATTERN\ns are specified, only automount units\nmatching one of them are shown. Produces output similar to\nWHAT        WHERE                    MOUNTED IDLE TIMEOUT UNIT\n/dev/sdb1   /mnt/test                no      120s         mnt-test.automount\nbinfmt_misc /proc/sys/fs/binfmt_misc yes     0            proc-sys-fs-binfmt_misc.automount\n2 automounts listed.\nAlso see\n--show-types\n,\n--all\n, and\n--state=\n.\nAdded in version 252.\nlist-paths\n[\nPATTERN\n...]\nList path units currently in memory, ordered by path. If\none or more\nPATTERN\ns are specified, only path units matching one of\nthem are shown. Produces output similar to\nPATH                           CONDITION         UNIT                               ACTIVATES\n/run/systemd/ask-password      DirectoryNotEmpty systemd-ask-password-plymouth.path systemd-ask-password-plymouth.service\n/run/systemd/ask-password      DirectoryNotEmpty systemd-ask-password-wall.path     systemd-ask-password-wall.service\n/var/cache/cups/org.cups.cupsd PathExists        cups.path                          cups.service\n3 paths listed.\nAlso see\n--show-types\n,\n--all\n, and\n--state=\n.\nAdded in version 254.\nlist-sockets\n[\nPATTERN\n...]\nList socket units currently in memory, ordered by\nlistening address. If one or more\nPATTERN\ns are specified, only socket\nunits matching one of them are shown. Produces output similar to\nLISTEN           UNIT                        ACTIVATES\nkobject-uevent 1 systemd-udevd-kernel.socket systemd-udevd.service\n/dev/rfkill      systemd-rfkill.socket       systemd-rfkill.service\n...\n5 sockets listed.\nNote: because the addresses might contains spaces, this output is\nnot suitable for programmatic consumption.\nAlso see\n--show-types\n,\n--all\n, and\n--state=\n.\nAdded in version 202.\nlist-timers\n[\nPATTERN\n...]\nList timer units currently in memory, ordered by the time\nthey elapse next. If one or more\nPATTERN\ns are specified, only units\nmatching one of them are shown. Produces output similar to\nNEXT                         LEFT          LAST                         PASSED     UNIT                         ACTIVATES\n-                            -             Thu 2017-02-23 13:40:29 EST  3 days ago ureadahead-stop.timer        ureadahead-stop.service\nSun 2017-02-26 18:55:42 EST  1min 14s left Thu 2017-02-23 13:54:44 EST  3 days ago systemd-tmpfiles-clean.timer systemd-tmpfiles-clean.service\nSun 2017-02-26 20:37:16 EST  1h 42min left Sun 2017-02-26 11:56:36 EST  6h ago     apt-daily.timer              apt-daily.service\nSun 2017-02-26 20:57:49 EST  2h 3min left  Sun 2017-02-26 11:56:36 EST  6h ago     snapd.refresh.timer          snapd.refresh.service\nNEXT\nshows the next time the timer will run.\nLEFT\nshows how long till the next time the timer runs.\nLAST\nshows the last time the timer ran.\nPASSED\nshows how long has passed since the timer last\nran.\nUNIT\nshows the name of the timer\nACTIVATES\nshows the name the service the timer activates\nwhen it runs.\nAlso see\n--all\nand\n--state=\n.\nAdded in version 209.\nis-active\nPATTERN\n...\nCheck whether any of the specified units are active (i.e.\nrunning). Returns an exit code\n0\nif at least one is active, or non-zero\notherwise. Unless\n--quiet\nis specified, this will also print the\ncurrent unit state to standard output.\nis-failed\n[\nPATTERN\n...]\nCheck whether any of the specified units is in the\n\"failed\" state. If no unit is specified, check whether there are any\nfailed units or ordering cycles, which corresponds to the \"degraded\"\nstate returned by\nis-system-running\n. Returns an exit code\n0\nif\nat least one has failed, non-zero otherwise. Unless\n--quiet\nis\nspecified, this will also print the current unit or system state to standard\noutput.\nAdded in version 197.\nstatus\n[\nPATTERN\n...|\nPID\n...]]\nShow runtime status information about the whole system or\nabout one or more units followed by most recent log data from the journal. If\nno positional arguments are specified, and no unit filter is given with\n--type=\n,\n--state=\n, or\n--failed\n, shows the status of the\nwhole system. If combined with\n--all\n, follows that with the status of\nall units. If positional arguments are specified, each positional argument is\ntreated as either a unit name to show, or a glob pattern to show units whose\nnames match that pattern, or a PID to show the unit containing that PID. When\n--type=\n,\n--state=\n, or\n--failed\nare used, units are\nadditionally filtered by the TYPE and ACTIVE state.\nThis function is intended to generate human-readable output. If\nyou are looking for computer-parsable output, use\nshow\ninstead. By\ndefault, this function only shows 10 lines of output and ellipsizes lines to\nfit in the terminal window. This can be changed with\n--lines\nand\n--full\n, see above. In addition,\njournalctl\n--unit=\nNAME\nor\njournalctl\n--user-unit=\nNAME\nuse a similar filter for messages and\nmight be more convenient.\nNote that this operation only displays\nruntime\nstatus, i.e.\ninformation about the current invocation of the unit (if it is running) or\nthe most recent invocation (if it is not running anymore, and has not been\nreleased from memory). Information about earlier invocations, invocations\nfrom previous system boots, or prior invocations that have already been\nreleased from memory may be retrieved via\njournalctl --unit=\n.\nsystemd implicitly loads units as necessary, so just running the\nstatus\nwill attempt to load a file. The command is thus not useful\nfor determining if something was already loaded or not. The units may\npossibly also be quickly unloaded after the operation is completed if\nthere's no reason to keep it in memory thereafter.\nExample 1. Example output from systemctl\nstatus\n$ systemctl status bluetooth\n● bluetooth.service - Bluetooth service\nLoaded: loaded (/usr/lib/systemd/system/bluetooth.service; enabled; preset: enabled)\nActive: active (running) since Wed 2017-01-04 13:54:04 EST; 1 weeks 0 days ago\nDocs: man:\nbluetoothd(8)\nMain PID: 930 (bluetoothd)\nStatus: \"Running\"\nTasks: 1\nMemory: 648.0K\nCPU: 435ms\nCGroup: /system.slice/bluetooth.service\n└─930 /usr/lib/bluetooth/bluetoothd\nJan 12 10:46:45 example.com bluetoothd[8900]: Not enough free handles to register service\nJan 12 10:46:45 example.com bluetoothd[8900]: Current Time Service could not be registered\nJan 12 10:46:45 example.com bluetoothd[8900]: gatt-time-server: Input/output error (5)\nThe dot (\"●\") uses color on supported terminals\nto summarize the unit state at a glance. Along with its color, its shape\nvaries according to its state: \"inactive\" or\n\"maintenance\" is a white circle (\"○\"),\n\"active\" is a green dot (\"●\"),\n\"deactivating\" is a white dot, \"failed\" or\n\"error\" is a red cross (\"×\"), and\n\"reloading\" or \"refreshing\" is a green clockwise circle\narrow (\"↻\").\nThe \"Loaded:\" line in the output will show\n\"loaded\" if the unit has been loaded into memory. Other possible\nvalues for \"Loaded:\" include: \"error\" if there was a\nproblem loading it, \"not-found\" if no unit file was found for this\nunit, \"bad-setting\" if an essential unit file setting could not be\nparsed and \"masked\" if the unit file has been masked. Along with\nshowing the path to the unit file, this line will also show the enablement\nstate. Enabled units are included in the dependency network between units,\nand thus are started at boot or via some other form of activation. See the\nfull table of possible enablement states — including the definition\nof \"masked\" — in the documentation for the\nis-enabled\ncommand.\nThe \"Active:\" line shows active state. The value is\nusually \"active\" or \"inactive\". Active could mean\nstarted, bound, plugged in, etc depending on the unit type. The unit could\nalso be in process of changing states, reporting a state of\n\"activating\" or \"deactivating\". A special\n\"failed\" state is entered when the service failed in some way,\nsuch as a crash, exiting with an error code or timing out. If the failed\nstate is entered the cause will be logged for later reference.\nshow\n[\nPATTERN\n...|\nJOB\n...]\nShow properties of one or more units, jobs, or the\nmanager itself. If no argument is specified, properties of the manager will be\nshown. If a unit name is specified, properties of the unit are shown, and if a\njob ID is specified, properties of the job are shown. By default, empty\nproperties are suppressed. Use\n--all\nto show those too. To select\nspecific properties to show, use\n--property=\n. This command is intended\nto be used whenever computer-parsable output is required. Use\nstatus\nif\nyou are looking for formatted human-readable output.\nMany properties shown by\nsystemctl show\nmap directly to\nconfiguration settings of the system and service manager and its unit files.\nNote that the properties shown by the command are generally more low-level,\nnormalized versions of the original configuration settings and expose\nruntime state in addition to configuration. For example, properties shown\nfor service units include the service's current main process identifier as\n\"MainPID\" (which is runtime state), and time settings are always\nexposed as properties ending in the \"...USec\" suffix even if a\nmatching configuration options end in \"...Sec\", because\nmicroseconds is the normalized time unit used internally by the system and\nservice manager.\nFor details about many of these properties, see the documentation\nof the D-Bus interface backing these properties, see\norg.freedesktop.systemd1(5)\n.\ncat\nPATTERN\n...\nShow backing files of one or more units. Prints the\n\"fragment\" and \"drop-ins\" (source files) of units. Each\nfile is preceded by a comment which includes the file name. Note that this\nshows the contents of the backing files on disk, which might not match the\nsystem manager's understanding of these units if any unit files were updated\non disk and the\ndaemon-reload\ncommand was not issued since.\nAdded in version 209.\nhelp\nPATTERN\n...|\nPID\n...\nShow manual pages for one or more units, if available. If\na PID is given, the manual pages for the unit the process belongs to are\nshown.\nAdded in version 185.\nlist-dependencies\n[\nUNIT\n...]\nShows units required and wanted by the specified units.\nThis recursively lists units following the\nRequires=\n,\nRequisite=\n,\nWants=\n,\nConsistsOf=\n,\nBindsTo=\n, and\nUpholds=\ndependencies. If no units are specified, default.target is\nimplied.\nThe units that are shown are additionally filtered by\n--type=\nand\n--state=\nif those options are specified. Note that\nwe will not be able to use a tree structure in this case, so\n--plain\nis implied.\nBy default, only target units are recursively expanded. When\n--all\nis passed, all other units are recursively expanded as\nwell.\nOptions\n--reverse\n,\n--after\n,\n--before\nmay be\nused to change what types of dependencies are shown.\nNote that this command only lists units currently loaded into\nmemory by the service manager. In particular, this command is not suitable\nto get a comprehensive list at all reverse dependencies on a specific unit,\nas it will not list the dependencies declared by units currently not\nloaded.\nAdded in version 198.\nstart\nPATTERN\n...\nStart (activate) one or more units specified on the\ncommand line.\nNote that unit glob patterns expand to names of units currently in\nmemory. Units which are not active and are not in a failed state usually are\nnot in memory, and will not be matched by any pattern. In addition, in case\nof instantiated units, systemd is often unaware of the instance name until\nthe instance has been started. Therefore, using glob patterns with\nstart\nhas limited usefulness. Also, secondary alias names of units\nare not considered.\nOption\n--all\nmay be used to also operate on inactive units\nwhich are referenced by other loaded units. Note that this is not the same\nas operating on \"all\" possible units, because as the previous\nparagraph describes, such a list is ill-defined. Nevertheless,\nsystemctl\nstart --all\nGLOB\nmay be useful if all the units that\nshould match the pattern are pulled in by some target which is known to be\nloaded.\nstop\nPATTERN\n...\nStop (deactivate) one or more units specified on the\ncommand line.\nThis command will fail if the unit does not exist or if stopping\nof the unit is prohibited (see\nRefuseManualStop=\nin\nsystemd.unit(5)\n). It will\nnot\nfail if any of the commands\nconfigured to stop the unit (\nExecStop=\n, etc.) fail, because the\nmanager will still forcibly terminate the unit.\nIf a unit that gets stopped can still be triggered by other units,\na warning containing the names of the triggering units is shown.\n--no-warn\ncan be used to suppress the warning.\nreload\nPATTERN\n...\nAsks all units listed on the command line to reload their\nconfiguration. Note that this will reload the service-specific configuration,\nnot the unit configuration file of systemd. If you want systemd to reload the\nconfiguration file of a unit, use the\ndaemon-reload\ncommand. In other\nwords: for the example case of Apache, this will reload Apache's httpd.conf in\nthe web server, not the apache.service systemd unit file.\nThis command should not be confused with the\ndaemon-reload\ncommand.\nrestart\nPATTERN\n...\nStop and then start one or more units specified on the\ncommand line. If the units are not running yet, they will be started.\nNote that restarting a unit with this command does not necessarily\nflush out all of the unit's resources before it is started again. For\nexample, the per-service file descriptor storage facility (see\nFileDescriptorStoreMax=\nin\nsystemd.service(5)\n) will remain\nintact as long as the unit has a job pending, and is only cleared when the\nunit is fully stopped and no jobs are pending anymore. If it is intended\nthat the file descriptor store is flushed out, too, during a restart\noperation an explicit\nsystemctl stop\ncommand followed by\nsystemctl\nstart\nshould be issued.\ntry-restart\nPATTERN\n...\nStop and then start one or more units specified on the\ncommand line if the units are running. This does nothing if units are not\nrunning.\nreload-or-restart\nPATTERN\n...\nReload one or more units if they support it. If not, stop\nand then start them instead. If the units are not running yet, they will be\nstarted.\nThis has a slightly differing functionality when used in\ncombination with\n--marked\n, see below.\ntry-reload-or-restart\nPATTERN\n...\nReload one or more units if they support it. If not, stop\nand then start them instead. This does nothing if the units are not running.\nAdded in version 229.\nisolate\nUNIT\nStart the unit specified on the command line and its\ndependencies and stop all others, unless they have\nIgnoreOnIsolate=yes\n(see\nsystemd.unit(5)\n). If a unit name with no extension is given, an\nextension of \".target\" will be assumed.\nThis command is dangerous, since it will immediately stop\nprocesses that are not enabled in the new target, possibly including the\ngraphical environment or terminal you are currently using.\nNote that this operation is allowed only on units where\nAllowIsolate=\nis enabled. See\nsystemd.unit(5)\nfor details.\nkill\nPATTERN\n...\nSend a UNIX process signal to one or more processes of\nthe unit. Use\n--kill-whom=\nto select which process to send the signal\nto. Use\n--signal=\nto select the signal to send. Combine with\n--kill-value=\nto enqueue a POSIX Realtime Signal with an associated\nvalue.\nclean\nPATTERN\n...\nRemove the configuration, state, cache, logs, runtime or\nfile descriptor store data of the specified units. Use\n--what=\nto\nselect which kind of resource to remove. For service units this may be used to\nremove the directories configured with\nConfigurationDirectory=\n,\nStateDirectory=\n,\nCacheDirectory=\n,\nLogsDirectory=\nand\nRuntimeDirectory=\n, see\nsystemd.exec(5)\nfor details. It may also\nbe used to clear the file descriptor store as enabled via\nFileDescriptorStoreMax=\n, see\nsystemd.service(5)\nfor details. For\ntimer units this may be used to clear out the persistent timestamp data if\nPersistent=\nis used and\n--what=state\nis selected, see\nsystemd.timer(5)\n. This command only applies to units that use either of\nthese settings. If\n--what=\nis not specified, the cache and runtime data\nas well as the file descriptor store are removed (as these three types of\nresources are generally redundant and reproducible on the next invocation of\nthe unit). Multiple values can be separated by commas. Note that the specified\nunits must be stopped to invoke this operation.\nTable 2.  Possible values for --what=\nValue\nUnit Setting\n\"runtime\"\nRuntimeDirectory=\n\"state\"\nStateDirectory=\n\"cache\"\nCacheDirectory=\n\"logs\"\nLogsDirectory=\n\"configuration\"\nConfigurationDirectory=\n\"fdstore\"\nFileDescriptorStorePreserve=\n\"all\"\nAll of the above\n\"help\"\nShow the supported values and exit\nAdded in version 243.\nfreeze\nPATTERN\n...\nFreeze one or more units specified on the command line\nusing cgroup freezer\nFreezing the unit will cause all processes contained within the\ncgroup corresponding to the unit to be suspended. Being suspended means that\nunit's processes will not be scheduled to run on CPU until thawed. Note that\nthis command is supported only on systems that use unified cgroup hierarchy.\nUnit is automatically thawed just before we execute a job against the unit,\ne.g. before the unit is stopped.\nAdded in version 246.\nthaw\nPATTERN\n...\nThaw (unfreeze) one or more units specified on the\ncommand line.\nThis is the inverse operation to the\nfreeze\ncommand and\nresumes the execution of processes in the unit's cgroup.\nAdded in version 246.\nset-property\nUNIT\nPROPERTY\n=\nVALUE\n...\nSet the specified unit properties at runtime where this\nis supported. This allows changing configuration parameter properties such as\nresource control settings at runtime. Not all properties may be changed at\nruntime, but many resource control settings (primarily those in\nsystemd.resource-control(5)\n) may. The changes are applied immediately,\nand stored on disk for future boots, unless\n--runtime\nis passed, in\nwhich case the settings only apply until the next reboot. The syntax of the\nproperty assignment follows closely the syntax of assignments in unit files.\nExample:\nsystemctl set-property foobar.service\nCPUWeight=200\nIf the specified unit appears to be inactive, the changes will be\nonly stored on disk as described previously hence they will be effective\nwhen the unit will be started.\nNote that this command allows changing multiple properties at the\nsame time, which is preferable over setting them individually.\nExample:\nsystemctl set-property foobar.service CPUWeight=200\nMemoryMax=2G IPAccounting=yes\nLike with unit file configuration settings, assigning an empty\nsetting usually resets a property to its defaults.\nExample:\nsystemctl set-property avahi-daemon.service\nIPAddressDeny=\nAdded in version 206.\nbind\nUNIT\nPATH\n[\nPATH\n]\nBind-mounts a file or directory from the host into the\nspecified unit's mount namespace. The first path argument is the source file\nor directory on the host, the second path argument is the destination file or\ndirectory in the unit's mount namespace. When the latter is omitted, the\ndestination path in the unit's mount namespace is the same as the source path\non the host. When combined with the\n--read-only\nswitch, a read-only\nbind mount is created. When combined with the\n--mkdir\nswitch, the\ndestination path is first created before the mount is applied.\nNote that this option is currently only supported for units that\nrun within a mount namespace (e.g.: with\nRootImage=\n,\nPrivateMounts=\n, etc.). This command supports bind-mounting\ndirectories, regular files, device nodes,\nAF_UNIX\nsocket nodes, as\nwell as FIFOs. The bind mount is ephemeral, and it is undone as soon as the\ncurrent unit process exists. Note that the namespace mentioned here, where\nthe bind mount will be added to, is the one where the main service process\nruns. Other processes (those exececuted by\nExecReload=\n,\nExecStartPre=\n, etc.) run in distinct namespaces.\nIf supported by the kernel, any prior mount on the selected target\nwill be replaced by the new mount. If not supported, any prior mount will be\nover-mounted, but remain pinned and inaccessible.\nAdded in version 248.\nmount-image\nUNIT\nIMAGE\n[\nPATH\n[\nPARTITION_NAME\n:\nMOUNT_OPTIONS\n]]\nMounts an image from the host into the specified unit's\nmount namespace. The first path argument is the source image on the host, the\nsecond path argument is the destination directory in the unit's mount\nnamespace (i.e. inside\nRootImage=\n/\nRootDirectory=\n). The following\nargument, if any, is interpreted as a colon-separated tuple of partition name\nand comma-separated list of mount options for that partition. The format is\nthe same as the service\nMountImages=\nsetting. When combined with the\n--read-only\nswitch, a ready-only mount is created. When combined with\nthe\n--mkdir\nswitch, the destination path is first created before the\nmount is applied.\nNote that this option is currently only supported for units that\nrun within a mount namespace (i.e. with\nRootImage=\n,\nPrivateMounts=\n, etc.). Note that the namespace mentioned here where\nthe image mount will be added to, is the one where the main service process\nruns. Note that the namespace mentioned here, where the bind mount will be\nadded to, is the one where the main service process runs. Other processes\n(those exececuted by\nExecReload=\n,\nExecStartPre=\n, etc.) run in\ndistinct namespaces.\nIf supported by the kernel, any prior mount on the selected target\nwill be replaced by the new mount. If not supported, any prior mount will be\nover-mounted, but remain pinned and inaccessible.\nExample:\nsystemctl mount-image foo.service /tmp/img.raw /var/lib/image root:ro,nosuid\nsystemctl mount-image --mkdir bar.service /tmp/img.raw /var/lib/baz/img\nAdded in version 248.\nservice-log-level\nSERVICE\n[\nLEVEL\n]\nIf the\nLEVEL\nargument is not given, print the\ncurrent log level as reported by service\nSERVICE\n.\nIf the optional argument\nLEVEL\nis provided, then change the\ncurrent log level of the service to\nLEVEL\n. The log level should be a\ntypical syslog log level, i.e. a value in the range 0...7 or one of the\nstrings\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n; see\nsyslog(3)\nfor\ndetails.\nThe service must have the appropriate\nBusName=\ndestination\nproperty and also implement the\ngeneric\norg.freedesktop.LogControl1(5)\ninterface. (systemctl will use\nthe generic D-Bus protocol to access the\norg.freedesktop.LogControl1.LogLevel interface for the D-Bus name\ndestination\n.)\nAdded in version 247.\nservice-log-target\nSERVICE\n[\nTARGET\n]\nIf the\nTARGET\nargument is not given, print the\ncurrent log target as reported by service\nSERVICE\n.\nIf the optional argument\nTARGET\nis provided, then change\nthe current log target of the service to\nTARGET\n. The log target\nshould be one of the strings\nconsole\n(for log output to the service's\nstandard error stream),\nkmsg\n(for log output to the kernel log\nbuffer),\njournal\n(for log output to\nsystemd-journald.service(8)\nusing the native journal protocol),\nsyslog\n(for log output to the classic syslog socket /dev/log),\nnull\n(for no log output whatsoever) or\nauto\n(for an\nautomatically determined choice, typically equivalent to\nconsole\nif\nthe service is invoked interactively, and\njournal\nor\nsyslog\notherwise).\nFor most services, only a small subset of log targets make sense.\nIn particular, most \"normal\" services should only implement\nconsole\n,\njournal\n, and\nnull\n. Anything else is only\nappropriate for low-level services that are active in very early boot before\nproper logging is established.\nThe service must have the appropriate\nBusName=\ndestination\nproperty and also implement the\ngeneric\norg.freedesktop.LogControl1(5)\ninterface. (systemctl will use\nthe generic D-Bus protocol to access the\norg.freedesktop.LogControl1.LogLevel interface for the D-Bus name\ndestination\n.)\nAdded in version 247.\nreset-failed [\nPATTERN\n...]\nReset the \"failed\" state of the specified\nunits, or if no unit name is passed, reset the state of all units. When a unit\nfails in some way (i.e. process exiting with non-zero error code, terminating\nabnormally or timing out), it will automatically enter the \"failed\"\nstate and its exit code and status is recorded for introspection by the\nadministrator until the service is stopped/re-started or reset with this\ncommand.\nIn addition to resetting the \"failed\" state of a unit it\nalso resets various other per-unit properties: the start rate limit counter\nof all unit types is reset to zero, as is the restart counter of service\nunits. Thus, if a unit's start limit (as configured with\nStartLimitIntervalSec=\n/\nStartLimitBurst=\n) is hit and the unit\nrefuses to be started again, use this command to make it startable\nagain.\nwhoami [\nPID\n...]\nReturns the units the processes referenced by the given\nPIDs belong to (one per line). If no PID is specified returns the unit the\nsystemctl\ncommand is invoked in.\nAdded in version 254.\nUnit File Commands\n¶\nlist-unit-files\n[\nPATTERN...\n]\nList unit files installed on the system, in combination\nwith their enablement state (as reported by\nis-enabled\n). If one or more\nPATTERN\ns are specified, only unit files whose name matches one of them\nare shown (patterns matching unit file system paths are not supported).\nUnlike\nlist-units\nthis command will list template units in\naddition to explicitly instantiated units.\nAdded in version 233.\nenable\nUNIT\n...\n,\nenable\nPATH\n...\nEnable one or more units or unit instances. This will\ncreate a set of symlinks, as encoded in the [Install] sections of the\nindicated unit files. After the symlinks have been created, the system manager\nconfiguration is reloaded (in a way equivalent to\ndaemon-reload\n), in\norder to ensure the changes are taken into account immediately. Note that this\ndoes\nnot\nhave the effect of also starting any of the units being\nenabled. If this is desired, combine this command with the\n--now\nswitch, or invoke\nstart\nwith appropriate arguments later. Note that in\ncase of unit instance enablement (i.e. enablement of units of the form\nfoo@bar.service), symlinks named the same as instances are created in the unit\nconfiguration directory, however they point to the single template unit file\nthey are instantiated from.\nThis command expects either valid unit names (in which case\nvarious unit file directories are automatically searched for unit files with\nappropriate names), or absolute paths to unit files (in which case these\nfiles are read directly). If a specified unit file is located outside of the\nusual unit file directories, an additional symlink is created, linking it\ninto the unit configuration path, thus ensuring it is found when requested\nby commands such as\nstart\n. The file system where the linked unit\nfiles are located must be accessible when systemd is started (e.g. anything\nunderneath /home/ or /var/ is not allowed, unless those directories are\nlocated on the root file system).\nThis command will print the file system operations executed. This\noutput may be suppressed by passing\n--quiet\n.\nNote that this operation creates only the symlinks suggested in\nthe [Install] section of the unit files. While this command is the\nrecommended way to manipulate the unit configuration directory, the\nadministrator is free to make additional changes manually by placing or\nremoving symlinks below this directory. This is particularly useful to\ncreate configurations that deviate from the suggested default installation.\nIn this case, the administrator must make sure to invoke\ndaemon-reload\nmanually as necessary, in order to ensure the changes\nare taken into account.\nWhen using this operation on units without install information, a\nwarning about it is shown.\n--no-warn\ncan be used to suppress the\nwarning.\nEnabling units should not be confused with starting (activating)\nunits, as done by the\nstart\ncommand. Enabling and starting units is\northogonal: units may be enabled without being started and started without\nbeing enabled. Enabling simply hooks the unit into various suggested places\n(for example, so that the unit is automatically started on boot or when a\nparticular kind of hardware is plugged in). Starting actually spawns the\ndaemon process (in case of service units), or binds the socket (in case of\nsocket units), and so on.\nDepending on whether\n--system\n,\n--user\n,\n--runtime\n, or\n--global\nis specified, this enables the unit for\nthe system, for the calling user only, for only this boot of the system, or\nfor all future logins of all users. Note that in the last case, no systemd\ndaemon configuration is reloaded.\nUsing\nenable\non masked units is not supported and results\nin an error.\ndisable\nUNIT\n...\nDisables one or more units. This removes all symlinks to\nthe unit files backing the specified units from the unit configuration\ndirectory, and hence undoes any changes made by\nenable\nor\nlink\n.\nNote that this removes\nall\nsymlinks to matching unit files, including\nmanually created symlinks, and not just those actually created by\nenable\nor\nlink\n. Note that while\ndisable\nundoes the effect\nof\nenable\n, the two commands are otherwise not symmetric, as\ndisable\nmay remove more symlinks than a prior\nenable\ninvocation\nof the same unit created.\nThis command expects valid unit names only, it does not accept\npaths to unit files.\nIn addition to the units specified as arguments, all units are\ndisabled that are listed in the\nAlso=\nsetting contained in the\n[Install] section of any of the unit files being operated on.\nThis command implicitly reloads the system manager configuration\nafter completing the operation. Note that this command does not implicitly\nstop the units that are being disabled. If this is desired, either combine\nthis command with the\n--now\nswitch, or invoke the\nstop\ncommand\nwith appropriate arguments later.\nThis command will print information about the file system\noperations (symlink removals) executed. This output may be suppressed by\npassing\n--quiet\n.\nIf a unit gets disabled but its triggering units are still active,\na warning containing the names of the triggering units is shown.\n--no-warn\ncan be used to suppress the warning.\nWhen this command is used with\n--user\n, the units being\noperated on might still be enabled in global scope, and thus get started\nautomatically even after a successful disablement in user scope. In this\ncase, a warning about it is shown, which can be suppressed using\n--no-warn\n.\nThis command honors\n--system\n,\n--user\n,\n--runtime\n,\n--global\nand\n--no-warn\nin a similar way as\nenable\n.\nAdded in version 238.\nreenable\nUNIT\n...\nReenable one or more units, as specified on the command\nline. This is a combination of\ndisable\nand\nenable\nand is useful\nto reset the symlinks a unit file is enabled with to the defaults configured\nin its [Install] section. This command expects a unit name only, it does not\naccept paths to unit files.\nThis command implicitly reloads the system manager configuration\nafter completing the operation. Note that this command does not implicitly\nrestart the units that are being disabled. If this is desired, either\ncombine this command with the\n--now\nswitch, or invoke the\ntry-restart\ncommand with appropriate arguments later.\nAdded in version 238.\npreset\nUNIT\n...\nReset the enable/disable status of one or more unit\nfiles, as specified on the command line, to the defaults configured in the\npreset policy files. This has the same effect as\ndisable\nor\nenable\n, depending how the unit is listed in the preset files.\nUse\n--preset-mode=\nto control whether units shall be\nenabled and disabled, or only enabled, or only disabled.\nIf the unit carries no install information, it will be silently\nignored by this command.\nUNIT\nmust be the real unit name, any alias\nnames are ignored silently.\nFor more information on the preset policy format, see\nsystemd.preset(5)\n.\nAdded in version 238.\npreset-all\nResets all installed unit files to the defaults\nconfigured in the preset policy file (see above).\nUse\n--preset-mode=\nto control whether units shall be\nenabled and disabled, or only enabled, or only disabled.\nAdded in version 215.\nis-enabled\nUNIT\n...\nChecks whether any of the specified unit files are\nenabled (as with\nenable\n). Returns an exit code of 0 if at least one is\nenabled, non-zero otherwise. Prints the current enable status (see table). To\nsuppress this output, use\n--quiet\n. To show installation targets, use\n--full\n.\nTable 3.  is-enabled output\nName\nDescription\nExit Code\n\"enabled\"\nEnabled via .wants/, .requires/ or\nAlias=\nsymlinks\n(permanently in /etc/systemd/system/, or transiently in\n/run/systemd/system/).\n0\n\"enabled-runtime\"\n\"linked\"\nMade available through one or more symlinks to the unit file\n(permanently in /etc/systemd/system/ or transiently in\n/run/systemd/system/), even though the unit file might reside outside of\nthe unit file search path.\n> 0\n\"linked-runtime\"\n\"alias\"\nThe name is an alias (symlink to another unit file).\n0\n\"masked\"\nCompletely disabled, so that any start operation on it fails\n(permanently in /etc/systemd/system/ or transiently in\n/run/systemd/systemd/).\n> 0\n\"masked-runtime\"\n\"static\"\nThe unit file is not enabled, and has no provisions for enabling in the\n[Install] unit file section.\n0\n\"indirect\"\nThe unit file itself is not enabled, but it has a non-empty\nAlso=\nsetting in the [Install] unit file section, listing other unit files that\nmight be enabled, or it has an alias under a different name through a\nsymlink that is not specified in\nAlso=\n. For template unit files, an\ninstance different than the one specified in\nDefaultInstance=\nis\nenabled.\n0\n\"disabled\"\nThe unit file is not enabled, but contains an [Install] section with\ninstallation instructions.\n> 0\n\"generated\"\nThe unit file was generated dynamically via a generator tool. See\nsystemd.generator(7)\n. Generated unit files may not be enabled, they\nare enabled implicitly by their generator.\n0\n\"transient\"\nThe unit file has been created dynamically with the runtime API.\nTransient units may not be enabled.\n0\n\"bad\"\nThe unit file is invalid or another error occurred. Note that\nis-enabled\nwill not actually return this state, but print an error\nmessage instead. However, the unit file listing printed by\nlist-unit-files\nmight show it.\n> 0\n\"not-found\"\nThe unit file does not exist.\n4\nAdded in version 238.\nmask\nUNIT\n...\nMask one or more units, as specified on the command line.\nThis will link these unit files to /dev/null, making it impossible to start\nthem. This is a stronger version of\ndisable\n, since it prohibits all\nkinds of activation of the unit, including enablement and manual activation.\nUse this option with care. This honors the\n--runtime\noption to only\nmask temporarily until the next reboot of the system. The\n--now\noption\nmay be used to ensure that the units are also stopped. This command expects\nvalid unit names only, it does not accept unit file paths.\nNote that this will create a symlink under the unit's name in\n/etc/systemd/system/ (in case\n--runtime\nis not specified) or\n/run/systemd/system/ (in case\n--runtime\nis specified). If a matching\nunit file already exists under these directories this operation will hence\nfail. This means that the operation is primarily useful to mask units\nshipped by the vendor (as those are shipped in /usr/lib/systemd/system/ and\nnot the aforementioned two directories), but typically does not work for\nunits created locally (as those are typically placed precisely in the two\naforementioned directories). Similar restrictions apply for\n--user\nmode, in which case the directories are below the user's home directory\nhowever.\nIf a unit gets masked but its triggering units are still active, a\nwarning containing the names of the triggering units is shown.\n--no-warn\ncan be used to suppress the warning.\nAdded in version 238.\nunmask\nUNIT\n...\nUnmask one or more unit files, as specified on the\ncommand line. This will undo the effect of\nmask\n. This command expects\nvalid unit names only, it does not accept unit file paths.\nAdded in version 238.\nlink\nPATH\n...\nLink a unit file that is not in the unit file search path\ninto the unit file search path. This command expects an absolute path to a\nunit file. The effect of this may be undone with\ndisable\n. The effect of\nthis command is that a unit file is made available for commands such as\nstart\n, even though it is not installed directly in the unit search\npath. The file system where the linked unit files are located must be\naccessible when systemd is started (e.g. anything underneath /home/ or /var/\nis not allowed, unless those directories are located on the root file system).\nAdded in version 233.\nrevert\nUNIT\n...\nRevert one or more unit files to their vendor versions.\nThis command removes drop-in configuration files that modify the specified\nunits, as well as any user-configured unit file that overrides a matching\nvendor supplied unit file. Specifically, for a unit \"foo.service\"\nthe matching directories \"foo.service.d/\" with all their contained\nfiles are removed, both below the persistent and runtime configuration\ndirectories (i.e. below /etc/systemd/system and /run/systemd/system); if the\nunit file has a vendor-supplied version (i.e. a unit file located below /usr/)\nany matching persistent or runtime unit file that overrides it is removed,\ntoo. Note that if a unit file has no vendor-supplied version (i.e. is only\ndefined below /etc/systemd/system or /run/systemd/system, but not in a unit\nfile stored below /usr/), then it is not removed. Also, if a unit is masked,\nit is unmasked.\nEffectively, this command may be used to undo all changes made\nwith\nsystemctl edit\n,\nsystemctl set-property\nand\nsystemctl\nmask\nand puts the original unit file with its settings back in\neffect.\nAdded in version 230.\nadd-wants\nTARGET\nUNIT\n...\n,\nadd-requires\nTARGET\nUNIT\n...\nAdds \"Wants=\" or \"Requires=\"\ndependencies, respectively, to the specified\nTARGET\nfor one or more\nunits.\nThis command honors\n--system\n,\n--user\n,\n--runtime\nand\n--global\nin a way similar to\nenable\n.\nAdded in version 217.\nedit\nUNIT\n...\nEdit or replace a drop-in snippet or the main unit file,\nto extend or override the definition of the specified unit.\nDepending on whether\n--system\n(the default),\n--user\n,\nor\n--global\nis specified, this command will operate on the system\nunit files, unit files for the calling user, or the unit files shared\nbetween all users.\nThe editor (see the \"Environment\" section below) is\ninvoked on temporary files which will be written to the real location if the\neditor exits successfully. After the editing is finished, configuration is\nreloaded, equivalent to\nsystemctl daemon-reload --system\nor\nsystemctl daemon-reload --user\n. For\nedit --global\n, the reload\nis not performed and the edits will take effect only for subsequent logins\n(or after a reload is requested in a different way).\nIf\n--full\nis specified, a replacement for the main unit\nfile will be created or edited. Otherwise, a drop-in file will be created or\nedited.\nIf\n--drop-in=\nis specified, the given drop-in file name\nwill be used instead of the default override.conf.\nThe unit must exist, i.e. its main unit file must be present. If\n--force\nis specified, this requirement is ignored and a new unit may\nbe created (with\n--full\n), or a drop-in for a nonexistent unit may be\ncreated.\nIf\n--runtime\nis specified, the changes will be made\ntemporarily in /run/ and they will be lost on the next reboot.\nIf\n--stdin\nis specified, the new contents will be read from\nstandard input. In this mode, the old contents of the file are\ndiscarded.\nIf the temporary file is empty upon exit, the modification of the\nrelated unit is canceled.\nNote that this command cannot be used to remotely edit units and\nthat you cannot temporarily edit units which are in /etc/, since they take\nprecedence over /run/.\nAdded in version 218.\nget-default\nReturn the default target to boot into. This returns the\ntarget unit name default.target is aliased (symlinked) to.\nAdded in version 205.\nset-default\nTARGET\nSet the default target to boot into. This sets (symlinks)\nthe default.target alias to the given target unit.\nAdded in version 205.\nMachine Commands\n¶\nlist-machines\n[\nPATTERN\n...]\nList the host and all running local containers with their\nstate. If one or more\nPATTERN\ns are specified, only containers matching\none of them are shown.\nAdded in version 212.\nJob Commands\n¶\nlist-jobs\n[\nPATTERN...\n]\nList jobs that are in progress. If one or more\nPATTERN\ns are specified, only jobs for units matching one of them are\nshown.\nWhen combined with\n--after\nor\n--before\nthe list is\naugmented with information on which other job each job is waiting for, and\nwhich other jobs are waiting for it, see above.\nAdded in version 233.\ncancel\n[\nJOB\n...]\nCancel one or more jobs specified on the command line by\ntheir numeric job IDs. If no job ID is specified, cancel all pending jobs.\nAdded in version 233.\nEnvironment Commands\n¶\nsystemd\nsupports an environment block that is passed to\nprocesses the manager spawns. The names of the variables can contain ASCII\nletters, digits, and the underscore character. Variable names cannot be\nempty or start with a digit. In variable values, most characters are\nallowed, but the whole sequence must be valid UTF-8. (Note that control\ncharacters like newline (\nNL\n), tab (\nTAB\n), or the escape\ncharacter (\nESC\n),\nare\nvalid ASCII and thus valid UTF-8). The\ntotal length of the environment block is limited to\n_SC_ARG_MAX\nvalue\ndefined by\nsysconf(3)\n.\nshow-environment\nDump the systemd manager environment block. This is the\nenvironment block that is passed to all processes the manager spawns. The\nenvironment block will be dumped in straightforward form suitable for sourcing\ninto most shells. If no special characters or whitespace is present in the\nvariable values, no escaping is performed, and the assignments have the form\n\"VARIABLE=value\". If whitespace or characters which have special\nmeaning to the shell are present, dollar-single-quote escaping is used, and\nassignments have the form \"VARIABLE=$'value'\". This syntax is known\nto be supported by\nbash(1)\n,\nzsh(1)\n,\nksh(1)\n, and\nbusybox(1)\n's\nash\n(1), but not\ndash(1)\nor\nfish(1)\n.\nNote that this shows the\neffective\nblock, i.e. the\ncombination of environment variables configured via configuration files,\nenvironment generators and via IPC (i.e. via the\nset-environment\ndescribed below). At the moment a unit process is forked off, this combined\nenvironment block will be further combined with per-unit environment\nvariables, which are not visible in this command.\nset-environment\nVARIABLE=VALUE\n...\nSet one or more service manager environment variables, as\nspecified on the command line. This command will fail if variable names and\nvalues do not conform to the rules listed above.\nNote that this operates on an environment block separate from the\nenvironment block configured from service manager configuration and\nenvironment generators. Whenever a process is invoked the two blocks are\ncombined (also incorporating any per-service environment variables), and\npassed to it. The\nshow-environment\nverb will show the combination of\nthe blocks, see above.\nAdded in version 233.\nunset-environment\nVARIABLE\n...\nUnset one or more systemd manager environment variables.\nIf only a variable name is specified, it will be removed regardless of its\nvalue. If a variable and a value are specified, the variable is only removed\nif it has the specified value.\nNote that this operates on an environment block separate from the\nenvironment block configured from service manager configuration and\nenvironment generators. Whenever a process is invoked the two blocks are\ncombined (also incorporating any per-service environment variables), and\npassed to it. The\nshow-environment\nverb will show the combination of\nthe blocks, see above. Note that this means this command cannot be used to\nunset environment variables defined in the service manager configuration\nfiles or via generators.\nAdded in version 233.\nimport-environment\nVARIABLE...\nImport all, one or more environment variables set on the\nclient into the systemd manager environment block. If a list of environment\nvariable names is passed, client-side values are then imported into the\nmanager's environment block. If any names are not valid environment variable\nnames or have invalid values according to the rules described above, an error\nis raised. If no arguments are passed, the entire environment block inherited\nby the\nsystemctl\nprocess is imported. In this mode, any inherited\ninvalid environment variables are quietly ignored.\nImporting of the full inherited environment block (calling this\ncommand without any arguments) is deprecated. A shell will set dozens of\nvariables which only make sense locally and are only meant for processes\nwhich are descendants of the shell. Such variables in the global environment\nblock are confusing to other processes.\nAdded in version 209.\nManager State Commands\n¶\ndaemon-reload\nReload the systemd manager configuration. This will rerun\nall generators (see\nsystemd.generator(7)\n), reload all unit files, and\nrecreate the entire dependency tree. While the daemon is being reloaded, all\nsockets systemd listens on behalf of user configuration will stay accessible.\nThis command should not be confused with the\nreload\ncommand.\ndaemon-reexec\nReexecute the systemd manager. This will serialize the\nmanager state, reexecute the process and deserialize the state again. This\ncommand is of little use except for debugging and package upgrades. Sometimes,\nit might be helpful as a heavy-weight\ndaemon-reload\n. While the daemon\nis being reexecuted, all sockets systemd listening on behalf of user\nconfiguration will stay accessible.\nlog-level\n[\nLEVEL\n]\nIf no argument is given, print the current log level of\nthe manager. If an optional argument\nLEVEL\nis provided, then the\ncommand changes the current log level of the manager to\nLEVEL\n(accepts\nthe same values as\n--log-level=\ndescribed in\nsystemd(1)\n).\nAdded in version 244.\nlog-target\n[\nTARGET\n]\nIf no argument is given, print the current log target of\nthe manager. If an optional argument\nTARGET\nis provided, then the\ncommand changes the current log target of the manager to\nTARGET\n(accepts the same values as\n--log-target=\n, described in\nsystemd(1)\n).\nAdded in version 244.\nservice-watchdogs\n[yes|no]\nIf no argument is given, print the current state of\nservice runtime watchdogs of the manager. If an optional boolean argument is\nprovided, then globally enables or disables the service runtime watchdogs\n(\nWatchdogSec=\n) and emergency actions (e.g.\nOnFailure=\nor\nStartLimitAction=\n); see\nsystemd.service(5)\n. The hardware\nwatchdog is not affected by this setting.\nAdded in version 244.\nSystem Commands\n¶\nis-system-running\nChecks whether the system is operational. This returns\nsuccess (exit code 0) when the system is fully up and running, specifically\nnot in startup, shutdown or maintenance mode, and with no failed services.\nFailure is returned otherwise (exit code non-zero). In addition, the current\nstate is printed in a short string to standard output, see the table below.\nUse\n--quiet\nto suppress this output.\nUse\n--wait\nto wait until the boot process is completed\nbefore printing the current state and returning the appropriate error\nstatus. If\n--wait\nis in use, states\ninitializing\nor\nstarting\nwill not be reported, instead the command will block until a\nlater state (such as\nrunning\nor\ndegraded\n) is reached.\nTable 4. is-system-running output\nName\nDescription\nExit Code\ninitializing\nEarly bootup, before basic.target is reached or the\nmaintenance\nstate entered.\n> 0\nstarting\nLate bootup, before the job queue becomes idle for the first time, or\none of the rescue targets are reached.\n> 0\nrunning\nThe system is fully operational.\n0\ndegraded\nThe system is operational but one or more units failed.\n> 0\nmaintenance\nThe rescue or emergency target is active.\n> 0\nstopping\nThe manager is shutting down.\n> 0\noffline\nThe manager is not running. Specifically, this is the operational state\nif an incompatible program is running as system manager (PID 1).\n> 0\nunknown\nThe operational state could not be determined, due to lack of resources\nor another error cause.\n> 0\nAdded in version 215.\ndefault\nEnter default mode. This is equivalent to\nsystemctl\nisolate default.target\n. This operation is blocking by default, use\n--no-block\nto request asynchronous behavior.\nrescue\nEnter rescue mode. This is equivalent to\nsystemctl\nisolate rescue.target\n. This operation is blocking by default, use\n--no-block\nto request asynchronous behavior.\nemergency\nEnter emergency mode. This is equivalent to\nsystemctl\nisolate emergency.target\n. This operation is blocking by default, use\n--no-block\nto request asynchronous behavior.\nhalt\nShut down and halt the system. This is mostly equivalent\nto\nsystemctl start halt.target --job-mode=replace-irreversibly\n--no-block\n, but also prints a wall message to all users. This command is\nasynchronous; it will return after the halt operation is enqueued, without\nwaiting for it to complete. Note that this operation will simply halt the OS\nkernel after shutting down, leaving the hardware powered on. Use\nsystemctl\npoweroff\nfor powering off the system (see below).\nIf combined with\n--force\n, shutdown of all running services\nis skipped, however all processes are killed and all file systems are\nunmounted or mounted read-only, immediately followed by the system halt. If\n--force\nis specified twice, the operation is immediately executed\nwithout terminating any processes or unmounting any file systems. This may\nresult in data loss. Note that when\n--force\nis specified twice the\nhalt operation is executed by\nsystemctl\nitself, and the system\nmanager is not contacted. This means the command should succeed even when\nthe system manager has crashed.\nIf combined with\n--when=\n, shutdown will be scheduled after\nthe given timestamp. And\n--when=cancel\nwill cancel the shutdown.\npoweroff\nShut down and power-off the system. This is mostly\nequivalent to\nsystemctl start poweroff.target\n--job-mode=replace-irreversibly --no-block\n, but also prints a wall message\nto all users. This command is asynchronous; it will return after the power-off\noperation is enqueued, without waiting for it to complete.\nThis command honors\n--force\nand\n--when=\nin a similar\nway as\nhalt\n.\nreboot\nShut down and reboot the system.\nThis command mostly equivalent to\nsystemctl start reboot.target\n--job-mode=replace-irreversibly --no-block\n, but also prints a wall\nmessage to all users. This command is asynchronous; it will return after the\nreboot operation is enqueued, without waiting for it to complete.\nIf the switch\n--reboot-argument=\nis given, it will be\npassed as the optional argument to the\nreboot(2)\nsystem call.\nOptions\n--boot-loader-entry=\n,\n--boot-loader-menu=\n,\nand\n--firmware-setup\ncan be used to select what to do\nafter\nthe reboot. See the descriptions of those options for details.\nThis command honors\n--force\nand\n--when=\nin a similar\nway as\nhalt\n.\nIf a new kernel has been loaded via\nkexec --load\n, a\nkexec\nwill be performed instead of a reboot, unless\n\"SYSTEMCTL_SKIP_AUTO_KEXEC=1\" has been set. If a new root file\nsystem has been set up on \"/run/nextroot/\", a\nsoft-reboot\nwill be performed instead of a reboot, unless\n\"SYSTEMCTL_SKIP_AUTO_SOFT_REBOOT=1\" has been set.\nAdded in version 246.\nkexec\nShut down and reboot the system via\nkexec\n. This\ncommand will load a kexec kernel if one was not loaded yet or fail. A kernel\nmay be loaded earlier by a separate step, this is particularly useful if a\ncustom initrd or additional kernel command line options are desired. The\n--force\ncan be used to continue without a kexec kernel, i.e. to perform\na normal reboot. The final reboot step is equivalent to\nsystemctl start\nkexec.target --job-mode=replace-irreversibly --no-block\n.\nTo load a kernel, an enumeration is performed following the\nUAPI.1 Boot Loader Specification\n[1], and the default boot entry is\nloaded. For this step to succeed, the system must be using UEFI and the boot\nloader entries must be configured appropriately.\nbootctl list\nmay be\nused to list boot entries, see\nbootctl(1)\n.\nThis command is asynchronous; it will return after the reboot\noperation is enqueued, without waiting for it to complete.\nThis command honors\n--force\nand\n--when=\nsimilarly to\nhalt\n.\nIf a new kernel has been loaded via\nkexec --load\n, a\nkexec\nwill be performed when\nreboot\nis invoked, unless\n\"SYSTEMCTL_SKIP_AUTO_KEXEC=1\" has been set.\nsoft-reboot\nShut down and reboot userspace. This is equivalent to\nsystemctl start soft-reboot.target --job-mode=replace-irreversibly\n--no-block\n. This command is asynchronous; it will return after the reboot\noperation is enqueued, without waiting for it to complete.\nThis command honors\n--force\nand\n--when=\nin a similar\nway as\nhalt\n.\nThis operation only reboots userspace, leaving the kernel running.\nSee\nsystemd-soft-reboot.service(8)\nfor details.\nIf a new root file system has been set up on\n\"/run/nextroot/\", a\nsoft-reboot\nwill be performed when\nreboot\nis invoked, unless\n\"SYSTEMCTL_SKIP_AUTO_SOFT_REBOOT=1\" has been set.\nAdded in version 254.\nexit\n[\nEXIT_CODE\n]\nAsk the service manager to quit. This is only supported\nfor user service managers (i.e. in conjunction with the\n--user\noption)\nor in containers and is equivalent to\npoweroff\notherwise. This command\nis asynchronous; it will return after the exit operation is enqueued, without\nwaiting for it to complete.\nThe service manager will exit with the specified exit code, if\nEXIT_CODE\nis passed.\nAdded in version 227.\nswitch-root\n[\nROOT\n[\nINIT\n]]\nSwitches to a different root directory and executes a new\nsystem manager process below it. This is intended for use in the initrd, and\nwill transition from the initrd's system manager process (a.k.a.\n\"init\" process, PID 1) to the main system manager process which is\nloaded from the actual host root files system. This call takes two arguments:\nthe directory that is to become the new root directory, and the path to the\nnew system manager binary below it to execute as PID 1. If both are omitted or\nthe former is an empty string it defaults to /sysroot/. If the latter is\nomitted or is an empty string, a systemd binary will automatically be searched\nfor and used as service manager. If the system manager path is omitted, equal\nto the empty string or identical to the path to the systemd binary, the state\nof the initrd's system manager process is passed to the main system manager,\nwhich allows later introspection of the state of the services involved in the\ninitrd boot phase.\nAdded in version 209.\nsleep\nPut the system to sleep, through\nsuspend\n,\nhibernate\n,\nhybrid-sleep\n, or\nsuspend-then-hibernate\n. The\nsleep operation to use is automatically selected by\nsystemd-logind.service(8)\n. By default,\nsuspend-then-hibernate\nis\nused, and falls back to\nsuspend\nand then\nhibernate\nif not\nsupported. Refer to\nSleepOperation=\nsetting in\nlogind.conf(5)\nfor more details. This command is asynchronous, and will return after the\nsleep operation is successfully enqueued. It will not wait for the\nsleep/resume cycle to complete.\nAdded in version 256.\nsuspend\nSuspend the system. This will trigger activation of the\nspecial target unit suspend.target. This command is asynchronous, and will\nreturn after the suspend operation is successfully enqueued. It will not wait\nfor the suspend/resume cycle to complete.\nIf\n--force\nis specified, and\nsystemd-logind\nreturned\nerror for the operation, the error will be ignored and the operation will be\ntried again directly through starting the target unit.\nhibernate\nHibernate the system. This will trigger activation of the\nspecial target unit hibernate.target. This command is asynchronous, and will\nreturn after the hibernation operation is successfully enqueued. It will not\nwait for the hibernate/thaw cycle to complete.\nThis command honors\n--force\nin the same way as\nsuspend\n.\nhybrid-sleep\nHibernate and suspend the system. This will trigger\nactivation of the special target unit hybrid-sleep.target. This command is\nasynchronous, and will return after the hybrid sleep operation is successfully\nenqueued. It will not wait for the sleep/wake-up cycle to complete.\nThis command honors\n--force\nin the same way as\nsuspend\n.\nAdded in version 196.\nsuspend-then-hibernate\nSuspend the system and hibernate it when the battery is\nlow, or when the delay specified in systemd-sleep.conf elapsed. This will\ntrigger activation of the special target unit suspend-then-hibernate.target.\nThis command is asynchronous, and will return after the hybrid sleep operation\nis successfully enqueued. It will not wait for the sleep/wake-up or\nhibernate/thaw cycle to complete.\nThis command honors\n--force\nin the same way as\nsuspend\n.\nAdded in version 240.\nParameter Syntax\n¶\nUnit commands listed above take either a single unit name\n(designated as\nUNIT\n), or multiple unit specifications (designated as\nPATTERN\n...). In the first case, the unit name with or without a\nsuffix must be given. If the suffix is not specified (unit name is\n\"abbreviated\"), systemctl will append a suitable suffix,\n\".service\" by default, and a type-specific suffix in case of\ncommands which operate only on specific unit types. For example,\n# systemctl start sshd\nand\n# systemctl start sshd.service\nare equivalent, as are\n# systemctl isolate default\nand\n# systemctl isolate default.target\nNote that (absolute) paths to device nodes are automatically\nconverted to device unit names, and other (absolute) paths to mount unit\nnames.\n# systemctl status /dev/sda\n# systemctl status /home\nare equivalent to:\n# systemctl status dev-sda.device\n# systemctl status home.mount\nIn the second case, shell-style globs will be matched against the\nprimary names of all units currently in memory; literal unit names, with or\nwithout a suffix, will be treated as in the first case. This means that\nliteral unit names always refer to exactly one unit, but globs may match\nzero units and this is not considered an error.\nGlob patterns use\nfnmatch(3)\n, so normal shell-style\nglobbing rules are used, and \"*\", \"?\", \"[]\"\nmay be used. See\nglob(7)\nfor more details. The patterns are matched\nagainst the primary names of units currently in memory, and patterns which\ndo not match anything are silently skipped. For example:\n# systemctl stop \"sshd@*.service\"\nwill stop all sshd@.service instances. Note that alias names of\nunits, and units that are not in memory are not considered for glob\nexpansion.\nFor unit file commands, the specified\nUNIT\nshould be the\nname of the unit file (possibly abbreviated, see above), or the absolute\npath to the unit file:\n# systemctl enable foo.service\nor\n# systemctl link /path/to/foo.service\nOPTIONS\n¶\nThe following options are understood:\n-t\n,\n--type=\nThe argument is a comma-separated list of unit types such\nas\nservice\nand\nsocket\n. When units are listed with\nlist-units\n,\nlist-dependencies\n,\nshow\n, or\nstatus\n,\nonly units of the specified types will be shown. By default, units of all\ntypes are shown.\nAs a special case, if one of the arguments is\nhelp\n, a list\nof allowed values will be printed and the program will exit.\n--state=\nThe argument is a comma-separated list of unit LOAD, SUB,\nor ACTIVE states. When listing units with\nlist-units\n,\nlist-dependencies\n,\nshow\nor\nstatus\n, show only those in the\nspecified states. Use\n--state=failed\nor\n--failed\nto show only\nfailed units.\nAs a special case, if one of the arguments is\nhelp\n, a list\nof allowed values will be printed and the program will exit.\nAdded in version 206.\n-p\n,\n--property=\nWhen showing unit/job/manager properties with the\nshow\ncommand, limit display to properties specified in the argument.\nThe argument should be a comma-separated list of property names, such as\n\"MainPID\". Unless specified, all known properties are shown. If\nspecified more than once, all properties with the specified names are shown.\nShell completion is implemented for property names.\nFor the manager itself,\nsystemctl show\nwill show all\navailable properties, most of which are derived or closely match the options\ndescribed in\nsystemd-system.conf(5)\n.\nProperties for units vary by unit type, so showing any unit (even\na non-existent one) is a way to list properties pertaining to this type.\nSimilarly, showing any job will list properties pertaining to all jobs.\nProperties for units are documented in\nsystemd.unit(5)\n, and the pages\nfor individual unit types\nsystemd.service(5)\n,\nsystemd.socket(5)\n, etc.\n-P\nEquivalent to\n--value\n--property=\n, i.e.\nshows the value of the property without the property name or \"=\".\nNote that using\n-P\nonce will also affect all properties listed with\n-p\n/\n--property=\n.\nAdded in version 246.\n-a\n,\n--all\nWhen listing units with\nlist-units\n, also show\ninactive units and units which are following other units. When showing\nunit/job/manager properties, show all properties regardless whether they are\nset or not.\nTo list all units installed in the file system, use the\nlist-unit-files\ncommand instead.\nWhen listing units with\nlist-dependencies\n, recursively show\ndependencies of all dependent units (by default only dependencies of target\nunits are shown).\nWhen used with\nstatus\n, show journal messages in full, even\nif they include unprintable characters or are very long. By default, fields\nwith unprintable characters are abbreviated as \"blob data\". (Note\nthat the pager may escape unprintable characters again.)\n-r\n,\n--recursive\nWhen listing units, also show units of local containers.\nUnits of local containers will be prefixed with the container name, separated\nby a single colon character (\":\").\nAdded in version 212.\n--reverse\nShow reverse dependencies between units with\nlist-dependencies\n, i.e. follow dependencies of type\nWantedBy=\n,\nRequiredBy=\n,\nUpheldBy=\n,\nPartOf=\n,\nBoundBy=\n, instead\nof\nWants=\nand similar.\nAdded in version 203.\n--after\nWith\nlist-dependencies\n, show the units that are\nordered before the specified unit. In other words, recursively list units\nfollowing the\nAfter=\ndependency.\nNote that any\nAfter=\ndependency is automatically mirrored\nto create a\nBefore=\ndependency. Temporal dependencies may be\nspecified explicitly, but are also created implicitly for units which are\nWantedBy=\ntargets (see\nsystemd.target(5)\n), and as a result of\nother directives (for example\nRequiresMountsFor=\n). Both explicitly\nand implicitly introduced dependencies are shown with\nlist-dependencies\n.\nWhen passed to the\nlist-jobs\ncommand, for each printed job\nshow which other jobs are waiting for it. May be combined with\n--before\nto show both the jobs waiting for each job as well as all\njobs each job is waiting for.\nAdded in version 203.\n--before\nWith\nlist-dependencies\n, show the units that are\nordered after the specified unit. In other words, recursively list units\nfollowing the\nBefore=\ndependency.\nWhen passed to the\nlist-jobs\ncommand, for each printed job\nshow which other jobs it is waiting for. May be combined with\n--after\nto show both the jobs waiting for each job as well as all jobs each job is\nwaiting for.\nAdded in version 212.\n--with-dependencies\nWhen used with\nstatus\n,\ncat\n,\nlist-units\n, and\nlist-unit-files\n, those commands print all\nspecified units and the dependencies of those units.\nOptions\n--reverse\n,\n--after\n,\n--before\nmay be\nused to change what types of dependencies are shown.\nAdded in version 245.\n-l\n,\n--full\nDo not ellipsize unit names, process tree entries,\njournal output, or truncate unit descriptions in the output of\nstatus\n,\nlist-units\n,\nlist-jobs\n, and\nlist-timers\n.\nAlso, show installation targets in the output of\nis-enabled\n.\n--value\nWhen printing properties with\nshow\n, only print the\nvalue, and skip the property name and \"=\". Also see option\n-P\nabove.\nAdded in version 230.\n--show-types\nWhen showing sockets, show the type of the socket.\nAdded in version 202.\n--job-mode=\nWhen queuing a new job, this option controls how to deal\nwith already queued jobs. It takes one of \"fail\",\n\"lenient\", \"replace\", \"replace-irreversibly\",\n\"isolate\", \"ignore-dependencies\",\n\"ignore-requirements\", \"flush\", \"triggering\", or\n\"restart-dependencies\". Defaults to \"replace\", except when\nthe\nisolate\ncommand is used which implies the \"isolate\" job\nmode.\nIf \"fail\" is specified and a requested operation on weak\ndependencies conflicts with a pending job (more specifically: causes an\nalready pending start job to be reversed into a stop job or vice versa),\ncause the operation to fail.\nIf \"lenient\" is specified and a requested operation\nconflicts with any active/activating unit, cause the operation to fail.\nIf \"replace\" (the default) is specified, any conflicting\npending job will be replaced, as necessary.\nIf \"replace-irreversibly\" is specified, operate like\n\"replace\", but also mark the new jobs as irreversible. This\nprevents future conflicting transactions from replacing these jobs (or even\nbeing enqueued while the irreversible jobs are still pending). Irreversible\njobs can still be cancelled using the\ncancel\ncommand. This job mode\nshould be used on any transaction which pulls in shutdown.target.\n\"isolate\" is only valid for start operations and causes\nall other units to be stopped when the specified unit is started. This mode\nis always used when the\nisolate\ncommand is used.\n\"flush\" will cause all queued jobs to be canceled when\nthe new job is enqueued.\nIf \"ignore-dependencies\" is specified, then all unit\ndependencies are ignored for this new job and the operation is executed\nimmediately. If passed, no required units of the unit passed will be pulled\nin, and no ordering dependencies will be honored. This is mostly a debugging\nand rescue tool for the administrator and should not be used by\napplications.\n\"ignore-requirements\" is similar to\n\"ignore-dependencies\", but only causes the requirement\ndependencies to be ignored, the ordering dependencies will still be\nhonored.\n\"triggering\" may only be used with\nsystemctl\nstop\n. In this mode, the specified unit and any active units that trigger\nit are stopped. See the discussion of\nTriggers=\nin\nsystemd.unit(5)\nfor more information about triggering units.\n\"restart-dependencies\" may only be used with\nsystemctl start\n. In this mode, dependencies of the specified unit\nwill receive restart propagation, as if a restart job had been enqueued for\nthe unit.\nAdded in version 209.\n-T\n,\n--show-transaction\nWhen enqueuing a unit job (for example as effect of a\nsystemctl start\ninvocation or similar), show brief information about\nall jobs enqueued, covering both the requested job and any added because of\nunit dependencies. Note that the output will only include jobs immediately\npart of the transaction requested. It is possible that service start-up\nprogram code run as effect of the enqueued jobs might request further jobs to\nbe pulled in. This means that completion of the listed jobs might ultimately\nentail more jobs than the listed ones.\nAdded in version 242.\n--fail\nShorthand for\n--job-mode=\nfail.\nWhen used with the\nkill\ncommand, if no units were killed,\nthe operation results in an error.\nAdded in version 227.\n--check-inhibitors=\nWhen system shutdown or sleep state is requested, this\noption controls checking of inhibitor locks. It takes one of \"auto\",\n\"yes\", and \"no\". Defaults to \"auto\", which means\nlogind will perform the check and respect active inhibitor locks, but\nsystemctl\nwill only do a client-side check for interactive invocations\n(i.e. from a TTY), so that a more friendly and informative error can be\nreturned to users. \"no\" disables the checks both in\nsystemctl\nand\nsystemd-logind(8)\n.\nApplications can establish inhibitor locks to prevent certain\nimportant operations (such as CD burning) from being interrupted by system\nshutdown or sleep. Any user may take these locks and privileged users may\noverride these locks. If any locks are taken, shutdown and sleep state\nrequests will normally fail (unless explicitly overridden with\n\"no\").\nOption\n--force\nprovides another way to override\ninhibitors.\nAdded in version 248.\n-i\nShortcut for\n--check-inhibitors=no\n.\nAdded in version 198.\n--dry-run\nJust print what would be done. Currently supported by\nverbs\nhalt\n,\npoweroff\n,\nreboot\n,\nkexec\n,\nsuspend\n,\nhibernate\n,\nhybrid-sleep\n,\nsuspend-then-hibernate\n,\ndefault\n,\nrescue\n,\nemergency\n, and\nexit\n.\nAdded in version 236.\n-q\n,\n--quiet\nSuppress printing of the results of various commands and\nalso the hints about truncated log lines. This does not suppress output of\ncommands for which the printed output is the only result (like\nshow\n).\nErrors are always printed.\n-v\n,\n--verbose\nDisplay unit log output while executing unit operations.\nAdded in version 258.\n--no-warn\nDo not generate the warnings shown by default in the\nfollowing cases:\n•when\nsystemctl\nis invoked without procfs\nmounted on /proc/,\n•when using\nenable\nor\ndisable\non\nunits without install information (i.e. do not have or have an empty [Install]\nsection),\n•when using\ndisable\ncombined with\n--user\non units that are enabled in global scope,\n•when a\nstop\n-ped,\ndisable\n-d, or\nmask\n-ed unit still has active triggering units,\n•when a unit file is changed and requires\ndaemon-reload\n.\nAdded in version 253.\n--no-block\nDo not synchronously wait for the requested operation to\nfinish. If this is not specified, the job will be verified, enqueued and\nsystemctl\nwill wait until the unit's start-up is completed. By passing\nthis argument, it is only verified and enqueued. This option may not be\ncombined with\n--wait\n.\n--wait\nWhen used with\nstart\nor\nrestart\n,\nsynchronously wait for started units to terminate again. This option may not\nbe combined with\n--no-block\n. Note that this will wait forever if any\ngiven unit never terminates (by itself or by getting stopped explicitly);\nparticularly services which use \"RemainAfterExit=yes\".\nWhen used with\nis-system-running\n, wait until the boot\nprocess is completed before returning.\nWhen used with\nkill\n, wait until the signalled units\nterminate. Note that this will wait forever if any given unit never\nterminates.\nAdded in version 232.\n--user\nTalk to the service manager of the calling user, rather\nthan the service manager of the system.\n--system\nTalk to the service manager of the system. This is the\nimplied default.\n--failed\nList units in failed state. This is equivalent to\n--state=failed\n.\nAdded in version 233.\n--no-wall\nDo not send wall message before halt, power-off and\nreboot.\n--global\nWhen used with\nenable\nand\ndisable\n, operate\non the global user configuration directory, thus enabling or disabling a unit\nfile globally for all future logins of all users.\n--no-reload\nWhen used with\nenable\n,\ndisable\n,\npreset\n,\nmask\n, or\nunmask\n, do not implicitly reload daemon\nconfiguration after executing the changes.\n--kill-whom=\nWhen used with\nkill\n, choose which processes to\nsend a UNIX process signal to. Must be one of\nmain\n,\ncontrol\n,\ncgroup\nor\nall\nto select whether to kill only the main process,\nthe control process, all processes in the unit's control group or all\nprocesses of the unit. The main process of the unit is the one that defines\nthe life-time of it. A control process of a unit is one that is invoked by the\nmanager to induce state changes of it. For example, all processes started due\nto the\nExecStartPre=\n,\nExecStop=\nor\nExecReload=\nsettings\nof service units are control processes. Note that there is only one control\nprocess per unit at a time, as only one state change is executed at a time.\nFor services of type\nType=forking\n, the initial process started by the\nmanager for\nExecStart=\nis a control process, while the process\nultimately forked off by that one is then considered the main process of the\nunit (if it can be determined). This is different for service units of other\ntypes, where the process forked off by the manager for\nExecStart=\nis\nalways the main process itself. A service unit consists of zero or one main\nprocess, zero or one control process plus any number of additional processes\npart of the unit's control group. Not all unit types manage processes of these\ntypes however. For example, for mount units, control processes are defined\n(which are the invocations of /usr/bin/mount and /usr/bin/umount), but no main\nprocess is defined. If omitted, defaults to\nall\n, except if\n--kill-subgroup=\nis used in which case defaults to\ncgroup\n.\nAdded in version 252.\n--kill-value=\nINT\nIf used with the\nkill\ncommand, enqueues a signal\nalong with the specified integer value parameter to the specified process(es).\nThis operation is only available for POSIX Realtime Signals (i.e.\n--signal=SIGRTMIN+...\nor\n--signal=SIGRTMAX-...\n), and ensures the\nsignals are generated via the\nsigqueue(3)\nsystem call, rather than\nkill\n(3). The specified value must be a 32-bit signed integer, and may\nbe specified either in decimal, in hexadecimal (if prefixed with\n\"0x\"), octal (if prefixed with \"0o\") or binary (if\nprefixed with \"0b\")\nIf this option is used the signal will only be enqueued on the\ncontrol or main process of the unit, never on other processes belonging to\nthe unit, i.e.\n--kill-whom=all\nwill only affect main and control\nprocesses but no other processes.\nAdded in version 254.\n--kill-subgroup=\nPATH\nTakes a control group sub-path to send signals to, for\nuse with the\nkill\ncommand. By default the chosen signal is delivered to\nall processes of the unit's cgroups (as well as the main/control processes (if\noutside) – subject to\n--kill-whom=\n). But with this option a\nsubgroup can be selelected instead. This functionality is only available if\n\"cgroup\" or \"cgroup-fail\" are used with\n--kill-whom=\n, and in fact the former is the default if\n--kill-subgroup=\nis used.\nThe specified path may, but doesn't have to be prefixed with a\nslash, and its absence or presence has no effect, the path is either way\ntaken relative to the unit's main control group path.\nThis functionality is only available on units where control group\ndelegation is enabled (see\nDelegate=\nin\nsystemd.resource-control(5)\n).\nAdded in version 258.\n-s\n,\n--signal=\nWhen used with\nkill\n, choose which signal to send\nto selected processes. Must be one of the well-known signal specifiers such as\nSIGTERM\n,\nSIGINT\nor\nSIGSTOP\n. If omitted, defaults to\nSIGTERM\n.\nThe special value \"help\" will list the known values and\nthe program will exit immediately, and the special value \"list\"\nwill list known values along with the numerical signal numbers and the\nprogram will exit immediately.\n--what=\nSelect what type of per-unit resources to remove when the\nclean\ncommand is invoked, see above. Takes one of\nconfiguration\n,\nstate\n,\ncache\n,\nlogs\n,\nruntime\n,\nfdstore\nto\nselect the type of resource. This option may be specified more than once, in\nwhich case all specified resource types are removed. Also accepts the special\nvalue\nall\nas a shortcut for specifying all six resource types. If this\noption is not specified defaults to the combination of\ncache\n,\nruntime\nand\nfdstore\n, i.e. the three kinds of resources that are\ngenerally considered to be redundant and can be reconstructed on next\ninvocation. Note that the explicit removal of the\nfdstore\nresource type\nis only useful if the\nFileDescriptorStorePreserve=\noption is enabled,\nsince the file descriptor store is otherwise cleaned automatically when the\nunit is stopped.\nAdded in version 243.\n-f\n,\n--force\nWhen used with\nenable\n, overwrite any existing\nconflicting symlinks.\nWhen used with\nedit\n, create all of the specified units\nwhich do not already exist.\nWhen used with\nsuspend\n,\nhibernate\n,\nhybrid-sleep\n, or\nsuspend-then-hibernate\n, the error returned by\nsystemd-logind\nwill be ignored, and the operation will be performed\ndirectly through starting the corresponding units.\nWhen used with\nhalt\n,\npoweroff\n,\nreboot\n, or\nkexec\n, execute the selected operation without shutting down all\nunits. However, all processes will be killed forcibly and all file systems\nare unmounted or remounted read-only. This is hence a drastic but relatively\nsafe option to request an immediate reboot. If\n--force\nis specified\ntwice for these operations (with the exception of\nkexec\n), they will\nbe executed immediately, without terminating any processes or unmounting any\nfile systems.\nWarning\nSpecifying\n--force\ntwice with any of these operations might result in\ndata loss. Note that when\n--force\nis specified twice the selected\noperation is executed by\nsystemctl\nitself, and the system manager is\nnot contacted. This means the command should succeed even when the system\nmanager has crashed.\n--message=\nWhen used with\nhalt\n,\npoweroff\nor\nreboot\n, set a short message explaining the reason for the operation.\nThe message will be logged together with the default shutdown message.\nAdded in version 225.\n--now\nWhen used with\nenable\n,\ndisable\n,\nmask\n, or\nreenable\n, also start/stop/try-restart the units after\nthe specified unit file operations succeed.\nAdded in version 220.\n--root=\nWhen used with\nenable\n/\ndisable\n/\nis-enabled\n(and related commands), use the\nspecified root path when looking for unit files. If this option is present,\nsystemctl\nwill operate on the file system directly, instead of\ncommunicating with the\nsystemd\ndaemon to carry out changes.\n--image=\nimage\nTakes a path to a disk image file or block device node.\nIf specified, all operations are applied to file system in the indicated disk\nimage. This option is similar to\n--root=\n, but operates on file systems\nstored in disk images or block devices. The disk image should either contain\njust a file system or a set of file systems within a GPT partition table,\nfollowing the\nUAPI.2 Discoverable Partitions Specification\n[2]. For\nfurther information on supported disk images, see\nsystemd-nspawn(1)\n's\nswitch of the same name.\nAdded in version 252.\n--image-policy=\npolicy\nTakes an image policy string as argument, as per\nsystemd.image-policy(7)\n. The policy is enforced when operating on the\ndisk image specified via\n--image=\n, see above. If not specified,\ndefaults to the \"*\" policy, i.e. all recognized file systems in the\nimage are used.\n--runtime\nWhen used with\nenable\n,\ndisable\n,\nedit\n, (and related commands), make changes only temporarily, so that\nthey are lost on the next reboot. This will have the effect that changes are\nnot made in subdirectories of /etc/ but in /run/, with identical immediate\neffects, however, since the latter is lost on reboot, the changes are lost\ntoo.\nSimilarly, when used with\nset-property\n, make changes only\ntemporarily, so that they are lost on the next reboot.\n--preset-mode=\nTakes one of \"full\" (the default),\n\"enable-only\", \"disable-only\". When used with the\npreset\nor\npreset-all\ncommands, controls whether units shall be\ndisabled and enabled according to the preset rules, or only enabled, or only\ndisabled.\nAdded in version 215.\n-n\n,\n--lines=\nWhen used with\nstatus\n, controls the number of\njournal lines to show, counting from the most recent ones. Takes a positive\ninteger argument, or 0 to disable journal output. Defaults to 10.\n-o\n,\n--output=\nWhen used with\nstatus\n, controls the formatting of\nthe journal entries that are shown. For the available choices, see\njournalctl(1)\n. Defaults to \"short\".\n--firmware-setup\nWhen used with the\nreboot\n,\npoweroff\n, or\nhalt\ncommand, indicate to the system's firmware to reboot into the\nfirmware setup interface for the next boot. Note that this functionality is\nnot available on all systems.\nAdded in version 220.\n--boot-loader-menu=\ntimeout\nWhen used with the\nreboot\n,\npoweroff\n, or\nhalt\ncommand, indicate to the system's boot loader to show the boot\nloader menu on the following boot. Takes a time value as parameter —\nindicating the menu timeout. Pass zero in order to disable the menu timeout.\nNote that not all boot loaders support this functionality.\nAdded in version 242.\n--boot-loader-entry=\nID\nWhen used with the\nreboot\n,\npoweroff\n, or\nhalt\ncommand, indicate to the system's boot loader to boot into a\nspecific boot loader entry on the following boot. Takes a boot loader entry\nidentifier as argument, or \"help\" in order to list available\nentries. Note that not all boot loaders support this functionality.\nAdded in version 242.\n--reboot-argument=\nThis switch is used with\nreboot\n. The value is\narchitecture and firmware specific. As an example, \"recovery\" might\nbe used to trigger system recovery, and \"fota\" might be used to\ntrigger a “firmware over the air” update.\nAdded in version 246.\n--plain\nWhen used with\nlist-dependencies\n,\nlist-units\nor\nlist-machines\n, the output is printed as a list\ninstead of a tree, and the bullet circles are omitted.\nAdded in version 203.\n--timestamp=\nChange the format of printed timestamps. The following\nvalues may be used:\npretty\n(this is the default)\n\"Day YYYY-MM-DD HH:MM:SS TZ\"\nAdded in version 248.\nunix\n\"@seconds-since-the-epoch\"\nAdded in version 251.\nus\n,\nμs\n\"Day YYYY-MM-DD HH:MM:SS.UUUUUU TZ\"\nAdded in version 248.\nutc\n\"Day YYYY-MM-DD HH:MM:SS UTC\"\nAdded in version 248.\nus+utc\n,\nμs+utc\n\"Day YYYY-MM-DD HH:MM:SS.UUUUUU UTC\"\nAdded in version 248.\nAdded in version 247.\n--mkdir\nWhen used with\nbind\n, creates the destination file\nor directory before applying the bind mount. Note that even though the name of\nthis option suggests that it is suitable only for directories, this option\nalso creates the destination file node to mount over if the object to mount is\nnot a directory, but a regular file, device node, socket or FIFO.\nAdded in version 248.\n--marked\nOnly allowed with\nreload-or-restart\n. Enqueues\nrestart jobs for all units that have the \"needs-restart\" mark, and\nreload jobs for units that have the \"needs-reload\" mark. When a unit\nmarked for reload does not support reload, restart will be queued. Those\nproperties can be set using\nset-property Markers=...\n.\nUnless\n--no-block\nis used,\nsystemctl\nwill wait for\nthe queued jobs to finish.\nAdded in version 248.\n--read-only\nWhen used with\nbind\n, creates a read-only bind\nmount.\nAdded in version 248.\n--drop-in=\nNAME\nWhen used with\nedit\n, use\nNAME\nas the\ndrop-in file name instead of override.conf.\nAdded in version 253.\n--when=\nWhen used with\nhalt\n,\npoweroff\n,\nreboot\nor\nkexec\n, schedule the action to be performed at the\ngiven timestamp, which should adhere to the syntax documented in\nsystemd.time(7)\nsection \"PARSING TIMESTAMPS\". Specially, if\n\"show\" is given, the currently scheduled action will be shown, which\ncan be canceled by passing an empty string or \"cancel\".\n\"auto\" will schedule the action according to maintenance window or\none minute in the future.\nAdded in version 254.\n--stdin\nWhen used with\nedit\n, the contents of the file will\nbe read from standard input and the editor will not be launched. In this mode,\nthe old contents of the file are completely replaced. This is useful to\n\"edit\" unit files from scripts:\n$ systemctl edit --drop-in=limits.conf --stdin some-service.service <<EOF\n[Unit]\nAllowedCPUs=7,11\nEOF\nMultiple drop-ins may be \"edited\" in this mode; the same\ncontents will be written to all of them.\nAdded in version 256.\n-H\n,\n--host=\nExecute the operation remotely. Specify a hostname, or a\nusername and hostname separated by \"@\", to connect to. The hostname\nmay optionally be suffixed by a port ssh is listening on, separated by\n\":\", and then a container name, separated by \"/\", which\nconnects directly to a specific container on the specified host. This will use\nSSH to talk to the remote machine manager instance. Container names may be\nenumerated with\nmachinectl -H\nHOST\n. Put IPv6 addresses in\nbrackets.\n-M\n,\n--machine=\nExecute operation on a local container. Specify a\ncontainer name to connect to, optionally prefixed by a user name to connect as\nand a separating \"@\" character. If the special string\n\".host\" is used in place of the container name, a connection to the\nlocal system is made (which is useful to connect to a specific user's user\nbus: \"--user --machine=lennart@.host\"). If the \"@\" syntax\nis not used, the connection is made as root user. If the \"@\" syntax\nis used either the left hand side or the right hand side may be omitted (but\nnot both) in which case the local user name and \".host\" are\nimplied.\n-C\n,\n--capsule=\nExecute operation on a capsule. Specify a capsule name to\nconnect to. See\ncapsule@.service\n(5) for details about capsules.\nAdded in version 256.\n--no-ask-password\nDo not query the user for authentication for privileged\noperations.\n--no-pager\nDo not pipe output into a pager.\n--legend=\nBOOL\nEnable or disable printing of the legend, i.e. column\nheaders and the footer with hints. The legend is printed by default, unless\ndisabled with\n--quiet\nor similar.\n-h\n,\n--help\nPrint a short help text and exit.\n--version\nPrint a short version string and exit.\nEXIT STATUS\n¶\nOn success, 0 is returned, a non-zero failure code otherwise.\nsystemctl\nuses the return codes defined by LSB, as defined\nin\nLSB 3.0.0\n[3].\nTable 5. LSB return codes\nValue\nDescription in LSB\nUse in systemd\n0\n\"program is running or service is OK\"\nunit is active\n1\n\"program is dead and /var/run pid file exists\"\nunit\nnot\nfailed (used by\nis-failed\n)\n2\n\"program is dead and /var/lock lock file exists\"\nunused\n3\n\"program is not running\"\nunit is not active\n4\n\"program or service status is unknown\"\nno such unit\nThe mapping of LSB service states to systemd unit states is\nimperfect, so it is better to not rely on those return values but to look\nfor specific unit states and substates instead.\nENVIRONMENT\n¶\n$SYSTEMD_EDITOR\nEditor to use when editing units; overrides\n$EDITOR\nand\n$VISUAL\n. If neither\n$SYSTEMD_EDITOR\nnor\n$EDITOR\nnor\n$VISUAL\nare present or if it is set to an empty\nstring or if their execution failed, systemctl will try to execute well known\neditors in this order:\neditor(1)\n,\nnano(1)\n,\nvim(1)\n,\nvi(1)\n.\nAdded in version 218.\n$SYSTEMD_LOG_LEVEL\nThe maximum log level of emitted messages (messages with\na higher log level, i.e. less important ones, will be suppressed). Takes a\ncomma-separated list of values. A value may be either one of (in order of\ndecreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the\nrange 0...7. See\nsyslog(3)\nfor more information. Each value may\noptionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a colon to set the maximum log level for that\nspecific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when logging to the console which\nshould be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nA boolean. If true, messages written to the tty will be\ncolored according to priority.\nThis setting is only useful when messages are written directly to\nthe terminal, because\njournalctl(1)\nand other tools that display logs\nwill color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nA boolean. If true, console log messages will be prefixed\nwith a timestamp.\nThis setting is only useful when messages are written directly to\nthe terminal or a file, because\njournalctl(1)\nand other tools that\ndisplay logs will attach timestamps based on the entry metadata on their\nown.\n$SYSTEMD_LOG_LOCATION\nA boolean. If true, messages will be prefixed with a\nfilename and line number in the source code where the message originates.\nNote that the log location is often attached as metadata to\njournal entries anyway. Including it directly in the message text can\nnevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to the attached tty\nbut with prefixes encoding the log level and \"facility\", see\nsyslog(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to the journal),\njournal-or-kmsg\n(log to the\njournal if available, and to kmsg otherwise),\nauto\n(determine the\nappropriate log target automatically, the default),\nnull\n(disable log\noutput).\n$SYSTEMD_PAGER\n,\n$PAGER\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used. If\nneither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless(1)\nand\nmore(1)\n, until one is found. If no pager implementation is discovered,\nno pager is invoked. Setting those environment variables to an empty string or\nthe value \"cat\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the\npager (with \"cat\" or \"\"), and are otherwise ignored.\n$SYSTEMD_LESS\nOverride the options passed to\nless\n(by default\n\"FRSXMK\").\nUsers might want to change two options in particular:\nK\nThis option instructs the pager to exit immediately when\nCtrl+C is pressed. To allow\nless\nto handle Ctrl+C itself to switch back\nto the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include\n\"K\", and the pager that is invoked is\nless\n, Ctrl+C will be\nignored by the executable, and needs to be handled by the pager.\nX\nThis option instructs the pager to not send termcap\ninitialization and deinitialization strings to the terminal. It is set by\ndefault to allow command output to remain visible in the terminal even after\nthe pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable\nhas no effect for\nless\ninvocations by systemd tools.\nSee\nless(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nOverride the charset passed to\nless\n(by default\n\"utf-8\", if the invoking terminal is determined to be UTF-8\ncompatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment\nvariable has no effect for\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nCommon pager commands like\nless(1)\n, in addition to\n\"paging\", i.e. scrolling through the output, support opening of or\nwriting to other files and running arbitrary shell commands. When commands are\ninvoked with elevated privileges, for example under\nsudo(8)\nor\npkexec(1)\n, the pager becomes a security boundary. Care must be taken\nthat only programs with strictly limited functionality are used as pagers, and\nunintended interactive features like opening or creation of new files or\nstarting of subprocesses are not allowed. \"Secure mode\" for the\npager may be enabled as described below,\nif the pager supports that\n(most pagers are not written in a way that takes this into consideration). It\nis recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the\n\"secure mode\" of the pager is enabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which instructs the\npager to disable commands that open or create new files or start new\nsubprocesses. Currently only\nless(1)\nis known to understand this\nvariable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited\nenvironment may allow the user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt\nto automatically figure out if \"secure mode\" should be enabled and\nwhether the pager supports it. \"Secure mode\" is enabled if the\neffective UID is not the same as the owner of the login session, see\ngeteuid(2)\nand\nsd_pid_get_owner_uid(3)\n, or when running under\nsudo(8)\nor similar tools (\n$SUDO_UID\nis set [4]). In those\ncases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not\nknown to implement \"secure mode\" will not be used at all. Note\nthat this autodetection only covers the most common mechanisms to elevate\nprivileges and is intended as convenience. It is recommended to explicitly\nset\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables\nare to be honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set too.\n$SYSTEMD_COLORS\nTakes a boolean argument. When true,\nsystemd\nand\nrelated utilities will use colors in their output, otherwise the output will\nbe monochrome. Additionally, the variable can take one of the following\nspecial values: \"16\", \"256\" to restrict the use of colors\nto the base 16 or 256 ANSI colors, respectively. This can be specified to\noverride the automatic decision based on\n$TERM\nand what the console is\nconnected to.\n$SYSTEMD_URLIFY\nThe value must be a boolean. Controls whether clickable\nlinks should be generated in the output for terminal emulators supporting\nthis. This can be specified to override the decision that\nsystemd\nmakes\nbased on\n$TERM\nand other conditions.\nSEE ALSO\n¶\nsystemd(1)\n,\njournalctl(1)\n,\nloginctl(1)\n,\nmachinectl(1)\n,\nsystemd.unit(5)\n,\nsystemd.resource-control(5)\n,\nsystemd.special(7)\n,\nwall(1)\n,\nsystemd.preset(5)\n,\nsystemd.generator(7)\n,\nglob(7)\nNOTES\n¶\n1.\nUAPI.1 Boot Loader Specification\nhttps://uapi-group.org/specifications/specs/boot_loader_specification\n2.\nUAPI.2 Discoverable Partitions Specification\nhttps://uapi-group.org/specifications/specs/discoverable_partitions_specification\n3.\nLSB 3.0.0\nhttp://refspecs.linuxbase.org/LSB_3.0.0/LSB-PDA/LSB-PDA/iniscrptact.html\n4.\nIt is recommended for other tools to set and check\n$SUDO_UID\nas\nappropriate, treating it is a common interface.\nsystemd 259~rc2\nSource file:\nsystemctl.1.en.gz (from\nsystemd 259~rc2-1\n)\nSource last updated:\n2025-11-26T12:41:32Z\nConverted to HTML:\n2025-11-26T20:47:56Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/systemd/systemctl.1.en.html"}}
{"text": "ls(1) — coreutils — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\ncoreutils\n/ ls(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nAUTHOR\nREPORTING BUGS\nSEE ALSO\nother versions\ntrixie\n9.7-3\ntesting\n9.7-3\nunstable\n9.7-3\nother languages\nčeština\ndansk\nDeutsch\nEnglish\nespañol\nfrançais\nmagyar\n日本語\n한국어\nnorsk bokmål\nNederlands\npolski\nportuguês (pt-BR)\nromână\nрусский\nсрпски\nsvenska\nTürkçe\nукраїнська\nTiếng Việt\n中文 (zh-CN)\n繁體中文 (zh-TW)\nother sections\n1 (\nprogs\n)\n1plan9 (\nprogs\n)\nScroll to navigation\nLS(1)\nUser Commands\nLS(1)\nNAME\n¶\nls - list directory contents\nSYNOPSIS\n¶\nls\n[\nOPTION\n]... [\nFILE\n]...\nDESCRIPTION\n¶\nList information about the FILEs (the current directory by\ndefault). Sort entries alphabetically if none of\n-cftuvSUX\nnor\n--sort\nis specified.\nMandatory arguments to long options are mandatory for short\noptions too.\n-a\n,\n--all\ndo not ignore entries starting with .\n-A\n,\n--almost-all\ndo not list implied . and ..\n--author\nwith\n-l\n, print the author of each file\n-b\n,\n--escape\nprint C-style escapes for nongraphic characters\n--block-size\n=\nSIZE\nwith\n-l\n, scale sizes by SIZE when printing them; e.g.,\n'--block-size=M'; see SIZE format below\n-B\n,\n--ignore-backups\ndo not list implied entries ending with ~\n-c\nwith\n-lt\n: sort by, and show, ctime (time of last change of file\nstatus information); with\n-l\n: show ctime and sort by name;\notherwise: sort by ctime, newest first\n-C\nlist entries by columns\n--color\n[=\nWHEN\n]\ncolor the output WHEN; more info below\n-d\n,\n--directory\nlist directories themselves, not their contents\n-D\n,\n--dired\ngenerate output designed for Emacs' dired mode\n-f\nsame as\n-a\n-U\n-F\n,\n--classify\n[=\nWHEN\n]\nappend indicator (one of */=>@|) to entries WHEN\n--file-type\nlikewise, except do not append '*'\n--format\n=\nWORD\nacross,horizontal (\n-x\n), commas (\n-m\n), long (\n-l\n),\nsingle-column (\n-1\n), verbose (\n-l\n), vertical (\n-C\n)\n--full-time\nlike\n-l\n--time-style\n=\nfull-iso\n-g\nlike\n-l\n, but do not list owner\n--group-directories-first\ngroup directories before files\n-G\n,\n--no-group\nin a long listing, don't print group names\n-h\n,\n--human-readable\nwith\n-l\nand\n-s\n, print sizes like 1K 234M 2G etc.\n--si\nlikewise, but use powers of 1000 not 1024\n-H\n,\n--dereference-command-line\nfollow symbolic links listed on the command line\n--dereference-command-line-symlink-to-dir\nfollow each command line symbolic link that points to a directory\n--hide\n=\nPATTERN\ndo not list implied entries matching shell PATTERN (overridden by\n-a\nor\n-A\n)\n--hyperlink\n[=\nWHEN\n]\nhyperlink file names WHEN\n--indicator-style\n=\nWORD\nappend indicator with style WORD to entry names: none (default), slash\n(\n-p\n), file-type (\n--file-type\n), classify (\n-F\n)\n-i\n,\n--inode\nprint the index number of each file\n-I\n,\n--ignore\n=\nPATTERN\ndo not list implied entries matching shell PATTERN\n-k\n,\n--kibibytes\ndefault to 1024-byte blocks for file system usage; used only with\n-s\nand per directory totals\n-l\nuse a long listing format\n-L\n,\n--dereference\nwhen showing file information for a symbolic link, show information for\nthe file the link references rather than for the link itself\n-m\nfill width with a comma separated list of entries\n-n\n,\n--numeric-uid-gid\nlike\n-l\n, but list numeric user and group IDs\n-N\n,\n--literal\nprint entry names without quoting\n-o\nlike\n-l\n, but do not list group information\n-p\n,\n--indicator-style\n=\nslash\nappend / indicator to directories\n-q\n,\n--hide-control-chars\nprint ? instead of nongraphic characters\n--show-control-chars\nshow nongraphic characters as-is (the default, unless program is 'ls' and\noutput is a terminal)\n-Q\n,\n--quote-name\nenclose entry names in double quotes\n--quoting-style\n=\nWORD\nuse quoting style WORD for entry names: literal, locale, shell,\nshell-always, shell-escape, shell-escape-always, c, escape (overrides\nQUOTING_STYLE environment variable)\n-r\n,\n--reverse\nreverse order while sorting\n-R\n,\n--recursive\nlist subdirectories recursively\n-s\n,\n--size\nprint the allocated size of each file, in blocks\n-S\nsort by file size, largest first\n--sort\n=\nWORD\nchange default 'name' sort to WORD: none (\n-U\n), size (\n-S\n),\ntime (\n-t\n), version (\n-v\n), extension (\n-X\n), name,\nwidth\n--time\n=\nWORD\nselect which timestamp used to display or sort; access time (\n-u\n):\natime, access, use; metadata change time (\n-c\n): ctime, status;\nmodified time (default): mtime, modification; birth time: birth,\ncreation;\nwith\n-l\n, WORD determines which time to show; with\n--sort\n=\ntime\n, sort by WORD (newest first)\n--time-style\n=\nTIME_STYLE\ntime/date format with\n-l\n; see TIME_STYLE below\n-t\nsort by time, newest first; see\n--time\n-T\n,\n--tabsize\n=\nCOLS\nassume tab stops at each COLS instead of 8\n-u\nwith\n-lt\n: sort by, and show, access time; with\n-l\n: show\naccess time and sort by name; otherwise: sort by access time, newest\nfirst\n-U\ndo not sort directory entries\n-v\nnatural sort of (version) numbers within text\n-w\n,\n--width\n=\nCOLS\nset output width to COLS. 0 means no limit\n-x\nlist entries by lines instead of by columns\n-X\nsort alphabetically by entry extension\n-Z\n,\n--context\nprint any security context of each file\n--zero\nend each output line with NUL, not newline\n-1\nlist one file per line\n--help\ndisplay this help and exit\n--version\noutput version information and exit\nThe SIZE argument is an integer and optional unit (example: 10K is\n10*1024). Units are K,M,G,T,P,E,Z,Y,R,Q (powers of 1024) or KB,MB,...\n(powers of 1000). Binary prefixes can be used, too: KiB=K, MiB=M, and so\non.\nThe TIME_STYLE argument can be full-iso, long-iso, iso, locale, or\n+FORMAT. FORMAT is interpreted like in\ndate(1)\n. If FORMAT is\nFORMAT1<newline>FORMAT2, then FORMAT1 applies to non-recent files and\nFORMAT2 to recent files. TIME_STYLE prefixed with 'posix-' takes effect only\noutside the POSIX locale. Also the TIME_STYLE environment variable sets the\ndefault style to use.\nThe WHEN argument defaults to 'always' and can also be 'auto' or\n'never'.\nUsing color to distinguish file types is disabled both by default\nand with\n--color\n=\nnever\n. With\n--color\n=\nauto\n, ls\nemits color codes only when standard output is connected to a terminal. The\nLS_COLORS environment variable can change the settings. Use the\ndircolors(1)\ncommand to set it.\nExit status:\n¶\n0\nif OK,\n1\nif minor problems (e.g., cannot access subdirectory),\n2\nif serious trouble (e.g., cannot access command-line argument).\nAUTHOR\n¶\nWritten by Richard M. Stallman and David MacKenzie.\nREPORTING BUGS\n¶\nGNU coreutils online help:\n<\nhttps://www.gnu.org/software/coreutils/\n>\nReport any translation bugs to\n<\nhttps://translationproject.org/team/\n>\nSEE ALSO\n¶\ndircolors(1)\nFull documentation\n<\nhttps://www.gnu.org/software/coreutils/ls\n>\nor available locally via: info '(coreutils) ls invocation'\nPackaged by Debian (9.7-3)\nCopyright © 2025 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later\n<\nhttps://gnu.org/licenses/gpl.html\n>.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nJune 2025\nGNU coreutils 9.7\nSource file:\nls.1.en.gz (from\ncoreutils 9.7-3\n)\nSource last updated:\n2025-06-04T15:14:05Z\nConverted to HTML:\n2025-10-12T15:06:52Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/coreutils/ls.1.en.html"}}
{"text": "chmod(1) — coreutils — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\ncoreutils\n/ chmod(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nSETUID AND SETGID BITS\nRESTRICTED DELETION FLAG OR STICKY BIT\nOPTIONS\nAUTHOR\nREPORTING BUGS\nSEE ALSO\nother versions\ntrixie\n9.7-3\ntesting\n9.7-3\nunstable\n9.7-3\nother languages\nčeština\ndansk\nDeutsch\nEnglish\nespañol\nfrançais\nIndonesia\n日本語\nNederlands\npolski\nromână\nрусский\nsvenska\nTürkçe\nукраїнська\n中文 (zh-CN)\n繁體中文 (zh-TW)\nother sections\n1 (\nprogs\n)\n2 (\nsyscalls\n)\n2freebsd (\nsyscalls\n)\nScroll to navigation\nCHMOD(1)\nUser Commands\nCHMOD(1)\nNAME\n¶\nchmod - change file mode bits\nSYNOPSIS\n¶\nchmod\n[\nOPTION\n]...\nMODE\n[\n,MODE\n]...\nFILE\n...\nchmod\n[\nOPTION\n]...\nOCTAL-MODE FILE\n...\nchmod\n[\nOPTION\n]...\n--reference=RFILE FILE\n...\nDESCRIPTION\n¶\nThis manual page documents the GNU version of\nchmod\n.\nchmod\nchanges the file mode bits of each given file according to\nmode\n, which can be either a symbolic representation of changes to\nmake, or an octal number representing the bit pattern for the new mode\nbits.\nThe format of a symbolic mode is\n[\nugoa\n...][[\n-+=\n][\nperms\n...]...], where\nperms\nis\neither zero or more letters from the set\nrwxXst\n, or a single letter\nfrom the set\nugo\n. Multiple symbolic modes can be given, separated by\ncommas.\nA combination of the letters\nugoa\ncontrols which users'\naccess to the file will be changed: the user who owns it (\nu\n), other\nusers in the file's group (\ng\n), other users not in the file's group\n(\no\n), or all users (\na\n). If none of these are given, the effect\nis as if (\na\n) were given, but bits that are set in the umask are not\naffected.\nThe operator\n+\ncauses the selected file mode bits to be\nadded to the existing file mode bits of each file;\n-\ncauses them to\nbe removed; and\n=\ncauses them to be added and causes unmentioned bits\nto be removed except that a directory's unmentioned set user and group ID\nbits are not affected.\nThe letters\nrwxXst\nselect file mode bits for the affected\nusers: read (\nr\n), write (\nw\n), execute (or search for\ndirectories) (\nx\n), execute/search only if the file is a directory or\nalready has execute permission for some user (\nX\n), set user or group\nID on execution (\ns\n), restricted deletion flag or sticky bit\n(\nt\n). Instead of one or more of these letters, you can specify exactly\none of the letters\nugo\n: the permissions granted to the user who owns\nthe file (\nu\n), the permissions granted to other users who are members\nof the file's group (\ng\n), and the permissions granted to users that\nare in neither of the two preceding categories (\no\n).\nA numeric mode is from one to four octal digits (0-7), derived by\nadding up the bits with values 4, 2, and 1. Omitted digits are assumed to be\nleading zeros. The first digit selects the set user ID (4) and set group ID\n(2) and restricted deletion or sticky (1) attributes. The second digit\nselects permissions for the user who owns the file: read (4), write (2), and\nexecute (1); the third selects permissions for other users in the file's\ngroup, with the same values; and the fourth for other users not in the\nfile's group, with the same values.\nchmod\ndoesn't change the permissions of symbolic links; the\nchmod\nsystem call cannot change their permissions on most systems,\nand most systems ignore permissions of symbolic links. However, for each\nsymbolic link listed on the command line,\nchmod\nchanges the\npermissions of the pointed-to file. In contrast,\nchmod\nignores\nsymbolic links encountered during recursive directory traversals. Options\nthat modify this behavior are described in the\nOPTIONS\nsection.\nSETUID AND SETGID BITS\n¶\nchmod\nclears the set-group-ID bit of a regular file if the\nfile's group ID does not match the user's effective group ID or one of the\nuser's supplementary group IDs, unless the user has appropriate privileges.\nAdditional restrictions may cause the set-user-ID and set-group-ID bits of\nMODE\nor\nRFILE\nto be ignored. This behavior depends on the\npolicy and functionality of the underlying\nchmod\nsystem call. When in\ndoubt, check the underlying system behavior.\nFor directories\nchmod\npreserves set-user-ID and\nset-group-ID bits unless you explicitly specify otherwise. You can set or\nclear the bits with symbolic modes like\nu+s\nand\ng-s\n. To clear\nthese bits for directories with a numeric mode requires an additional\nleading zero like\n00755\n, leading minus like\n-6000\n, or leading\nequals like\n=755\n.\nRESTRICTED DELETION FLAG OR STICKY BIT\n¶\nThe restricted deletion flag or sticky bit is a single bit, whose\ninterpretation depends on the file type. For directories, it prevents\nunprivileged users from removing or renaming a file in the directory unless\nthey own the file or the directory; this is called the\nrestricted\ndeletion flag\nfor the directory, and is commonly found on world-writable\ndirectories like\n/tmp\n. For regular files on some older systems, the\nbit saves the program's text image on the swap device so it will load more\nquickly when run; this is called the\nsticky bit\n.\nOPTIONS\n¶\nChange the mode of each FILE to MODE. With\n--reference\n,\nchange the mode of each FILE to that of RFILE.\n-c\n,\n--changes\nlike verbose but report only when a change is made\n-f\n,\n--silent\n,\n--quiet\nsuppress most error messages\n-v\n,\n--verbose\noutput a diagnostic for every file processed\n--dereference\naffect the referent of each symbolic link, rather than the symbolic link\nitself\n-h\n,\n--no-dereference\naffect each symbolic link, rather than the referent\n--no-preserve-root\ndo not treat '/' specially (the default)\n--preserve-root\nfail to operate recursively on '/'\n--reference\n=\nRFILE\nuse RFILE's mode instead of specifying MODE values. RFILE is always\ndereferenced if a symbolic link.\n-R\n,\n--recursive\nchange files and directories recursively\nThe following options modify how a hierarchy is traversed when the\n-R\noption is also specified. If more than one is specified, only the\nfinal one takes effect.\n-H\nis the default.\n-H\nif a command line argument is a symbolic link to a directory, traverse\nit\n-L\ntraverse every symbolic link to a directory encountered\n-P\ndo not traverse any symbolic links\n--help\ndisplay this help and exit\n--version\noutput version information and exit\nEach MODE is of the form\n'[ugoa]*([-+=]([rwxXst]*|[ugo]))+|[-+=][0-7]+'.\nAUTHOR\n¶\nWritten by David MacKenzie and Jim Meyering.\nREPORTING BUGS\n¶\nGNU coreutils online help:\n<\nhttps://www.gnu.org/software/coreutils/\n>\nReport any translation bugs to\n<\nhttps://translationproject.org/team/\n>\nSEE ALSO\n¶\nchmod(2)\nFull documentation\n<\nhttps://www.gnu.org/software/coreutils/chmod\n>\nor available locally via: info '(coreutils) chmod invocation'\nPackaged by Debian (9.7-3)\nCopyright © 2025 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later\n<\nhttps://gnu.org/licenses/gpl.html\n>.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nJune 2025\nGNU coreutils 9.7\nSource file:\nchmod.1.en.gz (from\ncoreutils 9.7-3\n)\nSource last updated:\n2025-06-04T15:14:05Z\nConverted to HTML:\n2025-11-03T07:14:13Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/coreutils/chmod.1.en.html"}}
{"text": "chown(1) — coreutils — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\ncoreutils\n/ chown(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nOPTIONS\nEXAMPLES\nAUTHOR\nREPORTING BUGS\nSEE ALSO\nother versions\ntrixie\n9.7-3\ntesting\n9.7-3\nunstable\n9.7-3\nother languages\nčeština\ndansk\nDeutsch\nEnglish\nespañol\nsuomi\nfrançais\nmagyar\nIndonesia\n日本語\n한국어\nnorsk bokmål\nNederlands\npolski\nportuguês (pt-BR)\nromână\nрусский\nсрпски\nsvenska\nTürkçe\nукраїнська\nTiếng Việt\n中文 (zh-CN)\n繁體中文 (zh-TW)\nother sections\n1 (\nprogs\n)\n2freebsd (\nsyscalls\n)\n2 (\nsyscalls\n)\nScroll to navigation\nCHOWN(1)\nUser Commands\nCHOWN(1)\nNAME\n¶\nchown - change file owner and group\nSYNOPSIS\n¶\nchown\n[\nOPTION\n]...\n[\nOWNER\n][\n:\n[\nGROUP\n]]\nFILE\n...\nchown\n[\nOPTION\n]...\n--reference=RFILE FILE\n...\nDESCRIPTION\n¶\nThis manual page documents the GNU version of\nchown\n.\nchown\nchanges the user and/or group ownership of each given file. If\nonly an owner (a user name or numeric user ID) is given, that user is made\nthe owner of each given file, and the files' group is not changed. If the\nowner is followed by a colon and a group name (or numeric group ID), with no\nspaces between them, the group ownership of the files is changed as well. If\na colon but no group name follows the user name, that user is made the owner\nof the files and the group of the files is changed to that user's login\ngroup. If the colon and group are given, but the owner is omitted, only the\ngroup of the files is changed; in this case,\nchown\nperforms the same\nfunction as\nchgrp\n. If only a colon is given, or if the entire operand\nis empty, neither the owner nor the group is changed.\nOPTIONS\n¶\nChange the owner and/or group of each FILE to OWNER and/or GROUP.\nWith\n--reference\n, change the owner and group of each FILE to those of\nRFILE.\n-c\n,\n--changes\nlike verbose but report only when a change is made\n-f\n,\n--silent\n,\n--quiet\nsuppress most error messages\n-v\n,\n--verbose\noutput a diagnostic for every file processed\n--dereference\naffect the referent of each symbolic link (this is the default), rather\nthan the symbolic link itself\n-h\n,\n--no-dereference\naffect symbolic links instead of any referenced file (useful only on\nsystems that can change the ownership of a symlink)\n--from\n=\nCURRENT_OWNER\n:CURRENT_GROUP\nchange the ownership of each file only if its current owner and/or group\nmatch those specified here. Either may be omitted, in which case a match\nis not required for the omitted attribute\n--no-preserve-root\ndo not treat '/' specially (the default)\n--preserve-root\nfail to operate recursively on '/'\n--reference\n=\nRFILE\nuse RFILE's ownership rather than specifying values. RFILE is always\ndereferenced if a symbolic link.\n-R\n,\n--recursive\noperate on files and directories recursively\nThe following options modify how a hierarchy is traversed when the\n-R\noption is also specified. If more than one is specified, only the\nfinal one takes effect.\n-P\nis the default.\n-H\nif a command line argument is a symbolic link to a directory, traverse\nit\n-L\ntraverse every symbolic link to a directory encountered\n-P\ndo not traverse any symbolic links\n--help\ndisplay this help and exit\n--version\noutput version information and exit\nOwner is unchanged if missing. Group is unchanged if missing, but\nchanged to login group if implied by a ':' following a symbolic OWNER. OWNER\nand GROUP may be numeric as well as symbolic.\nEXAMPLES\n¶\nchown root /u\nChange the owner of /u to \"root\".\nchown root:staff\n/u\nLikewise, but also change its group to \"staff\".\nchown -hR root\n/u\nChange the owner of /u and subfiles to \"root\".\nAUTHOR\n¶\nWritten by David MacKenzie and Jim Meyering.\nREPORTING BUGS\n¶\nGNU coreutils online help:\n<\nhttps://www.gnu.org/software/coreutils/\n>\nReport any translation bugs to\n<\nhttps://translationproject.org/team/\n>\nSEE ALSO\n¶\nchown(2)\nFull documentation\n<\nhttps://www.gnu.org/software/coreutils/chown\n>\nor available locally via: info '(coreutils) chown invocation'\nPackaged by Debian (9.7-3)\nCopyright © 2025 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later\n<\nhttps://gnu.org/licenses/gpl.html\n>.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nJune 2025\nGNU coreutils 9.7\nSource file:\nchown.1.en.gz (from\ncoreutils 9.7-3\n)\nSource last updated:\n2025-06-04T15:14:05Z\nConverted to HTML:\n2025-11-03T07:14:13Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/coreutils/chown.1.en.html"}}
{"text": "ssh(1) — openssh-client — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\nopenssh-client\n/ ssh(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nAUTHENTICATION\nESCAPE CHARACTERS\nTCP FORWARDING\nX11 FORWARDING\nVERIFYING HOST KEYS\nSSH-BASED VIRTUAL PRIVATE NETWORKS\nENVIRONMENT\nFILES\nEXIT STATUS\nSEE ALSO\nSTANDARDS\nAUTHORS\nother versions\ntrixie\n1:10.0p1-7\ntrixie-backports\n1:10.2p1-2~bpo13+1\ntesting\n1:10.2p1-2\nunstable\n1:10.2p1-2\nother languages\nDeutsch\nEnglish\nfrançais\npolski\nromână\nTürkçe\nукраїнська\n中文 (zh-CN)\n繁體中文 (zh-TW)\nScroll to navigation\nSSH(1)\nGeneral Commands Manual\nSSH(1)\nNAME\n¶\nssh\n—\nOpenSSH\nremote login client\nSYNOPSIS\n¶\nssh\n[\n-46AaCfGgKkMNnqsTtVvXxYy\n]\n[\n-B\nbind_interface\n]\n[\n-b\nbind_address\n]\n[\n-c\ncipher_spec\n]\n[\n-D\n[\nbind_address\n:]\nport\n]\n[\n-E\nlog_file\n]\n[\n-e\nescape_char\n]\n[\n-F\nconfigfile\n]\n[\n-I\npkcs11\n]\n[\n-i\nidentity_file\n]\n[\n-J\ndestination\n]\n[\n-L\naddress\n]\n[\n-l\nlogin_name\n]\n[\n-m\nmac_spec\n]\n[\n-O\nctl_cmd\n]\n[\n-o\noption\n]\n[\n-P\ntag\n]\n[\n-p\nport\n]\n[\n-R\naddress\n]\n[\n-S\nctl_path\n]\n[\n-W\nhost\n:\nport\n]\n[\n-w\nlocal_tun\n[:\nremote_tun\n]]\ndestination\n[\ncommand\n[\nargument ...\n]]\nssh\n[\n-Q\nquery_option\n]\nDESCRIPTION\n¶\nssh\n(SSH client) is a program for logging\ninto a remote machine and for executing commands on a remote machine. It is\nintended to provide secure encrypted communications between two untrusted\nhosts over an insecure network. X11 connections, arbitrary TCP ports and\nUNIX\n-domain sockets can also be forwarded over the\nsecure channel.\nssh\nconnects and logs into the specified\ndestination\n, which may be specified as either\n[user@]hostname or a URI of the form\nssh://\n[user@]hostname[:port]. The user must prove\ntheir identity to the remote machine using one of several methods (see\nbelow).\nIf a\ncommand\nis specified, it will be\nexecuted on the remote host instead of a login shell. A complete command\nline may be specified as\ncommand\n, or it may have\nadditional arguments. If supplied, the arguments will be appended to the\ncommand, separated by spaces, before it is sent to the server to be\nexecuted.\nThe options are as follows:\n-4\nForces\nssh\nto use IPv4 addresses only.\n-6\nForces\nssh\nto use IPv6 addresses only.\n-A\nEnables forwarding of connections from an authentication agent such as\nssh-agent(1)\n. This can also be specified on a per-host\nbasis in a configuration file.\nAgent forwarding should be enabled with caution. Users with\nthe ability to bypass file permissions on the remote host (for the\nagent's\nUNIX\n-domain socket) can access the local\nagent through the forwarded connection. An attacker cannot obtain key\nmaterial from the agent, however they can perform operations on the keys\nthat enable them to authenticate using the identities loaded into the\nagent. A safer alternative may be to use a jump host (see\n-J\n).\n-a\nDisables forwarding of the authentication agent connection.\n-B\nbind_interface\nBind to the address of\nbind_interface\nbefore\nattempting to connect to the destination host. This is only useful on\nsystems with more than one address.\n-b\nbind_address\nUse\nbind_address\non the local machine as the source\naddress of the connection. Only useful on systems with more than one\naddress.\n-C\nRequests compression of all data (including stdin, stdout, stderr, and\ndata for forwarded X11, TCP and\nUNIX\n-domain\nconnections). The compression algorithm is the same used by\ngzip(1)\n. Compression is desirable on modem lines and\nother slow connections, but will only slow down things on fast networks.\nThe default value can be set on a host-by-host basis in the configuration\nfiles; see the\nCompression\noption in\nssh_config(5)\n.\n-c\ncipher_spec\nSelects the cipher specification for encrypting the session.\ncipher_spec\nis a comma-separated list of ciphers\nlisted in order of preference. See the\nCiphers\nkeyword in\nssh_config(5)\nfor more information.\n-D\n[\nbind_address\n:]\nport\nSpecifies a local “dynamic” application-level port\nforwarding. This works by allocating a socket to listen to\nport\non the local side, optionally bound to the\nspecified\nbind_address\n. Whenever a connection is\nmade to this port, the connection is forwarded over the secure channel,\nand the application protocol is then used to determine where to connect to\nfrom the remote machine. Currently the SOCKS4 and SOCKS5 protocols are\nsupported, and\nssh\nwill act as a SOCKS server.\nOnly root can forward privileged ports. Dynamic port forwardings can also\nbe specified in the configuration file.\nIPv6 addresses can be specified by enclosing the address in\nsquare brackets. Only the superuser can forward privileged ports. By\ndefault, the local port is bound in accordance with the\nGatewayPorts\nsetting. However, an explicit\nbind_address\nmay be used to bind the connection to\na specific address. The\nbind_address\nof\n“localhost” indicates that the listening port be bound for\nlocal use only, while an empty address or ‘*’ indicates\nthat the port should be available from all interfaces.\n-E\nlog_file\nAppend debug logs to\nlog_file\ninstead of standard\nerror.\n-e\nescape_char\nSets the escape character for sessions with a pty (default:\n‘\n~\n’). The escape character is only\nrecognized at the beginning of a line. The escape character followed by a\ndot (‘\n.\n’) closes the connection;\nfollowed by control-Z suspends the connection; and followed by itself\nsends the escape character once. Setting the character to\n“none” disables any escapes and makes the session fully\ntransparent.\n-F\nconfigfile\nSpecifies an alternative per-user configuration file. If a configuration\nfile is given on the command line, the system-wide configuration file\n(\n/etc/ssh/ssh_config\n) will be ignored. The default\nfor the per-user configuration file is\n~/.ssh/config\n. If set to “none”, no\nconfiguration files will be read.\n-f\nRequests\nssh\nto go to background just before\ncommand execution. This is useful if\nssh\nis going\nto ask for passwords or passphrases, but the user wants it in the\nbackground. This implies\n-n\n. The recommended way\nto start X11 programs at a remote site is with something like\nssh -f host xterm\n.\nIf the\nExitOnForwardFailure\nconfiguration option is set to “yes”, then a client\nstarted with\n-f\nwill wait for all remote port\nforwards to be successfully established before placing itself in the\nbackground. Refer to the description of\nForkAfterAuthentication\nin\nssh_config(5)\nfor details.\n-G\nCauses\nssh\nto print its configuration after\nevaluating\nHost\nand\nMatch\nblocks and exit.\n-g\nAllows remote hosts to connect to local forwarded ports. If used on a\nmultiplexed connection, then this option must be specified on the master\nprocess.\n-I\npkcs11\nSpecify the PKCS#11 shared library\nssh\nshould use\nto communicate with a PKCS#11 token providing keys for user\nauthentication.\n-i\nidentity_file\nSelects a file from which the identity (private key) for public key\nauthentication is read. You can also specify a public key file to use the\ncorresponding private key that is loaded in\nssh-agent(1)\nwhen the private key file is not present locally. The default is\n~/.ssh/id_rsa\n,\n~/.ssh/id_ecdsa\n,\n~/.ssh/id_ecdsa_sk\n,\n~/.ssh/id_ed25519\nand\n~/.ssh/id_ed25519_sk\n. Identity files may also be\nspecified on a per-host basis in the configuration file. It is possible to\nhave multiple\n-i\noptions (and multiple identities\nspecified in configuration files). If no certificates have been explicitly\nspecified by the\nCertificateFile\ndirective,\nssh\nwill also try to load certificate information\nfrom the filename obtained by appending\n-cert.pub\nto identity filenames.\n-J\ndestination\nConnect to the target host by first making an\nssh\nconnection to the jump host described by\ndestination\nand then establishing a TCP forwarding to the ultimate destination from\nthere. Multiple jump hops may be specified separated by comma characters.\nIPv6 addresses can be specified by enclosing the address in square\nbrackets. This is a shortcut to specify a\nProxyJump\nconfiguration directive. Note that\nconfiguration directives supplied on the command-line generally apply to\nthe destination host and not any specified jump hosts. Use\n~/.ssh/config\nto specify configuration for jump\nhosts.\n-K\nEnables GSSAPI-based authentication and forwarding (delegation) of GSSAPI\ncredentials to the server.\n-k\nDisables forwarding (delegation) of GSSAPI credentials to the server.\n-L\n[\nbind_address\n:]\nport\n:\nhost\n:\nhostport\n-L\n[\nbind_address\n:]\nport\n:\nremote_socket\n-L\nlocal_socket\n:\nhost\n:\nhostport\n-L\nlocal_socket\n:\nremote_socket\nSpecifies that connections to the given TCP port or Unix socket on the\nlocal (client) host are to be forwarded to the given host and port, or\nUnix socket, on the remote side. This works by allocating a socket to\nlisten to either a TCP\nport\non the local side,\noptionally bound to the specified\nbind_address\n, or\nto a Unix socket. Whenever a connection is made to the local port or\nsocket, the connection is forwarded over the secure channel, and a\nconnection is made to either\nhost\nport\nhostport\n, or the Unix socket\nremote_socket\n, from the remote machine.\nPort forwardings can also be specified in the configuration\nfile. Only the superuser can forward privileged ports. IPv6 addresses\ncan be specified by enclosing the address in square brackets.\nBy default, the local port is bound in accordance with the\nGatewayPorts\nsetting. However, an explicit\nbind_address\nmay be used to bind the connection to\na specific address. The\nbind_address\nof\n“localhost” indicates that the listening port be bound for\nlocal use only, while an empty address or ‘*’ indicates\nthat the port should be available from all interfaces.\n-l\nlogin_name\nSpecifies the user to log in as on the remote machine. This also may be\nspecified on a per-host basis in the configuration file.\n-M\nPlaces the\nssh\nclient into “master”\nmode for connection sharing. Multiple\n-M\noptions\nplaces\nssh\ninto “master” mode but\nwith confirmation required using\nssh-askpass(1)\nbefore\neach operation that changes the multiplexing state (e.g. opening a new\nsession). Refer to the description of\nControlMaster\nin\nssh_config(5)\nfor details.\n-m\nmac_spec\nA comma-separated list of MAC (message authentication code) algorithms,\nspecified in order of preference. See the\nMACs\nkeyword in\nssh_config(5)\nfor more information.\n-N\nDo not execute a remote command. This is useful for just forwarding ports.\nRefer to the description of\nSessionType\nin\nssh_config(5)\nfor details.\n-n\nRedirects stdin from\n/dev/null\n(actually, prevents\nreading from stdin). This must be used when\nssh\nis\nrun in the background. A common trick is to use this to run X11 programs\non a remote machine. For example,\nssh -n\nshadows.cs.hut.fi emacs &\nwill start an emacs on\nshadows.cs.hut.fi, and the X11 connection will be automatically forwarded\nover an encrypted channel. The\nssh\nprogram will be\nput in the background. (This does not work if\nssh\nneeds to ask for a password or passphrase; see also the\n-f\noption.) Refer to the description of\nStdinNull\nin\nssh_config(5)\nfor\ndetails.\n-O\nctl_cmd\nControl an active connection multiplexing master process. When the\n-O\noption is specified, the\nctl_cmd\nargument is interpreted and passed to the\nmaster process. Valid commands are: “check” (check that the\nmaster process is running), “forward” (request forwardings\nwithout command execution), “cancel” (cancel forwardings),\n“proxy” (connect to a running multiplexing master in proxy\nmode), “exit” (request the master to exit), and\n“stop” (request the master to stop accepting further\nmultiplexing requests).\n-o\noption\nCan be used to give options in the format used in the configuration file.\nThis is useful for specifying options for which there is no separate\ncommand-line flag. For full details of the options listed below, and their\npossible values, see\nssh_config(5)\n.\nAddKeysToAgent\nAddressFamily\nBatchMode\nBindAddress\nBindInterface\nCASignatureAlgorithms\nCanonicalDomains\nCanonicalizeFallbackLocal\nCanonicalizeHostname\nCanonicalizeMaxDots\nCanonicalizePermittedCNAMEs\nCertificateFile\nChannelTimeout\nCheckHostIP\nCiphers\nClearAllForwardings\nCompression\nConnectTimeout\nConnectionAttempts\nControlMaster\nControlPath\nControlPersist\nDynamicForward\nEnableEscapeCommandline\nEnableSSHKeysign\nEscapeChar\nExitOnForwardFailure\nFingerprintHash\nForkAfterAuthentication\nForwardAgent\nForwardX11\nForwardX11Timeout\nForwardX11Trusted\nGSSAPIAuthentication\nGSSAPIKeyExchange\nGSSAPIClientIdentity\nGSSAPIDelegateCredentials\nGSSAPIKexAlgorithms\nGSSAPIRenewalForcesRekey\nGSSAPIServerIdentity\nGSSAPITrustDns\nGatewayPorts\nGlobalKnownHostsFile\nHashKnownHosts\nHost\nHostKeyAlgorithms\nHostKeyAlias\nHostbasedAcceptedAlgorithms\nHostbasedAuthentication\nHostname\nIPQoS\nIdentitiesOnly\nIdentityAgent\nIdentityFile\nIgnoreUnknown\nInclude\nKbdInteractiveAuthentication\nKbdInteractiveDevices\nKexAlgorithms\nKnownHostsCommand\nLocalCommand\nLocalForward\nLogLevel\nLogVerbose\nMACs\nNoHostAuthenticationForLocalhost\nNumberOfPasswordPrompts\nObscureKeystrokeTiming\nPKCS11Provider\nPasswordAuthentication\nPermitLocalCommand\nPermitRemoteOpen\nPort\nPreferredAuthentications\nProxyCommand\nProxyJump\nProxyUseFdpass\nPubkeyAcceptedAlgorithms\nPubkeyAuthentication\nRekeyLimit\nRemoteCommand\nRemoteForward\nRequestTTY\nRequiredRSASize\nRevokedHostKeys\nSecurityKeyProvider\nSendEnv\nServerAliveCountMax\nServerAliveInterval\nSessionType\nSetEnv\nStdinNull\nStreamLocalBindMask\nStreamLocalBindUnlink\nStrictHostKeyChecking\nSyslogFacility\nTCPKeepAlive\nTag\nTunnel\nTunnelDevice\nUpdateHostKeys\nUser\nUserKnownHostsFile\nVerifyHostKeyDNS\nVisualHostKey\nXAuthLocation\n-P\ntag\nSpecify a tag name that may be used to select configuration in\nssh_config(5)\n. Refer to the\nTag\nand\nMatch\nkeywords in\nssh_config(5)\nfor more information.\n-p\nport\nPort to connect to on the remote host. This can be specified on a per-host\nbasis in the configuration file.\n-Q\nquery_option\nQueries for the algorithms supported by one of the following features:\ncipher\n(supported symmetric ciphers),\ncipher-auth\n(supported symmetric ciphers that\nsupport authenticated encryption),\nhelp\n(supported\nquery terms for use with the\n-Q\nflag),\nmac\n(supported message integrity codes),\nkex\n(key exchange algorithms),\nkex-gss\n(GSSAPI key exchange algorithms),\nkey\n(key types),\nkey-ca-sign\n(valid CA signature algorithms for certificates),\nkey-cert\n(certificate key types),\nkey-plain\n(non-certificate key types),\nkey-sig\n(all key types and signature algorithms),\nprotocol-version\n(supported SSH protocol versions),\nand\nsig\n(supported signature algorithms).\nAlternatively, any keyword from\nssh_config(5)\nor\nsshd_config(5)\nthat takes an algorithm list may be used\nas an alias for the corresponding query_option.\n-q\nQuiet mode. Causes most warning and diagnostic messages to be suppressed.\n-R\n[\nbind_address\n:]\nport\n:\nhost\n:\nhostport\n-R\n[\nbind_address\n:]\nport\n:\nlocal_socket\n-R\nremote_socket\n:\nhost\n:\nhostport\n-R\nremote_socket\n:\nlocal_socket\n-R\n[\nbind_address\n:]\nport\nSpecifies that connections to the given TCP port or Unix socket on the\nremote (server) host are to be forwarded to the local side.\nThis works by allocating a socket to listen to either a TCP\nport\nor to a Unix socket on the remote side.\nWhenever a connection is made to this port or Unix socket, the\nconnection is forwarded over the secure channel, and a connection is\nmade from the local machine to either an explicit destination specified\nby\nhost\nport\nhostport\n, or\nlocal_socket\n, or, if no explicit destination was\nspecified,\nssh\nwill act as a SOCKS 4/5 proxy and\nforward connections to the destinations requested by the remote SOCKS\nclient.\nPort forwardings can also be specified in the configuration\nfile. Privileged ports can be forwarded only when logging in as root on\nthe remote machine. IPv6 addresses can be specified by enclosing the\naddress in square brackets.\nBy default, TCP listening sockets on the server will be bound\nto the loopback interface only. This may be overridden by specifying a\nbind_address\n. An empty\nbind_address\n, or the address\n‘\n*\n’, indicates that the remote\nsocket should listen on all interfaces. Specifying a remote\nbind_address\nwill only succeed if the server's\nGatewayPorts\noption is enabled (see\nsshd_config(5)\n).\nIf the\nport\nargument is\n‘\n0\n’, the listen port will be\ndynamically allocated on the server and reported to the client at run\ntime. When used together with\n-O forward\n, the\nallocated port will be printed to the standard output.\n-S\nctl_path\nSpecifies the location of a control socket for connection sharing, or the\nstring “none” to disable connection sharing. Refer to the\ndescription of\nControlPath\nand\nControlMaster\nin\nssh_config(5)\nfor details.\n-s\nMay be used to request invocation of a subsystem on the remote system.\nSubsystems facilitate the use of SSH as a secure transport for other\napplications (e.g.\nsftp(1)\n). The subsystem is specified\nas the remote command. Refer to the description of\nSessionType\nin\nssh_config(5)\nfor\ndetails.\n-T\nDisable pseudo-terminal allocation.\n-t\nForce pseudo-terminal allocation. This can be used to execute arbitrary\nscreen-based programs on a remote machine, which can be very useful, e.g.\nwhen implementing menu services. Multiple\n-t\noptions force tty allocation, even if\nssh\nhas no\nlocal tty.\n-V\nDisplay the version number and exit.\n-v\nVerbose mode. Causes\nssh\nto print debugging\nmessages about its progress. This is helpful in debugging connection,\nauthentication, and configuration problems. Multiple\n-v\noptions increase the verbosity. The maximum is\n3.\n-W\nhost\n:\nport\nRequests that standard input and output on the client be forwarded to\nhost\non\nport\nover the secure\nchannel. Implies\n-N\n,\n-T\n,\nExitOnForwardFailure\nand\nClearAllForwardings\n, though these can be\noverridden in the configuration file or using\n-o\ncommand line options.\n-w\nlocal_tun\n[:\nremote_tun\n]\nRequests tunnel device forwarding with the specified\ntun(4)\ndevices between the client\n(\nlocal_tun\n) and the server\n(\nremote_tun\n).\nThe devices may be specified by numerical ID or the keyword\n“any”, which uses the next available tunnel device. If\nremote_tun\nis not specified, it defaults to\n“any”. See also the\nTunnel\nand\nTunnelDevice\ndirectives in\nssh_config(5)\n.\nIf the\nTunnel\ndirective is unset, it\nwill be set to the default tunnel mode, which is\n“point-to-point”. If a different\nTunnel\nforwarding mode it desired, then it\nshould be specified before\n-w\n.\n-X\nEnables X11 forwarding. This can also be specified on a per-host basis in\na configuration file.\nX11 forwarding should be enabled with caution. Users with the\nability to bypass file permissions on the remote host (for the user's X\nauthorization database) can access the local X11 display through the\nforwarded connection. An attacker may then be able to perform activities\nsuch as keystroke monitoring.\nFor this reason, X11 forwarding is subjected to X11 SECURITY\nextension restrictions by default. Refer to the\nssh\n-Y\noption and the\nForwardX11Trusted\ndirective in\nssh_config(5)\nfor more information.\n(Debian-specific: X11 forwarding is not subjected to X11\nSECURITY extension restrictions by default, because too many programs\ncurrently crash in this mode. Set the\nForwardX11Trusted\noption to “no”\nto restore the upstream behaviour. This may change in future depending\non client-side improvements.)\n-x\nDisables X11 forwarding.\n-Y\nEnables trusted X11 forwarding. Trusted X11 forwardings are not subjected\nto the X11 SECURITY extension controls.\n(Debian-specific: In the default configuration, this option is\nequivalent to\n-X\n, since\nForwardX11Trusted\ndefaults to\n“yes” as described above. Set the\nForwardX11Trusted\noption to “no”\nto restore the upstream behaviour. This may change in future depending\non client-side improvements.)\n-y\nSend log information using the\nsyslog(3)\nsystem module.\nBy default this information is sent to stderr.\nssh\nmay additionally obtain configuration\ndata from a per-user configuration file and a system-wide configuration\nfile. The file format and configuration options are described in\nssh_config(5)\n.\nAUTHENTICATION\n¶\nThe OpenSSH SSH client supports SSH protocol 2.\nThe methods available for authentication are: GSSAPI-based\nauthentication, host-based authentication, public key authentication,\nkeyboard-interactive authentication, and password authentication.\nAuthentication methods are tried in the order specified above, though\nPreferredAuthentications\ncan be used to change the\ndefault order.\nHost-based authentication works as follows: If the\nmachine the user logs in from is listed in\n/etc/hosts.equiv\nor\n/etc/ssh/shosts.equiv\non the remote machine, the\nuser is non-root and the user names are the same on both sides, or if the\nfiles\n~/.rhosts\nor\n~/.shosts\nexist in the user's home directory on the remote machine and contain a line\ncontaining the name of the client machine and the name of the user on that\nmachine, the user is considered for login. Additionally, the server\nmust\nbe able to\nverify the client's host key (see the description of\n/etc/ssh/ssh_known_hosts\nand\n~/.ssh/known_hosts\n, below) for login to be\npermitted. This authentication method closes security holes due to IP\nspoofing, DNS spoofing, and routing spoofing. [Note to the administrator:\n/etc/hosts.equiv\n,\n~/.rhosts\n,\nand the rlogin/rsh protocol in general, are inherently insecure and should\nbe disabled if security is desired.]\nPublic key authentication works as follows: The scheme is based on\npublic-key cryptography, using cryptosystems where encryption and decryption\nare done using separate keys, and it is unfeasible to derive the decryption\nkey from the encryption key. The idea is that each user creates a\npublic/private key pair for authentication purposes. The server knows the\npublic key, and only the user knows the private key.\nssh\nimplements public key authentication protocol\nautomatically, using one of the ECDSA, Ed25519 or RSA algorithms.\nThe file\n~/.ssh/authorized_keys\nlists the\npublic keys that are permitted for logging in. When the user logs in, the\nssh\nprogram tells the server which key pair it would\nlike to use for authentication. The client proves that it has access to the\nprivate key and the server checks that the corresponding public key is\nauthorized to accept the account.\nThe server may inform the client of errors that prevented public\nkey authentication from succeeding after authentication completes using a\ndifferent method. These may be viewed by increasing the\nLogLevel\nto\nDEBUG\nor higher\n(e.g. by using the\n-v\nflag).\nThe user creates their key pair by running\nssh-keygen(1)\n. This stores the private key in\n~/.ssh/id_ecdsa\n(ECDSA),\n~/.ssh/id_ecdsa_sk\n(authenticator-hosted ECDSA),\n~/.ssh/id_ed25519\n(Ed25519),\n~/.ssh/id_ed25519_sk\n(authenticator-hosted Ed25519),\nor\n~/.ssh/id_rsa\n(RSA) and stores the public key in\n~/.ssh/id_ecdsa.pub\n(ECDSA),\n~/.ssh/id_ecdsa_sk.pub\n(authenticator-hosted ECDSA),\n~/.ssh/id_ed25519.pub\n(Ed25519),\n~/.ssh/id_ed25519_sk.pub\n(authenticator-hosted\nEd25519), or\n~/.ssh/id_rsa.pub\n(RSA) in the user's\nhome directory. The user should then copy the public key to\n~/.ssh/authorized_keys\nin their home directory on\nthe remote machine. The\nauthorized_keys\nfile\ncorresponds to the conventional\n~/.rhosts\nfile, and\nhas one key per line, though the lines can be very long. After this, the\nuser can log in without giving the password.\nA variation on public key authentication is available in the form\nof certificate authentication: instead of a set of public/private keys,\nsigned certificates are used. This has the advantage that a single trusted\ncertification authority can be used in place of many public/private keys.\nSee the CERTIFICATES section of\nssh-keygen(1)\nfor more\ninformation.\nThe most convenient way to use public key or certificate\nauthentication may be with an authentication agent. See\nssh-agent(1)\nand (optionally) the\nAddKeysToAgent\ndirective in\nssh_config(5)\nfor more information.\nKeyboard-interactive authentication works as follows: The server\nsends an arbitrary \"challenge\" text and prompts for a response,\npossibly multiple times. Examples of keyboard-interactive authentication\ninclude\nBSD\nAuthentication (see\nlogin.conf(5)\n) and PAM (some\nnon-\nOpenBSD\nsystems).\nFinally, if other authentication methods fail,\nssh\nprompts the user for a password. The password is\nsent to the remote host for checking; however, since all communications are\nencrypted, the password cannot be seen by someone listening on the\nnetwork.\nssh\nautomatically maintains and checks a\ndatabase containing identification for all hosts it has ever been used with.\nHost keys are stored in\n~/.ssh/known_hosts\nin the\nuser's home directory. Additionally, the file\n/etc/ssh/ssh_known_hosts\nis automatically checked\nfor known hosts. Any new hosts are automatically added to the user's file.\nIf a host's identification ever changes,\nssh\nwarns\nabout this and disables password authentication to prevent server spoofing\nor man-in-the-middle attacks, which could otherwise be used to circumvent\nthe encryption. The\nStrictHostKeyChecking\noption can\nbe used to control logins to machines whose host key is not known or has\nchanged.\nWhen the user's identity has been accepted by the server, the\nserver either executes the given command in a non-interactive session or, if\nno command has been specified, logs into the machine and gives the user a\nnormal shell as an interactive session. All communication with the remote\ncommand or shell will be automatically encrypted.\nIf an interactive session is requested,\nssh\nby default will only request a pseudo-terminal\n(pty) for interactive sessions when the client has one. The flags\n-T\nand\n-t\ncan be used to\noverride this behaviour.\nIf a pseudo-terminal has been allocated, the user may use the\nescape characters noted below.\nIf no pseudo-terminal has been allocated, the session is\ntransparent and can be used to reliably transfer binary data. On most\nsystems, setting the escape character to “none” will also make\nthe session transparent even if a tty is used.\nThe session terminates when the command or shell on the remote\nmachine exits and all X11 and TCP connections have been closed.\nESCAPE CHARACTERS\n¶\nWhen a pseudo-terminal has been requested,\nssh\nsupports a number of functions through the use\nof an escape character.\nA single tilde character can be sent as\n~~\nor by following the tilde by a character other than those described below.\nThe escape character must always follow a newline to be interpreted as\nspecial. The escape character can be changed in configuration files using\nthe\nEscapeChar\nconfiguration directive or on the\ncommand line by the\n-e\noption.\nThe supported escapes (assuming the default\n‘\n~\n’) are:\n~.\nDisconnect.\n~^Z\nBackground\nssh\n.\n~#\nList forwarded connections.\n~&\nBackground\nssh\nat logout when waiting for\nforwarded connection / X11 sessions to terminate.\n~?\nDisplay a list of escape characters.\n~B\nSend a BREAK to the remote system (only useful if the peer supports\nit).\n~C\nOpen command line. Currently this allows the addition of port forwardings\nusing the\n-L\n,\n-R\nand\n-D\noptions (see above). It also allows the\ncancellation of existing port-forwardings with\n-KL\n[\nbind_address\n:]\nport\nfor local,\n-KR\n[\nbind_address\n:]\nport\nfor remote and\n-KD\n[\nbind_address\n:]\nport\nfor dynamic port-forwardings.\n!\ncommand\nallows the user to\nexecute a local command if the\nPermitLocalCommand\noption is enabled in\nssh_config(5)\n. Basic help is\navailable, using the\n-h\noption.\n~R\nRequest rekeying of the connection (only useful if the peer supports\nit).\n~V\nDecrease the verbosity (\nLogLevel\n) when errors are\nbeing written to stderr.\n~v\nIncrease the verbosity (\nLogLevel\n) when errors are\nbeing written to stderr.\nTCP FORWARDING\n¶\nForwarding of arbitrary TCP connections over a secure channel can\nbe specified either on the command line or in a configuration file. One\npossible application of TCP forwarding is a secure connection to a mail\nserver; another is going through firewalls.\nIn the example below, we look at encrypting communication for an\nIRC client, even though the IRC server it connects to does not directly\nsupport encrypted communication. This works as follows: the user connects to\nthe remote host using\nssh\n, specifying the ports to\nbe used to forward the connection. After that it is possible to start the\nprogram locally, and\nssh\nwill encrypt and forward\nthe connection to the remote server.\nThe following example tunnels an IRC session from the client to an\nIRC server at “server.example.com”, joining channel\n“#users”, nickname “pinky”, using the standard\nIRC port, 6667:\n$ ssh -f -L 6667:localhost:6667 server.example.com sleep 10\n$ irc -c '#users' pinky IRC/127.0.0.1\nThe\n-f\noption backgrounds\nssh\nand the remote command “sleep 10”\nis specified to allow an amount of time (10 seconds, in the example) to\nstart the program which is going to use the tunnel. If no connections are\nmade within the time specified,\nssh\nwill exit.\nX11 FORWARDING\n¶\nIf the\nForwardX11\nvariable is set to\n“yes” (or see the description of the\n-X\n,\n-x\n, and\n-Y\noptions above) and the user is using X11 (the\nDISPLAY\nenvironment variable is set), the connection\nto the X11 display is automatically forwarded to the remote side in such a\nway that any X11 programs started from the shell (or command) will go\nthrough the encrypted channel, and the connection to the real X server will\nbe made from the local machine. The user should not manually set\nDISPLAY\n. Forwarding of X11 connections can be\nconfigured on the command line or in configuration files.\nThe\nDISPLAY\nvalue set by\nssh\nwill point to the server machine, but with a\ndisplay number greater than zero. This is normal, and happens because\nssh\ncreates a “proxy” X server on the\nserver machine for forwarding the connections over the encrypted\nchannel.\nssh\nwill also automatically set up\nXauthority data on the server machine. For this purpose, it will generate a\nrandom authorization cookie, store it in Xauthority on the server, and\nverify that any forwarded connections carry this cookie and replace it by\nthe real cookie when the connection is opened. The real authentication\ncookie is never sent to the server machine (and no cookies are sent in the\nplain).\nIf the\nForwardAgent\nvariable is set to\n“yes” (or see the description of the\n-A\nand\n-a\noptions above) and\nthe user is using an authentication agent, the connection to the agent is\nautomatically forwarded to the remote side.\nVERIFYING HOST KEYS\n¶\nWhen connecting to a server for the first time, a fingerprint of\nthe server's public key is presented to the user (unless the option\nStrictHostKeyChecking\nhas been disabled).\nFingerprints can be determined using\nssh-keygen(1)\n:\n$ ssh-keygen -l -f\n/etc/ssh/ssh_host_rsa_key\nIf the fingerprint is already known, it can be matched and the key\ncan be accepted or rejected. If only legacy (MD5) fingerprints for the\nserver are available, the\nssh-keygen(1)\n-E\noption may be used to downgrade the fingerprint\nalgorithm to match.\nBecause of the difficulty of comparing host keys just\nby looking at fingerprint strings, there is also support to compare host\nkeys visually, using\nrandom art\n. By\nsetting the\nVisualHostKey\noption to\n“yes”, a small ASCII graphic gets displayed on every login to\na server, no matter if the session itself is interactive or not. By learning\nthe pattern a known server produces, a user can easily find out that the\nhost key has changed when a completely different pattern is displayed.\nBecause these patterns are not unambiguous however, a pattern that looks\nsimilar to the pattern remembered only gives a good probability that the\nhost key is the same, not guaranteed proof.\nTo get a listing of the fingerprints along with their random art\nfor all known hosts, the following command line can be used:\n$ ssh-keygen -lv -f\n~/.ssh/known_hosts\nIf the fingerprint is unknown, an alternative method of\nverification is available: SSH fingerprints verified by DNS. An additional\nresource record (RR), SSHFP, is added to a zonefile and the connecting\nclient is able to match the fingerprint with that of the key presented.\nIn this example, we are connecting a client to a server,\n“host.example.com”. The SSHFP resource records should first be\nadded to the zonefile for host.example.com:\n$ ssh-keygen -r host.example.com.\nThe output lines will have to be added to the zonefile. To check\nthat the zone is answering fingerprint queries:\n$ dig -t SSHFP\nhost.example.com\nFinally the client connects:\n$ ssh -o \"VerifyHostKeyDNS ask\" host.example.com\n[...]\nMatching host key fingerprint found in DNS.\nAre you sure you want to continue connecting (yes/no)?\nSee the\nVerifyHostKeyDNS\noption in\nssh_config(5)\nfor more information.\nSSH-BASED VIRTUAL PRIVATE NETWORKS\n¶\nssh\ncontains support for Virtual Private\nNetwork (VPN) tunnelling using the\ntun(4)\nnetwork\npseudo-device, allowing two networks to be joined securely. The\nsshd_config(5)\nconfiguration option\nPermitTunnel\ncontrols whether the server supports\nthis, and at what level (layer 2 or 3 traffic).\nThe following example would connect client network 10.0.50.0/24\nwith remote network 10.0.99.0/24 using a point-to-point connection from\n10.1.1.1 to 10.1.1.2, provided that the SSH server running on the gateway to\nthe remote network, at 192.168.1.15, allows it.\nOn the client:\n# ssh -f -w 0:1 192.168.1.15 true\n# ifconfig tun0 10.1.1.1 10.1.1.2 netmask 255.255.255.252\n# route add 10.0.99.0/24 10.1.1.2\nOn the server:\n# ifconfig tun1 10.1.1.2 10.1.1.1 netmask 255.255.255.252\n# route add 10.0.50.0/24 10.1.1.1\nClient access may be more finely tuned via the\n/root/.ssh/authorized_keys\nfile (see below) and the\nPermitRootLogin\nserver option. The following entry\nwould permit connections on\ntun(4)\ndevice 1 from user\n“jane” and on tun device 2 from user “john”, if\nPermitRootLogin\nis set to\n“forced-commands-only”:\ntunnel=\"1\",command=\"sh /etc/netstart tun1\" ssh-rsa ... jane\ntunnel=\"2\",command=\"sh /etc/netstart tun2\" ssh-rsa ... john\nSince an SSH-based setup entails a fair amount of overhead, it may\nbe more suited to temporary setups, such as for wireless VPNs. More\npermanent VPNs are better provided by tools such as\nipsecctl(8)\nand\nisakmpd(8)\n.\nENVIRONMENT\n¶\nssh\nwill normally set the following\nenvironment variables:\nDISPLAY\nThe\nDISPLAY\nvariable indicates the location of the\nX11 server. It is automatically set by\nssh\nto\npoint to a value of the form “hostname:n”, where\n“hostname” indicates the host where the shell runs, and\n‘n’ is an integer ≥ 1.\nssh\nuses this special value to forward X11 connections over the secure\nchannel. The user should normally not set\nDISPLAY\nexplicitly, as that will render the X11 connection insecure (and will\nrequire the user to manually copy any required authorization\ncookies).\nHOME\nSet to the path of the user's home directory.\nLOGNAME\nSynonym for\nUSER\n; set for compatibility with\nsystems that use this variable.\nMAIL\nSet to the path of the user's mailbox.\nPATH\nSet to the default\nPATH\n, as specified when\ncompiling\nssh\n.\nSSH_ASKPASS\nIf\nssh\nneeds a passphrase, it will read the\npassphrase from the current terminal if it was run from a terminal. If\nssh\ndoes not have a terminal associated with it\nbut\nDISPLAY\nand\nSSH_ASKPASS\nare set, it will execute the program\nspecified by\nSSH_ASKPASS\nand open an X11 window to\nread the passphrase. This is particularly useful when calling\nssh\nfrom a\n.xsession\nor\nrelated script. (Note that on some machines it may be necessary to\nredirect the input from\n/dev/null\nto make this\nwork.)\nSSH_ASKPASS_REQUIRE\nAllows further control over the use of an askpass program. If this\nvariable is set to “never” then\nssh\nwill never attempt to use one. If it is set to “prefer”,\nthen\nssh\nwill prefer to use the askpass program\ninstead of the TTY when requesting passwords. Finally, if the variable is\nset to “force”, then the askpass program will be used for\nall passphrase input regardless of whether\nDISPLAY\nis set.\nSSH_AUTH_SOCK\nIdentifies the path of a\nUNIX\n-domain socket used\nto communicate with the agent.\nSSH_CONNECTION\nIdentifies the client and server ends of the connection. The variable\ncontains four space-separated values: client IP address, client port\nnumber, server IP address, and server port number.\nSSH_ORIGINAL_COMMAND\nThis variable contains the original command line if a forced command is\nexecuted. It can be used to extract the original arguments.\nSSH_TTY\nThis is set to the name of the tty (path to the device) associated with\nthe current shell or command. If the current session has no tty, this\nvariable is not set.\nSSH_TUNNEL\nOptionally set by\nsshd(8)\nto contain the interface names\nassigned if tunnel forwarding was requested by the client.\nSSH_USER_AUTH\nOptionally set by\nsshd(8)\n, this variable may contain a\npathname to a file that lists the authentication methods successfully used\nwhen the session was established, including any public keys that were\nused.\nTZ\nThis variable is set to indicate the present time zone if it was set when\nthe daemon was started (i.e. the daemon passes the value on to new\nconnections).\nUSER\nSet to the name of the user logging in.\nAdditionally,\nssh\nreads\n~/.ssh/environment\n, and adds lines of the format\n“VARNAME=value” to the environment if the file exists and\nusers are allowed to change their environment. For more information, see the\nPermitUserEnvironment\noption in\nsshd_config(5)\n.\nFILES\n¶\n~/.rhosts\nThis file is used for host-based authentication (see above). On some\nmachines this file may need to be world-readable if the user's home\ndirectory is on an NFS partition, because\nsshd(8)\nreads\nit as root. Additionally, this file must be owned by the user, and must\nnot have write permissions for anyone else. The recommended permission for\nmost machines is read/write for the user, and not accessible by others.\n~/.shosts\nThis file is used in exactly the same way as\n.rhosts\n, but allows host-based authentication\nwithout permitting login with rlogin/rsh.\n~/.ssh/\nThis directory is the default location for all user-specific configuration\nand authentication information. There is no general requirement to keep\nthe entire contents of this directory secret, but the recommended\npermissions are read/write/execute for the user, and not accessible by\nothers.\n~/.ssh/authorized_keys\nLists the public keys (ECDSA, Ed25519, RSA) that can be used for logging\nin as this user. The format of this file is described in the\nsshd(8)\nmanual page. This file is not highly sensitive,\nbut the recommended permissions are read/write for the user, and not\naccessible by others.\n~/.ssh/config\nThis is the per-user configuration file. The file format and configuration\noptions are described in\nssh_config(5)\n. Because of the\npotential for abuse, this file must have strict permissions: read/write\nfor the user, and not writable by others. It may be group-writable\nprovided that the group in question contains only the user.\n~/.ssh/environment\nContains additional definitions for environment variables; see\nENVIRONMENT\n, above.\n~/.ssh/id_ecdsa\n~/.ssh/id_ecdsa_sk\n~/.ssh/id_ed25519\n~/.ssh/id_ed25519_sk\n~/.ssh/id_rsa\nContains the private key for authentication. These files contain sensitive\ndata and should be readable by the user but not accessible by others\n(read/write/execute).\nssh\nwill simply ignore a\nprivate key file if it is accessible by others. It is possible to specify\na passphrase when generating the key which will be used to encrypt the\nsensitive part of this file using AES-128.\n~/.ssh/id_ecdsa.pub\n~/.ssh/id_ecdsa_sk.pub\n~/.ssh/id_ed25519.pub\n~/.ssh/id_ed25519_sk.pub\n~/.ssh/id_rsa.pub\nContains the public key for authentication. These files are not sensitive\nand can (but need not) be readable by anyone.\n~/.ssh/known_hosts\nContains a list of host keys for all hosts the user has logged into that\nare not already in the systemwide list of known host keys. See\nsshd(8)\nfor further details of the format of this file.\n~/.ssh/rc\nCommands in this file are executed by\nssh\nwhen the\nuser logs in, just before the user's shell (or command) is started. See\nthe\nsshd(8)\nmanual page for more information.\n/etc/hosts.equiv\nThis file is for host-based authentication (see above). It should only be\nwritable by root.\n/etc/ssh/shosts.equiv\nThis file is used in exactly the same way as\nhosts.equiv\n, but allows host-based authentication\nwithout permitting login with rlogin/rsh.\n/etc/ssh/ssh_config\nSystemwide configuration file. The file format and configuration options\nare described in\nssh_config(5)\n.\n/etc/ssh/ssh_host_ecdsa_key\n/etc/ssh/ssh_host_ed25519_key\n/etc/ssh/ssh_host_rsa_key\nThese files contain the private parts of the host keys and are used for\nhost-based authentication.\n/etc/ssh/ssh_known_hosts\nSystemwide list of known host keys. This file should be prepared by the\nsystem administrator to contain the public host keys of all machines in\nthe organization. It should be world-readable. See\nsshd(8)\nfor further details of the format of this file.\n/etc/ssh/sshrc\nCommands in this file are executed by\nssh\nwhen the\nuser logs in, just before the user's shell (or command) is started. See\nthe\nsshd(8)\nmanual page for more information.\nEXIT STATUS\n¶\nssh\nexits with the exit status of the\nremote command or with 255 if an error occurred.\nSEE ALSO\n¶\nscp(1)\n,\nsftp(1)\n,\nssh-add(1)\n,\nssh-agent(1)\n,\nssh-argv0(1)\n,\nssh-keygen(1)\n,\nssh-keyscan(1)\n,\ntun(4)\n,\nssh_config(5)\n,\nssh-keysign(8)\n,\nsshd(8)\nSTANDARDS\n¶\nS. Lehtinen\nand\nC. Lonvick\n,\nThe Secure Shell\n(SSH) Protocol Assigned Numbers\n,\nRFC 4250\n,\nJanuary 2006\n.\nT. Ylonen\nand\nC. Lonvick\n,\nThe Secure Shell\n(SSH) Protocol Architecture\n,\nRFC 4251\n,\nJanuary 2006\n.\nT. Ylonen\nand\nC. Lonvick\n,\nThe Secure Shell\n(SSH) Authentication Protocol\n,\nRFC 4252\n,\nJanuary 2006\n.\nT. Ylonen\nand\nC. Lonvick\n,\nThe Secure Shell\n(SSH) Transport Layer Protocol\n,\nRFC 4253\n,\nJanuary 2006\n.\nT. Ylonen\nand\nC. Lonvick\n,\nThe Secure Shell\n(SSH) Connection Protocol\n,\nRFC 4254\n,\nJanuary 2006\n.\nJ. Schlyter\nand\nW. Griffin\n,\nUsing DNS to Securely\nPublish Secure Shell (SSH) Key Fingerprints\n,\nRFC\n4255\n,\nJanuary 2006\n.\nF. Cusack\nand\nM. Forssen\n,\nGeneric Message\nExchange Authentication for the Secure Shell Protocol (SSH)\n,\nRFC 4256\n,\nJanuary\n2006\n.\nJ. Galbraith\nand\nP. Remaker\n,\nThe Secure Shell\n(SSH) Session Channel Break Extension\n,\nRFC\n4335\n,\nJanuary 2006\n.\nM. Bellare\n,\nT. Kohno\n, and\nC.\nNamprempre\n,\nThe Secure Shell (SSH) Transport Layer\nEncryption Modes\n,\nRFC 4344\n,\nJanuary 2006\n.\nB. Harris\n,\nImproved Arcfour Modes for the Secure Shell (SSH)\nTransport Layer Protocol\n,\nRFC 4345\n,\nJanuary 2006\n.\nM. Friedl\n,\nN. Provos\n, and\nW. Simpson\n,\nDiffie-Hellman Group Exchange for the Secure Shell (SSH)\nTransport Layer Protocol\n,\nRFC 4419\n,\nMarch 2006\n.\nJ. Galbraith\nand\nR. Thayer\n,\nThe Secure Shell (SSH)\nPublic Key File Format\n,\nRFC 4716\n,\nNovember 2006\n.\nD. Stebila\nand\nJ. Green\n,\nElliptic Curve\nAlgorithm Integration in the Secure Shell Transport Layer\n,\nRFC 5656\n,\nDecember\n2009\n.\nA. Perrig\nand\nD. Song\n,\nHash Visualization: a\nNew Technique to improve Real-World Security\n,\n1999\n,\nInternational Workshop on\nCryptographic Techniques and E-Commerce (CrypTEC '99)\n.\nAUTHORS\n¶\nOpenSSH is a derivative of the original and free ssh 1.2.12\nrelease by Tatu Ylonen. Aaron Campbell, Bob Beck, Markus Friedl, Niels\nProvos, Theo de Raadt and Dug Song removed many bugs, re-added newer\nfeatures and created OpenSSH. Markus Friedl contributed the support for SSH\nprotocol versions 1.5 and 2.0.\nDecember 4, 2024\nDebian\nSource file:\nssh.1.en.gz (from\nopenssh-client 1:10.2p1-2\n)\nSource last updated:\n2025-10-17T09:14:14Z\nConverted to HTML:\n2025-10-26T15:20:06Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/openssh-client/ssh.1.en.html"}}
{"text": "sudo(8) — sudo — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\nsudo\n/ sudo(8)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nCOMMAND EXECUTION\nEXIT VALUE\nSECURITY NOTES\nENVIRONMENT\nFILES\nEXAMPLES\nDIAGNOSTICS\nSEE ALSO\nHISTORY\nAUTHORS\nCAVEATS\nBUGS\nSUPPORT\nDISCLAIMER\nother versions\ntrixie\n1.9.16p2-3\ntrixie\n1.9.16p2-3\ntesting\n1.9.16p2-3\ntesting\n1.9.16p2-3\nunstable\n1.9.17p2-1\nunstable\n1.9.17p2-1\nexperimental\n1.9.17p1-1\nexperimental\n1.9.17p1-1\nother languages\nEnglish\n日本語\nconflicting packages\nsudo\nsudo-ldap\nScroll to navigation\nSUDO(8)\nSystem Manager's Manual\nSUDO(8)\nNAME\n¶\nsudo\n,\nsudoedit\n—\nexecute a command as another user\nSYNOPSIS\n¶\nsudo\n-h\n|\n-K\n|\n-k\n|\n-V\nsudo\n-v\n[\n-ABkNnS\n]\n[\n-g\ngroup\n]\n[\n-h\nhost\n]\n[\n-p\nprompt\n]\n[\n-u\nuser\n]\nsudo\n-l\n[\n-ABkNnS\n]\n[\n-g\ngroup\n]\n[\n-h\nhost\n]\n[\n-p\nprompt\n]\n[\n-U\nuser\n]\n[\n-u\nuser\n]\n[\ncommand\n[\narg ...\n]]\nsudo\n[\n-ABbEHnPS\n] [\n-C\nnum\n] [\n-D\ndirectory\n] [\n-g\ngroup\n] [\n-h\nhost\n] [\n-p\nprompt\n] [\n-R\ndirectory\n] [\n-r\nrole\n] [\n-t\ntype\n] [\n-T\ntimeout\n] [\n-u\nuser\n]\n[\nVAR\n=\nvalue\n]\n[\n-i\n|\n-s\n]\n[\ncommand\n[\narg ...\n]]\nsudoedit\n[\n-ABkNnS\n] [\n-C\nnum\n] [\n-D\ndirectory\n] [\n-g\ngroup\n] [\n-h\nhost\n] [\n-p\nprompt\n] [\n-R\ndirectory\n] [\n-r\nrole\n] [\n-t\ntype\n] [\n-T\ntimeout\n] [\n-u\nuser\n]\nfile ...\nDESCRIPTION\n¶\nsudo\nallows a permitted user to execute a\ncommand\nas the superuser or another user, as specified\nby the security policy. The invoking user's real\n(\nnot\neffective\n) user-ID is used to determine the user\nname with which to query the security policy.\nsudo\nsupports a plugin architecture for\nsecurity policies, auditing, and input/output logging. Third parties can\ndevelop and distribute their own plugins to work seamlessly with the\nsudo\nfront-end. The default security policy is\nsudoers\n, which is configured via the file\n/etc/sudoers\n, or via LDAP. See the\nPlugins\nsection for more information.\nThe security policy determines what privileges, if any, a user has\nto run\nsudo\n. The policy may require that users\nauthenticate themselves with a password or another authentication mechanism.\nIf authentication is required,\nsudo\nwill exit if the\nuser's password is not entered within a configurable time limit. This limit\nis policy-specific; the default password prompt timeout for the\nsudoers\nsecurity policy is 0 minutes.\nSecurity policies may support credential\ncaching to allow the user to run\nsudo\nagain for a\nperiod of time without requiring authentication. By default, the\nsudoers\npolicy caches credentials on a per-terminal basis\nfor 15 minutes. See the\ntimestamp_type\nand\ntimestamp_timeout\noptions in\nsudoers(5)\nfor more information. By running\nsudo\nwith the\n-v\noption, a\nuser can update the cached credentials without running a\ncommand\n.\nOn systems where\nsudo\nis the primary\nmethod of gaining superuser privileges, it is imperative to avoid syntax\nerrors in the security policy configuration files. For the default security\npolicy,\nsudoers(5)\n, changes to the configuration files\nshould be made using the\nvisudo(8)\nutility which will\nensure that no syntax errors are introduced.\nWhen invoked as\nsudoedit\n, the\n-e\noption (described below), is implied.\nSecurity policies and audit plugins may log successful and failed\nattempts to run\nsudo\n. If an I/O plugin is\nconfigured, the running\ncommand\n's input and output may\nbe logged as well.\nThe options are as follows:\n-A\n,\n--askpass\nNormally, if\nsudo\nrequires a password, it will\nread it from the user's terminal. If the\n-A\n(\naskpass\n)\noption is specified, a (possibly graphical) helper program is executed to\nread the user's password and output the password to the standard output.\nIf the\nSUDO_ASKPASS\nenvironment variable is set,\nit specifies the path to the helper program. Otherwise, if\nsudo.conf(5)\ncontains a line specifying the askpass\nprogram, that value will be used. For example:\n# Path to askpass helper program\nPath askpass /usr/bin/ssh-askpass\nIf no askpass program is available,\nsudo\nwill exit with an error.\n-B\n,\n--bell\nRing the bell as part of the password prompt when a terminal is present.\nThis option has no effect if an askpass program is used.\n-b\n,\n--background\nRun the given\ncommand\nin the background. It is not\npossible to use shell job control to manipulate background processes\nstarted by\nsudo\n. Most interactive\ncommand\ns will fail to work properly in background\nmode.\n-C\nnum\n,\n--close-from\n=\nnum\nClose all file descriptors greater than or equal to\nnum\nbefore executing a\ncommand\n. Values less than three are not permitted.\nBy default,\nsudo\nwill close all open file\ndescriptors other than standard input, standard output, and standard error\nwhen executing a\ncommand\n. The security policy may\nrestrict the user's ability to use this option. The\nsudoers\npolicy only permits use of the\n-C\noption when the administrator has enabled the\nclosefrom_override\noption.\n-D\ndirectory\n,\n--chdir\n=\ndirectory\nRun the\ncommand\nin the specified\ndirectory\ninstead of the current working directory.\nThe security policy may return an error if the user does not have\npermission to specify the working directory.\n-E\n,\n--preserve-env\nIndicates to the security policy that the user wishes to preserve their\nexisting environment variables. The security policy may return an error if\nthe user does not have permission to preserve the environment.\n--preserve-env=list\nIndicates to the security policy that the user wishes to add the\ncomma-separated list of environment variables to those preserved from the\nuser's environment. The security policy may return an error if the user\ndoes not have permission to preserve the environment. This option may be\nspecified multiple times.\n-e\n,\n--edit\nEdit one or more\nfile\ns instead of running a\ncommand\n. In lieu of a path name, the string\n\"sudoedit\" is used when consulting the security policy. If the\nuser is authorized by the policy, the following steps are taken:\nTemporary copies are made of the files to be edited with the owner set\nto the invoking user.\nThe editor specified by the policy is run to edit the\ntemporary files. The\nsudoers\npolicy uses the\nSUDO_EDITOR\n,\nVISUAL\nand\nEDITOR\nenvironment variables (in that\norder). If none of\nSUDO_EDITOR\n,\nVISUAL\nor\nEDITOR\nare\nset, the first program listed in the\neditor\nsudoers(5)\noption is used.\nIf they have been modified, the temporary files are copied back to\ntheir original location and the temporary versions are removed.\nTo help prevent the editing of unauthorized files, the\nfollowing restrictions are enforced unless explicitly allowed by the\nsecurity policy:\nSymbolic links may not be edited (version 1.8.15 and higher).\nSymbolic links along the path to be edited are not followed when the\nparent directory is writable by the invoking user unless that user is\nroot (version 1.8.16 and higher).\nFiles located in a directory that is writable by the invoking user may\nnot be edited unless that user is root (version 1.8.16 and\nhigher).\nUsers are never allowed to edit device special files.\nIf the specified file does not exist, it will be\ncreated. Unlike most\ncommand\ns run by\nsudo\n, the editor\nis run with the invoking user's environment unmodified. If the temporary\nfile becomes empty after editing, the user will be prompted before it is\ninstalled. If, for some reason,\nsudo\nis unable\nto update a file with its edited version, the user will receive a\nwarning and the edited copy will remain in a temporary file.\n-g\ngroup\n,\n--group\n=\ngroup\nRun the\ncommand\nwith the primary group set to\ngroup\ninstead of the primary group specified by the\ntarget user's password database entry. The\ngroup\nmay\nbe either a group name or a numeric group-ID (GID) prefixed with the\n‘\n#\n’ character (e.g.,\n‘\n#0\n’ for GID 0). When running a\ncommand\nas a GID, many shells require that the\n‘\n#\n’ be escaped with a backslash\n(‘\n\\\n’). If no\n-u\noption is specified, the\ncommand\nwill be run as the invoking user. In either\ncase, the primary group will be set to\ngroup\n. The\nsudoers\npolicy permits any of the target user's groups\nto be specified via the\n-g\noption as long as the\n-P\noption is not in use.\n-H\n,\n--set-home\nRequest that the security policy set the\nHOME\nenvironment variable to the home directory specified by the target user's\npassword database entry. Depending on the policy, this may be the default\nbehavior.\n-h\n,\n--help\nDisplay a short help message to the standard output and exit.\n-h\nhost\n,\n--host\n=\nhost\nRun the\ncommand\non the specified\nhost\nif the security policy plugin supports remote\ncommand\ns. The\nsudoers\nplugin does\nnot currently support running remote\ncommand\ns. This\nmay also be used in conjunction with the\n-l\noption\nto list a user's privileges for the remote host.\n-i\n,\n--login\nRun the shell specified by the target user's password database entry as a\nlogin shell. This means that login-specific resource files such as\n.profile\n,\n.bash_profile\n,\nor\n.login\nwill be read by the shell. If a\ncommand\nis specified, it is passed to the shell as a\nsimple\ncommand\nusing the\n-c\noption. The\ncommand\nand any\narg\ns are concatenated, separated by spaces, after\nescaping each character (including white space) with a backslash\n(‘\n\\\n’) except for alphanumerics,\nunderscores, hyphens, and dollar signs. If no\ncommand\nis specified, an interactive shell is\nexecuted.\nsudo\nattempts to change to that user's\nhome directory before running the shell. The\ncommand\nis run with an environment similar to the one a user would receive at log\nin. Most shells behave differently when a\ncommand\nis\nspecified as compared to an interactive session; consult the shell's\nmanual for details. The\nCommand\nenvironment\nsection in the\nsudoers(5)\nmanual\ndocuments how the\n-i\noption affects the\nenvironment in which a\ncommand\nis run when the\nsudoers\npolicy is in use.\n-K\n,\n--remove-timestamp\nSimilar to the\n-k\noption, except that it removes\nevery cached credential for the user, regardless of the terminal or parent\nprocess ID. The next time\nsudo\nis run, a password\nmust be entered if the security policy requires authentication. It is not\npossible to use the\n-K\noption in conjunction with\na\ncommand\nor other option. This option does not\nrequire a password. Not all security policies support credential\ncaching.\n-k\n,\n--reset-timestamp\nWhen used without a\ncommand\n, invalidates the user's\ncached credentials for the current session. The next time\nsudo\nis run in the session, a password must be\nentered if the security policy requires authentication. By default, the\nsudoers\npolicy uses a separate record in the\ncredential cache for each terminal (or parent process ID if no terminal is\npresent). This prevents the\n-k\noption from\ninterfering with\nsudo\ncommands run in a different\nterminal session. See the\ntimestamp_type\noption in\nsudoers(5)\nfor more information. This option does not\nrequire a password, and was added to allow a user to revoke\nsudo\npermissions from a\n.logout\nfile.\nWhen used in conjunction with a\ncommand\nor an option that may require a password, this option will cause\nsudo\nto ignore the user's cached credentials. As\na result,\nsudo\nwill prompt for a password (if\none is required by the security policy) and will not update the user's\ncached credentials.\nNot all security policies support credential caching.\n-l\n,\n--list\nIf no\ncommand\nis specified, list the privileges for\nthe invoking user (or the\nuser\nspecified by the\n-U\noption) on the current host. A longer list\nformat is used if this option is specified multiple times and the security\npolicy supports a verbose output format.\nIf a\ncommand\nis specified and is\npermitted by the security policy for the invoking user (or the,\nuser\nspecified by the\n-U\noption) on the current host, the fully-qualified path to the\ncommand\nis displayed along with any\narg\ns. If\n-l\nis specified\nmore than once (and the security policy supports it), the matching rule\nis displayed in a verbose format along with the\ncommand\n. If a\ncommand\nis\nspecified but not allowed by the policy,\nsudo\nwill exit with a status value of 1.\n-N\n,\n--no-update\nDo not update the user's cached credentials, even if the user successfully\nauthenticates. Unlike the\n-k\nflag, existing cached\ncredentials are used if they are valid. To detect when the user's cached\ncredentials are valid (or when no authentication is required), the\nfollowing can be used:\nsudo -Nnv\nNot all security policies support credential caching.\n-n\n,\n--non-interactive\nAvoid prompting the user for input of any kind. If a password is required\nfor the\ncommand\nto run,\nsudo\nwill display an error message and exit.\n-P\n,\n--preserve-groups\nPreserve the invoking user's group vector unaltered. By default, the\nsudoers\npolicy will initialize the group vector to the\nlist of groups the target user is a member of. The real and effective\ngroup-IDs, however, are still set to match the target user.\n-p\nprompt\n,\n--prompt\n=\nprompt\nUse a custom password prompt with optional escape sequences. The following\npercent (‘\n%\n’) escape sequences are\nsupported by the\nsudoers\npolicy:\n%H\nexpanded to the host name including the domain name (only if the\nmachine's host name is fully qualified or the\nfqdn\noption is\nset in\nsudoers(5)\n)\n%h\nexpanded to the local host name without the domain name\n%p\nexpanded to the name of the user whose password is being requested\n(respects the\nrootpw\n,\ntargetpw\n, and\nrunaspw\nflags in\nsudoers(5)\n)\n%U\nexpanded to the login name of the user the\ncommand\nwill be run as (defaults to root unless\nthe\n-u\noption is also specified)\n%u\nexpanded to the invoking user's login name\n%%\ntwo consecutive ‘\n%\n’ characters\nare collapsed into a single ‘\n%\n’\ncharacter\nThe custom prompt will override the\ndefault prompt specified by either the security policy or the\nSUDO_PROMPT\nenvironment variable. On systems\nthat use PAM, the custom prompt will also override the prompt specified\nby a PAM module unless the\npassprompt_override\nflag is disabled in\nsudoers\n.\n-R\ndirectory\n,\n--chroot\n=\ndirectory\nChange to the specified root\ndirectory\n(see\nchroot(8)\n) before running the\ncommand\n. The security policy may return an error if\nthe user does not have permission to specify the root directory.\nThis option is deprecated and will be removed in a future\nversion of\nsudo\n.\n-r\nrole\n,\n--role\n=\nrole\nRun the\ncommand\nwith an SELinux security context\nthat includes the specified\nrole\n.\n-S\n,\n--stdin\nWrite the prompt to the standard error and read the password from the\nstandard input instead of using the terminal device.\n-s\n,\n--shell\nRun the shell specified by the\nSHELL\nenvironment\nvariable if it is set or the shell specified by the invoking user's\npassword database entry. If a\ncommand\nis specified,\nit is passed to the shell as a simple command using the\n-c\noption. The\ncommand\nand\nany\narg\ns are concatenated, separated by spaces,\nafter escaping each character (including white space) with a backslash\n(‘\n\\\n’) except for alphanumerics,\nunderscores, hyphens, and dollar signs. If no\ncommand\nis specified, an interactive shell is\nexecuted. Most shells behave differently when a\ncommand\nis specified as compared to an interactive\nsession; consult the shell's manual for details.\n-t\ntype\n,\n--type\n=\ntype\nRun the\ncommand\nwith an SELinux security context\nthat includes the specified\ntype\n. If no\ntype\nis specified, the default type is derived from\nthe role.\n-U\nuser\n,\n--other-user\n=\nuser\nUsed in conjunction with the\n-l\noption to list the\nprivileges for\nuser\ninstead of for the invoking\nuser. The security policy may restrict listing other users' privileges.\nWhen using the\nsudoers\npolicy, the\n-U\noption is restricted to the root user and users\nwith either the “list” priviege for the specified\nuser\nor the ability to run any\ncommand\nas root or\nuser\non the\ncurrent host.\n-T\ntimeout\n,\n--command-timeout\n=\ntimeout\nUsed to set a timeout for the\ncommand\n. If the\ntimeout expires before the\ncommand\nhas exited, the\ncommand\nwill be terminated. The security policy may\nrestrict the user's ability to set timeouts. The\nsudoers\npolicy requires that user-specified timeouts be explicitly enabled.\n-u\nuser\n,\n--user\n=\nuser\nRun the\ncommand\nas a user other than the default\ntarget user (usually\nroot\n).\nThe\nuser\nmay be either a user name or a numeric\nuser-ID (UID) prefixed with the ‘\n#\n’\ncharacter (e.g., ‘\n#0\n’ for UID 0).\nWhen running\ncommand\ns as a UID, many shells require\nthat the ‘\n#\n’ be escaped with a\nbackslash (‘\n\\\n’). Some security\npolicies may restrict UIDs to those listed in the password database. The\nsudoers\npolicy allows UIDs that are not in the password\ndatabase as long as the\ntargetpw\noption is not set.\nOther security policies may not support this.\n-V\n,\n--version\nPrint the\nsudo\nversion string as well as the\nversion string of any configured plugins. If the invoking user is already\nroot, the\n-V\noption will display the options\npassed to configure when\nsudo\nwas built; plugins\nmay display additional information such as default options.\n-v\n,\n--validate\nUpdate the user's cached credentials, authenticating the user if\nnecessary. For the\nsudoers\nplugin, this extends the\nsudo\ntimeout for another 15 minutes by default,\nbut does not run a\ncommand\n. Not all security\npolicies support cached credentials.\n--\nThe\n--\nis used to delimit the end of the\nsudo\noptions. Subsequent options are passed to the\ncommand\n.\nOptions that take a value may only be specified once unless\notherwise indicated in the description. This is to help guard against\nproblems caused by poorly written scripts that invoke\nsudo\nwith user-controlled input.\nEnvironment variables to be set for the\ncommand\nmay also be passed as options to\nsudo\nin the form\nVAR\n=\nvalue\n, for example\nLD_LIBRARY_PATH\n=\n/usr/local/pkg/lib\n.\nEnvironment variables may be subject to restrictions imposed by the security\npolicy plugin. The\nsudoers\npolicy subjects environment\nvariables passed as options to the same restrictions as existing environment\nvariables with one important difference. If the\nsetenv\noption is\nset in\nsudoers\n, the\ncommand\nto be\nrun has the\nSETENV\ntag set or the\ncommand\nmatched is\nALL\n, the\nuser may set variables that would otherwise be forbidden. See\nsudoers(5)\nfor more information.\nCOMMAND EXECUTION\n¶\nWhen\nsudo\nexecutes a\ncommand\n, the security policy specifies the execution\nenvironment for the\ncommand\n. Typically, the real and\neffective user and group and IDs are set to match those of the target user,\nas specified in the password database, and the group vector is initialized\nbased on the group database (unless the\n-P\noption\nwas specified).\nThe following parameters may be specified by security policy:\nreal and effective user-ID\nreal and effective group-ID\nsupplementary group-IDs\nthe environment list\ncurrent working directory\nfile creation mode mask (umask)\nSELinux role and type\nscheduling priority (aka nice value)\nProcess model\n¶\nThere are two distinct ways\nsudo\ncan run a\ncommand\n.\nIf an I/O logging plugin is configured to log terminal I/O, or if\nthe security policy explicitly requests it, a new pseudo-terminal\n(“pty”) is allocated and\nfork(2)\nis used to\ncreate a second\nsudo\nprocess, referred to as the\nmonitor\n. The\nmonitor\ncreates a new\nterminal session with itself as the leader and the pty as its controlling\nterminal, calls\nfork(2)\nagain, sets up the execution\nenvironment as described above, and then uses the\nexecve(2)\nsystem call to run the\ncommand\nin the child process. The\nmonitor\nexists to relay job control signals between the\nuser's terminal and the pty the\ncommand\nis being run\nin. This makes it possible to suspend and resume the\ncommand\nnormally. Without the\nmonitor\n, the\ncommand\nwould be in\nwhat POSIX terms an “orphaned process group” and it would not\nreceive any job control signals from the kernel. When the\ncommand\nexits or is terminated by a signal, the\nmonitor\npasses the\ncommand\n's exit\nstatus to the main\nsudo\nprocess and exits. After\nreceiving the\ncommand\n's exit status, the main\nsudo\nprocess passes the\ncommand\n's exit status to the security policy's close\nfunction, as well as the close function of any configured audit plugin, and\nexits. This mode is the default for sudo versions 1.9.14 and above when\nusing the sudoers policy.\nIf no pty is used,\nsudo\ncalls\nfork(2)\n, sets up the execution environment as described\nabove, and uses the\nexecve(2)\nsystem call to run the\ncommand\nin the child process. The main\nsudo\nprocess waits until the\ncommand\nhas completed, then passes the\ncommand\n's exit status to the security policy's close\nfunction, as well as the close function of any configured audit plugins, and\nexits. As a special case, if the policy plugin does not define a close\nfunction,\nsudo\nwill execute the\ncommand\ndirectly instead of calling\nfork(2)\nfirst. The\nsudoers\npolicy plugin\nwill only define a close function when I/O logging is enabled, a pty is\nrequired, an SELinux role is specified, the\ncommand\nhas an associated timeout, or the\npam_session\nor\npam_setcred\noptions are enabled. Both\npam_session\nand\npam_setcred\nare enabled\nby default on systems using PAM. This mode is the default for sudo versions\nprior to 1.9.14 when using the sudoers policy.\nOn systems that use PAM, the security policy's close function is\nresponsible for closing the PAM session. It may also log the\ncommand\n's exit status.\nSignal handling\n¶\nWhen the\ncommand\nis run as a child of the\nsudo\nprocess,\nsudo\nwill\nrelay signals it receives to the\ncommand\n. The\nSIGINT\nand\nSIGQUIT\nsignals\nare only relayed when the\ncommand\nis being run in a\nnew pty or when the signal was sent by a user process, not the kernel. This\nprevents the\ncommand\nfrom receiving\nSIGINT\ntwice each time the user enters control-C.\nSome signals, such as\nSIGSTOP\nand\nSIGKILL\n, cannot be caught and thus will not be\nrelayed to the\ncommand\n. As a general rule,\nSIGTSTP\nshould be used instead of\nSIGSTOP\nwhen you wish to suspend a\ncommand\nbeing run by\nsudo\n.\nAs a special case,\nsudo\nwill not\nrelay signals that were sent by the\ncommand\nit is\nrunning. This prevents the\ncommand\nfrom accidentally\nkilling itself. On some systems, the\nreboot(8)\nutility\nsends\nSIGTERM\nto all non-system processes other than\nitself before rebooting the system. This prevents\nsudo\nfrom relaying the\nSIGTERM\nsignal it received back to\nreboot(8)\n, which might then exit before the system was\nactually rebooted, leaving it in a half-dead state similar to single user\nmode. Note, however, that this check only applies to the\ncommand\nrun by\nsudo\nand not\nany other processes that the\ncommand\nmay create. As a\nresult, running a script that calls\nreboot(8)\nor\nshutdown(8)\nvia\nsudo\nmay cause the\nsystem to end up in this undefined state unless the\nreboot(8)\nor\nshutdown(8)\nare run using\nthe\nexec\n()\nfamily of functions instead of\nsystem\n()\n(which interposes a shell between the\ncommand\nand the\ncalling process).\nPlugins\n¶\nPlugins may be specified via\nPlugin\ndirectives\nin the\nsudo.conf(5)\nfile. They may be loaded as dynamic\nshared objects (on systems that support them), or compiled directly into the\nsudo\nbinary. If no\nsudo.conf(5)\nfile is present, or if it doesn't contain any\nPlugin\nlines,\nsudo\nwill use\nsudoers(5)\nfor the policy, auditing, and I/O logging plugins. See the\nsudo.conf(5)\nmanual for details of the\n/etc/sudo.conf\nfile and the\nsudo_plugin(5)\nmanual for more information about the\nsudo\nplugin architecture.\nEXIT VALUE\n¶\nUpon successful execution of a\ncommand\n, the\nexit status from\nsudo\nwill be the exit status of the\nprogram that was executed. If the\ncommand\nterminated\ndue to receipt of a signal,\nsudo\nwill send itself\nthe same signal that terminated the\ncommand\n.\nIf the\n-l\noption was specified without a\ncommand\n,\nsudo\nwill exit with a\nvalue of 0 if the user is allowed to run\nsudo\nand\nthey authenticated successfully (as required by the security policy). If a\ncommand\nis specified with the\n-l\noption, the exit value will only be 0 if the\ncommand\nis permitted by the security policy, otherwise\nit will be 1.\nIf there is an authentication failure, a configuration/permission\nproblem, or if the given\ncommand\ncannot be executed,\nsudo\nexits with a value of 1. In the latter case,\nthe error string is printed to the standard error. If\nsudo\ncannot\nstat(2)\none or more\nentries in the user's\nPATH\n, an error is printed to\nthe standard error. (If the directory does not exist or if it is not really\na directory, the entry is ignored and no error is printed.) This should not\nhappen under normal circumstances. The most common reason for\nstat(2)\nto return “permission denied” is if\nyou are running an automounter and one of the directories in your\nPATH\nis on a machine that is currently\nunreachable.\nSECURITY NOTES\n¶\nsudo\ntries to be safe when executing\nexternal\ncommand\ns.\nTo prevent command spoofing,\nsudo\nchecks\n\".\" and \"\" (both denoting current directory) last when\nsearching for a\ncommand\nin the user's\nPATH\n(if one or both are in the\nPATH\n). Depending on the security policy, the user's\nPATH\nenvironment variable may be modified, replaced,\nor passed unchanged to the program that\nsudo\nexecutes.\nUsers should\nnever\nbe granted\nsudo\nprivileges to execute files that are writable\nby the user or that reside in a directory that is writable by the user. If\nthe user can modify or replace the\ncommand\nthere is no\nway to limit what additional\ncommand\ns they can\nrun.\nBy default,\nsudo\nwill only\nlog the\ncommand\nit explicitly runs. If a user runs a\ncommand\nsuch as ‘\nsudo\nsu\n’ or ‘\nsudo sh\n’,\nsubsequent\ncommand\ns run from that shell are not\nsubject to\nsudo\n's security policy. The same is true\nfor\ncommand\ns that offer shell escapes (including most\neditors). If I/O logging is enabled, subsequent\ncommand\ns will have their input and/or output logged,\nbut there will not be traditional logs for those\ncommand\ns. Because of this, care must be taken when\ngiving users access to\ncommand\ns via\nsudo\nto verify that the\ncommand\ndoes not inadvertently give the user an\neffective root shell. For information on ways to address this, see the\nPreventing shell\nescapes\nsection in\nsudoers(5)\n.\nTo prevent the disclosure of potentially sensitive information,\nsudo\ndisables core dumps by default while it is\nexecuting (they are re-enabled for the\ncommand\nthat is\nrun). This historical practice dates from a time when most operating systems\nallowed set-user-ID processes to dump core by default. To aid in debugging\nsudo\ncrashes, you may wish to re-enable core dumps\nby setting “disable_coredump” to false in the\nsudo.conf(5)\nfile as follows:\nSet disable_coredump false\nSee the\nsudo.conf(5)\nmanual for more\ninformation.\nENVIRONMENT\n¶\nsudo\nutilizes the following environment\nvariables. The security policy has control over the actual content of the\ncommand\n's environment.\nEDITOR\nDefault editor to use in\n-e\n(sudoedit) mode if\nneither\nSUDO_EDITOR\nnor\nVISUAL\nis set.\nMAIL\nSet to the mail spool of the target user when the\n-i\noption is specified, or when\nenv_reset\nis enabled in\nsudoers\n(unless\nMAIL\nis present in the\nenv_keep\nlist).\nHOME\nSet to the home directory of the target user when the\n-i\nor\n-H\noptions are\nspecified, when the\n-s\noption is specified and\nset_home\nis set in\nsudoers\n, when\nalways_set_home\nis enabled in\nsudoers\n, or when\nenv_reset\nis enabled in\nsudoers\nand\nHOME\nis not present in the\nenv_keep\nlist.\nLOGNAME\nSet to the login name of the target user when the\n-i\noption is specified, when the\nset_logname\noption is enabled in\nsudoers\n, or when the\nenv_reset\noption is enabled in\nsudoers\n(unless\nLOGNAME\nis present in the\nenv_keep\nlist).\nPATH\nMay be overridden by the security policy.\nSHELL\nUsed to determine shell to run with\n-s\noption.\nSUDO_ASKPASS\nSpecifies the path to a helper program used to read the password if no\nterminal is available or if the\n-A\noption is\nspecified.\nSUDO_COMMAND\nSet to the\ncommand\nrun by sudo, including any\narg\ns. The\narg\ns are truncated\nat 4096 characters to prevent a potential execution error.\nSUDO_EDITOR\nDefault editor to use in\n-e\n(sudoedit) mode.\nSUDO_GID\nSet to the group-ID of the user who invoked sudo.\nSUDO_HOME\nSet to the home directory of the user who invoked sudo.\nSUDO_PROMPT\nUsed as the default password prompt unless the\n-p\noption was specified.\nSUDO_PS1\nIf set,\nPS1\nwill be set to its value for the\nprogram being run.\nSUDO_TTY\nSet to the terminal device of the user who invoked sudo, if one is\npresent.\nSUDO_UID\nSet to the user-ID of the user who invoked sudo.\nSUDO_USER\nSet to the login name of the user who invoked sudo.\nUSER\nSet to the same value as\nLOGNAME\n, described\nabove.\nVISUAL\nDefault editor to use in\n-e\n(sudoedit) mode if\nSUDO_EDITOR\nis not set.\nFILES\n¶\n/etc/sudo.conf\nsudo\nfront-end configuration\nEXAMPLES\n¶\nThe following examples assume a properly configured security\npolicy.\nTo get a file listing of an unreadable directory:\n$ sudo ls /usr/local/protected\nTo list the home directory of user yaz on a machine where the file\nsystem holding ~yaz is not exported as root:\n$ sudo -u yaz ls ~yaz\nTo edit the\nindex.html\nfile as user\nwww:\n$ sudoedit -u www ~www/htdocs/index.html\nTo view system logs only accessible to root and users in the adm\ngroup:\n$ sudo -g adm more /var/log/syslog\nTo run an editor as jim with a different primary group:\n$ sudoedit -u jim -g audio ~jim/sound.txt\nTo shut down a machine:\n$ sudo shutdown -r +15 \"quick reboot\"\nTo make a usage listing of the directories in the /home partition.\nThe\ncommands\nare run in a sub-shell to allow the\n‘\ncd\n’ command and file redirection to\nwork.\n$ sudo sh -c \"cd /home ; du -s * | sort -rn > USAGE\"\nDIAGNOSTICS\n¶\nError messages produced by\nsudo\ninclude:\nediting files in a writable directory is not permitted\nBy default,\nsudoedit\ndoes not\npermit editing a file when any of the parent directories are writable by the\ninvoking user. This avoids a race condition that could allow the user to\noverwrite an arbitrary file. See the\nsudoedit_checkdir\noption in\nsudoers(5)\nfor more information.\nediting symbolic links is not permitted\nBy default,\nsudoedit\ndoes not\nfollow symbolic links when opening files. See the\nsudoedit_follow\noption in\nsudoers(5)\nfor more information.\neffective uid is not 0, is sudo installed setuid root?\nsudo\nwas not run with root\nprivileges. The\nsudo\nbinary must be owned by the root\nuser and have the set-user-ID bit set. Also, it must not be located on a file\nsystem mounted with the ‘nosuid’ option or on an NFS file system\nthat maps uid 0 to an unprivileged uid.\neffective uid is not 0, is sudo on a file system with the 'nosuid'\noption set or an NFS file system without root privileges?\nsudo\nwas not run with root\nprivileges. The\nsudo\nbinary has the proper owner and\npermissions but it still did not run with root privileges. The most common\nreason for this is that the file system the\nsudo\nbinary is located on is mounted with the ‘nosuid’ option or it\nis an NFS file system that maps uid 0 to an unprivileged uid.\nfatal error, unable to load plugins\nAn error occurred while loading or initializing the\nplugins specified in\nsudo.conf(5)\n.\ninvalid environment variable name\nOne or more environment variable names specified via\nthe\n-E\noption contained an equal sign\n(‘\n=\n’). The arguments to the\n-E\noption should be environment variable names without\nan associated value.\nno password was provided\nWhen\nsudo\ntried to read the\npassword, it did not receive any characters. This may happen if no terminal is\navailable (or the\n-S\noption is specified) and the\nstandard input has been redirected from\n/dev/null\n.\na terminal is required to read the password\nsudo\nneeds to read the\npassword but there is no mechanism available for it to do so. Remote commands\nrun via\nssh(1)\ndo not have a terminal available by default;\npassing the\n-t\noption to\nssh(1)\nwill\ncause it to allocate a terminal which should allow\nsudo\nto read the password. To allow\nsudo\nto run local commands without a terminal, the\n-S\noption can be used to read a password from the\nstandard input, or an askpass helper can be configured via either the\nsudo.conf(5)\nfile or by setting the\nSUDO_ASKPASS\nenvironment variable.\nno writable temporary directory found\nsudoedit\nwas unable to find a\nusable temporary directory in which to store its intermediate files.\nThe “no new privileges” flag is set, which prevents\nsudo from running as root.\nsudo\nwas run by a process that\nhas the Linux “no new privileges” flag is set. This causes the\nset-user-ID bit to be ignored when running an executable, which will prevent\nsudo\nfrom functioning. The most likely cause for this\nis running\nsudo\nwithin a container that sets this\nflag. Check the documentation to see if it is possible to configure the\ncontainer such that the flag is not set.\nsudo must be owned by uid 0 and have the setuid bit set\nsudo\nwas not run with root\nprivileges. The\nsudo\nbinary does not have the correct\nowner or permissions. It must be owned by the root user and have the\nset-user-ID bit set.\nsudoedit is not supported on this platform\nIt is only possible to run\nsudoedit\non systems that support setting the effective\nuser-ID.\ntimed out reading password\nThe user did not enter a password before the password\ntimeout (5 minutes by default) expired.\nyou do not exist in the passwd database\nYour user-ID does not appear in the system passwd\ndatabase.\nyou may not specify environment variables in edit mode\nIt is only possible to specify environment variables\nwhen running a\ncommand\n. When editing a file, the editor\nis run with the user's environment unmodified.\nSEE ALSO\n¶\nsu(1)\n,\nstat(2)\n,\nlogin_cap(3)\n,\npasswd(5)\n,\nsudo.conf(5)\n,\nsudo_plugin(5)\n,\nsudoers(5)\n,\nsudoers_timestamp(5)\n,\nsudoreplay(8)\n,\nvisudo(8)\nHISTORY\n¶\nSee the HISTORY.md file in the\nsudo\ndistribution (\nhttps://www.sudo.ws/about/history/\n) for a brief history of\nsudo.\nAUTHORS\n¶\nMany people have worked on\nsudo\nover the\nyears; this version consists of code written primarily by:\nTodd C. Miller\nSee the CONTRIBUTORS.md file in the\nsudo\ndistribution (\nhttps://www.sudo.ws/about/contributors/\n) for an exhaustive\nlist of people who have contributed to\nsudo\n.\nCAVEATS\n¶\nThere is no easy way to prevent a user from gaining a root shell\nif that user is allowed to run arbitrary\ncommands\nvia\nsudo\n. Also, many programs (such as editors) allow\nthe user to run\ncommand\ns via shell escapes, thus\navoiding\nsudo\n's checks. However, on most systems it\nis possible to prevent shell escapes with the\nsudoers(5)\nplugin's\nnoexec\nfunctionality.\nIt is not meaningful to run the\n‘\ncd\n’\ncommand\ndirectly via sudo, e.g.,\n$ sudo cd /usr/local/protected\nsince when the\ncommand\nexits the parent\nprocess (your shell) will still be the same. The\n-D\noption can be used to run a\ncommand\nin a specific\ndirectory\n.\nRunning shell scripts via\nsudo\ncan expose\nthe same kernel bugs that make set-user-ID shell scripts unsafe on some\noperating systems (if your OS has a /dev/fd/ directory, set-user-ID shell\nscripts are generally safe).\nBUGS\n¶\nIf you believe you have found a bug in\nsudo\n, you can either file a bug report in the sudo\nbug database,\nhttps://bugzilla.sudo.ws/,\nor open an issue at\nhttps://github.com/sudo-project/sudo/issues.\nIf you would prefer to use\nemail, messages may be sent to the sudo-workers mailing list,\nhttps://www.sudo.ws/mailman/listinfo/sudo-workers\n(public) or\n<sudo@sudo.ws> (private).\nPlease do not report security vulnerabilities through public\nGitHub issues, Bugzilla or mailing lists. Instead, report them via email to\n<Todd.Miller@sudo.ws>. You may encrypt your message with PGP if you\nwould like, using the key found at\nhttps://www.sudo.ws/dist/PGPKEYS\n.\nSUPPORT\n¶\nLimited free support is available via the sudo-users mailing list,\nsee\nhttps://www.sudo.ws/mailman/listinfo/sudo-users\nto subscribe or search\nthe archives.\nDISCLAIMER\n¶\nsudo\nis provided “AS IS” and\nany express or implied warranties, including, but not limited to, the\nimplied warranties of merchantability and fitness for a particular purpose\nare disclaimed. See the LICENSE.md file distributed with\nsudo\nor\nhttps://www.sudo.ws/about/license/\nfor\ncomplete details.\nJune 7, 2025\nSudo 1.9.17p2\nSource file:\nsudo.8.en.gz (from\nsudo 1.9.17p2-1\n)\nSource last updated:\n2025-08-17T10:41:14Z\nConverted to HTML:\n2025-08-17T15:15:01Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/sudo/sudo.8.en.html"}}
{"text": "crontab(1) — cron — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\ncron\n/ crontab(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nDEBIAN SPECIFIC\nHIGHLIGHTING THE OUTPUT OF CRONTAB -L\nSEE ALSO\nFILES\nSTANDARDS\nDIAGNOSTICS\nAUTHORS\nCOPYRIGHT\nother versions\ntrixie\n3.0pl1-197\ntrixie\n0.11-23\ntesting\n0.11-23\ntesting\n3.0pl1-200\nunstable\n0.11-23\nunstable\n3.0pl1-200\nother languages\nDeutsch\nEnglish\nfrançais\n日本語\npolski\nromână\nTürkçe\nother sections\n1 (\nprogs\n)\n5 (\nformats\n)\nconflicting packages\nbcron\ncron\ncronie\nsystemd-cron\nScroll to navigation\nCRONTAB(1)\ncrontab User Manual\nCRONTAB(1)\nNAME\n¶\ncrontab - maintain crontab files for individual users (Vixie\nCron)\nSYNOPSIS\n¶\ncrontab\n[\n-h\n]\ncrontab\n[\n-u\nuser\n]\n[\n-n\n]\nfile\ncrontab\n[\n-u\nuser\n]\n[\n-i\n]\n{\n-e\n|\n-l\n|\n-r\n}\nDESCRIPTION\n¶\ncrontab\nis the program used to install, deinstall or list\nthe tables used to drive the\ncron(8)\ndaemon in Vixie Cron. Each user\ncan have their own crontab, and though these are files in\n/var/spool/cron/crontabs\n, they are not intended to be edited\ndirectly.\nIf the\n/etc/cron.allow\nfile exists, then you must be listed\n(one user per line) therein in order to be allowed to use this command. If\nthe\n/etc/cron.allow\nfile does not exist but the\n/etc/cron.deny\nfile does exist, then you must not be listed in the\n/etc/cron.deny\nfile in order to use this command.\nPlease check that the permissions of the file\n/etc/cron.allow\nmake it readable by the users which are allowed. For\nexample, permissions rw- r-- r-- (octal 644) should be OK.\nIf neither of these files exists, then depending on site-dependent\nconfiguration parameters, only the super user will be allowed to use this\ncommand, or all users will be able to use this command.\nIf both files exist then\n/etc/cron.allow\ntakes precedence.\nWhich means that\n/etc/cron.deny\nis not considered and your user must\nbe listed in\n/etc/cron.allow\nin order to be able to use the\ncrontab.\nRegardless of the existence of any of these files, the root\nadministrative user is always allowed to setup a crontab. For standard\nDebian systems, all users may use this command.\nIf the\n-h\noption is given,\ncrontab\nshows a help\nmessage and quits immediately.\nIf the\n-u\noption is given, it specifies the name of the\nuser whose crontab is to be used (when listing) or modified (when editing).\nIf this option is not given,\ncrontab\nexamines \"your\"\ncrontab file, i.e., the crontab file of the person executing the command.\nNote that\nsu\n(8) can confuse\ncrontab\nand that if you are\nrunning inside of\nsu\n(8) you should always use the\n-u\noption\nfor safety's sake.\nThe first form of this command is used to install a new crontab\nfrom some named file or standard input if the pseudo-filename ``-'' is\ngiven.\nIf the\n-n\noption is given, it means \"dry run\":\ncrontab\nexamines \"your\" crontab for its syntax, and outputs\na success message if this syntax is correct, but nothing is written to any\ncrontab.\nThe\n-l\noption causes the current crontab to be displayed on\nstandard output. See the note under the section called “DEBIAN\nSPECIFIC” below.\nThe\n-r\noption causes the current crontab to be removed.\nThe\n-e\noption is used to edit the current crontab using\nsensible-editor(1)\n. After you exit from the editor, the modified\ncrontab will be installed automatically.\nThe\n-i\noption modifies the\n-r\noption to prompt the\nuser for a 'y/Y' response before actually removing the crontab.\nDEBIAN SPECIFIC\n¶\nThe \"out-of-the-box\" behaviour for\ncrontab -l\nis\nto display the three line \"DO NOT EDIT THIS FILE\" header that is\nplaced at the beginning of the crontab when it is installed. The problem is\nthat it makes the sequence\ncrontab -l | crontab -\nnon-idempotent — you keep adding copies of the header. This\ncauses pain to scripts that use sed to edit a crontab. Therefore, the\ndefault behaviour of the\n-l\noption has been changed to not output\nsuch header. You may obtain the original behaviour by setting the\nenvironment variable\nCRONTAB_NOHEADER\nto 'N', which will cause the\ncrontab -l\ncommand to emit the extraneous header.\nHIGHLIGHTING THE OUTPUT OF CRONTAB -L\n¶\nThe command\ncrontab -l\noutputs plain text. When a tty can\nsupport ANSI sequences to colourise this text, one can highlight the output,\nby calling:\ncrontab -l | spc -t crontab\nwhen the ttybackground is\ndark, or\ncrontab -l | spc -t crontab-light\nwhen this background is\nlight.\nThe highlighting scheme can be modified by using customised\nversions of files\n/etc/supercat/spcrc-crontab*\nOne can also colourise this text with the program\nbatcat(1)\nprovided by the package\nbat\n, here is an example:\ncrontab -l | batcat --language Crontab\nSEE ALSO\n¶\ncrontab(5)\n,\ncron(8)\n,\nspc(1)\nFILES\n¶\n/etc/cron.allow\n,\n/etc/cron.deny\nThe files\n/etc/cron.allow\nand\n/etc/cron.deny\nif they exist, must be either world-readable, or\nreadable by group ``crontab''. If they are not, then\ncron(8)\nwill deny\naccess to all users until the permissions are fixed.\n/var/spool/cron/crontabs\nThere is one file for each user's crontab under the\n/var/spool/cron/crontabs\ndirectory. Users are not allowed to edit the\nfiles under that directory directly to ensure that only users allowed by the\nsystem to run periodic tasks can add them, and only syntactically correct\ncrontabs will be written there. This is enforced by having the directory\nwritable only by the ``crontab'' group and configuring\ncrontab\ncommand\nwith the setgid bid set for that specific group.\nSTANDARDS\n¶\nThe\ncrontab\ncommand conforms to IEEE Std1003.2-1992\n(``POSIX''). This new command syntax differs from previous versions of Vixie\nCron, as well as from the classic SVR3 syntax.\nDIAGNOSTICS\n¶\nA fairly informative usage message appears if you run it with a\nbad command line.\ncron(8)\nrequires that each entry in a crontab end in a\nnewline character. If the last entry in a crontab is missing the newline,\ncron(8)\nwill consider the crontab (at least partially) broken and\nrefuse to install it.\nThe files under\n/var/spool/cron/crontabs\nare named based on\nthe user's account name. Crontab jobs will not be run for users whose\naccounts have been renamed either due to changes in the local system or\nbecause they are managed through a central user database (external to the\nsystem, for example an LDAP directory).\nAUTHORS\n¶\nPaul Vixie\n<paul@vix.com>\nWrote this manpage (1994).\nSteve Greenland\n<stevegr@debian.org>\nMaintained the package (1996-2005).\nJavier Fernández-Sanguino Peña\n<jfs@debian.org>\nMaintained the package (2005-2014).\nChristian Kastner\n<ckk@debian.org>\nMaintained the package (2010-2016).\nGeorges Khaznadar\n<georgesk@debian.org>\nMaintained the package (2022-2024).\nCOPYRIGHT\n¶\nCopyright © 1994 Paul Vixie\nDistribute freely, except: don't remove my name from the source or\ndocumentation (don't take credit for my work), mark your changes (don't get\nme blamed for your possible bugs), don't alter or remove this notice. May be\nsold if buildable source is provided to buyer. No warranty of any kind,\nexpress or implied, is included with this software; use at your own risk,\nresponsibility for damages (if any) to anyone resulting from the use of this\nsoftware rests entirely with the user.\nSince year 1994, many modifications were made in this manpage,\nauthored by Debian Developers which maintained cron; above is a short list,\nmore information can be found in the file\n/usr/share/doc/cron/copyright\n.\n10/05/2025\ncrontab\nSource file:\ncrontab.1.en.gz (from\ncron 3.0pl1-200\n)\nSource last updated:\n2025-10-05T18:36:58Z\nConverted to HTML:\n2025-10-12T15:06:12Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/cron/crontab.1.en.html"}}
{"text": "journalctl(1) — systemd — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\nsystemd\n/ journalctl(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nSOURCE OPTIONS\nFILTERING OPTIONS\nOUTPUT OPTIONS\nPAGER CONTROL OPTIONS\nFORWARD SECURE SEALING (FSS) OPTIONS\nCOMMANDS\nEXIT STATUS\nENVIRONMENT\nEXAMPLES\nSEE ALSO\nNOTES\nother versions\ntrixie\n257.9-1~deb13u1\ntesting\n259~rc1-1\nunstable\n259~rc2-1\nother languages\nDeutsch\nEnglish\nfrançais\nукраїнська\n中文 (zh-CN)\n繁體中文 (zh-TW)\nScroll to navigation\nJOURNALCTL(1)\njournalctl\nJOURNALCTL(1)\nNAME\n¶\njournalctl - Print log entries from the systemd journal\nSYNOPSIS\n¶\njournalctl\n[OPTIONS...] [MATCHES...]\nDESCRIPTION\n¶\njournalctl\nis used to print the log entries stored in the\njournal by\nsystemd-journald.service(8)\nand\nsystemd-journal-remote.service(8)\n.\nIf called without parameters, it will show the contents of the\njournal accessible to the calling user, starting with the oldest entry\ncollected.\nIf one or more match arguments are passed, the output is filtered\naccordingly. A match is in the format \"FIELD=VALUE\", e.g.\n\"_SYSTEMD_UNIT=httpd.service\", referring to the components of a\nstructured journal entry. See\nsystemd.journal-fields(7)\nfor a list of\nwell-known fields. If multiple matches are specified matching different\nfields, the log entries are filtered by both, i.e. the resulting output will\nshow only entries matching all the specified matches of this kind. If two\nmatches apply to the same field, then they are automatically matched as\nalternatives, i.e. the resulting output will show entries matching any of\nthe specified matches for the same field. Finally, the character\n\"+\" may appear as a separate word between other terms on the\ncommand line. This causes all matches before and after to be combined in a\ndisjunction (i.e. logical OR).\nIt is also possible to filter the entries by specifying an\nabsolute file path as an argument. The file path may be a file or a symbolic\nlink and the file must exist at the time of the query. If a file path refers\nto an executable binary, an \"_EXE=\" match for the canonicalized\nbinary path is added to the query. If a file path refers to an executable\nscript, a \"_COMM=\" match for the script name is added to the\nquery. If a file path refers to a device node, \"_KERNEL_DEVICE=\"\nmatches for the kernel name of the device and for each of its ancestor\ndevices is added to the query. Symbolic links are dereferenced, kernel names\nare synthesized, and parent devices are identified from the environment at\nthe time of the query. In general, a device node is the best proxy for an\nactual device, as log entries do not usually contain fields that identify an\nactual device. For the resulting log entries to be correct for the actual\ndevice, the relevant parts of the environment at the time the entry was\nlogged, in particular the actual device corresponding to the device node,\nmust have been the same as those at the time of the query. Because device\nnodes generally change their corresponding devices across reboots,\nspecifying a device node path causes the resulting entries to be restricted\nto those from the current boot.\nAdditional constraints may be added using options\n--boot\n,\n--unit=\n, etc., to further limit what entries will be shown (logical\nAND).\nOutput is interleaved from all accessible journal files, whether\nthey are rotated or currently being written, and regardless of whether they\nbelong to the system itself or are accessible user journals. The\n--header\noption can be used to identify which files\nare\nbeing\nshown.\nThe set of journal files which will be used can be modified using\nthe\n--user\n,\n--system\n,\n--directory=\n, and\n--file=\noptions, see below.\nAll users are granted access to their private per-user journals.\nHowever, by default, only root and users who are members of a few special\ngroups are granted access to the system journal and the journals of other\nusers. Members of the groups \"systemd-journal\", \"adm\",\nand \"wheel\" can read all journal files. Note that the two latter\ngroups traditionally have additional privileges specified by the\ndistribution. Members of the \"wheel\" group can often perform\nadministrative tasks.\nThe output is paged through\nless\nby default, and long lines\nare \"truncated\" to screen width. The hidden part can be viewed by\nusing the left-arrow and right-arrow keys. Paging can be disabled; see the\n--no-pager\noption and the \"Environment\" section below.\nWhen outputting to a tty, lines are colored according to priority:\nlines of level ERROR and higher are colored red; lines of level WARNING are\ncolored yellow; lines of level NOTICE are highlighted; lines of level INFO\nare displayed normally; lines of level DEBUG are colored grey.\nTo write entries\nto\nthe journal, a few methods may be used.\nIn general, output from systemd units is automatically connected to the\njournal, see\nsystemd-journald.service(8)\n. In addition,\nsystemd-cat(1)\nmay be used to send messages to the journal\ndirectly.\nSOURCE OPTIONS\n¶\nThe following options control where to read journal records\nfrom:\n--system\n,\n--user\nShow messages from system services and the kernel (with\n--system\n). Show messages from service of current user (with\n--user\n). If neither is specified, show all messages that the user can\nsee.\nThe\n--user\noption affects how\n--unit=\narguments are\ntreated. See\n--unit=\n.\nNote that\n--user\nonly works if persistent logging is\nenabled, via the\nStorage=\nsetting in\njournald.conf(5)\n.\nAdded in version 205.\n-M\n,\n--machine=\nShow messages from a running, local container. Specify a\ncontainer name to connect to.\nAdded in version 209.\n-m\n,\n--merge\nShow entries interleaved from all available journals,\nincluding remote ones.\nAdded in version 190.\n-D\nDIR\n,\n--directory=\nDIR\nTakes a directory path as argument. If specified,\njournalctl will operate on the specified journal directory\nDIR\ninstead\nof the default runtime and system journal paths.\nAdded in version 187.\n-i\nGLOB\n,\n--file=\nGLOB\nTakes a file glob as an argument. If specified,\njournalctl will operate on the specified journal files matching\nGLOB\ninstead of the default runtime and system journal paths. May be specified\nmultiple times, in which case files will be suitably interleaved.\nAdded in version 205.\n--root=\nROOT\nTakes a directory path as an argument. If specified,\njournalctl\nwill operate on journal directories and catalog file\nhierarchy underneath the specified directory instead of the root directory\n(e.g.\n--update-catalog\nwill create\nROOT\n/var/lib/systemd/catalog/database, and journal files under\nROOT\n/run/journal/ or\nROOT\n/var/log/journal/ will be displayed).\nAdded in version 201.\n--image=\nIMAGE\nTakes a path to a disk image file or block device node.\nIf specified,\njournalctl\nwill operate on the file system in the\nindicated disk image. This option is similar to\n--root=\n, but operates\non file systems stored in disk images or block devices, thus providing an easy\nway to extract log data from disk images. The disk image should either contain\njust a file system or a set of file systems within a GPT partition table,\nfollowing the\nUAPI.2 Discoverable Partitions Specification\n[1]. For\nfurther information on supported disk images, see\nsystemd-nspawn(1)\n's\nswitch of the same name.\nAdded in version 247.\n--image-policy=\npolicy\nTakes an image policy string as argument, as per\nsystemd.image-policy(7)\n. The policy is enforced when operating on the\ndisk image specified via\n--image=\n, see above. If not specified,\ndefaults to the \"*\" policy, i.e. all recognized file systems in the\nimage are used.\n--namespace=\nNAMESPACE\nTakes a journal namespace identifier string as argument.\nIf not specified, the data collected by the default namespace is shown. If\nspecified, shows the log data of the specified namespace instead. If the\nnamespace is specified as \"*\" data from all namespaces is shown,\ninterleaved. If the namespace identifier is prefixed with \"+\" data\nfrom the specified namespace and the default namespace is shown, interleaved,\nbut no other. For details about journal namespaces see\nsystemd-journald.service(8)\n.\nAdded in version 245.\nFILTERING OPTIONS\n¶\nThe following options control how to filter journal records:\n-S\n,\n--since=\n,\n-U\n,\n--until=\nStart showing entries on or newer than the specified\ndate, or on or older than the specified date, respectively. Date\nspecifications should be of the format \"2012-10-30 18:17:16\". If the\ntime part is omitted, \"00:00:00\" is assumed. If only the seconds\ncomponent is omitted, \":00\" is assumed. If the date component is\nomitted, the current day is assumed. Alternatively the strings\n\"yesterday\", \"today\", \"tomorrow\" are understood,\nwhich refer to 00:00:00 of the day before the current day, the current day, or\nthe day after the current day, respectively. \"now\" refers to the\ncurrent time. Finally, relative times may be specified, prefixed with\n\"-\" or \"+\", referring to times before or after the current\ntime, respectively. For complete time and date specification, see\nsystemd.time(7)\n. Note that\n--output=short-full\nprints timestamps\nthat follow precisely this format.\nAdded in version 195.\n-c\n,\n--cursor=\nStart showing entries from the location in the journal\nspecified by the passed cursor.\nAdded in version 193.\n--after-cursor=\nStart showing entries from the location in the journal\nafter\nthe location specified by the passed cursor. The cursor is shown\nwhen the\n--show-cursor\noption is used.\nAdded in version 206.\n--cursor-file=\nFILE\nIf\nFILE\nexists and contains a cursor, start\nshowing entries\nafter\nthis location. Otherwise, show entries according\nto the other given options. At the end, write the cursor of the last entry to\nFILE\n. Use this option to continually read the journal by sequentially\ncalling\njournalctl\n.\nAdded in version 242.\n-b\n[[\nID\n][\n±offset\n]|\nall\n],\n--boot\n[=[\nID\n][\n±offset\n]|\nall\n]\nShow messages from a specific boot. This will add a match\nfor \"_BOOT_ID=\".\nThe argument may be empty, in which case logs for the current boot\nwill be shown.\nIf the boot ID is omitted, a positive\noffset\nwill look up\nthe boots starting from the beginning of the journal, and an\nequal-or-less-than zero\noffset\nwill look up boots starting from the\nend of the journal. Thus,\n1\nmeans the first boot found in the journal\nin chronological order,\n2\nthe second and so on; while\n-0\nis\nthe last boot,\n-1\nthe boot before last, and so on. An empty\noffset\nis equivalent to specifying\n-0\n, except when the current\nboot is not the last boot (e.g. because\n--directory=\nwas specified to\nlook at logs from a different machine).\nIf the 32-character\nID\nis specified, it may optionally be\nfollowed by\noffset\nwhich identifies the boot relative to the one\ngiven by boot\nID\n. Negative values mean earlier boots and positive\nvalues mean later boots. If\noffset\nis not specified, a value of zero\nis assumed, and the logs for the boot given by\nID\nare shown.\nThe special argument\nall\ncan be used to negate the effect\nof an earlier use of\n-b\n.\nAdded in version 186.\n-u\n,\n--unit=\nUNIT\n|\nPATTERN\nShow messages for the specified systemd unit\nUNIT\n(such as a service unit), or for any of the units matched by\nPATTERN\n.\nIf a pattern is specified, a list of unit names found in the journal is\ncompared with the specified pattern and all that match are used. For each unit\nname, a match is added for messages from the unit\n(\"_SYSTEMD_UNIT=\nUNIT\n\"), along with additional matches for\nmessages from systemd and messages about coredumps for the specified unit. A\nmatch is also added for \"_SYSTEMD_SLICE=\nUNIT\n\", such that if\nthe provided\nUNIT\nis a\nsystemd.slice(5)\nunit, all logs of\nchildren of the slice will be shown.\nWith\n--user\n, all\n--unit=\narguments will be converted\nto match user messages as if specified with\n--user-unit=\n.\nThis parameter can be specified multiple times.\nAdded in version 195.\n--user-unit=\nShow messages for the specified user session unit. This\nwill add a match for messages from the unit (\"_SYSTEMD_USER_UNIT=\"\nand \"_UID=\") and additional matches for messages from session\nsystemd and messages about coredumps for the specified unit. A match is also\nadded for \"_SYSTEMD_USER_SLICE=\nUNIT\n\", such that if the\nprovided\nUNIT\nis a\nsystemd.slice(5)\nunit, all logs of children\nof the unit will be shown.\nThis parameter can be specified multiple times.\nAdded in version 198.\n-I\n,\n--invocation=\nID\n[\n±offset\n]\n|\noffset\nShow messages from a specific invocation of unit. This\nwill add a match for \"_SYSTEMD_INVOCATION_ID=\",\n\"OBJECT_SYSTEMD_INVOCATION_ID=\", \"INVOCATION_ID=\",\n\"USER_INVOCATION_ID=\".\nA positive\noffset\nwill look up the invocations of a systemd\nunit from the beginning of the journal, and zero or a negative offset will\nlook up invocations starting from the end of the journal. Thus,\n1\nmeans the first invocation found in the journal in chronological order,\n2\nthe second and so on; while\n0\nis the latest invocation,\n-1\nthe invocation before the latest, and so on.\nIf the 32-character\nID\nis specified, it may optionally be\nfollowed by\n±offset\nwhich identifies the invocation relative\nto the one given by invocation\nID\n. Negative values mean earlier\ninvocations and positive values mean later invocations. If\n±offset\nis not specified, a value of zero is assumed, and the\nlogs for the invocation given by\nID\nwill be shown.\n-I\nis equivalent to\n--invocation=0\n, and logs for the\nlatest invocation will be shown.\nWhen an offset is specified, a unit name must be specified with\n-u/--unit=\nor\n--user-unit=\noption.\nWhen specified with\n-b/--boot=\n, then invocations are\nsearched within the specified boot.\nAdded in version 257.\n-t\n,\n--identifier=\nSYSLOG_IDENTIFIER\nShow messages for the specified syslog identifier\nSYSLOG_IDENTIFIER\n.\nThis parameter can be specified multiple times.\nAdded in version 217.\n-T\n,\n--exclude-identifier=\nSYSLOG_IDENTIFIER\nExclude messages for the specified syslog identifier\nSYSLOG_IDENTIFIER\n.\nThis parameter can be specified multiple times.\nAdded in version 256.\n-p\n,\n--priority=\nFilter output by message priorities or priority ranges.\nTakes either a single numeric or textual log level (i.e. between\n0/\"emerg\" and 7/\"debug\"), or a range of numeric/text log\nlevels in the form FROM..TO. The log levels are the usual syslog log levels as\ndocumented in\nsyslog(3)\n, i.e. \"emerg\" (0),\n\"alert\" (1), \"crit\" (2),\n\"err\" (3), \"warning\" (4),\n\"notice\" (5), \"info\" (6),\n\"debug\" (7). If a single log level is specified, all messages\nwith this log level or a lower (hence more important) log level are shown. If\na range is specified, all messages within the range are shown, including both\nthe start and the end value of the range. This will add \"PRIORITY=\"\nmatches for the specified priorities.\nAdded in version 188.\n--facility=\nFilter output by syslog facility. Takes a comma-separated\nlist of numbers or facility names. The names are the usual syslog facilities\nas documented in\nsyslog(3)\n.\n--facility=help\nmay be used to\ndisplay a list of known facility names and exit.\nAdded in version 245.\n-g\n,\n--grep=\nFilter output to entries where the\nMESSAGE=\nfield\nmatches the specified regular expression. PERL-compatible regular expressions\nare used, see\npcre2pattern(3)\nfor a detailed description of the syntax.\nIf the pattern is all lowercase, matching is case insensitive.\nOtherwise, matching is case sensitive. This can be overridden with the\n--case-sensitive\noption, see below.\nWhen used with\n--lines=\n(not prefixed with \"+\"),\n--reverse\nis implied.\nAdded in version 237.\n--case-sensitive\n[=BOOLEAN]\nMake pattern matching case sensitive or case insensitive.\nAdded in version 237.\n-k\n,\n--dmesg\nShow only kernel messages. This adds the match\n\"_TRANSPORT=kernel\". This implies\n--boot=0\nunless explicitly\nspecified otherwise.\nAdded in version 205.\nOUTPUT OPTIONS\n¶\nThe following options control how journal records are printed:\n-o\n,\n--output=\nControls the formatting of the journal entries that are\nshown. Takes one of the following options:\nshort\nis the default and generates an output that is mostly\nidentical to the formatting of classic syslog files, showing one line per\njournal entry.\nAdded in version 206.\nshort-full\nis very similar, but shows timestamps in the format the\n--since=\nand\n--until=\noptions accept. Unlike the timestamp\ninformation shown in\nshort\noutput mode this mode includes weekday, year\nand timezone information in the output, and is locale-independent.\nAdded in version 232.\nshort-iso\nis very similar, but shows timestamps in the\nRFC\n3339\n[2] profile of ISO 8601.\nAdded in version 206.\nshort-iso-precise\nas for\nshort-iso\nbut includes full microsecond\nprecision.\nAdded in version 234.\nshort-precise\nis very similar, but shows classic syslog timestamps with\nfull microsecond precision.\nAdded in version 207.\nshort-monotonic\nis very similar, but shows monotonic timestamps instead\nof wallclock timestamps.\nAdded in version 206.\nshort-delta\nas for\nshort-monotonic\nbut includes the time\ndifference to the previous entry. Maybe unreliable time differences are marked\nby a \"*\".\nAdded in version 252.\nshort-unix\nis very similar, but shows seconds passed since January\n1st 1970 UTC instead of wallclock timestamps (\"UNIX time\"). The time\nis shown with microsecond accuracy.\nAdded in version 230.\nverbose\nshows the full-structured entry items with all fields.\nAdded in version 206.\nexport\nserializes the journal into a binary (but mostly\ntext-based) stream suitable for backups and network transfer (see\nJournal\nExport Format\n[3] for more information). To import the binary stream back\ninto native journald format use\nsystemd-journal-remote(8)\n.\nAdded in version 206.\njson\nformats entries as JSON objects, separated by newline\ncharacters (see\nJournal JSON Format\n[4] for more information). Field\nvalues are generally encoded as JSON strings, with three exceptions:\n1.Fields larger than 4096 bytes are encoded as\nnull\nvalues. (This may be turned off by passing\n--all\n, but be\naware that this may allocate overly long JSON objects.)\n2.Journal entries permit non-unique fields within the\nsame log entry. JSON does not allow non-unique fields within objects. Due to\nthis, if a non-unique field is encountered a JSON array is used as field\nvalue, listing all field values as elements.\n3.Fields containing non-printable or non-UTF8 bytes are\nencoded as arrays containing the raw bytes individually formatted as unsigned\nnumbers.\nNote that this encoding is reversible (with the exception of the\nsize limit).\nAdded in version 206.\njson-pretty\nformats entries as JSON data structures, but formats them\nin multiple lines in order to make them more readable by humans.\nAdded in version 206.\njson-sse\nformats entries as JSON data structures, but wraps them\nin a format suitable for\nServer-Sent Events\n[5].\nAdded in version 206.\njson-seq\nformats entries as JSON data structures, but prefixes\nthem with an ASCII Record Separator character (0x1E) and suffixes them with an\nASCII Line Feed character (0x0A), in accordance with\nJavaScript Object\nNotation (JSON) Text Sequences\n[6] (\"application/json-seq\").\nAdded in version 240.\ncat\ngenerates a very terse output, only showing the actual\nmessage of each journal entry with no metadata, not even a timestamp. If\ncombined with the\n--output-fields=\noption will output the listed fields\nfor each log record, instead of the message.\nAdded in version 206.\nwith-unit\nsimilar to\nshort-full\n, but prefixes the unit and\nuser unit names instead of the traditional syslog identifier. Useful when\nusing templated instances, as it will include the arguments in the unit names.\nAdded in version 239.\n--truncate-newline\nTruncate each log message at the first newline character\non output, so that only the first line of each message is displayed.\nAdded in version 254.\n--output-fields=\nA comma separated list of the fields which should be\nincluded in the output. This has an effect only for the output modes which\nwould normally show all fields (\nverbose\n,\nexport\n,\njson\n,\njson-pretty\n,\njson-sse\nand\njson-seq\n), as well as on\ncat\n. For the former, the \"__CURSOR\",\n\"__REALTIME_TIMESTAMP\", \"__MONOTONIC_TIMESTAMP\", and\n\"_BOOT_ID\" fields are always printed.\nAdded in version 236.\n-n\n,\n--lines=\nShow the most recent journal events and limit the number\nof events shown. The argument is a positive integer or \"all\" to\ndisable the limit. Additionally, if the number is prefixed with \"+\",\nthe oldest journal events are used instead. The default value is 10 if no\nargument is given.\nIf\n--follow\nis used, this option is implied. When not\nprefixed with \"+\" and used with\n--grep=\n,\n--reverse\nis implied.\n-r\n,\n--reverse\nReverse output so that the newest entries are displayed\nfirst.\nAdded in version 198.\n--show-cursor\nThe cursor is shown after the last entry after two\ndashes:\n-- cursor: s=0639...\nThe format of the cursor is private and subject to change.\nAdded in version 209.\n--utc\nExpress time in Coordinated Universal Time (UTC).\nAdded in version 217.\n-x\n,\n--catalog\nAugment log lines with explanation texts from the message\ncatalog. This will add explanatory help texts to log messages in the output\nwhere this is available. These short help texts will explain the context of an\nerror or log event, possible solutions, as well as pointers to support forums,\ndeveloper documentation, and any other relevant manuals. Note that help texts\nare not available for all messages, but only for selected ones. For more\ninformation on the message catalog, see\nJournal Message Catalogs\n[7].\nNote: when attaching\njournalctl\noutput to bug reports,\nplease do\nnot\nuse\n-x\n.\nAdded in version 196.\n-W\n,\n--no-hostname\nDo not show the hostname field of log messages. This\nswitch has an effect only on the\nshort\nfamily of output modes (see\nabove).\nNote: this option does not remove occurrences of the hostname from\nlog entries themselves, so it does not prevent the hostname from being\nvisible in the logs.\nAdded in version 230.\n--no-full\n,\n--full\n,\n-l\nEllipsize fields when they do not fit in available\ncolumns. The default is to show full fields, allowing them to wrap or be\ntruncated by the pager, if one is used.\nThe old options\n-l\n/\n--full\nare not useful anymore,\nexcept to undo\n--no-full\n.\nAdded in version 196.\n-a\n,\n--all\nShow all fields in full, even if they include unprintable\ncharacters or are very long. By default, fields with unprintable characters\nare abbreviated as \"blob data\". (Note that the pager may escape\nunprintable characters again.)\n-f\n,\n--follow\nShow only the most recent journal entries, and\ncontinuously print new entries as they are appended to the journal, until\nCtrl-C is hit (or the tool is otherwise terminated).\njournalctl\nwill send an\nsd_notify(3)\n\"READY=1\" message once it initialized and successfully established\nits watch on the journal.\n--no-tail\nShow all stored output lines, even in follow mode. Undoes\nthe effect of\n--lines=\n.\n-q\n,\n--quiet\nSuppresses all informational messages (i.e. \"--\nJournal begins at ...\", \"-- Reboot --\"), any warning messages\nregarding inaccessible system journals when run as a normal user.\n--synchronize-on-exit=\nTakes a boolean argument. If true and operating in\n--follow\nmode, a journal synchronization request (equivalent to\njournalctl --sync\n) is issued when\nSIGTERM\n/\nSIGINT\nis\nreceived, and log output continues until this request completes. This is\nuseful for synchronizing journal log output to the runtime of services or\nexternal events, ensuring that any log data enqueued to the logging subsystem\nby the time\nSIGTERM\n/\nSIGINT\nis issued is guaranteed to be\nprocessed and displayed by the time log output ends. Defaults to false.\nAdded in version 258.\nPAGER CONTROL OPTIONS\n¶\nThe following options control page support:\n--no-pager\nDo not pipe output into a pager.\n-e\n,\n--pager-end\nImmediately jump to the end of the journal inside the\nimplied pager tool. This implies\n--lines=1000\nand\n--boot=0\nunless explicitly specified otherwise, to guarantee that the pager will not\nbuffer logs of unbounded size. Note that this option is only supported for the\nless(1)\npager.\nAdded in version 198.\nFORWARD SECURE SEALING (FSS) OPTIONS\n¶\nThe following options may be used together with the\n--setup-keys\ncommand described below:\n--interval=\nSpecifies the change interval for the sealing key when\ngenerating an FSS key pair with\n--setup-keys\n. Shorter intervals\nincrease CPU consumption but shorten the time range of undetectable journal\nalterations. Defaults to 15min.\nNote,\n--output=json-sse\nand\n--output=json-seq\nare\nsilently migrated to\n--output=json\n.\nAdded in version 189.\n--verify-key=\nSpecifies the FSS verification key to use for the\n--verify\noperation.\nAdded in version 189.\n--force\nWhen\n--setup-keys\nis passed and Forward Secure\nSealing (FSS) has already been configured, recreate FSS keys.\nAdded in version 206.\nCOMMANDS\n¶\nThe following commands are understood. If none is specified the\ndefault is to display journal records:\n-N\n,\n--fields\nPrint all field names currently used in all entries of\nthe journal.\nAdded in version 229.\n-F\n,\n--field=\nPrint all possible data values the specified field can\ntake in all entries of the journal.\nAdded in version 195.\n--list-boots\nShow a tabular list of boot numbers (relative to the\ncurrent boot), their IDs, and the timestamps of the first and last message\npertaining to the boot. When specified with\n-n/--lines=\n[+]\nN\noption, only the first (when the\nnumber prefixed with \"+\") or the last (without prefix)\nN\nentries will be shown. When specified with\n-r/--reverse\n, the list will\nbe shown in the reverse order.\nAdded in version 209.\n--list-invocations\nList invocation IDs of a unit. Requires a unit name with\n-u/--unit=\nor\n--user-unit=\n. Show a tabular list of invocation\nnumbers (relative to the current or latest invocation), their IDs, and the\ntimestamps of the first and last message pertaining to the invocation. When\n-b/-boot\nis specified, invocations in the boot will be shown. When\nspecified with\n-n/--lines=\n[+]\nN\noption, only the\nfirst (when the number prefixed with \"+\") or the last (without\nprefix)\nN\nentries will be shown. When specified with\n-r/--reverse\n, the list will be shown in the reverse order.\nAdded in version 257.\n--disk-usage\nShows the current disk usage of all journal files. This\nshows the sum of the disk usage of all archived and active journal files.\nAdded in version 190.\n--vacuum-size=\n,\n--vacuum-time=\n,\n--vacuum-files=\n--vacuum-size=\nremoves the oldest archived journal\nfiles until the disk space they use falls below the specified size. Accepts\nthe usual \"K\", \"M\", \"G\" and \"T\"\nsuffixes (to the base of 1024).\n--vacuum-time=\nremoves archived journal files older than\nthe specified timespan. Accepts the usual \"s\" (default),\n\"m\", \"h\", \"days\", \"weeks\",\n\"months\", and \"years\" suffixes, see\nsystemd.time(7)\nfor details.\n--vacuum-files=\nleaves only the specified number of\nseparate journal files.\nNote that running\n--vacuum-size=\nhas only an indirect\neffect on the output shown by\n--disk-usage\n, as the latter includes\nactive journal files, while the vacuuming operation only operates on\narchived journal files. Similarly,\n--vacuum-files=\nmight not actually\nreduce the number of journal files to below the specified number, as it will\nnot remove active journal files.\n--vacuum-size=\n,\n--vacuum-time=\nand\n--vacuum-files=\nmay be combined in a single invocation to enforce any\ncombination of a size, a time and a number of files limit on the archived\njournal files. Specifying any of these three parameters as zero is\nequivalent to not enforcing the specific limit, and is thus redundant.\nThese three switches may also be combined with\n--rotate\ninto one command. If so, all active files are rotated first, and the\nrequested vacuuming operation is executed right after. The rotation has the\neffect that all currently active files are archived (and potentially new,\nempty journal files opened as replacement), and hence the vacuuming\noperation has the greatest effect as it can take all log data written so far\ninto account.\nAdded in version 218.\n--verify\nCheck the journal file for internal consistency. If the\nfile has been generated with FSS enabled and the FSS verification key has been\nspecified with\n--verify-key=\n, authenticity of the journal file is\nverified.\nAdded in version 189.\n--sync\nAsks the journal daemon to write all yet unwritten\njournal data to the backing file system and synchronize all journals. This\ncall does not return until the synchronization operation is complete. This\ncommand guarantees that any log messages written before its invocation are\nsafely stored on disk at the time it returns.\nAdded in version 228.\n--relinquish-var\nAsks the journal daemon for the reverse operation to\n--flush\n: if requested the daemon will write further log data to\n/run/log/journal/ and stops writing to /var/log/journal/. A subsequent call to\n--flush\ncauses the log output to switch back to /var/log/journal/, see\nabove.\nAdded in version 243.\n--smart-relinquish-var\nSimilar to\n--relinquish-var\n, but executes no\noperation if the root file system and /var/log/journal/ reside on the same\nmount point. This operation is used during system shutdown in order to make\nthe journal daemon stop writing data to /var/log/journal/ in case that\ndirectory is located on a mount point that needs to be unmounted.\nAdded in version 243.\n--flush\nAsks the journal daemon to flush any log data stored in\n/run/log/journal/ into /var/log/journal/, if persistent storage is enabled.\nThis call does not return until the operation is complete. Note that this call\nis idempotent: the data is only flushed from /run/log/journal/ into\n/var/log/journal/ once during system runtime (but see\n--relinquish-var\nbelow), and this command exits cleanly without executing any operation if this\nhas already happened. This command effectively guarantees that all data is\nflushed to /var/log/journal/ at the time it returns.\nAdded in version 217.\n--rotate\nAsks the journal daemon to rotate journal files. This\ncall does not return until the rotation operation is complete. Journal file\nrotation has the effect that all currently active journal files are marked as\narchived and renamed, so that they are never written to in future. New (empty)\njournal files are then created in their place. This operation may be combined\nwith\n--vacuum-size=\n,\n--vacuum-time=\nand\n--vacuum-file=\ninto a single command, see above.\nAdded in version 227.\n--header\nInstead of showing journal contents, show internal header\ninformation of the journal fields accessed.\nThis option is particularly useful when trying to identify\nout-of-order journal entries, as happens for example when the machine is\nbooted with the wrong system time.\nAdded in version 187.\n--list-catalog\n[\n128-bit-ID...\n]\nList the contents of the message catalog as a table of\nmessage IDs, plus their short description strings.\nIf any\n128-bit-ID\ns are specified, only those entries are\nshown.\nAdded in version 196.\n--dump-catalog\n[\n128-bit-ID...\n]\nShow the contents of the message catalog, with entries\nseparated by a line consisting of two dashes and the ID (the format is the\nsame as .catalog files).\nIf any\n128-bit-ID\ns are specified, only those entries are\nshown.\nAdded in version 199.\n--update-catalog\nUpdate the message catalog index. This command needs to\nbe executed each time new catalog files are installed, removed, or updated to\nrebuild the binary catalog index.\nAdded in version 196.\n--setup-keys\nInstead of showing journal contents, generate a new key\npair for Forward Secure Sealing (FSS). This will generate a sealing key and a\nverification key. The sealing key is stored in the journal data directory and\nshall remain on the host. The verification key should be stored externally.\nRefer to the\nSeal=\noption in\njournald.conf(5)\nfor information on\nForward Secure Sealing and for a link to a refereed scholarly paper detailing\nthe cryptographic theory it is based on.\nAdded in version 189.\n-h\n,\n--help\nPrint a short help text and exit.\n--version\nPrint a short version string and exit.\nEXIT STATUS\n¶\nOn success, 0 is returned; otherwise, a non-zero failure code is\nreturned.\nENVIRONMENT\n¶\n$SYSTEMD_LOG_LEVEL\nThe maximum log level of emitted messages (messages with\na higher log level, i.e. less important ones, will be suppressed). Takes a\ncomma-separated list of values. A value may be either one of (in order of\ndecreasing importance)\nemerg\n,\nalert\n,\ncrit\n,\nerr\n,\nwarning\n,\nnotice\n,\ninfo\n,\ndebug\n, or an integer in the\nrange 0...7. See\nsyslog(3)\nfor more information. Each value may\noptionally be prefixed with one of\nconsole\n,\nsyslog\n,\nkmsg\nor\njournal\nfollowed by a colon to set the maximum log level for that\nspecific log target (e.g.\nSYSTEMD_LOG_LEVEL=debug,console:info\nspecifies to log at debug level except when logging to the console which\nshould be at info level). Note that the global maximum log level takes\npriority over any per target maximum log levels.\n$SYSTEMD_LOG_COLOR\nA boolean. If true, messages written to the tty will be\ncolored according to priority.\nThis setting is only useful when messages are written directly to\nthe terminal, because\njournalctl(1)\nand other tools that display logs\nwill color messages based on the log level on their own.\n$SYSTEMD_LOG_TIME\nA boolean. If true, console log messages will be prefixed\nwith a timestamp.\nThis setting is only useful when messages are written directly to\nthe terminal or a file, because\njournalctl(1)\nand other tools that\ndisplay logs will attach timestamps based on the entry metadata on their\nown.\n$SYSTEMD_LOG_LOCATION\nA boolean. If true, messages will be prefixed with a\nfilename and line number in the source code where the message originates.\nNote that the log location is often attached as metadata to\njournal entries anyway. Including it directly in the message text can\nnevertheless be convenient when debugging programs.\n$SYSTEMD_LOG_TID\nA boolean. If true, messages will be prefixed with the\ncurrent numerical thread ID (TID).\nNote that the this information is attached as metadata to journal\nentries anyway. Including it directly in the message text can nevertheless\nbe convenient when debugging programs.\n$SYSTEMD_LOG_TARGET\nThe destination for log messages. One of\nconsole\n(log to the attached tty),\nconsole-prefixed\n(log to the attached tty\nbut with prefixes encoding the log level and \"facility\", see\nsyslog(3)\n,\nkmsg\n(log to the kernel circular log buffer),\njournal\n(log to the journal),\njournal-or-kmsg\n(log to the\njournal if available, and to kmsg otherwise),\nauto\n(determine the\nappropriate log target automatically, the default),\nnull\n(disable log\noutput).\n$SYSTEMD_LOG_RATELIMIT_KMSG\nWhether to ratelimit kmsg or not. Takes a boolean.\nDefaults to \"true\". If disabled, systemd will not ratelimit messages\nwritten to kmsg.\n$SYSTEMD_PAGER\n,\n$PAGER\nPager to use when\n--no-pager\nis not given.\n$SYSTEMD_PAGER\nis used if set; otherwise\n$PAGER\nis used. If\nneither\n$SYSTEMD_PAGER\nnor\n$PAGER\nare set, a set of well-known\npager implementations is tried in turn, including\nless(1)\nand\nmore(1)\n, until one is found. If no pager implementation is discovered,\nno pager is invoked. Setting those environment variables to an empty string or\nthe value \"cat\" is equivalent to passing\n--no-pager\n.\nNote: if\n$SYSTEMD_PAGERSECURE\nis not set,\n$SYSTEMD_PAGER\nand\n$PAGER\ncan only be used to disable the\npager (with \"cat\" or \"\"), and are otherwise ignored.\n$SYSTEMD_LESS\nOverride the options passed to\nless\n(by default\n\"FRSXMK\").\nUsers might want to change two options in particular:\nK\nThis option instructs the pager to exit immediately when\nCtrl+C is pressed. To allow\nless\nto handle Ctrl+C itself to switch back\nto the pager command prompt, unset this option.\nIf the value of\n$SYSTEMD_LESS\ndoes not include\n\"K\", and the pager that is invoked is\nless\n, Ctrl+C will be\nignored by the executable, and needs to be handled by the pager.\nX\nThis option instructs the pager to not send termcap\ninitialization and deinitialization strings to the terminal. It is set by\ndefault to allow command output to remain visible in the terminal even after\nthe pager exits. Nevertheless, this prevents some pager functionality from\nworking, in particular paged output cannot be scrolled with the mouse.\nNote that setting the regular\n$LESS\nenvironment variable\nhas no effect for\nless\ninvocations by systemd tools.\nSee\nless(1)\nfor more discussion.\n$SYSTEMD_LESSCHARSET\nOverride the charset passed to\nless\n(by default\n\"utf-8\", if the invoking terminal is determined to be UTF-8\ncompatible).\nNote that setting the regular\n$LESSCHARSET\nenvironment\nvariable has no effect for\nless\ninvocations by systemd tools.\n$SYSTEMD_PAGERSECURE\nCommon pager commands like\nless(1)\n, in addition to\n\"paging\", i.e. scrolling through the output, support opening of or\nwriting to other files and running arbitrary shell commands. When commands are\ninvoked with elevated privileges, for example under\nsudo(8)\nor\npkexec(1)\n, the pager becomes a security boundary. Care must be taken\nthat only programs with strictly limited functionality are used as pagers, and\nunintended interactive features like opening or creation of new files or\nstarting of subprocesses are not allowed. \"Secure mode\" for the\npager may be enabled as described below,\nif the pager supports that\n(most pagers are not written in a way that takes this into consideration). It\nis recommended to either explicitly enable \"secure mode\" or to\ncompletely disable the pager using\n--no-pager\nor\nPAGER=cat\nwhen\nallowing untrusted users to execute commands with elevated privileges.\nThis option takes a boolean argument. When set to true, the\n\"secure mode\" of the pager is enabled. In \"secure mode\",\nLESSSECURE=1\nwill be set when invoking the pager, which instructs the\npager to disable commands that open or create new files or start new\nsubprocesses. Currently only\nless(1)\nis known to understand this\nvariable and implement \"secure mode\".\nWhen set to false, no limitation is placed on the pager. Setting\nSYSTEMD_PAGERSECURE=0\nor not removing it from the inherited\nenvironment may allow the user to invoke arbitrary commands.\nWhen\n$SYSTEMD_PAGERSECURE\nis not set, systemd tools attempt\nto automatically figure out if \"secure mode\" should be enabled and\nwhether the pager supports it. \"Secure mode\" is enabled if the\neffective UID is not the same as the owner of the login session, see\ngeteuid(2)\nand\nsd_pid_get_owner_uid(3)\n, or when running under\nsudo(8)\nor similar tools (\n$SUDO_UID\nis set [8]). In those\ncases,\nSYSTEMD_PAGERSECURE=1\nwill be set and pagers which are not\nknown to implement \"secure mode\" will not be used at all. Note\nthat this autodetection only covers the most common mechanisms to elevate\nprivileges and is intended as convenience. It is recommended to explicitly\nset\n$SYSTEMD_PAGERSECURE\nor disable the pager.\nNote that if the\n$SYSTEMD_PAGER\nor\n$PAGER\nvariables\nare to be honoured, other than to disable the pager,\n$SYSTEMD_PAGERSECURE\nmust be set too.\n$SYSTEMD_COLORS\nTakes a boolean argument. When true,\nsystemd\nand\nrelated utilities will use colors in their output, otherwise the output will\nbe monochrome. Additionally, the variable can take one of the following\nspecial values: \"16\", \"256\" to restrict the use of colors\nto the base 16 or 256 ANSI colors, respectively. This can be specified to\noverride the automatic decision based on\n$TERM\nand what the console is\nconnected to.\n$SYSTEMD_URLIFY\nThe value must be a boolean. Controls whether clickable\nlinks should be generated in the output for terminal emulators supporting\nthis. This can be specified to override the decision that\nsystemd\nmakes\nbased on\n$TERM\nand other conditions.\nEXAMPLES\n¶\nWithout arguments, all collected logs are shown unfiltered:\njournalctl\nWith one match specified, all entries with a field matching the\nexpression are shown:\njournalctl _SYSTEMD_UNIT=avahi-daemon.service\njournalctl _SYSTEMD_CGROUP=/user.slice/user-42.slice/session-c1.scope\nIf two different fields are matched, only entries matching both\nexpressions at the same time are shown:\njournalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097\nIf two matches refer to the same field, all entries matching\neither expression are shown:\njournalctl _SYSTEMD_UNIT=avahi-daemon.service _SYSTEMD_UNIT=dbus.service\nIf the separator \"+\" is used, two expressions may be\ncombined in a logical OR. The following will show all messages from the\nAvahi service process with the PID 28097 plus all messages from the D-Bus\nservice (from any of its processes):\njournalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097 + _SYSTEMD_UNIT=dbus.service\nTo show all fields emitted\nby\na unit and\nabout\nthe\nunit, option\n-u\n/\n--unit=\nshould be used.\njournalctl -u\nname\nexpands to a complex filter similar to\n_SYSTEMD_UNIT=\nname\n.service\n+ UNIT=\nname\n.service _PID=1\n+ OBJECT_SYSTEMD_UNIT=\nname\n.service _UID=0\n+ COREDUMP_UNIT=\nname\n.service _UID=0 MESSAGE_ID=fc2e22bc6ee647b6b90729ab34a250b1\n(see\nsystemd.journal-fields(7)\nfor an explanation of those\npatterns).\nShow all logs generated by the D-Bus executable:\njournalctl /usr/bin/dbus-daemon\nShow all kernel logs from previous boot:\njournalctl -k -b -1\nShow a live log display from a system service apache.service:\njournalctl -f -u apache\nSEE ALSO\n¶\nsystemd(1)\n,\nsystemd-cat(1)\n,\nsystemd-journald.service(8)\n,\nsystemctl(1)\n,\ncoredumpctl(1)\n,\nsystemd.journal-fields(7)\n,\njournald.conf(5)\n,\nsystemd.time(7)\n,\nsystemd-journal-remote.service(8)\n,\nsystemd-journal-upload.service(8)\nNOTES\n¶\n1.\nUAPI.2 Discoverable Partitions Specification\nhttps://uapi-group.org/specifications/specs/discoverable_partitions_specification\n2.\nRFC 3339\nhttps://tools.ietf.org/html/rfc3339\n3.\nJournal Export Format\nhttps://systemd.io/JOURNAL_EXPORT_FORMATS#journal-export-format\n4.\nJournal JSON Format\nhttps://systemd.io/JOURNAL_EXPORT_FORMATS#journal-json-format\n5.\nServer-Sent Events\nhttps://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events\n6.\nJavaScript Object Notation (JSON) Text Sequences\nhttps://tools.ietf.org/html/rfc7464\n7.\nJournal Message Catalogs\nhttps://systemd.io/CATALOG\n8.\nIt is recommended for other tools to set and check\n$SUDO_UID\nas\nappropriate, treating it is a common interface.\nsystemd 259~rc2\nSource file:\njournalctl.1.en.gz (from\nsystemd 259~rc2-1\n)\nSource last updated:\n2025-11-26T12:41:32Z\nConverted to HTML:\n2025-11-26T20:47:56Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/systemd/journalctl.1.en.html"}}
{"text": "ps(1) — procps — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\nprocps\n/ ps(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nEXAMPLES\nSIMPLE PROCESS SELECTION\nPROCESS SELECTION BY LIST\nOUTPUT FORMAT CONTROL\nOUTPUT MODIFIERS\nTHREAD DISPLAY\nOTHER INFORMATION\nNOTES\nPROCESS FLAGS\nPROCESS STATE CODES\nOBSOLETE SORT KEYS\nAIX FORMAT DESCRIPTORS\nSTANDARD FORMAT SPECIFIERS\nENVIRONMENT VARIABLES\nPERSONALITY\nBUGS\nSEE ALSO\nSTANDARDS\nAUTHOR\nother versions\ntrixie\n2:4.0.4-9\ntesting\n2:4.0.4-9\nunstable\n2:4.0.4-9\nother languages\nDeutsch\nEnglish\nfrançais\n日本語\nromână\nsvenska\nTürkçe\nукраїнська\nScroll to navigation\nPS(1)\nUser Commands\nPS(1)\nNAME\n¶\nps - report a snapshot of the current processes.\nSYNOPSIS\n¶\nps\n[\noptions\n]\nDESCRIPTION\n¶\nps\ndisplays information about a selection of the active\nprocesses. If you want a repetitive update of the selection and the\ndisplayed information, use\ntop\ninstead.\nThis version of\nps\naccepts several kinds of options:\n1\nUNIX options, which may be grouped and must be preceded by a dash.\n2\nBSD options, which may be grouped and must not be used with a dash.\n3\nGNU long options, which are preceded by two dashes.\nOptions of different types may be freely mixed, but conflicts can\nappear. There are some synonymous options, which are functionally identical,\ndue to the many standards and\nps\nimplementations that this\nps\nis compatible with.\nBy default,\nps\nselects all processes with the same\neffective user ID (euid=EUID) as the current user and associated with the\nsame terminal as the invoker. It displays the process ID (pid=PID), the\nterminal associated with the process (tname=TTY), the cumulated CPU time in\n[DD-]hh:mm:ss format (time=TIME), and the executable name (ucmd=CMD). Output\nis unsorted by default.\nThe use of BSD-style options will add process state (stat=STAT) to\nthe default display and show the command args (args=COMMAND) instead of the\nexecutable name. You can override this with the\nPS_FORMAT\nenvironment\nvariable. The use of BSD-style options will also change the process\nselection to include processes on other terminals (TTYs) that are owned by\nyou; alternately, this may be described as setting the selection to be the\nset of all processes filtered to exclude processes owned by other users or\nnot on a terminal. These effects are not considered when options are\ndescribed as being \"identical\" below, so\n-M\nwill be\nconsidered identical to\nZ\nand so on.\nExcept as described below, process selection options are additive.\nThe default selection is discarded, and then the selected processes are\nadded to the set of processes to be displayed. A process will thus be shown\nif it meets any of the given selection criteria.\nEXAMPLES\n¶\nTo see every process on the system\nusing standard syntax:\nps -e\nps -ef\nps -eF\nps -ely\nTo see every process on the\nsystem using BSD syntax:\nps ax\nps axu\nTo print a process\ntree:\nps -ejH\nps axjf\nTo get info about\nthreads:\nps -eLf\nps axms\nTo get security info:\nps -eo euser,ruser,suser,fuser,f,comm,label\nps axZ\nps -eM\nTo see every process running\nas root (real & effective ID) in user\nformat:\nps -U root -u root u\nTo see every process with a\nuser-defined format:\nps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm\nps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm\nps -Ao pid,tt,user,fname,tmout,f,wchan\nPrint only the process IDs\nof syslogd:\nps -C syslogd -o pid=\nPrint only the name of\nPID 42:\nps -q 42 -o comm=\nSIMPLE PROCESS SELECTION\n¶\na\nLift the BSD-style \"only yourself\" restriction, which is imposed\nupon the set of all processes when some BSD-style (without \"-\")\noptions are used or when the\nps\npersonality setting is BSD-like.\nThe set of processes selected in this manner is in addition to the set of\nprocesses selected by other means. An alternate description is that this\noption causes\nps\nto list all processes with a terminal (tty), or to\nlist all processes when used together with the\nx\noption.\n-A\nSelect all processes. Identical to\n-e\n.\n-a\nSelect all processes except both session leaders (see\ngetsid(2)\n)\nand processes not associated with a terminal.\n-d\nSelect all processes except session leaders.\n--deselect\nSelect all processes except those that fulfill the specified conditions\n(negates the selection). Identical to\n-N\n.\n-e\nSelect all processes. Identical to\n-A\n.\ng\nReally all, even session leaders. This flag is obsolete and may be\ndiscontinued in a future release. It is normally implied by the\na\nflag, and is only useful when operating in the sunos4 personality.\n-N\nSelect all processes except those that fulfill the specified conditions\n(negates the selection). Identical to\n--deselect\n.\nT\nSelect all processes associated with this terminal. Identical to the\nt\noption without any argument.\nr\nRestrict the selection to only running processes.\nx\nLift the BSD-style \"must have a tty\" restriction, which is\nimposed upon the set of all processes when some BSD-style (without\n\"-\") options are used or when the\nps\npersonality setting\nis BSD-like. The set of processes selected in this manner is in addition\nto the set of processes selected by other means. An alternate description\nis that this option causes\nps\nto list all processes owned by you\n(same EUID as\nps\n), or to list all processes when used together with\nthe\na\noption.\nPROCESS SELECTION BY LIST\n¶\nThese options accept a single argument in the form of a\nblank-separated or comma-separated list. They can be used multiple times.\nFor example:\nps -p \"1 2\" -p 3,4\n123\nIdentical to\n--pid\n123\n.\n+\n123\nIdentical to\n--sid\n123\n.\n-\n123\nSelect by process group ID (PGID).\n-C\ncmdlist\nSelect by command name. This selects the processes whose executable name\nis given in\ncmdlist\n. NOTE: The command name is not the same as the\ncommand line. Previous versions of procps and the kernel truncated this\ncommand name to 15 characters. This limitation is no longer present in\nboth. If you depended on matching only 15 characters, you may no longer\nget a match.\n-G\ngrplist\nSelect by real group ID (RGID) or name. This selects the processes whose\nreal group name or ID is in the\ngrplist\nlist. The real group ID\nidentifies the group of the user who created the process, see\ngetgid(2)\n.\n-g\ngrplist\nSelect by session OR by effective group name. Selection by session is\nspecified by many standards, but selection by effective group is the\nlogical behavior that several other operating systems use. This\nps\nwill select by session when the list is completely numeric (as sessions\nare). Group ID numbers will work only when some group names are also\nspecified. See the\n-s\nand\n--group\noptions.\n--Group\ngrplist\nSelect by real group ID (RGID) or name. Identical to\n-G\n.\n--group\ngrplist\nSelect by effective group ID (EGID) or name. This selects the processes\nwhose effective group name or ID is in\ngrplist\n. The effective group\nID describes the group whose file access permissions are used by the\nprocess (see\ngetegid(2)\n). The\n-g\noption is often an\nalternative to\n--group\n.\np\npidlist\nSelect by process ID. Identical to\n-p\nand\n--pid\n.\n-p\npidlist\nSelect by PID. This selects the processes whose process ID numbers appear\nin\npidlist\n. Identical to\np\nand\n--pid\n.\n--pid\npidlist\nSelect by process ID. Identical to\n-p\nand\np\n.\n--ppid\npidlist\nSelect by parent process ID. This selects the processes with a parent\nprocess ID in\npidlist\n. That is, it selects processes that\nare children of those listed in\npidlist\n.\nq\npidlist\nSelect by process ID (quick mode). Identical to\n-q\nand\n--quick-pid\n.\n-q\npidlist\nSelect by PID (quick mode). This selects the processes whose process ID\nnumbers appear in\npidlist\n. With this option\nps\nreads the\nnecessary info only for the pids listed in the\npidlist\nand doesn't\napply additional filtering rules. The order of pids is unsorted and\npreserved. No additional selection options, sorting and forest type\nlistings are allowed in this mode. Identical to\nq\nand\n--quick-pid\n.\n--quick-pid\npidlist\nSelect by process ID (quick mode). Identical to\n-q\nand\nq\n.\n-s\nsesslist\nSelect by session ID. This selects the processes with a session ID\nspecified in\nsesslist\n.\n--sid\nsesslist\nSelect by session ID. Identical to\n-s\n.\nt\nttylist\nSelect by tty. Nearly identical to\n-t\nand\n--tty\n, but can\nalso be used with an empty\nttylist\nto indicate the terminal\nassociated with\nps\n. Using the\nT\noption is considered cleaner\nthan using\nt\nwith an empty\nttylist\n.\n-t\nttylist\nSelect by tty. This selects the processes associated with the terminals\ngiven in\nttylist\n. Terminals (ttys, or screens for text output) can\nbe specified in several forms: /dev/ttyS1, ttyS1, S1. A plain\n\"-\" may be used to select processes not attached to any\nterminal.\n--tty\nttylist\nSelect by terminal. Identical to\n-t\nand\nt\n.\nU\nuserlist\nSelect by effective user ID (EUID) or name. This selects the processes\nwhose effective user name or ID is in\nuserlist\n. The effective user\nID describes the user whose file access permissions are used by the\nprocess (see\ngeteuid(2)\n). Identical to\n-u\nand\n--user\n.\n-U\nuserlist\nSelect by real user ID (RUID) or name. It selects the processes whose real\nuser name or ID is in the\nuserlist\nlist. The real user ID\nidentifies the user who created the process, see\ngetuid(2)\n.\n-u\nuserlist\nSelect by effective user ID (EUID) or name. This selects the processes\nwhose effective user name or ID is in\nuserlist\n.\nThe effective user ID describes the user whose file access\npermissions are used by the process (see\ngeteuid(2)\n). Identical\nto\nU\nand\n--user\n.\n--User\nuserlist\nSelect by real user ID (RUID) or name. Identical to\n-U\n.\n--user\nuserlist\nSelect by effective user ID (EUID) or name. Identical to\n-u\nand\nU\n.\nOUTPUT FORMAT CONTROL\n¶\nThese options are used to choose the information displayed by\nps\n. The output may differ by personality.\n-c\nShow different scheduler information for the\n-l\noption.\n--context\nDisplay security context format (for SELinux).\n-f\nDo full-format listing. This option can be combined with many other\nUNIX-style options to add additional columns. It also causes the command\narguments to be printed. When used with\n-L\n, the NLWP (number of\nthreads) and LWP (thread ID) columns will be added. See the\nc\noption, the format keyword\nargs\n, and the format keyword\ncomm\n.\n-F\nExtra full format. See the\n-f\noption, which\n-F\nimplies.\n--format\nformat\nuser-defined format. Identical to\n-o\nand\no\n.\nj\nBSD job control format.\n-j\nJobs format.\nl\nDisplay BSD long format.\n-l\nLong format. The\n-y\noption is often useful with this.\n-M\nAdd a column of security data. Identical to\nZ\n(for SELinux).\nO\nformat\nis preloaded\no\n(overloaded). The BSD\nO\noption can act like\n-O\n(user-defined output format with some common fields predefined)\nor can be used to specify sort order. Heuristics are used to determine the\nbehavior of this option. To ensure that the desired behavior is obtained\n(sorting or formatting), specify the option in some other way (e.g. with\n-O\nor\n--sort\n). When used as a formatting option, it is\nidentical to\n-O\n, with the BSD personality.\n-O\nformat\nLike\n-o\n, but preloaded with some default columns. Identical to\n-o pid,\nformat\n,state,tname,time,command\nor\n-o pid,\nformat\n,tname,time,cmd\n,\nsee\n-o\nbelow.\no\nformat\nSpecify user-defined format. Identical to\n-o\nand\n--format\n.\n-o\nformat\nUser-defined format.\nformat\nis a single argument in the form of a\nblank-separated or comma-separated list, which offers a way to specify\nindividual output columns. The recognized keywords are described in the\nSTANDARD FORMAT SPECIFIERS\nsection below. Headers may be renamed\n(\nps -o pid,ruser=RealUser -o comm=Command\n) as desired. If all\ncolumn headers are empty (\nps -o pid= -o comm=\n) then the header line\nwill not be output. Column width will increase as needed for wide headers;\nthis may be used to widen up columns such as WCHAN (\nps -o\npid,wchan=WIDE-WCHAN-COLUMN -o comm\n). Explicit width control (\nps\nopid,wchan:42,cmd\n) is offered too. The behavior of\nps -o\npid=X,comm=Y\nvaries with personality; output may be one column named\n\"X,comm=Y\" or two columns named \"X\" and \"Y\".\nUse multiple\n-o\noptions when in doubt. Use the\nPS_FORMAT\nenvironment variable to specify a default as desired; DefSysV and DefBSD\nare macros that may be used to choose the default UNIX or BSD\ncolumns.\n-P\nAdd a column showing\npsr\n.\ns\nDisplay signal format.\nu\nDisplay user-oriented format.\nv\nDisplay virtual memory format.\nX\nRegister format.\n-y\nDo not show flags; show rss in place of addr. This option can only be used\nwith\n-l\n.\nZ\nAdd a column of security data. Identical to\n-M\n(for SELinux).\nOUTPUT MODIFIERS\n¶\nc\nShow the true command name. This is derived from the name of the\nexecutable file, rather than from the argv value. Command arguments and\nany modifications to them are thus not shown. This option effectively\nturns the\nargs\nformat keyword into the\ncomm\nformat keyword;\nit is useful with the\n-f\nformat option and with the various\nBSD-style format options, which all normally display the command\narguments. See the\n-f\noption, the format keyword\nargs\n, and\nthe format keyword\ncomm\n.\n--cols\nn\nSet screen width.\n--columns\nn\nSet screen width.\n--cumulative\nInclude some dead child process data (as a sum with the parent).\n-D\nformat\nSet the date format of the\nlstart\nfield to\nformat\n. This\nformat is parsed by\nstrftime(3)\nand should be a maximum of 24\ncharacters to not mis-align columns.\n--date-format\nformat\nIdentical to\n-D\n.\ne\nShow the environment after the command.\nf\nASCII art process hierarchy (forest).\n--forest\nASCII art process tree.\nh\nNo header. (or, one header per screen in the BSD personality). The\nh\noption is problematic. Standard BSD\nps\nuses this option to\nprint a header on each page of output, but older Linux\nps\nuses this\noption to totally disable the header. This version of\nps\nfollows\nthe Linux usage of not printing the header unless the BSD personality has\nbeen selected, in which case it prints a header on each page of output.\nRegardless of the current personality, you can use the long options\n--headers\nand\n--no-headers\nto enable printing headers each\npage or disable headers entirely, respectively.\n-H\nShow process hierarchy (forest).\n--headers\nRepeat header lines, one per page of output.\nk\nspec\nSpecify sorting order. Sorting syntax is\n[\n+\n|\n-\n]\nkey\n[,[\n+\n|\n-\n]\nkey\n[,...]].\nChoose a multi-letter key from the\nSTANDARD FORMAT SPECIFIERS\nsection. The \"+\" is optional since default direction is\nincreasing numerical or lexicographic order. Identical to\n--sort\n.\nExamples:\nps jaxkuid,-ppid,+pid\nps axk comm o comm,args\nps kstart_time -ef\n--lines\nn\nSet screen height.\nn\nNumeric output for WCHAN and USER (including all types of UID and\nGID).\n--no-headers\nPrint no header line at all.\n--no-heading\nis an alias for this\noption.\nO\norder\nSorting order (overloaded). The BSD\nO\noption can act like\n-O\n(user-defined output format with some common fields predefined) or can be\nused to specify sort order. Heuristics are used to determine the behavior\nof this option. To ensure that the desired behavior is obtained (sorting\nor formatting), specify the option in some other way (e.g. with\n-O\nor\n--sort\n).\nFor sorting, obsolete BSD\nO\noption syntax is\nO\n[\n+\n|\n-\n]\nk1\n[,[\n+\n|\n-\n]\nk2\n[,...]].\nIt orders the processes listing according to the multilevel sort specified\nby the sequence of one-letter short keys\nk1\n,\nk2\n, ...\ndescribed in the\nOBSOLETE SORT KEYS\nsection below.\nThe \"+\" is currently optional, merely re-iterating the\ndefault direction on a key, but may help to distinguish an\nO\nsort\nfrom an\nO\nformat. The \"-\" reverses direction only on the\nkey it precedes.\n--rows\nn\nSet screen height.\nS\nSum up some information, such as CPU usage, from dead child processes into\ntheir parent. This is useful for examining a system where a parent process\nrepeatedly forks off short-lived children to do work.\n--sort\nspec\nSpecify sorting order. Sorting syntax is\n[\n+\n|\n-\n]\nkey\n[,[\n+\n|\n-\n]\nkey\n[,...]].\nChoose a multi-letter key from the\nSTANDARD FORMAT SPECIFIERS\nsection. The \"+\" is optional since default direction is\nincreasing numerical or lexicographic order. Identical to\nk\n. For\nexample:\nps jax --sort=uid,-ppid,+pid\n--signames\nShow signal masks using abbreviated signal names and expands the collumn.\nIf the column width cannot show all signals, the column will end with a\nplus \"\n+\n\". Columns with only a hyphen have no\nsignals.\nw\nWide output. Use this option twice for unlimited width.\n-w\nWide output. Use this option twice for unlimited width.\n--width\nn\nSet screen width.\nTHREAD DISPLAY\n¶\nH\nShow threads as if they were processes.\n-L\nShow threads, possibly with LWP and NLWP columns.\nm\nShow threads after processes.\n-m\nShow threads after processes.\n-T\nShow threads, possibly with SPID column.\nOTHER INFORMATION\n¶\n--help\nsection\nPrint a help message. The\nsection\nargument can be one of\ns\nimple,\nl\nist,\no\nutput,\nt\nhreads,\nm\nisc, or\na\nll. The argument can be shortened to one of the underlined letters\nas in: s|l|o|t|m|a.\n--info\nPrint debugging info.\nL\nList all format specifiers.\nV\nPrint the procps-ng version.\n-V\nPrint the procps-ng version.\n--version\nPrint the procps-ng version.\nNOTES\n¶\nThis\nps\nworks by reading the virtual files in /proc. This\nps\ndoes not need to be setuid kmem or have any privileges to run. Do\nnot give this\nps\nany special permissions.\nCPU usage is currently expressed as the percentage of time spent\nrunning during the entire lifetime of a process. This is not ideal,\nand it does not conform to the standards that\nps\notherwise\nconforms to. CPU usage is unlikely to add up to exactly 100%.\nThe SIZE and RSS fields don't count some parts of a process\nincluding the page tables, kernel stack, struct thread_info, and struct\ntask_struct. This is usually at least 20 KiB of memory that is always\nresident. SIZE is the virtual size of the process (code+data+stack).\nProcesses marked <defunct> are dead processes (so-called\n\"zombies\") that remain because their parent has not destroyed them\nproperly. These processes will be destroyed by\ninit(8)\nif the parent\nprocess exits.\nIf the length of the username is greater than the width of the\ndisplay column, the username will be truncated. See the\n-o\nand\n-O\nformatting options to customize length.\nCommands options such as\nps -aux\nare not recommended as it\nis a confusion of two different standards. According to the POSIX and UNIX\nstandards, the above command asks to display all processes with a TTY\n(generally the commands users are running) plus all processes owned by a\nuser named\nx\n. If that user doesn't exist, then\nps\nwill assume\nyou really meant \"\nps\naux\n\".\nPROCESS FLAGS\n¶\nThe sum of these values is displayed in the \"F\" column,\nwhich is provided by the\nflags\noutput specifier:\n1\nforked but didn't exec\n4\nused super-user privileges\nPROCESS STATE CODES\n¶\nHere are the different values that the\ns\n,\nstat\nand\nstate\noutput specifiers (header \"STAT\" or \"S\")\nwill display to describe the state of a process:\nD\nuninterruptible sleep (usually IO)\nI\nIdle kernel thread\nR\nrunning or runnable (on run queue)\nS\ninterruptible sleep (waiting for an event to complete)\nT\nstopped by job control signal\nt\nstopped by debugger during the tracing\nW\npaging (not valid since the 2.6.xx kernel)\nX\ndead (should never be seen)\nZ\ndefunct (\"zombie\") process, terminated but not reaped by its\nparent\nFor BSD formats and when the\nstat\nkeyword is used,\nadditional characters may be displayed:\n<\nhigh-priority (not nice to other users)\nN\nlow-priority (nice to other users)\nL\nhas pages locked into memory (for real-time and custom IO)\ns\nis a session leader\nl\nis multi-threaded (using CLONE_THREAD, like NPTL pthreads do)\n+\nis in the foreground process group\nOBSOLETE SORT KEYS\n¶\nThese keys are used by the BSD\nO\noption (when it is used\nfor sorting). The GNU\n--sort\noption doesn't use these keys, but the\nspecifiers described below in the\nSTANDARD FORMAT SPECIFIERS\nsection.\nNote that the values used in sorting are the internal values\nps\nuses\nand not the \"cooked\" values used in some of the output format\nfields (e.g. sorting on tty will sort into device number, not according to\nthe terminal name displayed). Pipe\nps\noutput into the\nsort(1)\ncommand if you want to sort the cooked values.\nKEY\nLONG\nDESCRIPTION\nc\ncmd\nsimple name of executable\nC\npcpu\ncpu utilization\nf\nflags\nflags as in long format F field\ng\npgrp\nprocess group ID\nG\ntpgid\ncontrolling tty process group ID\nj\ncutime\ncumulative user time\nJ\ncstime\ncumulative system time\nk\nutime\nuser time\nm\nmin_flt\nnumber of minor page faults\nM\nmaj_flt\nnumber of major page faults\nn\ncmin_flt\ncumulative minor page faults\nN\ncmaj_flt\ncumulative major page faults\no\nsession\nsession ID\np\npid\nprocess ID\nP\nppid\nparent process ID\nr\nrss\nresident set size\nR\nresident\nresident pages\ns\nsize\nmemory size in kilobytes\nS\nshare\namount of shared pages\nt\ntty\nthe device number of the controlling tty\nT\nstart_time\ntime process was started\nU\nuid\nuser ID number\nu\nuser\nuser name\nv\nvsize\ntotal VM size in KiB\ny\npriority\nkernel scheduling priority\nAIX FORMAT DESCRIPTORS\n¶\nThis\nps\nsupports AIX format descriptors, which work\nsomewhat like the formatting codes of\nprintf(1)\nand\nprintf(3)\n.\nFor example, the normal default output can be produced with this:\nps -eo\n\"%p %y %x %c\".\nThe\nNORMAL\ncodes are described in the\nnext section.\nCODE\nNORMAL\nHEADER\n%C\npcpu\n%CPU\n%G\ngroup\nGROUP\n%P\nppid\nPPID\n%U\nuser\nUSER\n%a\nargs\nCOMMAND\n%c\ncomm\nCOMMAND\n%g\nrgroup\nRGROUP\n%n\nnice\nNI\n%p\npid\nPID\n%r\npgid\nPGID\n%t\netime\nELAPSED\n%u\nruser\nRUSER\n%x\ntime\nTIME\n%y\ntty\nTTY\n%z\nvsz\nVSZ\nSTANDARD FORMAT SPECIFIERS\n¶\nHere are the different keywords that may be used to control the\noutput format (e.g., with option\n-o\n) or to sort the selected\nprocesses with the GNU-style\n--sort\noption.\nFor example:\nps -eo pid,user,args --sort user\nThis version of\nps\ntries to recognize most of the keywords\nused in other implementations of\nps\n.\nThe following user-defined format specifiers may contain spaces:\nargs\n,\ncmd\n,\ncomm\n,\ncommand\n,\nfname\n,\nucmd\n,\nucomm\n,\nlstart\n,\nbsdstart\n,\nstart\n.\nSome keywords may not be available for sorting.\nCODE\nHEADER\nDESCRIPTION\n%cpu\n%CPU\ncpu utilization of the process in \"##.#\" format. Currently, it\nis the CPU time used divided by the time the process has been running\n(cputime/realtime ratio), expressed as a percentage. It will not add up to\n100% unless you are lucky. (alias pcpu ).\n%mem\n%MEM\nratio of the process's resident set size to the physical memory on the\nmachine, expressed as a percentage. (alias pmem ).\nag_id\nAGID\nThe autogroup identifier associated with a process which operates in\nconjunction with the CFS scheduler to improve interactive desktop\nperformance.\nag_nice\nAGNI\nThe autogroup nice value which affects scheduling of all processes in\nthat group.\nargs\nCOMMAND\ncommand with all its arguments as a string. Modifications to the\narguments may be shown. The output in this column may contain spaces. A\nprocess marked <defunct> is partly dead, waiting to be fully\ndestroyed by its parent. Sometimes the process args will be unavailable;\nwhen this happens, ps will instead print the executable name in brackets.\n(alias cmd \", \" command ). See also the comm format keyword, the\n-f option, and the c option. When specified last, this column will extend\nto the edge of the display. If ps can not determine display width, as when\noutput is redirected (piped) into a file or another command, the output\nwidth is undefined (it may be 80, unlimited, determined by the TERM\nvariable, and so on). The COLUMNS environment variable or --cols option\nmay be used to exactly determine the width in this case. The w or -w\noption may be also be used to adjust width.\nblocked\nBLOCKED\nmask of the blocked signals, see signal (7). According to the width of\nthe field, a 32 or 64-bit mask in hexadecimal format is displayed, unless\nthe\n--signames\noption is used. (alias sig_block \", \"\nsigmask ).\nbsdstart\nSTART\ntime the command started. If the process was started less than 24 hours\nago, the output format is \" HH:MM\", else it is \"\nMmm:SS\" (where Mmm is the three letters of the month). See also\nlstart ,  start ,  start_time \", and\"\nstime .\nbsdtime\nTIME\naccumulated cpu time, user + system. The display format is usually\n\"MMM:SS\", but can be shifted to the right if the process used\nmore than 999 minutes of cpu time.\nc\nC\nprocessor utilization. Currently, this is the integer value of the\npercent usage over the lifetime of the process. (see %cpu ).\ncaught\nCAUGHT\nmask of the caught signals, see signal (7). According to the width of\nthe field, a 32 or 64 bits mask in hexadecimal format is displayed, unless\nthe\n--signames\noption is used. (alias sig_catch \", \"\nsigcatch ).\ncgname\nCGNAME\ndisplay name of control groups to which the process belongs.\ncgroup\nCGROUP\ndisplay control groups to which the process belongs.\ncgroupns\nCGROUPNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\nclass\nCLS\nscheduling class of the process. (alias policy \", \" cls ).\nField's possible values are: +9n -\tnot reported TS\tSCHED_OTHER\nFF\tSCHED_FIFO RR\tSCHED_RR B\tSCHED_BATCH ISO\tSCHED_ISO IDL\tSCHED_IDLE\nDLN\tSCHED_DEADLINE ?\tunknown value\ncls\nCLS\nscheduling class of the process. (alias policy \", \" cls ).\nField's possible values are: +9n -\tnot reported TS\tSCHED_OTHER\nFF\tSCHED_FIFO RR\tSCHED_RR B\tSCHED_BATCH ISO\tSCHED_ISO IDL\tSCHED_IDLE\nDLN\tSCHED_DEADLINE ?\tunknown value\ncmd\nCMD\nsee args . (alias args \", \" command ).\ncomm\nCOMMAND\ncommand name (only the executable name). The output in this column may\ncontain spaces. (alias ucmd \", \" ucomm ). See also the args\nformat keyword, the -f option, and the c option. When specified last, this\ncolumn will extend to the edge of the display. If ps can not determine\ndisplay width, as when output is redirected (piped) into a file or another\ncommand, the output width is undefined (it may be 80, unlimited,\ndetermined by the TERM variable, and so on). The COLUMNS environment\nvariable or --cols option may be used to exactly determine the width in\nthis case. The w  or  -w option may be also be used to\nadjust width.\ncommand\nCOMMAND\nSee args . (alias args \", \" command ).\ncp\nCP\nper-mill (tenths of a percent) CPU usage. (see %cpu ).\ncputime\nTIME\ncumulative CPU time, \"[DD-]hh:mm:ss\" format. (alias time\n).\ncputimes\nTIME\ncumulative CPU time in seconds (alias times ).\ncuc\n%CUC\nThe CPU utilization of a process, including dead children, in an\nextended \"##.###\" format. (see also %cpu , c , cp , cuu , pcpu\n).\ncuu\n%CUU\nThe CPU utilization of a process in an extended \"##.###\"\nformat. (see also %cpu , c , cp , cuc , pcpu ).\ndrs\nDRS\ndata resident set size, the amount of private memory\nreserved\nby\na process. It is also known as DATA. Such memory may not yet be mapped to\nrss but will always be included included in the vsz amount.\negid\nEGID\neffective group ID number of the process as a decimal integer. (alias\ngid ).\negroup\nEGROUP\neffective group ID of the process. This will be the textual group ID, if\nit can be obtained and the field width permits, or a decimal\nrepresentation otherwise. (alias group ).\neip\nEIP\ninstruction pointer. As of kernel 4.9.xx will be zeroed out unless task\nis exiting or being core dumped.\nesp\nESP\nstack pointer. As of kernel 4.9.xx will be zeroed out unless task is\nexiting or being core dumped.\netime\nELAPSED\nelapsed time since the process was started, in the form\n[[DD-]hh:]mm:ss.\netimes\nELAPSED\nelapsed time since the process was started, in seconds.\neuid\nEUID\neffective user ID (alias uid ).\neuser\nEUSER\neffective user name. This will be the textual user ID, if it can be\nobtained and the field width permits, or a decimal representation\notherwise. The n option can be used to force the decimal representation.\n(alias uname \", \" user ).\nexe\nEXE\npath to the executable. Useful if path cannot be printed via cmd \",\n\" comm or args format options.\nf\nF\nflags associated with the process, see the PROCESS FLAGS section. (alias\nflag \", \" flags ).\nfgid\nFGID\nfilesystem access group ID. (alias fsgid ).\nfgroup\nFGROUP\nfilesystem access group ID. This will be the textual group ID, if it can\nbe obtained and the field width permits, or a decimal representation\notherwise. (alias fsgroup ).\nflag\nF\nsee f . (alias f \", \" flags ).\nflags\nF\nsee f . (alias f \", \" flag ).\nfname\nCOMMAND\nfirst 8 bytes of the base name of the process's executable file. The\noutput in this column may contain spaces.\nfuid\nFUID\nfilesystem access user ID. (alias fsuid ).\nfuser\nFUSER\nfilesystem access user ID. This will be the textual user ID, if it can\nbe obtained and the field width permits, or a decimal representation\notherwise.\ngid\nGID\nsee egid . (alias egid ).\ngroup\nGROUP\nsee egroup . (alias egroup ).\nignored\nIGNORED\nmask of the ignored signals, see signal (7). According to the width of\nthe field, a 32 or 64 bits mask in hexadecimal format is displayed, unless\nthe\n--signames\noption is used. (alias sig_ignore \", \"\nsigignore ).\nipcns\nIPCNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\nlabel\nLABEL\nsecurity label, most commonly used for SELinux context data. This is for\nthe Mandatory Access Control (\"MAC\") found on high-security\nsystems.\nlstart\nSTARTED\ntime the command started. This will be in the form \"DDD mmm\nHH:MM:SS YYY\" unless changed by the\n-D\noption.\nlsession\nSESSION\ndisplays the login session identifier of a process, if systemd support\nhas been included.\nluid\nLUID\ndisplays Login ID associated with a process.\nlwp\nLWP\nlight weight process (thread) ID of the dispatchable entity (alias spid\n,  tid ). See tid for additional information.\nlxc\nLXC\nThe name of the lxc container within which a task is running. If a\nprocess is not running inside a container, a dash ('-') will be\nshown.\nmachine\nMACHINE\ndisplays the machine name for processes assigned to VM or container, if\nsystemd support has been included.\nmaj_flt\nMAJFLT\nThe number of major page faults that have occurred with this\nprocess.\nmin_flt\nMINFLT\nThe number of minor page faults that have occurred with this\nprocess.\nmntns\nMNTNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\nnetns\nNETNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\nni\nNI\nnice value. This ranges from 19 (nicest) to -20 (not nice to others),\nsee nice (1). (alias nice ).\nnice\nNI\nsee ni . (alias ni ).\nnlwp\nNLWP\nnumber of lwps (threads) in the process. (alias thcount ).\nnuma\nNUMA\nThe node associated with the most recently used processor. A\n-1\nmeans that NUMA information is unavailable.\nnwchan\nWCHAN\naddress of the kernel function where the process is sleeping (use wchan\nif you want the kernel function name).\noom\nOOM\nOut of Memory Score. The value, ranging from 0 to +1000, used to select\ntask(s) to kill when memory is exhausted.\noomadj\nOOMADJ\nOut of Memory Adjustment Factor. The value is added to the current out\nof memory score which is then used to determine which task to kill when\nmemory is exhausted.\nouid\nOWNER\ndisplays the Unix user identifier of the owner of the session of a\nprocess, if systemd support has been included.\npcpu\n%CPU\nsee %cpu . (alias %cpu ).\npending\nPENDING\nmask of the pending signals. See signal (7). Signals pending on the\nprocess are distinct from signals pending on individual threads. Use the m\noption or the -m option to see both. According to the width of the field,\na 32 or 64 bits mask in hexadecimal format is displayed, unless the\n--signames\noption is used. (alias sig ).\npgid\nPGID\nprocess group ID or, equivalently, the process ID of the process group\nleader. (alias pgrp ).\npgrp\nPGRP\nsee pgid . (alias pgid ).\npid\nPID\na number representing the process ID (alias tgid ).\npidns\nPIDNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\npmem\n%MEM\nsee %mem . (alias %mem ).\npolicy\nPOL\nscheduling class of the process. (alias class \", \" cls ).\nPossible values are: +9n -\tnot reported TS\tSCHED_OTHER FF\tSCHED_FIFO\nRR\tSCHED_RR B\tSCHED_BATCH ISO\tSCHED_ISO IDL\tSCHED_IDLE DLN\tSCHED_DEADLINE\n?\tunknown value\nppid\nPPID\nparent process ID.\npri\nPRI\npriority of the process. Higher number means higher priority.\npsr\nPSR\nprocessor that process last executed on.\npss\nPSS\nProportional share size, the non-swapped physical memory, with shared\nmemory proportionally accounted to all tasks mapping it.\nrbytes\nRBYTES\nNumber of bytes which this process really did cause to be fetched from\nthe storage layer.\nrchars\nRCHARS\nNumber of bytes which this task has caused to be read from storage.\nrgid\nRGID\nreal group ID.\nrgroup\nRGROUP\nreal group name. This will be the textual group ID, if it can be\nobtained and the field width permits, or a decimal representation\notherwise.\nrops\nROPS\nNumber of read I/O operations—that is, system calls such as read\n\"(2) and \" pread (2).\nrss\nRSS\nresident set size, the non-swapped physical memory that a task has used\n(in kilobytes). (alias rssize \", \" rsz ).\nrssize\nRSS\nsee rss . (alias rss \", \" rsz ).\nrsz\nRSZ\nsee rss . (alias rss \", \" rssize ).\nrtprio\nRTPRIO\nrealtime priority.\nruid\nRUID\nreal user ID.\nruser\nRUSER\nreal user ID. This will be the textual user ID, if it can be obtained\nand the field width permits, or a decimal representation otherwise.\ns\nS\nminimal state display (one character). See section PROCESS STATE CODES\nfor the different values. See also stat if you want additional information\ndisplayed. (alias state ).\nsched\nSCH\nscheduling policy of the process. The policies SCHED_OTHER\n(SCHED_NORMAL), SCHED_FIFO, SCHED_RR, SCHED_BATCH, SCHED_ISO, SCHED_IDLE\nand SCHED_DEADLINE are respectively displayed as 0, 1, 2, 3, 4, 5 and\n6.\nseat\nSEAT\ndisplays the identifier associated with all hardware devices assigned to\na specific workplace, if systemd support has been included.\nsess\nSESS\nsession ID or, equivalently, the process ID of the session leader.\n(alias session \", \" sid ).\nsgi_p\nP\nprocessor that the process is currently executing on. Displays\n\"*\" if the process is not currently running or runnable.\nsgid\nSGID\nsaved group ID. (alias svgid ).\nsgroup\nSGROUP\nsaved group name. This will be the textual group ID, if it can be\nobtained and the field width permits, or a decimal representation\notherwise.\nsid\nSID\nsee sess . (alias sess \", \" session ).\nsig\nPENDING\nsee pending . (alias pending \", \" sig_pend ).\nsigcatch\nCAUGHT\nsee caught . (alias caught \", \" sig_catch ).\nsigignore\nIGNORED\nsee ignored . (alias ignored \", \" sig_ignore ).\nsigmask\nBLOCKED\nsee blocked . (alias blocked \", \" sig_block ).\nsize\nSIZE\napproximate amount of swap space that would be required if the process\nwere to dirty all writable pages and then be swapped out. This number is\nvery rough!\nslice\nSLICE\ndisplays the slice unit which a process belongs to, if systemd support\nhas been included.\nspid\nSPID\nsee lwp . (alias lwp \", \" tid ).\nstackp\nSTACKP\naddress of the bottom (start) of stack for the process.\nstart\nSTARTED\ntime the command started. If the process was started less than 24 hours\nago, the output format is \"HH:MM:SS\", else it is\n\"  Mmm dd\" (where Mmm is a three-letter\nmonth name). See also bsdstart \", \" start \", \"\nstart_time \", and \" stime .\nstart_time\nSTART\nstarting time or date of the process. Only the year will be displayed if\nthe process was not started the same year ps was invoked, or\n\"MmmDD\" if it was not started the same day, or \"HH:MM\"\notherwise. See also bsdstart \", \" start \", \" lstart\n\", and \" stime .\nstat\nSTAT\nmulti-character process state. See section PROCESS STATE CODES for the\ndifferent values meaning. See also s  and  state if you just\nwant the first character displayed.\nstate\nS\nsee s \". (alias\"  s ).\nstime\nSTIME\nsee\nstart_time\n. (alias\nstart_time\n).\nsuid\nSUID\nsaved user ID. (alias svuid ).\nsupgid\nSUPGID\ngroup ids of supplementary groups, if any. See getgroups (2).\nsupgrp\nSUPGRP\ngroup names of supplementary groups, if any. See getgroups (2).\nsuser\nSUSER\nsaved user name. This will be the textual user ID, if it can be obtained\nand the field width permits, or a decimal representation otherwise. (alias\nsvuser ).\nsvgid\nSVGID\nsee sgid . (alias sgid ).\nsvuid\nSVUID\nsee suid . (alias suid ).\nsz\nSZ\nsize in physical pages of the core image of the process. This includes\ntext, data, and stack space. Device mappings are currently excluded; this\nis subject to change. See vsz  and  rss .\ntgid\nTGID\na number representing the thread group to which a task belongs (alias\npid ). It is the process ID of the thread group leader.\nthcount\nTHCNT\nsee nlwp . (alias nlwp ). number of kernel threads owned by the\nprocess.\ntid\nTID\nthe unique number representing a dispatchable entity (alias spid \",\n\" tid ). This value may also appear as: a process ID (pid); a process\ngroup ID (pgrp); a session ID for the session leader (sid); a thread group\nID for the thread group leader (tgid); and a tty process group ID for the\nprocess group leader (tpgid).\ntime\nTIME\ncumulative CPU time, \"[DD-]HH:MM:SS\" format. (alias\ncputime ).\ntimens\nTIMENS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\ntimes\nTIME\ncumulative CPU time in seconds (alias cputimes ).\ntname\nTTY\ncontrolling tty (terminal). (alias tt \", \" tty ).\ntpgid\nTPGID\nID of the foreground process group on the tty (terminal) that the\nprocess is connected to, or -1 if the process is not connected to a\ntty.\ntrs\nTRS\ntext resident set size, the amount of physical memory devoted to\nexecutable code.\ntt\nTT\ncontrolling tty (terminal). (alias tname \", \" tty ).\ntty\nTT\ncontrolling tty (terminal). (alias tname \", \" tt ).\nucmd\nCMD\nsee comm . (alias comm \", \" ucomm ).\nucomm\nCOMMAND\nsee comm . (alias comm \", \" ucmd ).\nuid\nUID\nsee euid . (alias euid ).\nuname\nUSER\nsee euser . (alias euser \", \" user ).\nunit\nUNIT\ndisplays unit which a process belongs to, if systemd support has been\nincluded.\nuser\nUSER\nsee euser . (alias euser \", \" uname ).\nuserns\nUSERNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\nuss\nUSS\nUnique set size, the non-swapped physical memory, which is not shared\nwith an another task.\nutsns\nUTSNS\nUnique inode number describing the namespace the process belongs to. See\nnamespaces (7).\nuunit\nUUNIT\ndisplays user unit which a process belongs to, if systemd support has\nbeen included.\nvsize\nVSZ\nsee vsz . (alias vsz ).\nvsz\nVSZ\nvirtual memory size of the process in KiB (1024-byte units). Device\nmappings are currently excluded; this is subject to change. (alias vsize\n).\nwbytes\nWBYTES\nNumber of bytes which this process caused to be sent to the storage\nlayer.\nwcbytes\nWCBYTES\nNumber of cancelled write bytes.\nwchan\nWCHAN\nname of the kernel function in which the process is sleeping.\nwchars\nWCHARS\nNumber of bytes which this task has caused, or shall cause to be written\nto disk.\nwops\nWOPS\nNumber of write I/O operations—that is, system calls such as\nwrite \"(2) and \" pwrite (2).\nENVIRONMENT VARIABLES\n¶\nThe following environment variables could affect\nps\n:\nCOLUMNS\nOverride default display width.\nLINES\nOverride default display height.\nPS_PERSONALITY\nSet to one of posix, old, linux, bsd, sun, digital... (see section\nPERSONALITY\nbelow).\nCMD_ENV\nSet to one of posix, old, linux, bsd, sun, digital... (see section\nPERSONALITY\nbelow).\nI_WANT_A_BROKEN_PS\nForce obsolete command line interpretation.\nLC_TIME\nDate format.\nLIBPROC_HIDE_KERNEL\nSet this to any value to hide kernel threads normally displayed with the\n-e\noption. This is equivalent to selecting\n--ppid 2 -p 2\n--deselect\ninstead. Also works in BSD mode.\nPS_COLORS\nNot currently supported.\nPS_FORMAT\nDefault output format override. You may set this to a format string of the\ntype used for the\n-o\noption. The\nDefSysV\nand\nDefBSD\nvalues are particularly useful.\nPOSIXLY_CORRECT\nDon't find excuses to ignore bad \"features\".\nPOSIX2\nWhen set to \"on\", acts as\nPOSIXLY_CORRECT\n.\nUNIX95\nDon't find excuses to ignore bad \"features\".\n_XPG\nCancel\nCMD_ENV\n=\nirix\nnon-standard behavior.\nIn general, it is a bad idea to set these variables. The one\nexception is\nCMD_ENV\nor\nPS_PERSONALITY\n, which could be set to\nLinux for normal systems. Without that setting,\nps\nfollows the\nuseless and bad parts of the Unix98 standard.\nPERSONALITY\n¶\n390\nlike the OS/390 OpenEdition\nps\naix\nlike AIX\nps\nbsd\nlike FreeBSD\nps\n(totally non-standard)\ncompaq\nlike Digital Unix\nps\ndebian\nlike the old Debian\nps\ndigital\nlike Tru64 (was Digital Unix, was OSF/1)\nps\ngnu\nlike the old Debian\nps\nhp\nlike HP-UX\nps\nhpux\nlike HP-UX\nps\nirix\nlike Irix\nps\nlinux\n*****\nrecommended\n*****\nold\nlike the original Linux\nps\n(totally non-standard)\nos390\nlike OS/390 Open Edition\nps\nposix\nstandard\ns390\nlike OS/390 Open Edition\nps\nsco\nlike SCO\nps\nsgi\nlike Irix\nps\nsolaris2\nlike Solaris 2+ (SunOS 5)\nps\nsunos4\nlike SunOS 4 (Solaris 1)\nps\n(totally non-standard)\nsvr4\nstandard\nsysv\nstandard\ntru64\nlike Tru64 (was Digital Unix, was OSF/1)\nps\nunix\nstandard\nunix95\nstandard\nunix98\nstandard\nBUGS\n¶\nThe fields\nbsdstart\nand\nstart\nwill only show the\nabbreviated month name in English. The fields\nlstart\nand\nstime\nwill show the abbreviated month name in the configured locale but may exceed\nthe column width due to the different lengths for abbreviated month and day\nnames across languages.\nSEE ALSO\n¶\npgrep(1)\n,\npstree(1)\n,\ntop(1)\n,\nstrftime(3)\n,\nproc(5)\n.\nSTANDARDS\n¶\nThis\nps\nconforms to:\n1\nVersion 2 of the Single Unix Specification\n2\nThe Open Group Technical Standard Base Specifications, Issue 6\n3\nIEEE Std 1003.1, 2004 Edition\n4\nX/Open System Interfaces Extension [UP XSI]\n5\nISO/IEC 9945:2003\nAUTHOR\n¶\nps\nwas originally written by\nBranko Lankester\n.\nMichael K. Johnson\nre-wrote it significantly to use the proc filesystem, changing a few things\nin the process.\nMichael\nShields\nadded the pid-list feature.\nCharles Blake\nadded\nmulti-level sorting, the dirent-style library, the device name-to-number\nmmaped database, the approximate binary search directly on System.map, and\nmany code and documentation cleanups. David Mossberger-Tang wrote the\ngeneric BFD support for psupdate.\nAlbert Cahalan\nrewrote\nps for full Unix98 and BSD support, along with some ugly hacks for obsolete\nand foreign syntax.\nPlease send bug reports to\nprocps@freelists.org\n.\nNo subscription is required or suggested.\n2023-08-19\nprocps-ng\nSource file:\nps.1.en.gz (from\nprocps 2:4.0.4-9\n)\nSource last updated:\n2025-07-30T11:58:40Z\nConverted to HTML:\n2025-08-16T16:04:08Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/procps/ps.1.en.html"}}
{"text": "top(1) — procps — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\nprocps\n/ top(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nOVERVIEW\n1. COMMAND-LINE Options\n2. SUMMARY Display\n3. FIELDS / Columns\n4. INTERACTIVE Commands\n5. ALTERNATE-DISPLAY Provisions\n6. FILES\n7. ENVIRONMENT VARIABLE(S)\n8. STUPID TRICKS Sampler\n9. BUGS\n10. SEE Also\nother versions\ntrixie\n2:4.0.4-9\ntesting\n2:4.0.4-9\nunstable\n2:4.0.4-9\nother languages\nEnglish\nromână\nsvenska\nукраїнська\nScroll to navigation\nTOP(1)\nUser Commands\nTOP(1)\nNAME\n¶\ntop - display Linux processes\nSYNOPSIS\n¶\ntop\n[options]\nDESCRIPTION\n¶\nThe\ntop\nprogram provides a dynamic real-time view of a\nrunning system. It can display\nsystem\nsummary information as well as\na list of\nprocesses\nor\nthreads\ncurrently being managed by the\nLinux kernel. The types of system summary information shown and the types,\norder and size of information displayed for processes are all user\nconfigurable and that configuration can be made persistent across\nrestarts.\nThe program provides a limited interactive interface for process\nmanipulation as well as a much more extensive interface for personal\nconfiguration  --  encompassing every aspect of its operation.\nAnd while\ntop\nis referred to throughout this document, you are free\nto name the program anything you wish. That new name, possibly an alias,\nwill then be reflected on top's display and used when reading and writing a\nconfiguration file.\nOVERVIEW\n¶\nDocumentation\n¶\nThe remaining Table of Contents\nOVERVIEW\nOperation\nLinux Memory Types\n1. COMMAND-LINE Options\n2. SUMMARY Display\na. UPTIME and LOAD Averages\nb. TASK and CPU States\nc. MEMORY Usage\n3. FIELDS / Columns Display\na. DESCRIPTIONS of Fields\nb. MANAGING Fields\n4. INTERACTIVE Commands\na. GLOBAL Commands\nb. SUMMARY AREA Commands\nc. TASK AREA Commands\n1. Appearance\n2. Content\n3. Size\n4. Sorting\nd. COLOR Mapping\n5. ALTERNATE-DISPLAY Provisions\na. WINDOWS Overview\nb. COMMANDS for Windows\nc. SCROLLING a Window\nd. SEARCHING in a Window\ne. FILTERING in a Window\n6. FILES\na. PERSONAL Configuration File\nb. ADDING INSPECT Entries\nc. SYSTEM Configuration File\nd. SYSTEM Restrictions File\n7. ENVIRONMENT VARIABLE(S)\n8. STUPID TRICKS Sampler\na. Kernel Magic\nb. Bouncing Windows\nc. The Big Bird Window\nd. The Ol' Switcheroo\n9. BUGS, 10. SEE Also\nOperation\n¶\nWhen operating top, the two most important keys are the help (h or\n?) key and quit (`q') key. Alternatively, you could simply use the\ntraditional interrupt key (^C) when you're done.\nWhen started for the first time, you'll be presented with these\ntraditional elements on the main top screen: 1) Summary Area; 2)\nFields/Columns Header; 3) Task Area. Each of these will be explored in the\nsections that follow. There is also an Input/Message line between the\nSummary Area and Columns Header which needs no further explanation.\nThe main top screen is\ngenerally\nquite adaptive to changes\nin terminal dimensions under X-Windows. Other top screens may be less so,\nespecially those with static text. It ultimately depends, however, on your\nparticular window manager and terminal emulator. There may be occasions when\ntheir view of terminal size and current contents differs from top's view,\nwhich is always based on operating system calls.\nFollowing any re-size operation, if a top screen is corrupted,\nappears incomplete or disordered, simply typing something innocuous like a\npunctuation character or cursor motion key will usually restore it. In\nextreme cases, the following sequence almost certainly will:\nkey/cmd  objective\n^Z\nsuspend\ntop\nfg\nresume\ntop\n<Left>   force a screen\nredraw\n(if necessary)\nBut if the display is still corrupted, there is one more step you\ncould try. Insert this command after top has been suspended but before\nresuming it.\nkey/cmd  objective\nreset    restore your\nterminal settings\nNote\n: the width of top's display will be limited to 512\npositions. Displaying all fields requires approximately 250 characters.\nRemaining screen width is usually allocated to any variable width columns\ncurrently visible. The variable width columns, such as COMMAND, are noted in\ntopic 3a. DESCRIPTIONS of Fields. Actual output width may also be influenced\nby the -w switch, which is discussed in topic 1. COMMAND-LINE Options.\nLastly, some of top's screens or functions require the use of\ncursor motion keys like the standard arrow keys plus the Home, End, PgUp and\nPgDn keys. If your terminal or emulator does not provide those keys, the\nfollowing combinations are accepted as alternatives:\nkey      equivalent-keys\nLeft     alt +\nh\nDown     alt +\nj\nUp       alt +\nk\nRight    alt +\nl\nHome     alt + ctrl +\nh\nPgDn     alt + ctrl +\nj\nPgUp     alt + ctrl +\nk\nEnd      alt + ctrl +\nl\nThe\nUp\nand\nDown\narrow keys have special significance\nwhen prompted for line input terminated with the <Enter> key. Those\nkeys, or their aliases, can be used to retrieve previous input lines which\ncan then be edited and re-input. And there are four additional keys\navailable with line oriented input.\nkey      special-significance\nUp       recall\nolder\nstrings for re-editing\nDown     recall\nnewer\nstrings or\nerase\nentire line\nInsert   toggle between\ninsert\nand\novertype\nmodes\nDelete   character\nremoved\nat cursor, moving others left\nHome     jump to\nbeginning\nof input line\nEnd      jump to\nend\nof input line\nLinux Memory Types\n¶\nFor our purposes there are three types of memory, and one is\noptional. First is physical memory, a limited resource where code and data\nmust reside when executed or referenced. Next is the optional swap file,\nwhere modified (dirty) memory can be saved and later retrieved if too many\ndemands are made on physical memory. Lastly we have virtual memory, a nearly\nunlimited resource serving the following goals:\n1. abstraction, free from physical memory addresses/limits\n2. isolation, every process in a separate address space\n3. sharing, a single mapping can serve multiple needs\n4. flexibility, assign a virtual address to a file\nRegardless of which of these forms memory may take, all are\nmanaged as pages (typically 4096 bytes) but expressed by default in top as\nKiB (kibibyte). The memory discussed under topic `2c. MEMORY Usage' deals\nwith physical memory and the swap file for the system as a whole. The memory\nreviewed in topic `3. FIELDS / Columns Display' embraces all three memory\ntypes, but for individual processes.\nFor each such process, every memory page is restricted to a single\nquadrant from the table below. Both physical memory and virtual memory can\ninclude any of the four, while the swap file only includes #1 through #3.\nThe memory in quadrant #4, when modified, acts as its own dedicated swap\nfile.\nPrivate\n|\nShared\n1\n|\n2\nAnonymous\n. stack               |\n. malloc()            |\n. brk()/sbrk()        | . POSIX shm*\n. mmap(PRIVATE, ANON) | . mmap(SHARED, ANON)\n-----------------------+----------------------\n. mmap(PRIVATE, fd)   | . mmap(SHARED, fd)\nFile-backed\n. pgms/shared libs    |\n3\n|\n4\nThe following may help in interpreting process level memory values\ndisplayed as scalable columns and discussed under topic `3a. DESCRIPTIONS of\nFields'.\n%MEM - simply RES divided by total physical memory\nCODE - the `pgms' portion of quadrant\n3\nDATA - the entire quadrant\n1\nportion of VIRT plus all\nexplicit mmap file-backed pages of quadrant\n3\nRES  - anything occupying physical memory which, beginning with\nLinux-4.5, is the sum of the following three fields:\nRSan - quadrant\n1\npages, which include any\nformer quadrant\n3\npages if modified\nRSfd - quadrant\n3\nand quadrant\n4\npages\nRSsh - quadrant\n2\npages\nRSlk - subset of RES which cannot be swapped out (any quadrant)\nSHR  - subset of RES (excludes\n1\n, includes all\n2\n&\n4\n, some\n3\n)\nSWAP - potentially any quadrant except\n4\nUSED - simply the sum of RES and SWAP\nVIRT - everything in-use and/or reserved (all quadrants)\nNote\n: Even though program images and shared libraries are\nconsidered\nprivate\nto a process, they will be accounted for as\nshared\n(SHR) by the kernel.\n1. COMMAND-LINE Options\n¶\nMandatory\narguments\nto long options are mandatory for short\noptions too.\nAlthough not required, the equals sign can be used with either\noption form and whitespace before and/or after the `=' is permitted.\n-\nb\n,\n--batch\nStarts top in Batch mode, which could be useful for sending output from\ntop to other programs or to a file. In this mode, top will not accept\ninput and runs until the iterations limit you've set with the `-n'\ncommand-line option or until killed.\n-\nc\n,\n--cmdline-toggle\nStarts top with the last remembered `c' state reversed. Thus, if top was\ndisplaying command lines, now that field will show program names, and vice\nversa. See the `c' interactive command for additional information.\n-\nd\n,\n--delay\n=\nSECS\n[\n.TENTHS\n]\nSpecifies the delay between screen updates, and overrides the\ncorresponding value in one's personal configuration file or the startup\ndefault. Later this can be changed with the `d' or `s' interactive\ncommands.\nFractional seconds are honored, but a negative number is not\nallowed. In all cases, however, such changes are prohibited if top is\nrunning in Secure mode, except for root (unless the `s' command-line\noption was used). For additional information on Secure mode see topic\n6d. SYSTEM Restrictions File.\n-\nE\n,\n--scale-summary-mem\n=\nk\n|\nm\n|\ng\n|\nt\n|\np\n|\ne\nInstructs top to force summary area memory to be scaled as:\nk - kibibytes\nm - mebibytes\ng - gibibytes\nt - tebibytes\np - pebibytes\ne - exbibytes\nLater this can be changed with the `E' command toggle.\n-\ne\n,\n--scale-task-mem\n=\nk\n|\nm\n|\ng\n|\nt\n|\np\nInstructs top to force task area memory to be scaled as:\nk - kibibytes\nm - mebibytes\ng - gibibytes\nt - tebibytes\np - pebibytes\nLater this can be changed with the `e' command toggle.\n-\nH\n,\n--threads-show\nInstructs top to display individual threads. Without this command-line\noption a summation of all threads in each process is shown. Later this can\nbe changed with the `H' interactive command.\n-\nh\n,\n--help\nDisplay usage help text, then quit.\n-\ni\n,\n--idle-toggle\nStarts top with the last remembered `i' state reversed. When this toggle\nis\nOff\n, tasks that have not used any CPU since the last update will\nnot be displayed. For additional information regarding this toggle see\ntopic 4c. TASK AREA Commands, SIZE.\n-\nn\n,\n--iterations\n=\nNUMBER\nSpecifies the maximum number of iterations, or frames, top should produce\nbefore ending.\n-\nO\n,\n--list-fields\nThis option acts as a form of help for the -o option shown below. It will\ncause top to print each of the available field names on a separate line,\nthen quit. Such names are subject to NLS (National Language Support)\ntranslation.\n-\no\n,\n--sort-override\n=\nFIELDNAME\nSpecifies the name of the field on which tasks will be sorted, independent\nof what is reflected in the configuration file. You can prepend a `+' or\n`-' to the field name to also override the sort direction. A leading `+'\nwill force sorting high to low, whereas a `-' will ensure a low to high\nordering.\nThis option exists primarily to support automated/scripted\nbatch mode operation.\n-\np\n,\n--pid\n=\nPIDLIST\n(as:\n1\n,\n2\n,\n3\n, ... or -p\n1\n-p\n2\n-p\n3\n...)\nMonitor only processes with specified process IDs. However, when combined\nwith Threads mode (`H'), all processes in the thread group (see TGID) of\neach monitored PID will also be shown.\nThis option can be given up to 20 times, or you can provide a\ncomma delimited list with up to 20 pids. Co-mingling both approaches is\npermitted.\nA pid value of zero will be treated as the process id of the\ntop program itself once it is running.\nThis is a command-line option only and should you wish to\nreturn to normal operation, it is not necessary to quit and restart top\n--  just issue any of these interactive commands: `=',\n`u' or `U'.\nThe `p', `u' and `U' command-line options are mutually\nexclusive.\n-\nS\n,\n--accum-time-toggle\nStarts top with the last remembered `S' state reversed. When Cumulative\ntime mode is\nOn\n, each process is listed with the cpu time that it\nand its dead children have used. See the `S' interactive command for\nadditional information regarding this mode.\n-\ns\n,\n--secure-mode\nStarts top with secure mode forced, even for root. This mode is far better\ncontrolled through a system configuration file (see topic 6. FILES).\n-\nU\n,\n--filter-any-user\n=\nUSER\n(as:\nnumber\nor\nname\n)\nDisplay only processes with a user id or user name matching that given.\nThis option matches on\nany\nuser (\nreal\n,\neffective\n,\nsaved\n, or\nfilesystem\n).\nPrepending an exclamation point (`!') to the user id or name\ninstructs top to display only processes with users not matching the one\nprovided.\nThe `p', `U' and `u' command-line options are mutually\nexclusive.\n-\nu\n,\n--filter-only-euser\n=\nUSER\n(as:\nnumber\nor\nname\n)\nDisplay only processes with a user id or user name matching that given.\nThis option matches on the\neffective\nuser id only.\nPrepending an exclamation point (`!') to the user id or name\ninstructs top to display only processes with users not matching the one\nprovided.\nThe `p', `U' and `u' command-line options are mutually\nexclusive.\n-\nV\n,\n--version\nDisplay version information, then quit.\n-\nw\n,\n--width\n[=\nCOLUMNS\n]\nIn Batch mode, when used without an argument top will format output using\nthe COLUMNS= and LINES= environment variables, if set. Otherwise, width\nwill be fixed at the maximum 512 columns. With an argument, output width\ncan be decreased or increased (up to 512) but the number of rows is\nconsidered unlimited.\nIn normal display mode, when used without an argument top\nwill\nattempt\nto format output using the COLUMNS= and LINES=\nenvironment variables, if set. With an argument, output width can only\nbe decreased, not increased. Whether using environment variables or an\nargument with -w, when\nnot\nin Batch mode actual terminal\ndimensions can never be exceeded.\nNote\n: Without the use of this command-line option,\noutput width is always based on the terminal at which top was invoked\nwhether or not in Batch mode.\n-\n1\n,\n--single-cpu-toggle\nStarts top with the last remembered Cpu States portion of the summary area\nreversed. Either all cpu information will be displayed in a single line or\neach cpu will be displayed separately, depending on the state of the NUMA\nNode command toggle (`2').\nSee the `1' and `2' interactive commands for additional\ninformation.\n2. SUMMARY Display\n¶\nEach of the following three areas are individually controlled\nthrough one or more interactive commands. See topic 4b. SUMMARY AREA\nCommands for additional information regarding these provisions.\n2a. UPTIME and LOAD Averages\n¶\nThis portion consists of a single line containing:\nprogram\nor\nwindow\nname, depending on display mode\ncurrent time and length of time since last boot\ntotal number of users\nsystem load avg over the last 1, 5 and 15 minutes\n2b. TASK and CPU States\n¶\nThis portion consists of a minimum of two lines. In an SMP\nenvironment, additional lines can reflect individual CPU state\npercentages.\nLine 1 shows total\ntasks\nor\nthreads\n, depending on\nthe state of the Threads-mode toggle. That total is further classified\nas:\nrunning; sleeping; stopped; zombie\nLine 2 shows CPU state percentages based on the interval since the\nlast refresh.\nAs a default, percentages for these individual categories are\ndisplayed. Depending on your kernel version, the\nst\nfield may not be\nshown.\nus\n: time running un-niced user processes\nsy\n: time running kernel processes\nni\n: time running niced user processes\nid\n: time spent in the kernel idle handler\nwa\n: time waiting for I/O completion\nhi\n: time spent servicing hardware interrupts\nsi\n: time spent servicing software interrupts\nst\n: time stolen from this vm by the hypervisor\nThe `sy' value above also reflects the time running a virtual cpu\nfor guest operating systems, including those that have been niced.\nBeyond the first tasks/threads line, there are alternate CPU\ndisplay modes available via the 4-way `t' command toggle. They show an\nabbreviated summary consisting of these elements:\na    b     c    d\n%Cpu(s):\n75.0\n/25.0\n100\n[ ... ]\nWhere: a) is the `user' (us + ni) percentage; b) is the `system'\n(sy + hi + si + guests) percentage; c) is the total percentage; and d) is\none of two visual graphs of those representations. Such graphs also reflect\nseparate `user' and `system' portions.\nIf the `4' command toggle is used to yield more than two cpus per\nline, results will be further abridged eliminating the a) and b) elements.\nHowever, that information is still reflected in the graph itself assuming\ncolor is active or, if not, bars vs. blocks are being shown.\nSee topic 4b. SUMMARY AREA Commands for additional information on\nthe `t' and `4' command toggles.\n2c. MEMORY Usage\n¶\nThis portion consists of two lines which may express values in\nkibibytes (KiB) through exbibytes (EiB) depending on the scaling factor\nenforced with the `E' interactive command. The /proc/meminfo source fields\nare shown in parenthesis.\nLine 1 reflects physical memory, classified as:\ntotal          ( MemTotal )\nfree           ( MemFree )\nused           ( MemTotal - MemAvailable )\nbuff/cache     ( Buffers + Cached + SReclaimable )\nLine 2 reflects mostly virtual memory, classified as:\ntotal          ( SwapTotal )\nfree           ( SwapFree )\nused           ( SwapTotal - SwapFree )\navail          ( MemAvailable, which is physical memory )\nThe\navail\nnumber on line 2 is an estimation of physical\nmemory available for starting new applications, without swapping. Unlike the\nfree\nfield, it attempts to account for readily reclaimable page cache\nand memory slabs. It is available on kernels 3.14, emulated on kernels\n2.6.27+, otherwise the same as\nfree\n.\nIn the alternate memory display modes, two abbreviated summary\nlines are shown consisting of these elements:\na    b          c\nGiB Mem :\n18.7\n/15.738   [ ... ]\nGiB Swap:\n0.0\n/7.999    [ ... ]\nWhere: a) is the percentage used; b) is the total available; and\nc) is one of two visual graphs of those representations.\nIn the case of physical memory, the percentage represents the\ntotal\nminus the estimated\navail\nnoted above. The `Mem' graph\nitself is divided between the non-cached portion of\nused\nand any\nremaining memory not otherwise accounted for by\navail\n. See topic 4b.\nSUMMARY AREA Commands and the `m' command for additional information on that\nspecial 4-way toggle.\nThis table may help in interpreting the scaled values\ndisplayed:\nKiB = kibibyte = 1024 bytes\nMiB = mebibyte = 1024 KiB = 1,048,576 bytes\nGiB = gibibyte = 1024 MiB = 1,073,741,824 bytes\nTiB = tebibyte = 1024 GiB = 1,099,511,627,776 bytes\nPiB = pebibyte = 1024 TiB = 1,125,899,906,842,624 bytes\nEiB = exbibyte = 1024 PiB = 1,152,921,504,606,846,976 bytes\n3. FIELDS / Columns\n¶\n3a. DESCRIPTIONS of Fields\n¶\nListed below are top's available process fields (columns). They\nare shown in strict ascii alphabetical order. You may customize their\nposition and whether or not they are displayable with the `f' (Fields\nManagement) interactive command.\nAny field is selectable as the sort field, and you control whether\nthey are sorted high-to-low or low-to-high. For additional information on\nsort provisions see topic 4c. TASK AREA Commands, SORTING.\nThe fields related to physical memory or virtual memory reference\n`(KiB)' which is the unsuffixed display mode. Such fields may, however, be\nscaled from KiB through PiB. That scaling is influenced via the `e'\ninteractive command or established for startup through a build option.\n%CPU\n--  CPU Usage\nThe task's share of the elapsed CPU time since the last screen update,\nexpressed as a percentage of total CPU time.\nIn a true SMP environment, if a process is multi-threaded and\ntop is\nnot\noperating in Threads mode, amounts greater than 100%\nmay be reported. You toggle Threads mode with the `H' interactive\ncommand.\nAlso for multi-processor environments, if Irix mode is\nOff\n, top will operate in Solaris mode where a task's cpu usage\nwill be divided by the total number of CPUs. You toggle Irix/Solaris\nmodes with the `I' interactive command.\nNote\n: When running in forest view mode (`V') with\nchildren collapsed (`v'), this field will also include the CPU time of\nthose unseen children. See topic 4c. TASK AREA Commands, CONTENT for\nmore information regarding the `V' and `v' toggles.\n%CUC\n--  CPU Utilization\nThis field is identical to %CUU below, except the percentage also reflects\nreaped child processes.\n%CUU\n--  CPU Utilization\nA task's total CPU usage divided by its elapsed running time, expressed as\na percentage.\nIf a process currently displays high CPU usage, this field can\nhelp determine if such behavior is normal. Conversely, if a process has\nlow CPU usage currently, %CUU may reflect historically higher demands\nover its lifetime.\n%MEM\n--  Memory Usage (RES)\nA task's currently resident share of available physical memory.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nAGID\n--\nAutogroup Identifier\nThe autogroup identifier associated with a process. This feature operates\nin conjunction with the CFS scheduler to improve interactive desktop\nperformance.\nWhen /proc/sys/kernel/sched_autogroup_enabled is set, a new\nautogroup is created with each new session (see SID). All subsequently\nforked processes in that session inherit membership in this autogroup.\nThe kernel then attempts to equalize distribution of CPU cycles across\nsuch groups. Thus, an autogroup with many CPU intensive processes (e.g\nmake -j) will not dominate an autogroup with only one or two\nprocesses.\nWhen -1 is displayed it means this information is not\navailable.\nAGNI\n--\nAutogroup Nice Value\nThe autogroup nice value which affects scheduling of all processes in that\ngroup. A negative nice value means higher priority, whereas a positive\nnice value means lower priority.\nCGNAME\n--  Control Group Name\nThe name of the control group to which a process belongs, or `-' if not\napplicable for that process.\nThis will typically be the last entry in the full list of\ncontrol groups as shown under the next heading (CGROUPS). And as is true\nthere, this field is also variable width.\nCGROUPS\n--  Control Groups\nThe names of the control group(s) to which a process belongs, or `-' if\nnot applicable for that process.\nControl Groups provide for allocating resources (cpu, memory,\nnetwork bandwidth, etc.) among installation-defined groups of processes.\nThey enable fine-grained control over allocating, denying, prioritizing,\nmanaging and monitoring those resources.\nMany different hierarchies of cgroups can exist simultaneously\non a system and each hierarchy is attached to one or more subsystems. A\nsubsystem represents a single resource.\nNote\n: The CGROUPS field, unlike most columns, is not\nfixed-width. When displayed, it plus any other variable width columns\nwill be allocated all remaining screen width (up to the maximum 512\ncharacters). Even so, such variable width fields could still suffer\ntruncation. See topic 5c. SCROLLING a Window for additional information\non accessing any truncated data.\nCODE\n--\nCode Size (KiB)\nThe amount of physical memory currently devoted to executable code, also\nknown as the Text Resident Set size or TRS.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nCOMMAND\n--  Command\nName\nor Command\nLine\nDisplay the command line used to start a task or the name of the\nassociated program. You toggle between command\nline\nand\nname\nwith `c', which is both a command-line option and an interactive command.\nWhen you've chosen to display command lines, processes without\na command line (like kernel threads) will be shown with only the program\nname in brackets, as in this example:\n[kthreadd]\nThis field may also be impacted by the forest view display\nmode. See the `V' interactive command for additional information\nregarding that mode.\nNote\n: The COMMAND field, unlike most columns, is not\nfixed-width. When displayed, it plus any other variable width columns\nwill be allocated all remaining screen width (up to the maximum 512\ncharacters). Even so, such variable width fields could still suffer\ntruncation. This is especially true for this field when command lines\nare being displayed (the `c' interactive command.) See topic 5c.\nSCROLLING a Window for additional information on accessing any truncated\ndata.\nDATA\n--\nData + Stack Size (KiB)\nThe amount of private memory\nreserved\nby a process. It is also\nknown as the Data Resident Set or DRS. Such memory may not yet be mapped\nto physical memory (RES) but will always be included in the virtual memory\n(VIRT) amount.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nELAPSED\n--  Elapsed Running Time\nThe length of time since a process was started. Thus, the most recently\nstarted task will display the smallest time interval.\nThe value will be expressed as `HH,MM' (hours,minutes) but is\nsubject to additional scaling if the interval becomes too great to fit\ncolumn width. At that point it will be scaled to `DD+HH' (days+hours)\nand possibly beyond.\nENVIRON\n--  Environment variables\nDisplay all of the environment variables, if any, as seen by the\nrespective processes. These variables will be displayed in their raw\nnative order, not the sorted order you are accustomed to seeing with an\nunqualified `set'.\nNote\n: The ENVIRON field, unlike most columns, is not\nfixed-width. When displayed, it plus any other variable width columns\nwill be allocated all remaining screen width (up to the maximum 512\ncharacters). Even so, such variable width fields could still suffer\ntruncation. This is especially true for this field. See topic 5c.\nSCROLLING a Window for additional information on accessing any truncated\ndata.\nEXE\n--\nExecutable Path\nWhere available, this is the full path to the executable, including the\nprogram name.\nNote\n: The EXE field, unlike most columns, is not\nfixed-width. When displayed, it plus any other variable width columns\nwill be allocated all remaining screen width (up to the maximum 512\ncharacters).\nFlags\n--  Task Flags\nThis column represents the task's current scheduling flags which are\nexpressed in hexadecimal notation and with zeros suppressed. These flags\nare officially documented in <linux/sched.h>.\nGID\n--\nGroup Id\nThe\neffective\ngroup ID.\nGROUP\n--  Group Name\nThe\neffective\ngroup name.\nLOGID\n--  Login User Id\nThe user ID used at\nlogin\n. When -1 is displayed it means this\ninformation is not available.\nLXC\n--\nLxc Container Name\nThe name of the lxc container within which a task is running. If a process\nis not running inside a container, a dash (`-') will be shown.\nNI\n--  Nice\nValue\nThe nice value of the task. A negative nice value means higher priority,\nwhereas a positive nice value means lower priority. Zero in this field\nsimply means priority will not be adjusted in determining a task's\ndispatch-ability.\nNote\n: This value only affects scheduling priority\nrelative to other processes in the same autogroup. See the `AGID' and\n`AGNI' fields for additional information on autogroups.\nNU\n--  Last\nknown NUMA node\nA number representing the NUMA node associated with the last used\nprocessor (`P'). When -1 is displayed it means that NUMA information is\nnot available.\nSee the `2' and `3' interactive commands for additional NUMA\nprovisions affecting the summary area.\nOOMa\n--\nOut of Memory Adjustment Factor\nThe value, ranging from -1000 to +1000, added to the current out of memory\nscore (OOMs) which is then used to determine which task to kill when\nmemory is exhausted.\nOOMs\n--\nOut of Memory Score\nThe value, ranging from 0 to +1000, used to select task(s) to kill when\nmemory is exhausted. Zero translates to `never kill' whereas 1000 means\n`always kill'.\nP\n--  Last\nused CPU (SMP)\nA number representing the last used processor. In a true SMP environment\nthis will likely change frequently since the kernel intentionally uses\nweak affinity. Also, the very act of running top may break this weak\naffinity and cause more processes to change CPUs more often (because of\nthe extra demand for cpu time).\nPGRP\n--\nProcess Group Id\nEvery process is member of a unique process group which is used for\ndistribution of signals and by terminals to arbitrate requests for their\ninput and output. When a process is created (forked), it becomes a member\nof the process group of its parent. By convention, this value equals the\nprocess ID (see PID) of the first member of a process group, called the\nprocess group leader.\nPID\n--\nProcess Id\nThe task's unique process ID, which periodically wraps, though never\nrestarting at zero. In kernel terms, it is a dispatchable entity defined\nby a task_struct.\nThis value may also be used as: a process group ID (see PGRP);\na session ID for the session leader (see SID); a thread group ID for the\nthread group leader (see TGID); and a TTY process group ID for the\nprocess group leader (see TPGID).\nPPID\n--\nParent Process Id\nThe process ID (pid) of a task's parent.\nPR\n--\nPriority\nThe scheduling priority of the task. If you see `rt' in this field, it\nmeans the task is running under real time scheduling priority.\nUnder linux, real time priority is somewhat misleading since\ntraditionally the operating itself was not preemptible. And while the\n2.6 kernel can be made mostly preemptible, it is not always so.\nPSS\n--\nProportional Resident Memory, smaps (KiB)\nThe proportion of this task's share of `RSS' where each page is divided by\nthe number of processes sharing it. It is also the sum of the `PSan',\n`PSfd' and `PSsh' fields.\nFor example, if a process has 1000 resident pages alone and\n1000 resident pages shared with another process, its `PSS' would be 1500\n(times page size).\nAccessing smaps values is 10x more costly than other memory\nstatistics and data for other users requires root privileges.\nPSan\n--  Proportional Anonymous Memory,\nsmaps (KiB)\nPSfd\n--  Proportional File Memory, smaps (KiB)\nPSsh\n--  Proportional Shmem Memory, smaps (KiB)\nAs was true for `PSS' above (total proportional resident\nmemory), these fields represent the proportion of this task's share of each\ntype of memory divided by the number of processes sharing it.\nAccessing smaps values is 10x more costly than other memory\nstatistics and data for other users requires root privileges.\nRES\n--\nResident Memory Size (KiB)\nA subset of the virtual address space (VIRT) representing the non-swapped\nphysical memory a task is currently using. It is also the sum of the\n`RSan', `RSfd' and `RSsh' fields.\nIt can include private anonymous pages, private pages mapped\nto files (including program images and shared libraries) plus shared\nanonymous pages. All such memory is backed by the swap file represented\nseparately under SWAP.\nLastly, this field may also include shared file-backed pages\nwhich, when modified, act as a dedicated swap file and thus will never\nimpact SWAP.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nRSS\n--\nResident Memory, smaps (KiB)\nAnother, more precise view of process non-swapped physical memory. It is\nobtained from the `smaps_rollup' file and is generally slightly larger\nthan that shown for `RES'.\nAccessing smaps values is 10x more costly than other memory\nstatistics and data for other users requires root privileges.\nRSan\n--\nResident Anonymous Memory Size (KiB)\nA subset of resident memory (RES) representing private pages not mapped to\na file.\nRSfd\n--\nResident File-Backed Memory Size (KiB)\nA subset of resident memory (RES) representing the implicitly shared pages\nsupporting program images and shared libraries. It also includes explicit\nfile mappings, both private and shared.\nRSlk\n--\nResident Locked Memory Size (KiB)\nA subset of resident memory (RES) which cannot be swapped out.\nRSsh\n--\nResident Shared Memory Size (KiB)\nA subset of resident memory (RES) representing the explicitly shared\nanonymous shm*/mmap pages.\nRUID\n--\nReal User Id\nThe\nreal\nuser ID.\nRUSER\n--  Real User Name\nThe\nreal\nuser name.\nS\n--\nProcess Status\nThe status of the task which can be one of:\nD\n= uninterruptible sleep\nI\n= idle\nR\n= running\nS\n= sleeping\nT\n= stopped by job control signal\nt\n= stopped by debugger during trace\nZ\n= zombie\nTasks shown as running should be more properly thought of as\nready to run  --  their task_struct is simply represented\non the Linux run-queue. Even without a true SMP machine, you may see\nnumerous tasks in this state depending on top's delay interval and nice\nvalue.\nSHR\n--\nShared Memory Size (KiB)\nA subset of resident memory (RES) that may be used by other processes. It\nwill include shared anonymous pages and shared file-backed pages. It also\nincludes private pages mapped to files representing program images and\nshared libraries.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nSID\n--\nSession Id\nA session is a collection of process groups (see PGRP), usually\nestablished by the login shell. A newly forked process joins the session\nof its creator. By convention, this value equals the process ID (see PID)\nof the first member of the session, called the session leader, which is\nusually the login shell.\nSTARTED\n--  Start Time Interval\nThe length of time since system boot when a process started. Thus, the\nmost recently started task will display the largest time interval.\nThe value will be expressed as `MM:SS' (minutes:seconds). But\nif the interval is too great to fit column width it will be scaled as\n`HH,MM' (hours,minutes) and possibly beyond.\nSUID\n--\nSaved User Id\nThe\nsaved\nuser ID.\nSUPGIDS\n--  Supplementary Group IDs\nThe IDs of any supplementary group(s) established at login or inherited\nfrom a task's parent. They are displayed in a comma delimited list.\nNote\n: The SUPGIDS field, unlike most columns, is not\nfixed-width. When displayed, it plus any other variable width columns\nwill be allocated all remaining screen width (up to the maximum 512\ncharacters).\nSUPGRPS\n--  Supplementary Group Names\nThe names of any supplementary group(s) established at login or inherited\nfrom a task's parent. They are displayed in a comma delimited list.\nNote\n: The SUPGRPS field, unlike most columns, is not\nfixed-width. When displayed, it plus any other variable width columns\nwill be allocated all remaining screen width (up to the maximum 512\ncharacters).\nSUSER\n--  Saved User Name\nThe\nsaved\nuser name.\nSWAP\n--\nSwapped Size (KiB)\nThe formerly resident portion of a task's address space written to the\nswap file when physical memory becomes over committed.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nTGID\n--\nThread Group Id\nThe ID of the thread group to which a task belongs. It is the PID of the\nthread group leader. In kernel terms, it represents those tasks that share\nan mm_struct.\nTIME\n--\nCPU Time\nTotal CPU time the task has used since it started. When Cumulative mode is\nOn\n, each process is listed with the cpu time that it and its dead\nchildren have used. You toggle Cumulative mode with `S', which is both a\ncommand-line option and an interactive command. See the `S' interactive\ncommand for additional information regarding this mode.\nTIME+\n--  CPU Time, hundredths\nThe same as TIME, but reflecting more granularity through hundredths of a\nsecond.\nTPGID\n--  Tty Process Group Id\nThe process group ID of the foreground process for the connected tty, or\n-1 if a process is not connected to a terminal. By convention, this value\nequals the process ID (see PID) of the process group leader (see PGRP).\nTTY\n--\nControlling Tty\nThe name of the controlling terminal. This is usually the device (serial\nport, pty, etc.) from which the process was started, and which it uses for\ninput or output. However, a task need not be associated with a terminal,\nin which case you'll see `?' displayed.\nUID\n--\nUser Id\nThe\neffective\nuser ID of the task's owner.\nUSED\n--\nMemory in Use (KiB)\nThis field represents the non-swapped physical memory a task is using\n(RES) plus the swapped out portion of its address space (SWAP).\nSee `OVERVIEW, Linux Memory Types' for additional details.\nUSER\n--\nUser Name\nThe\neffective\nuser name of the task's owner.\nUSS\n--\nUnique Set Size\nThe non-swapped portion of physical memory (`RSS') not shared with any\nother process. It is derived from the `smaps_rollup' file.\nAccessing smaps values is 10x more costly than other memory\nstatistics and data for other users requires root privileges.\nVIRT\n--\nVirtual Memory Size (KiB)\nThe total amount of virtual memory used by the task. It includes all code,\ndata and shared libraries plus pages that have been swapped out and pages\nthat have been mapped but not used.\nSee `OVERVIEW, Linux Memory Types' for additional details.\nWCHAN\n--  Sleeping in Function\nThis field will show the name of the kernel function in which the task is\ncurrently sleeping. Running tasks will display a dash (`-') in this\ncolumn.\nioR\n--\nI/O Bytes Read\nThe number of bytes a process caused to be fetched from the storage layer.\nRoot privileges are required to display `io' data for other\nusers.\nioRop\n--  I/O Read Operations\nThe number of read I/O operations (syscalls) for a process. Such calls\nmight not result in actual physical disk I/O.\nioW\n--\nI/O Bytes Written\nThe number of bytes a process caused to be sent to the storage layer.\nioWop\n--  I/O Write Operations\nThe number of write I/O operations (syscalls) for a process. Such calls\nmight not result in actual physical disk I/O.\nnDRT\n--\nDirty Pages Count\nThe number of pages that have been modified since they were last written\nto auxiliary storage. Dirty pages must be written to auxiliary storage\nbefore the corresponding physical memory location can be used for some\nother virtual page.\nThis field was deprecated with linux 2.6 and is always\nzero.\nnMaj\n--\nMajor Page Fault Count\nThe number of\nmajor\npage faults that have occurred for a task. A\npage fault occurs when a process attempts to read from or write to a\nvirtual page that is not currently present in its address space. A major\npage fault is when auxiliary storage access is involved in making that\npage available.\nnMin\n--\nMinor Page Fault count\nThe number of\nminor\npage faults that have occurred for a task. A\npage fault occurs when a process attempts to read from or write to a\nvirtual page that is not currently present in its address space. A minor\npage fault does not involve auxiliary storage access in making that page\navailable.\nnTH\n--\nNumber of Threads\nThe number of threads associated with a process.\nnsCGROUP\n--  CGROUP namespace\nThe Inode of the namespace used to hide the identity of the control group\nof which process is a member.\nnsIPC\n--  IPC namespace\nThe Inode of the namespace used to isolate interprocess communication\n(IPC) resources such as System V IPC objects and POSIX message queues.\nnsMNT\n--  MNT namespace\nThe Inode of the namespace used to isolate filesystem mount points thus\noffering different views of the filesystem hierarchy.\nnsNET\n--  NET namespace\nThe Inode of the namespace used to isolate resources such as network\ndevices, IP addresses, IP routing, port numbers, etc.\nnsPID\n--  PID namespace\nThe Inode of the namespace used to isolate process ID numbers meaning they\nneed not remain unique. Thus, each such namespace could have its own\n`init/systemd' (PID #1) to manage various initialization tasks and reap\norphaned child processes.\nnsTIME\n--  TIME namespace\nThe Inode of the namespace which allows processes to see different system\ntimes in a way similar to the UTS namespace.\nnsUSER\n--  USER namespace\nThe Inode of the namespace used to isolate the user and group ID numbers.\nThus, a process could have a normal unprivileged user ID outside a user\nnamespace while having a user ID of 0, with full root privileges, inside\nthat namespace.\nnsUTS\n--  UTS namespace\nThe Inode of the namespace used to isolate hostname and NIS domain name.\nUTS simply means \"UNIX Time-sharing System\".\nvMj\n--\nMajor Page Fault Count Delta\nThe number of\nmajor\npage faults that have occurred since the last\nupdate (see nMaj).\nvMn\n--\nMinor Page Fault Count Delta\nThe number of\nminor\npage faults that have occurred since the last\nupdate (see nMin).\n3b. MANAGING Fields\n¶\nAfter pressing the interactive command `f' (Fields Management) you\nwill be presented with a screen showing: 1) the `current' window name; 2)\nthe designated sort field; 3) all fields in their current order along with\ndescriptions. Entries marked with an asterisk are the currently displayed\nfields, screen width permitting.\nAs the on screen instructions indicate, you navigate among the fields with\nthe\nUp\nand\nDown\narrow keys. The PgUp, PgDn, Home and End\nkeys can also be used to quickly reach the first or last available field.\nThe\nRight\narrow key selects a field for repositioning and the\nLeft\narrow key or the <\nEnter\n> key commits that field's\nplacement.\nThe `\nd\n' key or the <\nSpace\n> bar toggles a field's\ndisplay status, and thus the presence or absence of the asterisk.\nThe `\ns\n' key designates a field as the sort field. See topic 4c.\nTASK AREA Commands, SORTING for additional information regarding your\nselection of a sort field.\nThe `\na\n' and `\nw\n' keys can be used to cycle through all\navailable windows and the `\nq\n' or <\nEsc\n> keys exit\nFields Management.\nThe Fields Management screen can also be used to change the\n`current' window/field group in either full-screen mode or alternate-display\nmode. Whatever was targeted when `q' or <Esc> was pressed will be made\ncurrent as you return to the top display. See topic 5. ALTERNATE-DISPLAY\nProvisions and the `g' interactive command for insight into `current'\nwindows and field groups.\nNote\n: Any window that has been scrolled\nhorizontally\nwill be reset if any field changes are made via the Fields Management\nscreen. Any\nvertical\nscrolled position, however, will not be\naffected. See topic 5c. SCROLLING a Window for additional information\nregarding vertical and horizontal scrolling.\n4. INTERACTIVE Commands\n¶\nListed below is a brief index of commands within categories. Some\ncommands appear more than once  --  their meaning or scope may\nvary depending on the context in which they are issued.\n4a.\nGlobal-Commands\n<Ent/Sp> ?, =, 0,\nA, B, d, E, e, g, H, h, I, k, q, r, s, W, X, Y, Z,\n^G, ^K, ^N, ^P, ^U, ^L, ^R\n4b.\nSummary-Area-Commands\nC, l, t, m, 1, 2, 3, 4, 5, !\n4c.\nTask-Area-Commands\nAppearance:  b, J, j, x, y, z\nContent:     c, F, f, O, o, S, U, u, V, v, ^E\nSize:        #, i, n\nSorting:     <, >, f, R\n4d.\nColor-Mapping\n<Ret>, a, B, b, H, M, q, S, T, w, z, 0 - 7\n5b.\nCommands-for-Windows\n-, _, =, +, A, a, G, g, w\n5c.\nScrolling-a-Window\nC, Up, Dn, Left, Right, PgUp, PgDn, Home, End\n5d.\nSearching-in-a-Window\nL, &\n5e.\nFiltering-in-a-Window\nO, o, ^O, =, +\n4a. GLOBAL Commands\n¶\nThe global interactive commands are\nalways\navailable in\nboth full-screen mode and alternate-display mode. However, some of these\ninteractive commands are\nnot available\nwhen running in Secure\nmode.\nIf you wish to know in advance whether or not your top has been\nsecured, simply ask for help and view the system summary on the second\nline.\n<\nEnter\n> or\n<\nSpace\n>  :\nRefresh-Display\nThese commands awaken top and following receipt of any input the entire\ndisplay will be repainted. They also force an update of any hotplugged cpu\nor physical memory changes.\nUse either of these keys if you have a large delay interval\nand wish to see current status,\n?\n|\nh\n:\nHelp\nThere are two help levels available. The first will provide a reminder of\nall the basic interactive commands. If top is\nsecured\n, that screen\nwill be abbreviated.\nTyping `h' or `?' on that help screen will take you to help\nfor those interactive commands applicable to alternate-display mode.\n=\n:\nExit-Display-Limits\nRemoves restrictions on what is shown. This command will reverse any `i'\n(idle tasks), `n' (max tasks), `v' (hide children) and `F' focus commands\nthat might be active. It also provides for an exit from PID monitoring,\nUser filtering, Other filtering, Locate processing and Combine Cpus mode.\nAdditionally, if the window has been scrolled it will be reset\nwith this command.\n0\n:\nZero-Suppress\ntoggle\nThis command determines whether zeros are shown or suppressed for many of\nthe fields in a task window. Fields like UID, GID, NI, PR or P are not\naffected by this toggle.\nA\n:\nAlternate-Display-Mode\ntoggle\nThis command will switch between full-screen mode and alternate-display\nmode. See topic 5. ALTERNATE-DISPLAY Provisions and the `g' interactive\ncommand for insight into `current' windows and field groups.\nB\n:\nBold-Disable/Enable\ntoggle\nThis command will influence use of the bold terminfo capability and\nalters\nboth\nthe summary area and task area for the `current'\nwindow. While it is intended primarily for use with dumb terminals, it can\nbe applied anytime.\nNote\n: When this toggle is\nOn\nand top is\noperating in monochrome mode, the\nentire display\nwill appear as\nnormal text. Thus, unless the `x' and/or `y' toggles are using reverse\nfor emphasis, there will be no visual confirmation that they are even\non.\n*\nd\n|\ns\n:\nChange-Delay-Time-interval\nYou will be prompted to enter the delay time, in seconds, between display\nupdates.\nFractional seconds are honored, but a negative number is not\nallowed. Entering 0 causes (nearly) continuous updates, with an\nunsatisfactory display as the system and tty driver try to keep up with\ntop's demands. The delay value is inversely proportional to system\nloading, so set it with care.\nIf at any time you wish to know the current delay time, simply\nask for help and view the system summary on the second line.\nE\n:\nEnforce-Summary-Memory-Scale\nin Summary Area\nWith this command you can cycle through the available summary area memory\nscaling which ranges from KiB (kibibytes or 1,024 bytes) through EiB\n(exbibytes or 1,152,921,504,606,846,976 bytes).\nIf you see a `+' between a displayed number and the following\nlabel, it means that top was forced to truncate some portion of that\nnumber. By raising the scaling factor, such truncation can be\navoided.\ne\n:\nEnforce-Task-Memory-Scale\nin Task Area\nWith this command you can cycle through the available task area memory\nscaling which ranges from KiB (kibibytes or 1,024 bytes) through PiB\n(pebibytes or 1,125,899,906,842,624 bytes).\nWhile top will try to honor the selected target range,\nadditional scaling might still be necessary in order to accommodate\ncurrent values. If you wish to see a more homogeneous result in the\nmemory columns, raising the scaling range will usually accomplish that\ngoal. Raising it too high, however, is likely to produce an all zero\nresult which cannot be suppressed with the `0' interactive command.\ng\n:\nChoose-Another-Window/Field-Group\nYou will be prompted to enter a number between 1 and 4 designating the\nfield group which should be made the `current' window. You will soon grow\ncomfortable with these 4 windows, especially after experimenting with\nalternate-display mode.\nH\n:\nThreads-mode\ntoggle\nWhen this toggle is\nOn\n, individual threads will be displayed for\nall processes in all visible task windows. Otherwise, top displays a\nsummation of all threads in each process.\nI\n:\nIrix/Solaris-Mode\ntoggle\nWhen operating in Solaris mode (`I' toggled\nOff\n), a task's cpu\nusage will be divided by the total number of CPUs. After issuing this\ncommand, you'll be told the new state of this toggle.\n*\nk\n:\nKill-a-task\nYou will be prompted for a PID and then the signal to send.\nEntering no PID or a negative number will be interpreted as\nthe default shown in the prompt (the first task displayed). A PID value\nof zero means the top program itself.\nThe default signal, as reflected in the prompt, is SIGTERM.\nHowever, you can send any signal, via number or name.\nIf you wish to abort the kill process, do one of the following\ndepending on your progress:\n1) at the pid prompt, type an invalid number\n2) at the signal prompt, type 0 (or any invalid signal)\n3) at any prompt, type <Esc>\nq\n:\nQuit\n*\nr\n:\nRenice-a-Task\nYou will be prompted for a PID and then the value to nice it to.\nEntering no PID or a negative number will be interpreted as\nthe default shown in the prompt (the first task displayed). A PID value\nof zero means the top program itself.\nA positive nice value will cause a process to lose priority.\nConversely, a negative nice value will cause a process to be viewed more\nfavorably by the kernel. As a general rule, ordinary users can only\nincrease the nice value and are prevented from lowering it.\nIf you wish to abort the renice process, do one of the\nfollowing depending on your progress:\n1) at the pid prompt, type an invalid number\n2) at the nice prompt, type <Enter> with no input\n3) at any prompt, type <Esc>\nW\n:\nWrite-the-Configuration-File\nThis will save all of your options and toggles plus the current display\nmode and delay time. By issuing this command just before quitting top, you\nwill be able restart later in exactly that same state.\nX\n:\nExtra-Fixed-Width\nSome fields are fixed width and not scalable. As such, they are subject to\ntruncation which would be indicated by a `+' in the last position.\nThis interactive command can be used to alter the widths of\nthe following fields:\nfield  default    field  default    field   default\nGID       5       GROUP     8       WCHAN      10\nLOGID     5       LXC       8       nsCGROUP   10\nRUID      5       RUSER     8       nsIPC      10\nSUID      5       SUSER     8       nsMNT      10\nUID       5       TTY       8       nsNET      10\nUSER      8       nsPID      10\nnsTIME     10\nnsUSER     10\nnsUTS      10\nYou will be prompted for the amount to be added to the default\nwidths shown above. Entering zero forces a return to those defaults.\nIf you enter a negative number, top will automatically\nincrease the column size as needed until there is no more truncated\ndata.\nNote\n: Whether explicitly or automatically increased,\nthe widths for these fields are never decreased by top. To narrow them\nyou must specify a smaller number or restore the defaults.\nY\n:\nInspect-Other-Output\nAfter issuing the `Y' interactive command, you will be prompted for a\ntarget PID. Typing a value or accepting the default results in a separate\nscreen. That screen can be used to view a variety of files or piped\ncommand output while the normal top iterative display is paused.\nNote\n: This interactive command is only fully realized\nwhen supporting entries have been manually added to the end of the top\nconfiguration file. For details on creating those entries, see topic 6b.\nADDING INSPECT Entries.\nMost of the keys used to navigate the Inspect feature are\nreflected in its header prologue. There are, however, additional keys\navailable once you have selected a particular file or command. They are\nfamiliar to anyone who has used the pager `less' and are summarized here\nfor future reference.\nkey      function\n=        alternate status-line, file or pipeline\n/        find, equivalent to `L' locate\nn        find next, equivalent to `&' locate next\n<Space>  scroll down, equivalent to <PgDn>\nb        scroll up, equivalent to <PgUp>\ng        first line, equivalent to <Home>\nG        last line, equivalent to <End>\nZ\n:\nChange-Color-Mapping\nThis key will take you to a separate screen where you can change the\ncolors for the `current' window, or for all windows. For details regarding\nthis interactive command see topic 4d. COLOR Mapping.\n^G\n:\nDisplay-Control-Groups\n(Ctrl key + `g')\n^K\n:\nDisplay-Cmdline\n(Ctrl key +\n`k')\n^N\n:\nDisplay-Environment\n(Ctrl\nkey + `n')\n^P\n:\nDisplay-Namesspaces\n(Ctrl\nkey + `p')\n^U\n:\nDisplay-Supplementary-Groups\n(Ctrl key + `u')\nApplied to the first process displayed, these commands\nwill show that task's full (potentially wrapped) information. Such data will\nbe displayed in a separate window at the bottom of the screen while normal top\nmonitoring continues.\nKeying the\nsame\n`Ctrl' command a second time removes that\nseparate window as does the `=' command. Keying a different `Ctrl'\ncombination, while one is already active, immediately transitions to the new\ninformation.\nNotable among these provisions is the Ctrl+N (environment)\ncommand. Its output can be extensive and not easily read when line wrapped.\nA more readable version can be achieved with an `Inspect' entry in the\nrcfile like the following.\npipe ^I Environment ^I cat /proc/%d/environ | tr '\\0' '\\n'\nSee the `Y' interactive command above and topic 6b. ADDING INSPECT\nEntries for additional information.\nAs an alternative to `Inspect', and available to all of these\n`Ctrl' commands, the tab key can be used to highlight individual elements in\nthe bottom window.\n^L\n:\nLogged-Messages\n(Ctrl\nkey + `l')\nThe 10 most recent messages are displayed in a separate window at the\nbottom of the screen while normal top monitoring continues. Keying `^L' a\nsecond time removes that window as does the `=' command. Use the tab key\nto highlight individual messages.\n*\n^R\n:\nRenice-an-Autogroup\n(Ctrl key +\n`r')\nYou will be prompted for a PID and then the value for its autogroup AGNI.\nEntering no PID will be interpreted as the default shown in\nthe prompt (the first task displayed).\nA positive AGNI value will cause processes in that autogroup\nto lose priority. Conversely, a negative value causes them to be viewed\nmore favorably by the kernel. Ordinary users are not allowed to set\nnegative AGNI values.\nIf you wish to abort the renice process type <Esc>.\n*\nThe commands shown with an asterisk (`*') are not available in Secure\nmode, nor will they be shown on the level-1 help screen.\n4b. SUMMARY AREA Commands\n¶\nThe summary area interactive commands are\nalways available\nin both full-screen mode and alternate-display mode. They affect the\nbeginning lines of your display and will determine the position of messages\nand prompts.\nThese commands always impact just the `current' window/field\ngroup. See topic 5. ALTERNATE-DISPLAY Provisions and the `g' interactive\ncommand for insight into `current' windows and field groups.\nC\n:\nShow-scroll-coordinates\ntoggle\nToggle an informational message which is displayed whenever the message\nline is not otherwise being used. For additional information see topic 5c.\nSCROLLING a Window.\nl\n:\nLoad-Average/Uptime\ntoggle\nThis is also the line containing the program name (possibly an alias) when\noperating in full-screen mode or the `current' window name when operating\nin alternate-display mode.\nt\n:\nTask/Cpu-States\ntoggle\nThis command affects from 2 to many summary area lines, depending on the\nstate of the `1', `2' or `3' command toggles and whether or not top is\nrunning under true SMP.\nThis portion of the summary area is also influenced by the `H'\ninteractive command toggle, as reflected in the total label which shows\neither Tasks or Threads.\nThis command serves as a 4-way toggle, cycling through these\nmodes:\n1. detailed percentages by category\n2. abbreviated user/system and total % + bar graph\n3. abbreviated user/system and total % + block graph\n4. turn off task and cpu states display\nWhen operating in either of the graphic modes, the display\nbecomes much more meaningful when individual CPUs or NUMA nodes are also\ndisplayed. See the the `1', `2' and `3' commands below for additional\ninformation.\nm\n:\nMemory/Swap-Usage\ntoggle\nThis command affects the two summary area lines dealing with physical and\nvirtual memory.\nThis command serves as a 4-way toggle, cycling through these\nmodes:\n1. detailed percentages by memory type\n2. abbreviated % used/total available + bar graph\n3. abbreviated % used/total available + block graph\n4. turn off memory display\n1\n:\nSingle/Separate-Cpu-States\ntoggle\nThis command affects how the `t' command's Cpu States portion is shown.\nAlthough this toggle exists primarily to serve massively-parallel SMP\nmachines, it is not restricted to solely SMP environments.\nWhen you see `%Cpu(s):' in the summary area, the `1' toggle is\nOn\nand all cpu information is gathered in a single line.\nOtherwise, each cpu is displayed separately as: `%Cpu0, %Cpu1, ...' up\nto available screen height.\n2\n:\nNUMA-Nodes/Cpu-Summary\ntoggle\nThis command toggles between the `1' command cpu summary display (only) or\na summary display plus the cpu usage statistics for each NUMA Node. It is\nonly available if a system has the requisite NUMA support.\n3\n:\nExpand-NUMA-Node\nYou will be invited to enter a number representing a NUMA Node.\nThereafter, a node summary plus the statistics for each cpu in that node\nwill be shown until the `1', `2' or `4' command toggle is pressed. This\ninteractive command is only available if a system has the requisite NUMA\nsupport.\n4\n:\nDisplay-Multiple-Elements-Adjacent\ntoggle\nThis command toggle turns the `1' toggle\nOff\nand shows multiple CPU\nand Memory results on each line. Each successive `4' key adds another CPU\nuntil again reverting to separate lines for CPU and Memory results.\nA maximum of 8 CPUs per line can be displayed in this manner.\nHowever, data truncation may occur before reaching the maximum. That is\ndefinitely true when displaying detailed statistics via the `t' command\ntoggle since such data cannot be scaled like the graphic\nrepresentations.\nIf one wished to quickly exit adjacent mode without cycling\nall the way to 8, simply use the `1' command toggle.\n5\n:\nDisplay-P-Cores-and-E-Cores\ntoggle\nThis command toggle is only active when the `t' toggle is\nOn\nand\nthe `1', `2', `3' and `!' toggles are\nOff\n, thus showing individual\nCPU results. It assumes a platform has multiple cores of two distinct\ntypes, either multi-threaded (P-Core) or single-threaded (E-Core).\nWhile normally each cpu is displayed as `%Cpu0, %Cpu1, ...',\nthis toggle can be used to identify and/or filter those cpus by their\ncore type, either P-Core (performance) or E-Core (efficient).\nThe 1st time `5' is struck, each CPU is displayed as\n`%Cp\nP\n' or `%Cp\nE\n' representing the two core types. The 2nd\ntime, only P-Cores (%Cp\nP\n) will be shown. The 3rd time, only\nE-Cores (%Cp\nE\n) are displayed. When this command toggle is struck\nfor the 4th time, the CPU display returns to the normal `%Cpu'\nconvention.\nIf separate\nperformance\nand\nefficient\ncategories\nare not present, this command toggle will have no effect.\n!\n:\nCombine-Cpus-Mode\ntoggle\nThis command toggle is intended for massively parallel SMP environments\nwhere, even with the `4' command toggle, not all processors can be\ndisplayed. With each press of `!' the number of cpus combined is doubled\nthus reducing the total number of cpu lines displayed.\nFor example, with the first press of `!' two cpus will be\ncombined and displayed as `0-1, 2-3, ...' instead of the normal `%Cpu0,\n%Cpu1, %Cpu2, %Cpu3, ...'. With a second `!' command toggle four cpus\nare combined and shown as `0-3, 4-7, ...'. Then the third `!' press,\ncombining eight cpus, shows as `0-7, 8-15, ...', etc.\nSuch progression continues until individual cpus are again\ndisplayed and impacts both the `1' and `4' toggles (one or multiple\ncolumns). Use the `=' command to exit\nCombine Cpus\nmode.\nNote\n: If the entire summary area has been toggled\nOff\nfor any window, you would be left with just the\nmessage\nline\n. In that way, you will have maximized available task rows but\n(temporarily) sacrificed the program name in full-screen mode or the\n`current' window name when in alternate-display mode.\n4c. TASK AREA Commands\n¶\nThe task area interactive commands are\nalways\navailable in\nfull-screen mode.\nThe task area interactive commands are\nnever available\nin\nalternate-display mode\nif\nthe `current' window's task display has\nbeen toggled\nOff\n(see topic 5. ALTERNATE-DISPLAY Provisions).\nAPPEARANCE of task window\nJ\n:\nJustify-Numeric-Columns\ntoggle\nAlternates between right-justified (the default) and left-justified\nnumeric data. If the numeric data completely fills the available column,\nthis command toggle may impact the column header only.\nj\n:\nJustify-Character-Columns\ntoggle\nAlternates between left-justified (the default) and right-justified\ncharacter data. If the character data completely fills the available\ncolumn, this command toggle may impact the column header only.\nThe following commands will also be influenced by the\nstate of the global `B' (bold enable) toggle.\nb\n:\nBold/Reverse\ntoggle\nThis command will impact how the `x' and `y' toggles are displayed. It may\nalso impact the summary area when a bar graph has been selected for cpu\nstates or memory usage via the `t' or `m' toggles.\nx\n:\nColumn-Highlight\ntoggle\nChanges highlighting for the current sort field. If you forget which field\nis being sorted this command can serve as a quick visual reminder,\nproviding the sort field is being displayed. The sort field might\nnot\nbe visible because:\n1) there is insufficient\nScreen Width\n2) the `f' interactive command turned it\nOff\ny\n:\nRow-Highlight\ntoggle\nChanges highlighting for \"running\" tasks. For additional insight\ninto this task state, see topic 3a. DESCRIPTIONS of Fields, the `S' field\n(Process Status).\nUse of this provision provides important insight into your\nsystem's health. The only costs will be a few additional tty escape\nsequences.\nz\n:\nColor/Monochrome\ntoggle\nSwitches the `current' window between your last used color scheme and the\nolder form of black-on-white or white-on-black. This command will alter\nboth\nthe summary area and task area but does not affect the state of\nthe `x', `y' or `b' toggles.\nCONTENT of task window\nc\n:\nCommand-Line/Program-Name\ntoggle\nThis command will be honored whether or not the COMMAND column is\ncurrently visible. Later, should that field come into view, the change you\napplied will be seen.\nF\n:\nMaintain-Parent-Focus\ntoggle\nWhen in forest view mode, this key serves as a toggle to retain focus on a\ntarget task, presumably one with forked children. If forest view mode is\nOff\nthis key has no effect.\nThe toggle is applied to the first (topmost) process in the\n`current' window. Once established, that task is always displayed as the\nfirst (topmost) process along with its forked children. All other\nprocesses will be suppressed.\nNote\n: keys like `i' (idle tasks), `n' (max tasks), `v'\n(hide children) and User/Other filtering remain accessible and can\nimpact what is displayed.\nf\n:\nFields-Management\nThis key displays a separate screen where you can change which fields are\ndisplayed, their order and also designate the sort field. For additional\ninformation on this interactive command see topic 3b. MANAGING Fields.\nO\n|\no\n:\nOther-Filtering\nYou will be prompted for the selection criteria which then determines\nwhich tasks will be shown in the `current' window. Your criteria can be\nmade case sensitive or case can be ignored. And you determine if top\nshould include or exclude matching tasks.\nSee topic 5e. FILTERING in a window for details on these and\nadditional related interactive commands.\nS\n:\nCumulative-Time-Mode\ntoggle\nWhen Cumulative mode is\nOn\n, each process is listed with the cpu\ntime that it and its dead children have used.\nWhen\nOff\n, programs that fork into many separate tasks\nwill appear less demanding. For programs like `init' or a shell this is\nappropriate but for others, like compilers, perhaps not. Experiment with\ntwo task windows sharing the same sort field but with different `S'\nstates and see which representation you prefer.\nAfter issuing this command, you'll be informed of the new\nstate of this toggle. If you wish to know in advance whether or not\nCumulative mode is in effect, simply ask for help and view the window\nsummary on the second line.\nU\n|\nu\n:\nShow-Specific-User-Only\nYou will be prompted for the\nuid\nor\nname\nof the user to\ndisplay. The -u option matches on\neffective\nuser whereas the -U\noption matches on\nany\nuser (real, effective, saved, or filesystem).\nThereafter, in that task window only matching users will be\nshown, or possibly no processes will be shown. Prepending an exclamation\npoint (`!') to the user id or name instructs top to display only\nprocesses with users not matching the one provided.\nDifferent task windows can be used to filter different users.\nLater, if you wish to monitor all users again in the `current' window,\nre-issue this command but just press <Enter> at the prompt.\nV\n:\nForest-View-Mode\ntoggle\nIn this mode, processes are reordered according to their parents and the\nlayout of the COMMAND column resembles that of a tree. In forest view mode\nit is still possible to toggle between program name and command line (see\nthe `c' interactive command) or between processes and threads (see the `H'\ninteractive command).\nNote\n: Typing any key affecting the sort order will exit\nforest view mode in the `current' window. See topic 4c. TASK AREA\nCommands, SORTING for information on those keys.\nv\n:\nHide/Show-Children\ntoggle\nWhen in forest view mode, this key serves as a toggle to collapse or\nexpand the children of a parent.\nThe toggle is applied against the first (topmost) process in\nthe `current' window. See topic 5c. SCROLLING a Window for additional\ninformation regarding vertical scrolling.\nIf the target process has not forked any children, this key\nhas no effect. It also has no effect when not in forest view mode.\n^E\n:\nScale-CPU-Time-fields\n(Ctrl key + `e')\nThe `time' fields are normally displayed with the greatest precision their\nwidths permit. This toggle reduces that precision until it wraps. It also\nillustrates the scaling those fields\nmight\nexperience\nautomatically, which usually depends on how long the system runs.\nFor example, if `MMM:SS.hh' is shown, each ^E keystroke would\nchange it to: `MM:SS', `Hours,MM', `Days+Hours' and finally\n`Weeks+Days'.\nNot all time fields are subject to the full range of such\nscaling.\nSIZE of task window\ni\n:\nIdle-Process\ntoggle\nDisplays all tasks or just active tasks. When this toggle is\nOff\n,\ntasks that have not used any CPU since the last update will not be\ndisplayed. However, due to the granularity of the %CPU and TIME+ fields,\nsome processes may still be displayed that\nappear\nto have used\nno\nCPU.\nIf this command is applied to the last task display when in\nalternate-display mode, then it will not affect the window's size, as\nall prior task displays will have already been painted.\nn\n|\n#\n:\nSet-Maximum-Tasks\nYou will be prompted to enter the number of tasks to display. The lessor\nof your number and available screen rows will be used.\nWhen used in alternate-display mode, this is the command that\ngives you precise control over the size of each currently visible task\ndisplay, except for the very last. It will not affect the last window's\nsize, as all prior task displays will have already been painted.\nNote\n: If you wish to increase the size of the last\nvisible task display when in alternate-display mode, simply decrease the\nsize of the task display(s) above it.\nSORTING of task window\nFor compatibility, this top supports most of the former\ntop sort keys. Since this is primarily a service to former top users, these\ncommands do not appear on any help screen.\ncommand   sorted-field                  supported\nA         start time (non-display)\nNo\nM         %MEM                          Yes\nN         PID                           Yes\nP         %CPU                          Yes\nT         TIME+                         Yes\nBefore using any of the following sort provisions, top suggests\nthat you temporarily turn on column highlighting using the `x' interactive\ncommand. That will help ensure that the actual sort environment matches your\nintent.\nThe following interactive commands will\nonly\nbe honored\nwhen the current sort field is\nvisible\n. The sort field might\nnot\nbe visible because:\n1) there is insufficient\nScreen Width\n2) the `f' interactive command turned it\nOff\n<\n:\nMove-Sort-Field-Left\nMoves the sort column to the left unless the current sort field is the\nfirst field being displayed.\n>\n:\nMove-Sort-Field-Right\nMoves the sort column to the right unless the current sort field is the\nlast field being displayed.\nThe following interactive commands will\nalways\nbe honored\nwhether or not the current sort field is visible.\nf\n:\nFields-Management\nThis key displays a separate screen where you can change which field is\nused as the sort column, among other functions. This can be a convenient\nway to simply verify the current sort field, when running top with column\nhighlighting turned\nOff\n.\nR\n:\nReverse/Normal-Sort-Field\ntoggle\nUsing this interactive command you can alternate between high-to-low and\nlow-to-high sorts.\n4d. COLOR Mapping\n¶\nWhen you issue the `Z' interactive command, you will be presented\nwith a separate screen. That screen can be used to change the colors in just\nthe `current' window or in all four windows before returning to the top\ndisplay.\nThe following interactive commands are available.\n4\nupper case letters to select a\ntarget\n8\nnumbers to select a\ncolor\nnormal toggles available\nB         :bold disable/enable\nb         :running tasks \"bold\"/reverse\nz         :color/mono\nother commands available\na/w       :apply, then go to next/prior\n<Enter>   :apply and exit\nq         :abandon current changes and exit\nIf you use `a' or `w' to cycle the targeted window, you will have\napplied the color scheme that was displayed when you left that window. You\ncan, of course, easily return to any window and reapply different colors or\nturn colors\nOff\ncompletely with the `z' toggle.\nThe Color Mapping screen can also be used to change the `current'\nwindow/field group in either full-screen mode or alternate-display mode.\nWhatever was targeted when `q' or <Enter> was pressed will be made\ncurrent as you return to the top display.\n5. ALTERNATE-DISPLAY Provisions\n¶\n5a. WINDOWS Overview\n¶\nField\nGroups/Windows:\nIn full-screen mode there is a single window represented by the entire\nscreen. That single window can still be changed to display 1 of 4\ndifferent\nfield\ngroups\n(see the `g' interactive command,\nrepeated below). Each of the 4 field groups has a unique separately\nconfigurable\nsummary area\nand its own configurable\ntask\narea\n.\nIn alternate-display mode, those 4 underlying field groups can\nnow be made visible simultaneously, or can be turned\nOff\nindividually at your command.\nThe summary area will always exist, even if it's only the\nmessage line. At any given time only\none\nsummary area can be\ndisplayed. However, depending on your commands, there could be from\nzero\nto\nfour\nseparate task displays currently showing on the\nscreen.\nCurrent\nWindow:\nThe `current' window is the window associated with the summary area and\nthe window to which task related commands are always directed. Since in\nalternate-display mode you can toggle the task display\nOff\n, some\ncommands might be restricted for the `current' window.\nA further complication arises when you have toggled the first\nsummary area line\nOff\n. With the loss of the window name (the `l'\ntoggled line), you'll not easily know what window is the `current'\nwindow.\n5b. COMMANDS for Windows\n¶\n-\n|\n_\n:\nShow/Hide-Window(s)\ntoggles\nThe `-' key turns the `current' window's task display\nOn\nand\nOff\n. When\nOn\n, that task area will show a minimum of the\ncolumns header you've established with the `f' interactive command. It\nwill also reflect any other task area options/toggles you've applied\nyielding zero or more tasks.\nThe `_' key does the same for all task displays. In other\nwords, it switches between the currently visible task display(s) and any\ntask display(s) you had toggled\nOff\n. If all 4 task displays are\ncurrently visible, this interactive command will leave the summary area\nas the only display element.\n*\n=\n|\n+\n:\nEqualize/Reset-Window(s)\nThe `=' key forces the `current' window's task display to be visible. It\nalso reverses any active `i' (idle tasks), `n' (max tasks), `u/U' (user\nfilter), `o/O' (other filter), `v' (hide children), `F' focused, `L'\n(locate) and `!' (combine cpus) commands. Also, if the window had been\nscrolled, it will be reset with this command. See topic 5c. SCROLLING a\nWindow for additional information regarding vertical and horizontal\nscrolling.\nThe `+' key does the same for all windows. The four task\ndisplays will reappear, evenly balanced, while retaining any\ncustomizations previously applied beyond those noted for the `=' command\ntoggle.\n*\nA\n:\nAlternate-Display-Mode\ntoggle\nThis command will switch between full-screen mode and alternate-display\nmode.\nThe first time you issue this command, all four task displays\nwill be shown. Thereafter when you switch modes, you will see only the\ntask display(s) you've chosen to make visible.\n*\na\n|\nw\n:\nNext-Window-Forward/Backward\nThis will change the `current' window, which in turn changes the window to\nwhich commands are directed. These keys act in a circular fashion so you\ncan reach any desired window using either key.\nAssuming the window name is visible (you have not toggled `l'\nOff\n), whenever the `current' window name loses its\nemphasis/color, that's a reminder the task display is\nOff\nand\nmany commands will be restricted.\nG\n:\nChange-Window/Field-Group-Name\nYou will be prompted for a new name to be applied to the `current' window.\nIt does not require that the window name be visible (the `l' toggle to be\nOn\n).\n*\nThe interactive commands shown with an asterisk (`*') have use beyond\nalternate-display mode.\n=, A, g    are always available\na, w       act the same with color mapping\nand fields management\n*\ng\n:\nChoose-Another-Window/Field-Group\nYou will be prompted to enter a number between 1 and 4 designating the\nfield group which should be made the `current' window.\nIn full-screen mode, this command is necessary to alter the\n`current' window. In alternate-display mode, it is simply a less\nconvenient alternative to the `a' and `w' commands.\n5c. SCROLLING a Window\n¶\nTypically a task window is a partial view into a system's total\ntasks/threads which shows only some of the available fields/columns. With\nthese scrolling keys, you can move that view vertically or horizontally to\nreveal any desired task or column.\nUp\n,\nPgUp\n:\nScroll-Tasks\nMove the view up toward the first task row, until the first task is\ndisplayed at the top of the `current' window. The\nUp\narrow key\nmoves a single line while\nPgUp\nscrolls the entire window.\nDown\n,\nPgDn\n:\nScroll-Tasks\nMove the view down toward the last task row, until the last task is the\nonly task displayed at the top of the `current' window. The\nDown\narrow key moves a single line while\nPgDn\nscrolls the entire window.\nLeft\n,\nRight\n:\nScroll-Columns\nMove the view of displayable fields horizontally one column at a time.\nNote\n: As a reminder, some fields/columns are not\nfixed-width but allocated all remaining screen width when visible. When\nscrolling right or left, that feature may produce some unexpected\nresults initially.\nAdditionally, there are special provisions for any variable\nwidth field when positioned as the last displayed field. Once that field\nis reached via the right arrow key, and is thus the only column shown,\nyou can continue scrolling horizontally within such a field. See the `C'\ninteractive command below for additional information.\nHome\n:\nJump-to-Home-Position\nReposition the display to the un-scrolled coordinates.\nEnd\n:\nJump-to-End-Position\nReposition the display so that the rightmost column reflects the last\ndisplayable field and the bottom task row represents the last task.\nNote\n: From this position it is still possible to\nscroll\ndown\nand\nright\nusing the arrow keys. This is true\nuntil a single column and a single task is left as the only display\nelement.\nC\n:\nShow-scroll-coordinates\ntoggle\nToggle an informational message which is displayed whenever the message\nline is not otherwise being used. That message will take one of two forms\ndepending on whether or not a variable width column has also been\nscrolled.\nscroll coordinates: y = n/n (tasks), x = n/n (fields)\nscroll coordinates: y = n/n (tasks), x = n/n (fields)\n+ nn\nThe coordinates shown as\nn\n/\nn\nare relative to the\nupper left corner of the `current' window. The additional\n`\n+ nn\n' represents the displacement into a variable width\ncolumn when it has been scrolled horizontally. Such displacement occurs\nin normal 8 character tab stop amounts via the right and left arrow\nkeys.\ny = n/n (tasks)\nThe first\nn\nrepresents the topmost visible task and is controlled\nby scrolling keys. The second\nn\nis updated automatically to reflect\ntotal tasks.\nx = n/n (fields)\nThe first\nn\nrepresents the leftmost displayed column and is\ncontrolled by scrolling keys. The second\nn\nis the total number of\ndisplayable fields and is established with the `\nf\n' interactive\ncommand.\nThe above interactive commands are\nalways\navailable in\nfull-screen mode but\nnever\navailable in alternate-display mode if the\n`current' window's task display has been toggled\nOff\n.\nNote\n: When any form of filtering is active, you can expect\nsome slight aberrations when scrolling since not all tasks will be visible.\nThis is particularly apparent when using the Up/Down arrow keys.\n5d. SEARCHING in a Window\n¶\nYou can use these interactive commands to locate a task row\ncontaining a particular value.\nL\n:\nLocate-a-string\nYou will be prompted for the case-sensitive string to locate starting from\nthe current window coordinates. There are no restrictions on search string\ncontent.\nSearches are not limited to values from a single field or\ncolumn. All of the values displayed in a task row are allowed in a\nsearch string. You may include spaces, numbers, symbols and even forest\nview artwork.\nKeying <Enter> with no input will effectively disable\nthe `&' key until a new search string is entered.\n&\n:\nLocate-next\nAssuming a search string has been established, top will attempt to locate\nthe next occurrence.\nWhen a match is found, the current window is repositioned\nvertically so the task row containing that string is first. The scroll\ncoordinates message can provide confirmation of such vertical repositioning\n(see the `C' interactive command). Horizontal scrolling, however, is never\naltered via searching.\nThe availability of a matching string will be influenced by the\nfollowing factors.\na. Which fields are displayable\nfrom the total available,\nsee topic 3b. MANAGING Fields.\nb. Scrolling a window vertically\nand/or horizontally,\nsee topic 5c. SCROLLING a Window.\nc. The state of the\ncommand/command-line toggle,\nsee the `c' interactive command.\nd. The stability of the chosen\nsort column,\nfor example PID is good but %CPU bad.\nIf a search fails, restoring the `current' window home\n(unscrolled) position, scrolling horizontally, displaying command-lines or\nchoosing a more stable sort field could yet produce a successful `&'\nsearch.\nThe above interactive commands are\nalways\navailable in\nfull-screen mode but\nnever\navailable in alternate-display mode if the\n`current' window's task display has been toggled\nOff\n.\n5e. FILTERING in a Window\n¶\nYou can use this `Other Filter' feature to establish selection\ncriteria which will then determine which tasks are shown in the `current'\nwindow. Such filters can be made persistent if preserved in the rcfile via\nthe `W' interactive command.\nEstablishing a filter requires: 1) a field name; 2) an operator;\nand 3) a selection value, as a minimum. This is the most complex of top's\nuser input requirements so, when you make a mistake, command recall will be\nyour friend. Remember the Up/Down arrow keys or their aliases when prompted\nfor input.\nFilter Basics\n1. field names are case sensitive and spelled as in the header\n2. selection values need not comprise the full displayed field\n3. a selection is either case insensitive or sensitive to case\n4. the default is inclusion, prepending `!' denotes exclusions\n5. multiple selection criteria can be applied to a task window\n6. inclusion and exclusion criteria can be used simultaneously\n7. the 1 equality and 2 relational filters can be freely mixed\n8. separate unique filters are maintained for each task window\nIf a field is not turned on or is not currently in view, then your\nselection criteria will not affect the display. Later, should a filtered\nfield become visible, the selection criteria will then be applied.\nKeyboard Summary\nO\n:\nOther-Filter\n(upper\ncase)\nYou will be prompted to establish a\ncase sensitive\nfilter.\no\n:\nOther-Filter\n(lower\ncase)\nYou will be prompted to establish a filter that\nignores case\nwhen\nmatching.\n^O\n:\nShow-Active-Filters\n(Ctrl key +\n`o')\nThis can serve as a reminder of which filters are active in the `current'\nwindow. A summary will be shown on the message line until you press the\n<Enter> key.\n=\n:\nReset-Filtering\nin current\nwindow\nThis clears all of your selection criteria in the `current' window. It\nalso has additional impact so please see topic 4a. GLOBAL Commands.\n+\n:\nReset-Filtering\nin all\nwindows\nThis clears the selection criteria in all windows, assuming you are in\nalternate-display mode. As with the `=' interactive command, it too has\nadditional consequences so you might wish to see topic 5b. COMMANDS for\nWindows.\nInput Requirements\nWhen prompted for selection criteria, the data you provide must\ntake one of two forms. There are 3 required pieces of information, with a\n4th as optional. These examples use spaces for clarity but your input\ngenerally would not.\n#1\n#2\n#3              ( required )\nField-Name   ?   include-if-value\n!\nField-Name   ?\nexclude\n-if-value\n#4                                  ( optional )\nItems #1, #3 and #4 should be self-explanatory. Item\n#2\nrepresents both a required\ndelimiter\nand the\noperator\nwhich\nmust be one of either equality (`=') or relation (`<' or `>').\nThe `=' equality operator requires only a partial match and that\ncan reduce your `if-value' input requirements. The `>' or `<'\nrelational operators always employ string comparisons, even with numeric\nfields. They are designed to work with a field's default\njustification\nand with homogeneous data. When some field's numeric\namounts have been subjected to\nscaling\nwhile others have not, that\ndata is no longer homogeneous.\nIf you establish a relational filter and you\nhave\nchanged\nthe default Numeric or Character\njustification\n, that filter is likely\nto fail. When a relational filter is applied to a memory field and you\nhave not\nchanged the\nscaling\n, it may produce misleading\nresults. This happens, for example, because `100.0m' (MiB) would appear\ngreater than `1.000g' (GiB) when compared as strings.\nIf your filtered results appear suspect, simply altering\njustification or scaling may yet achieve the desired objective. See the `j',\n`J' and `e' interactive commands for additional information.\nPotential Problems\nThese\nGROUP\nfilters could produce the exact same results or\nthe second one might not display anything at all, just a blank task\nwindow.\nGROUP=root        ( only the same results when )\nGROUP=ROOT        ( invoked via lower case `o' )\nEither of these\nRES\nfilters might yield inconsistent and/or\nmisleading results, depending on the current memory scaling factor. Or both\nfilters could produce the exact same results.\nRES>9999          ( only the same results when )\n!RES<10000        ( memory scaling is at `KiB' )\nThis\nnMin\nfilter illustrates a problem unique to scalable\nfields. This particular field can display a maximum of 4 digits, beyond\nwhich values are automatically scaled to KiB or above. So while amounts\ngreater than 9999 exist, they will appear as 2.6m, 197k, etc.\nnMin>9999         ( always a blank task window )\nPotential Solutions\nThese examples illustrate how Other Filtering can be creatively\napplied to achieve almost any desired result. Single quotes are sometimes\nshown to delimit the spaces which are part of a filter or to represent a\nrequest for status (^O) accurately. But if you used them with if-values in\nreal life, no matches would be found.\nAssuming field\nnTH\nis displayed, the first filter will\nresult in only multi-threaded processes being shown. It also reminds us that\na trailing space is part of every displayed field. The second filter\nachieves the exact same results with less typing.\n!nTH=` 1 '                ( ` for clarity only )\nnTH>1                     ( same with less i/p )\nWith Forest View mode active and the\nCOMMAND\ncolumn in\nview, this filter effectively collapses child processes so that just 3\nlevels are shown.\n!COMMAND=`       `- '     ( ` for clarity only )\nThe final two filters appear as in response to the status request\nkey (^O). In reality, each filter would have required separate input. The\nPR\nexample shows the two concurrent filters necessary to display\ntasks with priorities of 20 or more, since some might be negative. Then by\nexploiting trailing spaces, the\nnMin\nseries of filters could achieve\nthe failed `9999' objective discussed above.\n`PR>20' + `!PR=-'         ( 2 for right result )\n`!nMin=0 ' + `!nMin=1 ' + `!nMin=2 ' + `!nMin=3 ' ...\n6. FILES\n¶\n6a. PERSONAL Configuration File\n¶\nThis file is created or updated via the `W' interactive\ncommand.\nThe legacy version is written as `$HOME/.your-name-4-top' + `rc'\nwith a leading period.\nA newly created configuration file is written as\nprocps/your-name-4-top' + `rc' without a leading period. The procps\ndirectory will be subordinate to either $XDG_CONFIG_HOME when set as an\nabsolute path or the $HOME/.config directory.\nWhile not intended to be edited manually, here is the general\nlayout:\nglobal   # line  1: the program name/alias notation\n\"      # line  2: id,altscr,irixps,delay,curwin\nper ea   # line  a: winname,fieldscur\nwindow   # line  b: winflags,sortindx,maxtasks,etc\n\"      # line  c: summclr,msgsclr,headclr,taskclr\nglobal   # line 15: additional miscellaneous settings\n\"      # any remaining lines are devoted to optional\n\"      # active `other filters' discussed in section 5e above\n\"      # plus `inspect' entries discussed in section 6b below\nIf a valid absolute path to the rcfile cannot be established,\ncustomizations made to a running top will be impossible to preserve.\n6b. ADDING INSPECT Entries\n¶\nTo exploit the `Y' interactive command, you must add entries at\nthe\nend\nof the top personal configuration file. Such entries simply\nreflect a file to be read or command/pipeline to be executed whose results\nwill then be displayed in a separate scrollable, searchable window.\nIf you don't know the location or name of your top rcfile, use the\n`W' interactive command to rewrite it and note those details.\nInspect entries can be added with a redirected echo or by editing\nthe configuration file. Redirecting an echo risks overwriting the rcfile\nshould it replace (>) rather than append (>>) to that file.\nConversely, when using an editor care must be taken not to corrupt existing\nlines, some of which could contain unprintable data or unusual characters\ndepending on the top version under which that configuration file was\nsaved.\nThose Inspect entries beginning with a `#' character are ignored,\nregardless of content. Otherwise they consist of the following 3 elements,\neach of which\nmust\nbe separated by a tab character (thus 2 `\\t'\ntotal):\n.type:  literal `file' or `pipe'\n.name:  selection shown on the Inspect screen\n.fmts:  string representing a path or command\nThe two types of Inspect entries are\nnot\ninterchangeable.\nThose designated `\nfile\n' will be accessed using fopen and must\nreference a single file in the `.fmts' element. Entries specifying\n`\npipe\n' will employ popen, their `.fmts' element could contain many\npipelined commands and, none can be interactive.\nIf the file or pipeline represented in your `.fmts' deals with the\nspecific PID input or accepted when prompted, then the format string must\nalso contain the `\n%d\n' specifier, as these examples illustrate.\n.fmts=  /proc/\n%d\n/numa_maps\n.fmts=  lsof -P -p\n%d\nFor `\npipe\n' type entries only, you may also wish to redirect\nstderr to stdout for a more comprehensive result. Thus the format string\nbecomes:\n.fmts=  pmap -x %d\n2>&1\nHere are examples of both types of Inspect entries as they might\nappear in the rcfile. The first entry will be ignored due to the initial `#'\ncharacter. For clarity, the pseudo tab depictions (^I) are surrounded by an\nextra space but the actual tabs would not be.\n# pipe ^I Sockets ^I lsof -n -P -i 2>&1\npipe ^I Open Files ^I lsof -P -p %d 2>&1\nfile ^I NUMA Info ^I /proc/%d/numa_maps\npipe ^I Log ^I tail -n100 /var/log/syslog | sort -Mr\nExcept for the commented entry above, these next examples show\nwhat could be echoed to achieve similar results, assuming the rcfile name\nwas `.toprc'. However, due to the embedded tab characters, each of these\nlines should be preceded by `\n/bin/echo -e\n', not just a simple an\n`echo', to enable backslash interpretation regardless of which shell you\nuse.\n\"pipe\\tOpen Files\\tlsof -P -p %d 2>&1\" >> ~/.toprc\n\"file\\tNUMA Info\\t/proc/%d/numa_maps\" >> ~/.toprc\n\"pipe\\tLog\\ttail -n200 /var/log/syslog | sort -Mr\" >> ~/.toprc\nIf any inspect entry you create produces output with unprintable\ncharacters they will be displayed in either the ^C notation or hexadecimal\n<FF> form, depending on their value. This applies to tab characters as\nwell, which will show as `^I'. If you want a truer representation, any\nembedded tabs should be expanded. The following example takes what could\nhave been a `file' entry but employs a `pipe' instead so as to expand the\nembedded tabs.\n# next would have contained `\\t' ...\n# file ^I <your_name> ^I /proc/%d/status\n# but this will eliminate embedded `\\t' ...\npipe ^I <your_name> ^I cat /proc/%d/status | expand -\nNote\n: Some programs might rely on\nSIGINT\nto end.\nTherefore, if a `\npipe\n' such as the following is established, one must\nuse Ctrl-C to terminate it in order to review the results. This is the\nsingle occasion where a `^C' will not also terminate top.\npipe ^I Trace ^I /usr/bin/strace -p %d 2>&1\nLastly, while `\npipe\n' type entries have been discussed in\nterms of pipelines and commands, there is nothing to prevent you from\nincluding\nshell scripts\nas well. Perhaps even newly created scripts\ndesigned specifically for the `Y' interactive command.\nFor example, as the number of your Inspect entries grows over\ntime, the `Options:' row will be truncated when screen width is exceeded.\nThat does not affect operation other than to make some selections invisible.\nHowever, if some choices are lost to truncation but you want to see more\noptions, there is an easy solution hinted at below.\nInspection Pause at pid ...\nUse:  left/right then <Enter> ...\nOptions:  help  1  2  3  4  5  6  7  8  9  10  11 ...\nThe entries in the top rcfile would have a number for the `.name'\nelement and the `help' entry would identify a shell script you've written\nexplaining what those numbered selections actually mean. In that way, many\nmore choices can be made visible.\n6c. SYSTEM Configuration File\n¶\nThis configuration file represents defaults for users who have not\nsaved their own configuration file. The format mirrors exactly the personal\nconfiguration file and can also include `inspect' entries as explained\nabove.\nCreating it is a simple process.\n1. Configure top appropriately for your installation and preserve\nthat configuration with the `W' interactive command.\n2. Add and test any desired `inspect' entries.\n3. Copy that configuration file to the\n/etc/\ndirectory as\n`\ntopdefaultrc\n'.\n6d. SYSTEM Restrictions File\n¶\nThe presence of this file will influence which version of the help\nscreen is shown to an ordinary user.\nMore importantly, it will limit what ordinary users are allowed to\ndo when top is running. They will not be able to issue the following\ncommands.\nk        Kill a task\nr        Renice a task\nd or s   Change delay/sleep interval\nThis configuration file is not created by top. Rather, it is\ncreated manually and placed it in the\n/etc/\ndirectory as\n`\ntoprc\n'.\nIt should have exactly two lines, as shown in this example:\ns        # line 1: secure mode switch\n5.0      # line 2: delay interval in seconds\n7. ENVIRONMENT VARIABLE(S)\n¶\nThe value set for the following is unimportant, just its\npresence.\nLIBPROC_HIDE_KERNEL\nThis will prevent display of any kernel threads and exclude such processes\nfrom the summary area Tasks/Threads counts.\n8. STUPID TRICKS Sampler\n¶\nMany of these tricks work best when you give top a scheduling\nboost. So plan on starting him with a nice value of -10, assuming you've got\nthe authority.\n7a. Kernel Magic\n¶\nFor these stupid tricks, top needs full-screen mode.\nThe user interface, through prompts and help, intentionally implies that\nthe delay interval is limited to tenths of a second. However, you're free\nto set any desired delay. If you want to see Linux at his scheduling best,\ntry a delay of .09 seconds or less.\nFor this experiment, under x-windows open an xterm and\nmaximize it. Then do the following:\n. provide a scheduling boost and tiny delay via:\nnice -n -10 top -d.09\n. keep sorted column highlighting\nOff\nso as to\nminimize path length\n. turn\nOn\nreverse row highlighting for emphasis\n. try various sort columns (TIME/MEM work well),\nand normal or reverse sorts to bring the most\nactive processes into view\nWhat you'll see is a very busy Linux doing what he's always\ndone for you, but there was no program available to illustrate this.\nUnder an xterm using `white-on-black' colors, on top's Color Mapping\nscreen set the task color to black and be sure that task highlighting is\nset to bold, not reverse. Then set the delay interval to around .3\nseconds.\nAfter bringing the most active processes into view, what\nyou'll see are the ghostly images of just the currently running\ntasks.\nDelete the existing rcfile, or create a new symlink. Start this new\nversion then type `T' (a secret key, see topic 4c. Task Area Commands,\nSORTING) followed by `W' and `q'. Finally, restart the program with -d0\n(zero delay).\nYour display will be refreshed at three times the rate of the\nformer top, a 300% speed advantage. As top climbs the TIME ladder, be as\npatient as you can while speculating on whether or not top will ever\nreach the top.\n7b. Bouncing Windows\n¶\nFor these stupid tricks, top needs alternate-display mode.\nWith 3 or 4 task displays visible, pick any window other than the last and\nturn idle processes\nOff\nusing the `i' command toggle. Depending on\nwhere you applied `i', sometimes several task displays are bouncing and\nsometimes it's like an accordion, as top tries his best to allocate space.\nSet each window's summary lines differently: one with no memory (`m');\nanother with no states (`t'); maybe one with nothing at all, just the\nmessage line. Then hold down `a' or `w' and watch a variation on bouncing\nwindows  --  hopping windows.\nDisplay all 4 windows and for each, in turn, set idle processes to\nOff\nusing the `i' command toggle. You've just entered the\n\"extreme bounce\" zone.\n7c. The Big Bird Window\n¶\nThis stupid trick also requires alternate-display mode.\n•\nDisplay all 4 windows and make sure that 1:Def is the `current' window.\nThen, keep increasing window size with the `n' interactive command until\nall the other task displays are \"pushed out of the nest\".\nWhen they've all been displaced, toggle between all\nvisible/invisible windows using the `_' command toggle. Then ponder\nthis:\nis top fibbing or telling honestly your imposed truth?\n7d. The Ol' Switcheroo\n¶\nThis stupid trick works best without alternate-display mode, since\njustification is active on a per window basis.\n•\nStart top and make COMMAND the last (rightmost) column displayed. If\nnecessary, use the `c' command toggle to display command lines and ensure\nthat forest view mode is active with the `V' command toggle.\nThen use the up/down arrow keys to position the display so\nthat some truncated command lines are shown (`+' in last position). You\nmay have to resize your xterm to produce truncation.\nLastly, use the `j' command toggle to make the COMMAND column\nright justified.\nNow use the right arrow key to reach the COMMAND column.\nContinuing with the right arrow key, watch closely the direction of\ntravel for the command lines being shown.\nsome lines travel left, while others travel right\neventually all lines will Switcheroo, and move right\n9. BUGS\n¶\nPlease send bug reports to\nprocps@freelists.org\n.\n10. SEE Also\n¶\nfree(1)\n,\nps(1)\n,\nuptime(1)\n,\natop(1)\n,\nslabtop(1)\n,\nvmstat(8)\n,\nw(1)\nAugust 2023\nprocps-ng\nSource file:\ntop.1.en.gz (from\nprocps 2:4.0.4-9\n)\nSource last updated:\n2025-07-30T11:58:40Z\nConverted to HTML:\n2025-08-16T16:04:11Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/procps/top.1.en.html"}}
{"text": "df(1) — coreutils — Debian unstable — Debian Manpages\nMANPAGES\nSkip Quicknav\nIndex\nAbout Manpages\nFAQ\nService Information\n/\nunstable\n/\ncoreutils\n/ df(1)\nlinks\nlanguage-indep link\npackage tracker\nraw man page\ntable of contents\nNAME\nSYNOPSIS\nDESCRIPTION\nOPTIONS\nAUTHOR\nREPORTING BUGS\nSEE ALSO\nother versions\ntrixie\n9.7-3\ntesting\n9.7-3\nunstable\n9.7-3\nother languages\nčeština\ndansk\nDeutsch\nEnglish\nespañol\nfrançais\nmagyar\n日本語\n한국어\nnorsk bokmål\nNederlands\npolski\nportuguês (pt-BR)\nromână\nрусский\nсрпски\nsvenska\nTürkçe\nукраїнська\nTiếng Việt\n中文 (zh-CN)\n繁體中文 (zh-TW)\nScroll to navigation\nDF(1)\nUser Commands\nDF(1)\nNAME\n¶\ndf - report file system space usage\nSYNOPSIS\n¶\ndf\n[\nOPTION\n]... [\nFILE\n]...\nDESCRIPTION\n¶\nThis manual page documents the GNU version of\ndf\n.\ndf\ndisplays the amount of space available on the file system containing each\nfile name argument. If no file name is given, the space available on all\ncurrently mounted file systems is shown. Space is shown in 1K blocks by\ndefault, unless the environment variable POSIXLY_CORRECT is set, in which\ncase 512-byte blocks are used.\nIf an argument is the absolute file name of a device node\ncontaining a mounted file system,\ndf\nshows the space available on\nthat file system rather than on the file system containing the device node.\nThis version of\ndf\ncannot show the space available on unmounted file\nsystems, because on most kinds of systems doing so requires non-portable\nintimate knowledge of file system structures.\nOPTIONS\n¶\nShow information about the file system on which each FILE resides,\nor all file systems by default.\nMandatory arguments to long options are mandatory for short\noptions too.\n-a\n,\n--all\ninclude pseudo, duplicate, inaccessible file systems\n-B\n,\n--block-size\n=\nSIZE\nscale sizes by SIZE before printing them; e.g., '-BM' prints sizes in\nunits of 1,048,576 bytes; see SIZE format below\n-h\n,\n--human-readable\nprint sizes in powers of 1024 (e.g., 1023M)\n-H\n,\n--si\nprint sizes in powers of 1000 (e.g., 1.1G)\n-i\n,\n--inodes\nlist inode information instead of block usage\n-k\nlike\n--block-size\n=\n1K\n-l\n,\n--local\nlimit listing to local file systems\n--no-sync\ndo not invoke sync before getting usage info (default)\n--output\n[=\nFIELD_LIST\n]\nuse the output format defined by FIELD_LIST, or print all fields if\nFIELD_LIST is omitted\n-P\n,\n--portability\nuse the POSIX output format\n--sync\ninvoke sync before getting usage info\n--total\nelide all entries insignificant to available space, and produce a grand\ntotal\n-t\n,\n--type\n=\nTYPE\nlimit listing to file systems of type TYPE\n-T\n,\n--print-type\nprint file system type\n-x\n,\n--exclude-type\n=\nTYPE\nlimit listing to file systems not of type TYPE\n-v\n(ignored)\n--help\ndisplay this help and exit\n--version\noutput version information and exit\nDisplay values are in units of the first available SIZE from\n--block-size\n, and the DF_BLOCK_SIZE, BLOCK_SIZE and BLOCKSIZE\nenvironment variables. Otherwise, units default to 1024 bytes (or 512 if\nPOSIXLY_CORRECT is set).\nThe SIZE argument is an integer and optional unit (example: 10K is\n10*1024). Units are K,M,G,T,P,E,Z,Y,R,Q (powers of 1024) or KB,MB,...\n(powers of 1000). Binary prefixes can be used, too: KiB=K, MiB=M, and so\non.\nFIELD_LIST is a comma-separated list of columns to be included.\nValid field names are: 'source', 'fstype', 'itotal', 'iused', 'iavail',\n'ipcent', 'size', 'used', 'avail', 'pcent', 'file' and 'target' (see info\npage).\nAUTHOR\n¶\nWritten by Torbjorn Granlund, David MacKenzie, and Paul\nEggert.\nREPORTING BUGS\n¶\nGNU coreutils online help:\n<\nhttps://www.gnu.org/software/coreutils/\n>\nReport any translation bugs to\n<\nhttps://translationproject.org/team/\n>\nSEE ALSO\n¶\nFull documentation\n<\nhttps://www.gnu.org/software/coreutils/df\n>\nor available locally via: info '(coreutils) df invocation'\nPackaged by Debian (9.7-3)\nCopyright © 2025 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later\n<\nhttps://gnu.org/licenses/gpl.html\n>.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nJune 2025\nGNU coreutils 9.7\nSource file:\ndf.1.en.gz (from\ncoreutils 9.7-3\n)\nSource last updated:\n2025-06-04T15:14:05Z\nConverted to HTML:\n2025-10-12T15:06:17Z\ndebiman 15b1084, see\ngithub.com/Debian/debiman\n.\nFound a problem? See the\nFAQ\n.", "metadata": {"source_type": "vendor_docs", "trust": "vendor_docs", "os": "linux", "distro": "ubuntu-22.04", "license": "CC BY-SA (assumed; verify per site)", "attribution_url": "https://manpages.debian.org/unstable/coreutils/df.1.en.html"}}
